"use strict";(self.webpackChunkflavorforge=self.webpackChunkflavorforge||[]).push([[179],{58:(ws,Gn,Qe)=>{Qe.d(Gn,{BH:()=>Ht,G6:()=>Yi,L:()=>ut,LL:()=>H,Pz:()=>St,Sg:()=>Or,UG:()=>ee,ZB:()=>Te,ZR:()=>ie,aH:()=>Jt,b$:()=>Dn,eu:()=>q,hl:()=>j,jU:()=>cn,m9:()=>Da,ne:()=>Cs,pd:()=>Hc,r3:()=>wr,ru:()=>en,tV:()=>ne,uI:()=>Ln,vZ:()=>bs,w1:()=>Qi,xO:()=>zc,xb:()=>ti,z$:()=>tt,zd:()=>Oi});const Be=function(D){const T=[];let R=0;for(let K=0;K<D.length;K++){let x=D.charCodeAt(K);x<128?T[R++]=x:x<2048?(T[R++]=x>>6|192,T[R++]=63&x|128):55296==(64512&x)&&K+1<D.length&&56320==(64512&D.charCodeAt(K+1))?(x=65536+((1023&x)<<10)+(1023&D.charCodeAt(++K)),T[R++]=x>>18|240,T[R++]=x>>12&63|128,T[R++]=x>>6&63|128,T[R++]=63&x|128):(T[R++]=x>>12|224,T[R++]=x>>6&63|128,T[R++]=63&x|128)}return T},an={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(D,T){if(!Array.isArray(D))throw Error("encodeByteArray takes an array as a parameter");this.init_();const R=T?this.byteToCharMapWebSafe_:this.byteToCharMap_,K=[];for(let x=0;x<D.length;x+=3){const W=D[x],je=x+1<D.length,nt=je?D[x+1]:0,_t=x+2<D.length,Zt=_t?D[x+2]:0;let Yn=(15&nt)<<2|Zt>>6,Vt=63&Zt;_t||(Vt=64,je||(Yn=64)),K.push(R[W>>2],R[(3&W)<<4|nt>>4],R[Yn],R[Vt])}return K.join("")},encodeString(D,T){return this.HAS_NATIVE_SUPPORT&&!T?btoa(D):this.encodeByteArray(Be(D),T)},decodeString(D,T){return this.HAS_NATIVE_SUPPORT&&!T?atob(D):function(D){const T=[];let R=0,K=0;for(;R<D.length;){const x=D[R++];if(x<128)T[K++]=String.fromCharCode(x);else if(x>191&&x<224){const W=D[R++];T[K++]=String.fromCharCode((31&x)<<6|63&W)}else if(x>239&&x<365){const _t=((7&x)<<18|(63&D[R++])<<12|(63&D[R++])<<6|63&D[R++])-65536;T[K++]=String.fromCharCode(55296+(_t>>10)),T[K++]=String.fromCharCode(56320+(1023&_t))}else{const W=D[R++],je=D[R++];T[K++]=String.fromCharCode((15&x)<<12|(63&W)<<6|63&je)}}return T.join("")}(this.decodeStringToByteArray(D,T))},decodeStringToByteArray(D,T){this.init_();const R=T?this.charToByteMapWebSafe_:this.charToByteMap_,K=[];for(let x=0;x<D.length;){const W=R[D.charAt(x++)],nt=x<D.length?R[D.charAt(x)]:0;++x;const Zt=x<D.length?R[D.charAt(x)]:64;++x;const De=x<D.length?R[D.charAt(x)]:64;if(++x,null==W||null==nt||null==Zt||null==De)throw new _n;K.push(W<<2|nt>>4),64!==Zt&&(K.push(nt<<4&240|Zt>>2),64!==De&&K.push(Zt<<6&192|De))}return K},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let D=0;D<this.ENCODED_VALS.length;D++)this.byteToCharMap_[D]=this.ENCODED_VALS.charAt(D),this.charToByteMap_[this.byteToCharMap_[D]]=D,this.byteToCharMapWebSafe_[D]=this.ENCODED_VALS_WEBSAFE.charAt(D),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[D]]=D,D>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(D)]=D,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(D)]=D)}}};class _n extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ut=function(D){return function(D){const T=Be(D);return an.encodeByteArray(T,!0)}(D).replace(/\./g,"")},ne=function(D){try{return an.decodeString(D,!0)}catch(T){console.error("base64Decode failed: ",T)}return null};function Te(D,T){if(!(T instanceof Object))return T;switch(T.constructor){case Date:return new Date(T.getTime());case Object:void 0===D&&(D={});break;case Array:D=[];break;default:return T}for(const R in T)!T.hasOwnProperty(R)||!ct(R)||(D[R]=Te(D[R],T[R]));return D}function ct(D){return"__proto__"!==D}const et=()=>{try{return function wt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const D=process.env.__FIREBASE_DEFAULTS__;return D?JSON.parse(D):void 0})()||(()=>{if(typeof document>"u")return;let D;try{D=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const T=D&&ne(D[1]);return T&&JSON.parse(T)})()}catch(D){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${D}`)}},Jt=()=>{var D;return null===(D=et())||void 0===D?void 0:D.config},St=D=>{var T;return null===(T=et())||void 0===T?void 0:T[`_${D}`]};class Ht{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((T,R)=>{this.resolve=T,this.reject=R})}wrapCallback(T){return(R,K)=>{R?this.reject(R):this.resolve(K),"function"==typeof T&&(this.promise.catch(()=>{}),1===T.length?T(R):T(R,K))}}}function Or(D,T){if(D.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const K=T||"demo-project",x=D.iat||0,W=D.sub||D.user_id;if(!W)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const je=Object.assign({iss:`https://securetoken.google.com/${K}`,aud:K,iat:x,exp:x+3600,auth_time:x,sub:W,user_id:W,firebase:{sign_in_provider:"custom",identities:{}}},D);return[ut(JSON.stringify({alg:"none",type:"JWT"})),ut(JSON.stringify(je)),""].join(".")}function tt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ln(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tt())}function ee(){var D;const T=null===(D=et())||void 0===D?void 0:D.forceEnvironment;if("node"===T)return!0;if("browser"===T)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function cn(){return"object"==typeof self&&self.self===self}function en(){const D="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof D&&void 0!==D.id}function Dn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Qi(){const D=tt();return D.indexOf("MSIE ")>=0||D.indexOf("Trident/")>=0}function Yi(){return!ee()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function j(){try{return"object"==typeof indexedDB}catch{return!1}}function q(){return new Promise((D,T)=>{try{let R=!0;const K="validate-browser-context-for-indexeddb-analytics-module",x=self.indexedDB.open(K);x.onsuccess=()=>{x.result.close(),R||self.indexedDB.deleteDatabase(K),D(!0)},x.onupgradeneeded=()=>{R=!1},x.onerror=()=>{var W;T((null===(W=x.error)||void 0===W?void 0:W.message)||"")}}catch(R){T(R)}})}class ie extends Error{constructor(T,R,K){super(R),this.code=T,this.customData=K,this.name="FirebaseError",Object.setPrototypeOf(this,ie.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,H.prototype.create)}}class H{constructor(T,R,K){this.service=T,this.serviceName=R,this.errors=K}create(T,...R){const K=R[0]||{},x=`${this.service}/${T}`,W=this.errors[T],je=W?function fe(D,T){return D.replace(pt,(R,K)=>{const x=T[K];return null!=x?String(x):`<${K}?>`})}(W,K):"Error";return new ie(x,`${this.serviceName}: ${je} (${x}).`,K)}}const pt=/\{\$([^}]+)}/g;function wr(D,T){return Object.prototype.hasOwnProperty.call(D,T)}function ti(D){for(const T in D)if(Object.prototype.hasOwnProperty.call(D,T))return!1;return!0}function bs(D,T){if(D===T)return!0;const R=Object.keys(D),K=Object.keys(T);for(const x of R){if(!K.includes(x))return!1;const W=D[x],je=T[x];if(Kt(W)&&Kt(je)){if(!bs(W,je))return!1}else if(W!==je)return!1}for(const x of K)if(!R.includes(x))return!1;return!0}function Kt(D){return null!==D&&"object"==typeof D}function zc(D){const T=[];for(const[R,K]of Object.entries(D))Array.isArray(K)?K.forEach(x=>{T.push(encodeURIComponent(R)+"="+encodeURIComponent(x))}):T.push(encodeURIComponent(R)+"="+encodeURIComponent(K));return T.length?"&"+T.join("&"):""}function Oi(D){const T={};return D.replace(/^\?/,"").split("&").forEach(K=>{if(K){const[x,W]=K.split("=");T[decodeURIComponent(x)]=decodeURIComponent(W)}}),T}function Hc(D){const T=D.indexOf("?");if(!T)return"";const R=D.indexOf("#",T);return D.substring(T,R>0?R:void 0)}function Cs(D,T){const R=new qs(D,T);return R.subscribe.bind(R)}class qs{constructor(T,R){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=R,this.task.then(()=>{T(this)}).catch(K=>{this.error(K)})}next(T){this.forEachObserver(R=>{R.next(T)})}error(T){this.forEachObserver(R=>{R.error(T)}),this.close(T)}complete(){this.forEachObserver(T=>{T.complete()}),this.close()}subscribe(T,R,K){let x;if(void 0===T&&void 0===R&&void 0===K)throw new Error("Missing Observer.");x=function Uo(D,T){if("object"!=typeof D||null===D)return!1;for(const R of T)if(R in D&&"function"==typeof D[R])return!0;return!1}(T,["next","error","complete"])?T:{next:T,error:R,complete:K},void 0===x.next&&(x.next=Lt),void 0===x.error&&(x.error=Lt),void 0===x.complete&&(x.complete=Lt);const W=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?x.error(this.finalError):x.complete()}catch{}}),this.observers.push(x),W}unsubscribeOne(T){void 0===this.observers||void 0===this.observers[T]||(delete this.observers[T],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(T){if(!this.finalized)for(let R=0;R<this.observers.length;R++)this.sendOne(R,T)}sendOne(T,R){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[T])try{R(this.observers[T])}catch(K){typeof console<"u"&&console.error&&console.error(K)}})}close(T){this.finalized||(this.finalized=!0,void 0!==T&&(this.finalError=T),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Lt(){}function Da(D){return D&&D._delegate?D._delegate:D}},411:(ws,Gn,Qe)=>{function w(n){return"function"==typeof n}function Ue(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const G=Ue(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Be(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class at{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(w(r))try{r()}catch(s){e=s instanceof G?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Wn(s)}catch(o){e=e??[],o instanceof G?e=[...e,...o.errors]:e.push(o)}}if(e)throw new G(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Wn(e);else{if(e instanceof at){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Be(t,e)}remove(e){const{_finalizers:t}=this;t&&Be(t,e),e instanceof at&&e._removeParent(this)}}at.EMPTY=(()=>{const n=new at;return n.closed=!0,n})();const an=at.EMPTY;function _n(n){return n instanceof at||n&&"closed"in n&&w(n.remove)&&w(n.add)&&w(n.unsubscribe)}function Wn(n){w(n)?n():n.unsubscribe()}const ut={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ne={setTimeout(n,e,...t){const{delegate:r}=ne;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=ne;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ue(n){ne.setTimeout(()=>{const{onUnhandledError:e}=ut;if(!e)throw n;e(n)})}function Te(){}const ct=Dt("C",void 0,void 0);function Dt(n,e,t){return{kind:n,value:e,error:t}}let qe=null;function et(n){if(ut.useDeprecatedSynchronousErrorHandling){const e=!qe;if(e&&(qe={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=qe;if(qe=null,t)throw r}}else n()}class Qn extends at{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,_n(e)&&e.add(this)):this.destination=cn}static create(e,t,r){return new Or(e,t,r)}next(e){this.isStopped?ee(function Kn(n){return Dt("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?ee(function wt(n){return Dt("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ee(ct,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Jt=Function.prototype.bind;function St(n,e){return Jt.call(n,e)}class Ht{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){tt(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){tt(r)}else tt(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){tt(t)}}}class Or extends Qn{constructor(e,t,r){let i;if(super(),w(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&ut.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&St(e.next,s),error:e.error&&St(e.error,s),complete:e.complete&&St(e.complete,s)}):i=e}this.destination=new Ht(i)}}function tt(n){ut.useDeprecatedSynchronousErrorHandling?function Zn(n){ut.useDeprecatedSynchronousErrorHandling&&qe&&(qe.errorThrown=!0,qe.error=n)}(n):ue(n)}function ee(n,e){const{onStoppedNotification:t}=ut;t&&ne.setTimeout(()=>t(n,e))}const cn={closed:!0,next:Te,error:function Ln(n){throw n},complete:Te},en="function"==typeof Symbol&&Symbol.observable||"@@observable";function Dn(n){return n}function Qi(n){return 0===n.length?Dn:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let Ge=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function j(n){return n&&n instanceof Qn||function Yi(n){return n&&w(n.next)&&w(n.error)&&w(n.complete)}(n)&&_n(n)}(t)?t:new Or(t,r,i);return et(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=Vo(r))((i,s)=>{const o=new Or({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[en](){return this}pipe(...t){return Qi(t)(this)}toPromise(t){return new(t=Vo(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function Vo(n){var e;return null!==(e=n??ut.Promise)&&void 0!==e?e:Promise}const q=Ue(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let V=(()=>{class n extends Ge{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new X(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new q}next(t){et(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){et(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){et(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?an:(this.currentObservers=null,s.push(t),new at(()=>{this.currentObservers=null,Be(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new Ge;return t.source=this,t}}return n.create=(e,t)=>new X(e,t),n})();class X extends V{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:an}}function ie(n){return w(n?.lift)}function H(n){return e=>{if(ie(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function fe(n,e,t,r,i){return new pt(n,e,t,r,i)}class pt extends Qn{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ve(n,e){return H((t,r)=>{let i=0;t.subscribe(fe(r,s=>{r.next(n.call(e,s,i++))}))})}var Me=Qe(582);const vt=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function ln(n){return w(n?.then)}function Wt(n){return w(n[en])}function ur(n){return Symbol.asyncIterator&&w(n?.[Symbol.asyncIterator])}function Vn(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Nr=function wr(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function ti(n){return w(n?.[Nr])}function $c(n){return(0,Me.FC)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,Me.qq)(t.read());if(i)return yield(0,Me.qq)(void 0);yield yield(0,Me.qq)(r)}}finally{t.releaseLock()}})}function bs(n){return w(n?.getReader)}function Kt(n){if(n instanceof Ge)return n;if(null!=n){if(Wt(n))return function wa(n){return new Ge(e=>{const t=n[en]();if(w(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(vt(n))return function zc(n){return new Ge(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(ln(n))return function Oi(n){return new Ge(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ue)})}(n);if(ur(n))return kr(n);if(ti(n))return function Hc(n){return new Ge(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(bs(n))return function Cs(n){return kr($c(n))}(n)}throw Vn(n)}function kr(n){return new Ge(e=>{(function qs(n,e){var t,r,i,s;return(0,Me.mG)(this,void 0,void 0,function*(){try{for(t=(0,Me.KL)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function dr(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Lt(n,e,t=1/0){return w(e)?Lt((r,i)=>ve((s,o)=>e(r,s,i,o))(Kt(n(r,i))),t):("number"==typeof e&&(t=e),H((r,i)=>function Uo(n,e,t,r,i,s,o,a){const c=[];let u=0,h=0,g=!1;const m=()=>{g&&!c.length&&!u&&e.complete()},y=I=>u<r?E(I):c.push(I),E=I=>{s&&e.next(I),u++;let b=!1;Kt(t(I,h++)).subscribe(fe(e,P=>{i?.(P),s?y(P):e.next(P)},()=>{b=!0},void 0,()=>{if(b)try{for(u--;c.length&&u<r;){const P=c.shift();o?dr(e,o,()=>E(P)):E(P)}m()}catch(P){e.error(P)}}))};return n.subscribe(fe(e,y,()=>{g=!0,m()})),()=>{a?.()}}(r,i,n,t)))}function Ni(n=1/0){return Lt(Dn,n)}const Pn=new Ge(n=>n.complete());function ni(n){return n&&w(n.schedule)}function Gs(n){return n[n.length-1]}function Bo(n){return w(Gs(n))?n.pop():void 0}function Ws(n){return ni(Gs(n))?n.pop():void 0}function hr(n,e=0){return H((t,r)=>{t.subscribe(fe(r,i=>dr(r,n,()=>r.next(i),e),()=>dr(r,n,()=>r.complete(),e),i=>dr(r,n,()=>r.error(i),e)))})}function Fr(n,e=0){return H((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Da(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ge(t=>{dr(t,e,()=>{const r=n[Symbol.asyncIterator]();dr(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function R(n,e){return e?function T(n,e){if(null!=n){if(Wt(n))return function Ks(n,e){return Kt(n).pipe(Fr(e),hr(e))}(n,e);if(vt(n))return function ku(n,e){return new Ge(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(ln(n))return function Ta(n,e){return Kt(n).pipe(Fr(e),hr(e))}(n,e);if(ur(n))return Da(n,e);if(ti(n))return function qc(n,e){return new Ge(t=>{let r;return dr(t,e,()=>{r=n[Nr](),dr(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>w(r?.return)&&r.return()})}(n,e);if(bs(n))return function D(n,e){return Da($c(n),e)}(n,e)}throw Vn(n)}(n,e):Kt(n)}function K(...n){const e=Ws(n),t=function Ca(n,e){return"number"==typeof Gs(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Kt(r[0]):Ni(t)(R(r,e)):Pn}class x extends V{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function W(...n){return R(n,Ws(n))}function je(n={}){const{connector:e=(()=>new V),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,c,u=0,h=!1,g=!1;const m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),o=c=void 0,h=g=!1},E=()=>{const I=o;y(),I?.unsubscribe()};return H((I,b)=>{u++,!g&&!h&&m();const P=c=c??e();b.add(()=>{u--,0===u&&!g&&!h&&(a=nt(E,i))}),P.subscribe(b),!o&&u>0&&(o=new Or({next:S=>P.next(S),error:S=>{g=!0,m(),a=nt(y,t,S),P.error(S)},complete:()=>{h=!0,m(),a=nt(y,r),P.complete()}}),Kt(I).subscribe(o))})(s)}}function nt(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new Or({next:()=>{r.unsubscribe(),n()}});return Kt(e(...t)).subscribe(r)}function _t(n,e){return H((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(fe(r,c=>{i?.unsubscribe();let u=0;const h=s++;Kt(n(c,h)).subscribe(i=fe(r,g=>r.next(e?e(c,g,h,u++):g),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Zt(n,e=Dn){return n=n??Un,H((t,r)=>{let i,s=!0;t.subscribe(fe(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function Un(n,e){return n===e}function De(n){for(let e in n)if(n[e]===De)return e;throw Error("Could not find renamed property on target object.")}function Yn(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Vt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Vt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Xi(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Fu=De({__forward_ref__:De});function U(n){return n.__forward_ref__=U,n.toString=function(){return Vt(this())},n}function M(n){return ae(n)?n():n}function ae(n){return"function"==typeof n&&n.hasOwnProperty(Fu)&&n.__forward_ref__===U}function Se(n){return n&&!!n.\u0275providers}const dt="https://g.co/ng/security#xss";class k extends Error{constructor(e,t){super(function yn(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function Ae(n){return"string"==typeof n?n:null==n?"":String(n)}function Gc(n,e){throw new k(-201,!1)}function Lr(n,e){null==n&&function Fe(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function de(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ut(n){return{providers:n.providers||[],imports:n.imports||[]}}function Wc(n){return vf(n,Kc)||vf(n,w_)}function vf(n,e){return n.hasOwnProperty(e)?n[e]:null}function Ts(n){return n&&(n.hasOwnProperty(Zc)||n.hasOwnProperty(Ef))?n[Zc]:null}const Kc=De({\u0275prov:De}),Zc=De({\u0275inj:De}),w_=De({ngInjectableDef:De}),Ef=De({ngInjectorDef:De});var ht=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ht||{});let Qc;function b_(){return Qc}function fr(n){const e=Qc;return Qc=n,e}function C_(n,e,t){const r=Wc(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&ht.Optional?null:void 0!==e?e:void Gc(Vt(n))}const Mt=globalThis;class B{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=de({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const ii={},el="__NG_DI_FLAG__",Vu="ngTempTokenPath",rb=/\n/gm,M_="__source";let Qs;function es(n){const e=Qs;return Qs=n,e}function sb(n,e=ht.Default){if(void 0===Qs)throw new k(-203,!1);return null===Qs?C_(n,void 0,e):Qs.get(n,e&ht.Optional?null:void 0,e)}function N(n,e=ht.Default){return(b_()||sb)(M(n),e)}function le(n,e=ht.Default){return N(n,Bu(e))}function Bu(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function bf(n){const e=[];for(let t=0;t<n.length;t++){const r=M(n[t]);if(Array.isArray(r)){if(0===r.length)throw new k(900,!1);let i,s=ht.Default;for(let o=0;o<r.length;o++){const a=r[o],c=uP(a);"number"==typeof c?-1===c?i=a.token:s|=c:i=a}e.push(N(i,s))}else e.push(N(r))}return e}function Ds(n,e){return n[el]=e,n.prototype[el]=e,n}function uP(n){return n[el]}function Vr(n){return{toString:n}.toString()}var As=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(As||{}),si=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(si||{});const ki={},It=[],ju=De({\u0275cmp:De}),Ys=De({\u0275dir:De}),Tf=De({\u0275pipe:De}),tl=De({\u0275mod:De}),ts=De({\u0275fac:De}),Aa=De({__NG_ELEMENT_ID__:De}),$u=De({__NG_ENV_ID__:De});function oi(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function zu(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];Hu(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function P_(n){return 3===n||4===n||6===n}function Hu(n){return 64===n.charCodeAt(0)}function Xs(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||Df(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function Df(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const Sf="ng-template";function ob(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==oi(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function qu(n){return 4===n.type&&n.value!==Sf}function Af(n,e,t){return e===(4!==n.type||t?n.value:Sf)}function Rf(n,e,t){let r=4;const i=n.attrs||[],s=function x_(n){for(let e=0;e<n.length;e++)if(P_(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!Af(n,c,t)||""===c&&1===e.length){if(Ur(r))return!1;o=!0}}else{const u=8&r?c:e[++a];if(8&r&&null!==n.attrs){if(!ob(n.attrs,u,t)){if(Ur(r))return!1;o=!0}continue}const g=Mf(8&r?"class":c,i,qu(n),t);if(-1===g){if(Ur(r))return!1;o=!0;continue}if(""!==u){let m;m=g>s?"":i[g+1].toLowerCase();const y=8&r?m:null;if(y&&-1!==oi(y,u,0)||2&r&&u!==m){if(Ur(r))return!1;o=!0}}}}else{if(!o&&!Ur(r)&&!Ur(c))return!1;if(o&&Ur(c))continue;o=!1,r=c|1&r}}return Ur(r)||o}function Ur(n){return 0==(1&n)}function Mf(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function Of(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function Pf(n,e,t=!1){for(let r=0;r<e.length;r++)if(Rf(n,e[r],t))return!0;return!1}function Wu(n,e){return n?":not("+e.trim()+")":e}function O_(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Ur(o)&&(e+=Wu(s,i),i=""),r=o,s=s||!Ur(r);t++}return""!==i&&(e+=Wu(s,i)),e}function pr(n){return Vr(()=>{const e=Zu(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===As.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||si.Emulated,styles:n.styles||It,_:null,schemas:n.schemas||null,tView:null,id:""};k_(t);const r=n.dependencies;return t.directiveDefs=Ra(r,!1),t.pipeDefs=Ra(r,!0),t.id=function Ff(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function kf(n){return gt(n)||xn(n)}function cb(n){return null!==n}function Bt(n){return Vr(()=>({type:n.type,bootstrap:n.bootstrap||It,declarations:n.declarations||It,imports:n.imports||It,exports:n.exports||It,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Ku(n,e){if(null==n)return ki;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function ke(n){return Vr(()=>{const e=Zu(n);return k_(e),e})}function gt(n){return n[ju]||null}function xn(n){return n[Ys]||null}function br(n){return n[Tf]||null}function ai(n,e){const t=n[tl]||null;if(!t&&!0===e)throw new Error(`Type ${Vt(n)} does not have '\u0275mod' property.`);return t}function Zu(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||ki,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||It,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ku(n.inputs,e),outputs:Ku(n.outputs)}}function k_(n){n.features?.forEach(e=>e(n))}function Ra(n,e){if(!n)return null;const t=e?br:kf;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(cb)}const vn=0,Ee=1,Ye=2,qt=3,Fi=4,rl=5,Bn=6,Ma=7,bn=8,ns=9,Pa=10,$e=11,il=12,Qu=13,xa=14,un=15,sl=16,eo=17,rs=18,jo=19,L_=20,is=21,Rs=22,ol=23,Oa=24,st=25,to=1,Lf=2,ss=7,Na=9,Jn=11;function ci(n){return Array.isArray(n)&&"object"==typeof n[to]}function Br(n){return Array.isArray(n)&&!0===n[to]}function cl(n){return 0!=(4&n.flags)}function $o(n){return n.componentOffset>-1}function Xu(n){return 1==(1&n.flags)}function os(n){return!!n.template}function V_(n){return 0!=(512&n[Ye])}function as(n,e){return n.hasOwnProperty(ts)?n[ts]:null}const zo=Symbol("SIGNAL");function z_(n,e){return(null===n||"object"!=typeof n)&&Object.is(n,e)}let er=null,no=!1;function wi(n){const e=er;return er=n,e}const dn={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function H_(n){if(no)throw new Error("");if(null===er)return;const e=er.nextProducerIndex++;Fa(er),e<er.producerNode.length&&er.producerNode[e]!==n&&io(er)&&ro(er.producerNode[e],er.producerIndexOfThis[e]),er.producerNode[e]!==n&&(er.producerNode[e]=n,er.producerIndexOfThis[e]=io(er)?jf(n,er,e):0),er.producerLastReadVersion[e]=n.version}function Ju(n){if(!io(n)||n.dirty){if(!n.producerMustRecompute(n)&&!W_(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function q_(n){if(void 0===n.liveConsumerNode)return;const e=no;no=!0;try{for(const t of n.liveConsumerNode)t.dirty||G_(t)}finally{no=e}}function ll(){return!1!==er?.consumerAllowSignalWrites}function G_(n){n.dirty=!0,q_(n),n.consumerMarkedDirty?.(n)}function ed(n){return n&&(n.nextProducerIndex=0),wi(n)}function ul(n,e){if(wi(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(io(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)ro(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function W_(n){Fa(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Ju(t),r!==t.version))return!0}return!1}function dl(n){if(Fa(n),io(n))for(let e=0;e<n.producerNode.length;e++)ro(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function jf(n,e,t){if(td(n),Fa(n),0===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=jf(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function ro(n,e){if(td(n),Fa(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)ro(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Fa(i),i.producerIndexOfThis[r]=e}}function io(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Fa(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function td(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function $f(n,e){const t=Object.create(K_);t.computation=n,e?.equal&&(t.equal=e.equal);const r=()=>{if(Ju(t),H_(t),t.value===La)throw t.error;return t.value};return r[zo]=t,r}const hl=Symbol("UNSET"),zf=Symbol("COMPUTING"),La=Symbol("ERRORED"),K_=(()=>({...dn,value:hl,dirty:!0,error:null,equal:z_,producerMustRecompute:n=>n.value===hl||n.value===zf,producerRecomputeValue(n){if(n.value===zf)throw new Error("Detected cycle in computations.");const e=n.value;n.value=zf;const t=ed(n);let r;try{r=n.computation()}catch(i){r=La,n.error=i}finally{ul(n,t)}e!==hl&&e!==La&&r!==La&&n.equal(e,r)?n.value=e:(n.value=r,n.version++)}}))();let Z_=function lb(){throw new Error};function Q_(){Z_()}let Hf=null;const ub=(()=>({...dn,equal:z_,readonlyFn:void 0}))();function X_(n){n.version++,q_(n),Hf?.()}function fl(n){const e=this[zo];ll()||Q_(),e.equal(e.value,n)||(e.value=n,X_(e))}function db(n){ll()||Q_(),fl.call(this,n(this[zo].value))}function hb(n){const e=this[zo];ll()||Q_(),n(e.value),X_(e)}function fb(){const n=this[zo];if(void 0===n.readonlyFn){const e=()=>this();e[zo]=n,n.readonlyFn=e}return n.readonlyFn}const J_=()=>{},gb=(()=>({...dn,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:J_}))();class mb{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function jr(){return ey}function ey(n){return n.type.prototype.ngOnChanges&&(n.setInput=yb),_b}function _b(){const n=ty(this),e=n?.current;if(e){const t=n.previous;if(t===ki)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function yb(n,e,t,r){const i=this.declaredInputs[t],s=ty(n)||function qf(n,e){return n[rd]=e}(n,{previous:ki,current:null}),o=s.current||(s.current={}),a=s.previous,c=a[i];o[i]=new mb(c&&c.currentValue,e,a===ki),n[r]=e}jr.ngInherit=!0;const rd="__ngSimpleChanges__";function ty(n){return n[rd]||null}const cs=function(n,e,t){},id="svg";function Ot(n){for(;Array.isArray(n);)n=n[vn];return n}function Ua(n,e){return Ot(e[n])}function jn(n,e){return Ot(e[n.index])}function sd(n,e){return n.data[e]}function li(n,e){const t=e[n];return ci(t)?t:t[vn]}function so(n,e){return null==e?null:n[e]}function ry(n){n[eo]=0}function Qf(n){1024&n[Ye]||(n[Ye]|=1024,od(n,1))}function iy(n){1024&n[Ye]&&(n[Ye]&=-1025,od(n,-1))}function od(n,e){let t=n[qt];if(null===t)return;t[rl]+=e;let r=t;for(t=t[qt];null!==t&&(1===e&&1===r[rl]||-1===e&&0===r[rl]);)t[rl]+=e,r=t,t=t[qt]}function sy(n,e){if(256==(256&n[Ye]))throw new k(911,!1);null===n[is]&&(n[is]=[]),n[is].push(e)}const Ve={lFrame:dy(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function cd(){return Ve.bindingsEnabled}function se(){return Ve.lFrame.lView}function mt(){return Ve.lFrame.tView}function tr(n){return Ve.lFrame.contextLView=n,n[bn]}function nr(n){return Ve.lFrame.contextLView=null,n}function On(){let n=ly();for(;null!==n&&64===n.type;)n=n.parent;return n}function ly(){return Ve.lFrame.currentTNode}function bi(n,e){const t=Ve.lFrame;t.currentTNode=n,t.isParent=e}function ep(){return Ve.lFrame.isParent}function ml(){Ve.lFrame.isParent=!1}function rr(){const n=Ve.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Go(){return Ve.lFrame.bindingIndex++}function ip(n,e){const t=Ve.lFrame;t.bindingIndex=t.bindingRootIndex=n,sp(e)}function sp(n){Ve.lFrame.currentDirectiveIndex=n}function ud(){return Ve.lFrame.currentQueryIndex}function ap(n){Ve.lFrame.currentQueryIndex=n}function Db(n){const e=n[Ee];return 2===e.type?e.declTNode:1===e.type?n[Bn]:null}function cp(n,e,t){if(t&ht.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&ht.Host||(i=Db(s),null===i||(s=s[xa],10&i.type))););if(null===i)return!1;e=i,n=s}const r=Ve.lFrame=_l();return r.currentTNode=e,r.lView=n,!0}function lp(n){const e=_l(),t=n[Ee];Ve.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function _l(){const n=Ve.lFrame,e=null===n?null:n.child;return null===e?dy(n):e}function dy(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function hy(){const n=Ve.lFrame;return Ve.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const fy=hy;function up(){const n=hy();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Cr(){return Ve.lFrame.selectedIndex}function Wo(n){Ve.lFrame.selectedIndex=n}function Qt(){const n=Ve.lFrame;return sd(n.tView,n.selectedIndex)}function dp(){Ve.lFrame.currentNamespace=id}let hp=!0;function dd(){return hp}function ao(n){hp=n}function hd(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),null!=h&&(n.destroyHooks??=[]).push(t,h)}}function fd(n,e,t){my(n,e,3,t)}function ja(n,e,t,r){(3&n[Ye])===t&&my(n,e,t,r)}function yl(n,e){let t=n[Ye];(3&t)===e&&(t&=8191,t+=1,n[Ye]=t)}function my(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let c=void 0!==r?65535&n[eo]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(n[eo]+=65536),(a<s||-1==s)&&(xb(n,t,e,c),n[eo]=(4294901760&n[eo])+c+2),c++}function pd(n,e){cs(4,n,e);const t=wi(null);try{e.call(n)}finally{wi(t),cs(5,n,e)}}function xb(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[Ye]>>13<n[eo]>>16&&(3&n[Ye])===e&&(n[Ye]+=8192,pd(a,s)):pd(a,s)}const Ko=-1;class vl{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function pp(n){return n!==Ko}function El(n){return 32767&n}function Il(n,e){let t=function kb(n){return n>>16}(n),r=e;for(;t>0;)r=r[xa],t--;return r}let gp=!0;function wl(n){const e=gp;return gp=n,e}const Fb=255,co=5;let Lb=0;const us={};function md(n,e){const t=Ey(n,e);if(-1!==t)return t;const r=e[Ee];r.firstCreatePass&&(n.injectorIndex=e.length,bl(r.data,n),bl(e,null),bl(r.blueprint,null));const i=_d(n,e),s=n.injectorIndex;if(pp(i)){const o=El(i),a=Il(i,e),c=a[Ee].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=i,s}function bl(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Ey(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function _d(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=Dy(i),null===r)return Ko;if(t++,i=i[xa],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return Ko}function Cl(n,e,t){!function mp(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Aa)&&(r=t[Aa]),null==r&&(r=t[Aa]=Lb++);const i=r&Fb;e.data[n+(i>>co)]|=1<<i}(n,e,t)}function Iy(n,e,t){if(t&ht.Optional||void 0!==n)return n;Gc()}function yd(n,e,t,r){if(t&ht.Optional&&void 0===r&&(r=null),!(t&(ht.Self|ht.Host))){const i=n[ns],s=fr(void 0);try{return i?i.get(e,r,t&ht.Optional):C_(e,r,t&ht.Optional)}finally{fr(s)}}return Iy(r,0,t)}function wy(n,e,t,r=ht.Default,i){if(null!==n){if(2048&e[Ye]&&!(r&ht.Self)){const o=function jb(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[Ye]&&!(512&o[Ye]);){const a=by(s,o,t,r|ht.Self,us);if(a!==us)return a;let c=s.parent;if(!c){const u=o[L_];if(u){const h=u.get(t,us,r);if(h!==us)return h}c=Dy(o),o=o[xa]}s=c}return i}(n,e,t,r,us);if(o!==us)return o}const s=by(n,e,t,r,us);if(s!==us)return s}return yd(e,t,r,i)}function by(n,e,t,r,i){const s=function Cy(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Aa)?n[Aa]:void 0;return"number"==typeof e?e>=0?e&Fb:Bb:e}(t);if("function"==typeof s){if(!cp(e,n,r))return r&ht.Host?Iy(i,0,r):yd(e,t,r,i);try{let o;if(o=s(r),null!=o||r&ht.Optional)return o;Gc()}finally{fy()}}else if("number"==typeof s){let o=null,a=Ey(n,e),c=Ko,u=r&ht.Host?e[un][Bn]:null;for((-1===a||r&ht.SkipSelf)&&(c=-1===a?_d(n,e):e[a+8],c!==Ko&&Ty(r,!1)?(o=e[Ee],a=El(c),e=Il(c,e)):a=-1);-1!==a;){const h=e[Ee];if(Ed(s,a,h.data)){const g=Ub(a,e,t,o,r,u);if(g!==us)return g}c=e[a+8],c!==Ko&&Ty(r,e[Ee].data[a+8]===u)&&Ed(s,a,e)?(o=h,a=El(c),e=Il(c,e)):a=-1}}return i}function Ub(n,e,t,r,i,s){const o=e[Ee],a=o.data[n+8],h=vd(a,o,t,null==r?$o(a)&&gp:r!=o&&0!=(3&a.type),i&ht.Host&&s===a);return null!==h?Zo(e,o,h,a):us}function vd(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,h=s>>20,m=i?a+h:n.directiveEnd;for(let y=r?a:a+h;y<m;y++){const E=o[y];if(y<c&&t===E||y>=c&&E.type===t)return y}if(i){const y=o[c];if(y&&os(y)&&y.type===t)return c}return null}function Zo(n,e,t,r){let i=n[t];const s=e.data;if(function fp(n){return n instanceof vl}(i)){const o=i;o.resolving&&function Sa(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new k(-200,`Circular dependency in DI detected for ${n}${t}`)}(function lt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ae(n)}(s[t]));const a=wl(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?fr(o.injectImpl):null;cp(n,r,ht.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function Pb(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=ey(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==u&&fr(u),wl(a),o.resolving=!1,fy()}}return i}function Ed(n,e,t){return!!(t[e+(n>>co)]&1<<n)}function Ty(n,e){return!(n&ht.Self||n&ht.Host&&e)}class ir{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return wy(this._tNode,this._lView,e,Bu(r),t)}}function Bb(){return new ir(On(),se())}function $n(n){return Vr(()=>{const e=n.prototype.constructor,t=e[ts]||$a(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[ts]||$a(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function $a(n){return ae(n)?()=>{const e=$a(M(n));return e&&e()}:as(n)}function Dy(n){const e=n[Ee],t=e.type;return 2===t?e.declTNode:1===t?n[Bn]:null}const za="__parameters__";function ds(n,e,t){return Vr(()=>{const r=function yp(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(c,u,h){const g=c.hasOwnProperty(za)?c[za]:Object.defineProperty(c,za,{value:[]})[za];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function qa(n,e){n.forEach(t=>Array.isArray(t)?qa(t,e):e(t))}function wd(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ga(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function di(n,e,t){let r=Wa(n,e);return r>=0?n[1|r]=t:(r=~r,function uo(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function vp(n,e){const t=Wa(n,e);if(t>=0)return n[1|t]}function Wa(n,e){return function Tr(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const Rl=Ds(ds("Inject",n=>({token:n})),-1),xs=Ds(ds("Optional"),8),Td=Ds(ds("SkipSelf"),4);function Uy(n){return 128==(128&n.flags)}var Za=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Za||{});const b4=/^>|^->|<!--|-->|--!>|<!-$/g,C4=/(<|>)/g,T4="\u200b$1\u200b";const Jb=new Map;let D4=0;const tC="__ngContext__";function $r(n,e){ci(e)?(n[tC]=e[jo],function A4(n){Jb.set(n[jo],n)}(e)):n[tC]=e}let nC;function rC(n,e){return nC(n,e)}function Tp(n){const e=n[qt];return Br(e)?e[qt]:e}function WP(n){return ZP(n[il])}function KP(n){return ZP(n[Fi])}function ZP(n){for(;null!==n&&!Br(n);)n=n[Fi];return n}function Rd(n,e,t,r,i){if(null!=r){let s,o=!1;Br(r)?s=r:ci(r)&&(o=!0,r=r[vn]);const a=Ot(r);0===n&&null!==t?null==i?JP(e,t,a):Pl(e,t,a,i||null,!0):1===n&&null!==t?Pl(e,t,a,i||null,!0):2===n?function Gy(n,e,t){const r=Hy(n,e);r&&function W4(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function Q4(n,e,t,r,i){const s=t[ss];s!==Ot(t)&&Rd(e,n,r,s,i);for(let a=Jn;a<t.length;a++){const c=t[a];Sp(c[Ee],c,n,e,r,s)}}(e,n,s,t,i)}}function iC(n,e){return n.createComment(function UP(n){return n.replace(b4,e=>e.replace(C4,T4))}(e))}function $y(n,e,t){return n.createElement(e,t)}function YP(n,e){const t=n[Na],r=t.indexOf(e);iy(e),t.splice(r,1)}function zy(n,e){if(n.length<=Jn)return;const t=Jn+e,r=n[t];if(r){const i=r[sl];null!==i&&i!==n&&YP(i,r),e>0&&(n[t-1][Fi]=r[Fi]);const s=Ga(n,Jn+e);!function U4(n,e){Sp(n,e,e[$e],2,null,null),e[vn]=null,e[Bn]=null}(r[Ee],r);const o=s[rs];null!==o&&o.detachView(s[Ee]),r[qt]=null,r[Fi]=null,r[Ye]&=-129}return r}function sC(n,e){if(!(256&e[Ye])){const t=e[$e];e[ol]&&dl(e[ol]),e[Oa]&&dl(e[Oa]),t.destroyNode&&Sp(n,e,t,3,null,null),function $4(n){let e=n[il];if(!e)return oC(n[Ee],n);for(;e;){let t=null;if(ci(e))t=e[il];else{const r=e[Jn];r&&(t=r)}if(!t){for(;e&&!e[Fi]&&e!==n;)ci(e)&&oC(e[Ee],e),e=e[qt];null===e&&(e=n),ci(e)&&oC(e[Ee],e),t=e&&e[Fi]}e=t}}(e)}}function oC(n,e){if(!(256&e[Ye])){e[Ye]&=-129,e[Ye]|=256,function G4(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof vl)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],c=s[o+1];cs(4,a,c);try{c.call(a)}finally{cs(5,a,c)}}else{cs(4,i,s);try{s.call(i)}finally{cs(5,i,s)}}}}}(n,e),function q4(n,e){const t=n.cleanup,r=e[Ma];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[Ma]=null);const i=e[is];if(null!==i){e[is]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[Ee].type&&e[$e].destroy();const t=e[sl];if(null!==t&&Br(e[qt])){t!==e[qt]&&YP(t,e);const r=e[rs];null!==r&&r.detachView(n)}!function R4(n){Jb.delete(n[jo])}(e)}}function aC(n,e,t){return function XP(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[vn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===si.None||s===si.Emulated)return null}return jn(r,t)}}(n,e.parent,t)}function Pl(n,e,t,r,i){n.insertBefore(e,t,r,i)}function JP(n,e,t){n.appendChild(e,t)}function ex(n,e,t,r,i){null!==r?Pl(n,e,t,r,i):JP(n,e,t)}function Hy(n,e){return n.parentNode(e)}let cC,Wy,hC,Ky,rx=function nx(n,e,t){return 40&n.type?jn(n,t):null};function qy(n,e,t,r){const i=aC(n,r,e),s=e[$e],a=function tx(n,e,t){return rx(n,e,t)}(r.parent||e[Bn],r,e);if(null!=i)if(Array.isArray(t))for(let c=0;c<t.length;c++)ex(s,i,t[c],a,!1);else ex(s,i,t,a,!1);void 0!==cC&&cC(s,r,e,t,i)}function Dp(n,e){if(null!==e){const t=e.type;if(3&t)return jn(e,n);if(4&t)return lC(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Dp(n,r);{const i=n[e.index];return Br(i)?lC(-1,i):Ot(i)}}if(32&t)return rC(e,n)()||Ot(n[e.index]);{const r=sx(n,e);return null!==r?Array.isArray(r)?r[0]:Dp(Tp(n[un]),r):Dp(n,e.next)}}return null}function sx(n,e){return null!==e?n[un][Bn].projection[e.projection]:null}function lC(n,e){const t=Jn+n+1;if(t<e.length){const r=e[t],i=r[Ee].firstChild;if(null!==i)return Dp(r,i)}return e[ss]}function uC(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],c=t.type;if(o&&0===e&&(a&&$r(Ot(a),r),t.flags|=2),32!=(32&t.flags))if(8&c)uC(n,e,t.child,r,i,s,!1),Rd(e,n,i,a,s);else if(32&c){const u=rC(t,r);let h;for(;h=u();)Rd(e,n,i,h,s);Rd(e,n,i,a,s)}else 16&c?ax(n,e,r,t,i,s):Rd(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Sp(n,e,t,r,i,s){uC(t,r,n.firstChild,e,i,s,!1)}function ax(n,e,t,r,i,s){const o=t[un],c=o[Bn].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++)Rd(e,n,i,c[u],s);else{let u=c;const h=o[qt];Uy(r)&&(u.flags|=128),uC(n,e,u,h,i,s,!0)}}function cx(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function lx(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&zu(n,e,r),null!==i&&cx(n,e,i),null!==s&&function X4(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function Md(n){return function dC(){if(void 0===Wy&&(Wy=null,Mt.trustedTypes))try{Wy=Mt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Wy}()?.createHTML(n)||n}function hx(n){return function fC(){if(void 0===Ky&&(Ky=null,Mt.trustedTypes))try{Ky=Mt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Ky}()?.createScriptURL(n)||n}class xl{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${dt})`}}class rq extends xl{getTypeName(){return"HTML"}}class iq extends xl{getTypeName(){return"Style"}}class sq extends xl{getTypeName(){return"Script"}}class oq extends xl{getTypeName(){return"URL"}}class aq extends xl{getTypeName(){return"ResourceURL"}}function Vi(n){return n instanceof xl?n.changingThisBreaksApplicationSecurity:n}function ho(n,e){const t=function cq(n){return n instanceof xl&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${dt})`)}return t===e}class pq{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Md(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class gq{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=Md(e),t}}const _q=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Zy(n){return(n=String(n)).match(_q)?n:"unsafe:"+n}function Yo(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function Ap(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const px=Yo("area,br,col,hr,img,wbr"),gx=Yo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),mx=Yo("rp,rt"),pC=Ap(px,Ap(gx,Yo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ap(mx,Yo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ap(mx,gx)),gC=Yo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),_x=Ap(gC,Yo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Yo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),yq=Yo("script,style,template");class vq{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!pC.hasOwnProperty(t))return this.sanitizedSomething=!0,!yq.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),o=s.name,a=o.toLowerCase();if(!_x.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;gC[a]&&(c=Zy(c)),this.buf.push(" ",o,'="',yx(c),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();pC.hasOwnProperty(t)&&!px.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(yx(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const Eq=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Iq=/([^\#-~ |!])/g;function yx(n){return n.replace(/&/g,"&amp;").replace(Eq,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(Iq,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Qy;function vx(n,e){let t=null;try{Qy=Qy||function fx(n){const e=new gq(n);return function mq(){try{return!!(new window.DOMParser).parseFromString(Md(""),"text/html")}catch{return!1}}()?new pq(e):e}(n);let r=e?String(e):"";t=Qy.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=Qy.getInertBodyElement(r)}while(r!==s);return Md((new vq).sanitizeChildren(mC(t)||t))}finally{if(t){const r=mC(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function mC(n){return"content"in n&&function wq(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var hs=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(hs||{});function Rp(n){const e=Mp();return e?e.sanitize(hs.URL,n)||"":ho(n,"URL")?Vi(n):Zy(Ae(n))}function Ex(n){const e=Mp();if(e)return hx(e.sanitize(hs.RESOURCE_URL,n)||"");if(ho(n,"ResourceURL"))return hx(Vi(n));throw new k(904,!1)}function Mp(){const n=se();return n&&n[Pa].sanitizer}const Ol=new B("ENVIRONMENT_INITIALIZER"),wx=new B("INJECTOR",-1),bx=new B("INJECTOR_DEF_TYPES");class _C{get(e,t=ii){if(t===ii){const r=new Error(`NullInjectorError: No provider for ${Vt(e)}!`);throw r.name="NullInjectorError",r}return t}}function Rq(...n){return{\u0275providers:Cx(0,n),\u0275fromNgModule:!0}}function Cx(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return qa(e,o=>{const a=o;Yy(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&Tx(i,s),t}function Tx(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];vC(i,s=>{e(s,r)})}}function Yy(n,e,t,r){if(!(n=M(n)))return!1;let i=null,s=Ts(n);const o=!s&&gt(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const c=n.ngModule;if(s=Ts(c),!s)return!1;i=c}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const u of c)Yy(u,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let u;r.add(i);try{qa(s.imports,h=>{Yy(h,e,t,r)&&(u||=[],u.push(h))})}finally{}void 0!==u&&Tx(u,e)}if(!a){const u=as(i)||(()=>new i);e({provide:i,useFactory:u,deps:It},i),e({provide:bx,useValue:i,multi:!0},i),e({provide:Ol,useValue:()=>N(i),multi:!0},i)}const c=s.providers;if(null!=c&&!a){const u=n;vC(c,h=>{e(h,u)})}}}return i!==n&&void 0!==n.providers}function vC(n,e){for(let t of n)Se(t)&&(t=t.\u0275providers),Array.isArray(t)?vC(t,e):e(t)}const Mq=De({provide:String,useValue:De});function EC(n){return null!==n&&"object"==typeof n&&Mq in n}function Nl(n){return"function"==typeof n}const IC=new B("Set Injector scope."),Xy={},xq={};let wC;function Jy(){return void 0===wC&&(wC=new _C),wC}class Ui{}class xd extends Ui{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,CC(e,o=>this.processProvider(o)),this.records.set(wx,Od(void 0,this)),i.has("environment")&&this.records.set(Ui,Od(void 0,this));const s=this.records.get(IC);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(bx.multi,It,ht.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=es(this),r=fr(void 0);try{return e()}finally{es(t),fr(r)}}get(e,t=ii,r=ht.Default){if(this.assertNotDestroyed(),e.hasOwnProperty($u))return e[$u](this);r=Bu(r);const s=es(this),o=fr(void 0);try{if(!(r&ht.SkipSelf)){let c=this.records.get(e);if(void 0===c){const u=function Lq(n){return"function"==typeof n||"object"==typeof n&&n instanceof B}(e)&&Wc(e);c=u&&this.injectableDefInScope(u)?Od(bC(e),Xy):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(r&ht.Self?Jy():this.parent).get(e,t=r&ht.Optional&&t===ii?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Vu]=a[Vu]||[]).unshift(Vt(e)),s)throw a;return function Cf(n,e,t,r){const i=n[Vu];throw e[M_]&&i.unshift(e[M_]),n.message=function Ss(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=Vt(e);if(Array.isArray(e))i=e.map(Vt).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Vt(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(rb,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Vu]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{fr(o),es(s)}}resolveInjectorInitializers(){const e=es(this),t=fr(void 0);try{const i=this.get(Ol.multi,It,ht.Self);for(const s of i)s()}finally{es(e),fr(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(Vt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new k(205,!1)}processProvider(e){let t=Nl(e=M(e))?e:M(e&&e.provide);const r=function Nq(n){return EC(n)?Od(void 0,n.useValue):Od(Ax(n),Xy)}(e);if(Nl(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Od(void 0,Xy,!0),i.factory=()=>bf(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===Xy&&(t.value=xq,t.value=t.factory()),"object"==typeof t.value&&t.value&&function Fq(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=M(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function bC(n){const e=Wc(n),t=null!==e?e.factory:as(n);if(null!==t)return t;if(n instanceof B)throw new k(204,!1);if(n instanceof Function)return function Oq(n){const e=n.length;if(e>0)throw function Sl(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new k(204,!1);const t=function tb(n){return n&&(n[Kc]||n[w_])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new k(204,!1)}function Ax(n,e,t){let r;if(Nl(n)){const i=M(n);return as(i)||bC(i)}if(EC(n))r=()=>M(n.useValue);else if(function Sx(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...bf(n.deps||[]));else if(function Dx(n){return!(!n||!n.useExisting)}(n))r=()=>N(M(n.useExisting));else{const i=M(n&&(n.useClass||n.provide));if(!function kq(n){return!!n.deps}(n))return as(i)||bC(i);r=()=>new i(...bf(n.deps))}return r}function Od(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function CC(n,e){for(const t of n)Array.isArray(t)?CC(t,e):t&&Se(t)?CC(t.\u0275providers,e):e(t)}const ev=new B("AppId",{providedIn:"root",factory:()=>Vq}),Vq="ng",Rx=new B("Platform Initializer"),Os=new B("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),TC=new B("AnimationModuleType"),DC=new B("CSP nonce",{providedIn:"root",factory:()=>function Pd(){if(void 0!==hC)return hC;if(typeof document<"u")return document;throw new k(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Mx=(n,e,t)=>null;function NC(n,e,t=!1){return Mx(n,e,t)}class Kq{}class Ox{}class Qq{resolveComponentFactory(e){throw function Zq(n){const e=Error(`No component factory found for ${Vt(n)}.`);return e.ngComponent=n,e}(e)}}let ov=(()=>{class n{static#e=this.NULL=new Qq}return n})();function Yq(){return Fd(On(),se())}function Fd(n,e){return new gr(jn(n,e))}let gr=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=Yq}return n})();function Xq(n){return n instanceof gr?n.nativeElement:n}class Op{}let Xo=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Jq(){const n=se(),t=li(On().index,n);return(ci(t)?t:n)[$e]}()}return n})(),eG=(()=>{class n{static#e=this.\u0275prov=de({token:n,providedIn:"root",factory:()=>null})}return n})();class Qa{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const kx=new Qa("16.2.12"),LC={};function Ux(n,e=null,t=null,r){const i=Bx(n,e,t,r);return i.resolveInjectorInitializers(),i}function Bx(n,e=null,t=null,r,i=new Set){const s=[t||It,Rq(n)];return r=r||("object"==typeof n?void 0:Vt(n)),new xd(s,e||Jy(),r||null,i)}let Ti=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=ii;static#t=this.NULL=new _C;static create(t,r){if(Array.isArray(t))return Ux({name:""},r,t,"");{const i=t.name??"";return Ux({name:i},t.parent,t.providers,i)}}static#n=this.\u0275prov=de({token:n,providedIn:"any",factory:()=>N(wx)});static#r=this.__NG_ELEMENT_ID__=-1}return n})();function VC(n){return n.ngOriginalError}class fo{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&VC(e);for(;t&&VC(t);)t=VC(t);return t||null}}let Ld=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=aG;static#t=this.__NG_ENV_ID__=t=>t}return n})();class oG extends Ld{constructor(e){super(),this._lView=e}onDestroy(e){return sy(this._lView,e),()=>function Yf(n,e){if(null===n[is])return;const t=n[is].indexOf(e);-1!==t&&n[is].splice(t,1)}(this._lView,e)}}function aG(){return new oG(se())}function UC(n){return e=>{setTimeout(n,void 0,e)}}const bt=class cG extends V{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=UC(s),i&&(i=UC(i)),o&&(o=UC(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof at&&e.add(a),a}};function $x(...n){}class ft{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new bt(!1),this.onMicrotaskEmpty=new bt(!1),this.onStable=new bt(!1),this.onError=new bt(!1),typeof Zone>"u")throw new k(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function lG(){const n="function"==typeof Mt.requestAnimationFrame;let e=Mt[n?"requestAnimationFrame":"setTimeout"],t=Mt[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function hG(n){const e=()=>{!function dG(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Mt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,jC(n),n.isCheckStableRunning=!0,BC(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),jC(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function pG(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,s,o,a);try{return zx(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),Hx(n)}},onInvoke:(t,r,i,s,o,a,c)=>{try{return zx(n),t.invoke(i,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),Hx(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,jC(n),BC(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ft.isInAngularZone())throw new k(909,!1)}static assertNotInAngularZone(){if(ft.isInAngularZone())throw new k(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,uG,$x,$x);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const uG={};function BC(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function jC(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function zx(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Hx(n){n._nesting--,BC(n)}class fG{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new bt,this.onMicrotaskEmpty=new bt,this.onStable=new bt,this.onError=new bt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const qx=new B("",{providedIn:"root",factory:Gx});function Gx(){const n=le(ft);let e=!0;return K(new Ge(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new Ge(i=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{ft.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=n.onUnstable.subscribe(()=>{ft.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(je()))}function Wx(n){return n.ownerDocument.defaultView}function Jo(n){return n instanceof Function?n():n}let $C=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=de({token:n,providedIn:"root",factory:()=>new n})}return n})();function Np(n){for(;n;){n[Ye]|=64;const e=Tp(n);if(V_(n)&&!e)return n;n=e}return null}const Xx=new B("",{providedIn:"root",factory:()=>!1});let lv=null;function nO(n,e){return n[e]??sO()}function rO(n,e){const t=sO();t.producerNode?.length&&(n[e]=lv,t.lView=n,lv=iO())}const bG={...dn,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Np(n.lView)},lView:null};function iO(){return Object.create(bG)}function sO(){return lv??=iO(),lv}const Je={};function ge(n){oO(mt(),se(),Cr()+n,!1)}function oO(n,e,t,r){if(!r)if(3==(3&e[Ye])){const s=n.preOrderCheckHooks;null!==s&&fd(e,s,t)}else{const s=n.preOrderHooks;null!==s&&ja(e,s,0,t)}Wo(t)}function $(n,e=ht.Default){const t=se();return null===t?N(n,e):wy(On(),t,M(n),e)}function uv(n,e,t,r,i,s,o,a,c,u,h){const g=e.blueprint.slice();return g[vn]=i,g[Ye]=140|r,(null!==u||n&&2048&n[Ye])&&(g[Ye]|=2048),ry(g),g[qt]=g[xa]=n,g[bn]=t,g[Pa]=o||n&&n[Pa],g[$e]=a||n&&n[$e],g[ns]=c||n&&n[ns]||null,g[Bn]=s,g[jo]=function S4(){return D4++}(),g[Rs]=h,g[L_]=u,g[un]=2==e.type?n[un]:g,g}function Bd(n,e,t,r,i){let s=n.data[e];if(null===s)s=function zC(n,e,t,r,i){const s=ly(),o=ep(),c=n.data[e]=function PG(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function oo(){return null!==Ve.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c,c.prev=s)),c}(n,e,t,r,i),function Cb(){return Ve.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function gl(){const n=Ve.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return bi(s,!0),s}function kp(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function cO(n,e,t,r,i){const s=nO(e,ol),o=Cr(),a=2&r;try{Wo(-1),a&&e.length>st&&oO(n,e,st,!1),cs(a?2:0,i);const u=a?s:null,h=ed(u);try{null!==u&&(u.dirty=!1),t(r,i)}finally{ul(u,h)}}finally{a&&null===e[ol]&&rO(e,ol),Wo(o),cs(a?3:1,i)}}function HC(n,e,t){if(cl(e)){const r=wi(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{wi(r)}}}function qC(n,e,t){cd()&&(function VG(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;$o(t)&&function qG(n,e,t){const r=jn(e,n),i=lO(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=dv(n,uv(n,i,null,o,r,e,null,n[Pa].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||md(t,e),$r(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const c=n.data[a],u=Zo(e,n,a,t);$r(u,e),null!==o&&GG(0,a-i,u,c,0,o),os(c)&&(li(t.index,e)[bn]=Zo(e,n,a,t))}}(n,e,t,jn(t,e)),64==(64&t.flags)&&pO(n,e,t))}function GC(n,e,t=jn){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function lO(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=WC(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function WC(n,e,t,r,i,s,o,a,c,u,h){const g=st+r,m=g+i,y=function TG(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:Je);return t}(g,m),E="function"==typeof u?u():u;return y[Ee]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:E,incompleteFirstPass:!1,ssrId:h}}let uO=n=>null;function dO(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?hO(t,e,i,s):r.hasOwnProperty(i)&&hO(t,e,r[i],s)}return t}function hO(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function Bi(n,e,t,r,i,s,o,a){const c=jn(e,t);let h,u=e.inputs;!a&&null!=u&&(h=u[r])?(XC(n,t,h,r,i),$o(e)&&function NG(n,e){const t=li(e,n);16&t[Ye]||(t[Ye]|=64)}(t,e.index)):3&e.type&&(r=function OG(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(c,r,i))}function KC(n,e,t,r){if(cd()){const i=null===r?null:{"":-1},s=function BG(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(Pf(e,o.selectors,!1))if(r||(r=[]),os(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),ZC(n,e,a.length)}else r.unshift(o),ZC(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&fO(n,e,t,o,i,a),i&&function jG(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new k(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=Xs(t.mergedAttrs,t.attrs)}function fO(n,e,t,r,i,s){for(let u=0;u<r.length;u++)Cl(md(t,e),n,r[u].type);!function zG(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let u=0;u<r.length;u++){const h=r[u];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,c=kp(n,e,r.length,null);for(let u=0;u<r.length;u++){const h=r[u];t.mergedAttrs=Xs(t.mergedAttrs,h.hostAttrs),HG(n,t,e,c,h),$G(c,h,i),null!==h.contentQueries&&(t.flags|=4),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(t.flags|=64);const g=h.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function xG(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let c=null,u=null;for(let h=e.directiveStart;h<i;h++){const g=s[h],m=t?t.get(g):null,E=m?m.outputs:null;c=dO(g.inputs,h,c,m?m.inputs:null),u=dO(g.outputs,h,u,E);const I=null===c||null===o||qu(e)?null:WG(c,h,o);a.push(I)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}(n,t,s)}function pO(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function Tb(){return Ve.lFrame.currentDirectiveIndex}();try{Wo(s);for(let a=r;a<i;a++){const c=n.data[a],u=e[a];sp(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&UG(c,u)}}finally{Wo(-1),sp(o)}}function UG(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function ZC(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function $G(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;os(e)&&(t[""]=n)}}function HG(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=as(i.type)),o=new vl(s,os(i),$);n.blueprint[r]=o,t[r]=o,function FG(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function LG(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,kp(n,t,i.hostVars,Je),i)}function po(n,e,t,r,i,s){const o=jn(n,e);!function QC(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?Ae(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[$e],o,s,n.value,t,r,i)}function GG(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)gO(r,t,o[a++],o[a++],o[a++])}function gO(n,e,t,r,i){const s=wi(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{wi(s)}}function WG(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function mO(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function _O(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];ap(t[r]),o.contentQueries(2,e[s],s)}}}function dv(n,e){return n[il]?n[Qu][Fi]=e:n[il]=e,n[Qu]=e,e}function YC(n,e,t){ap(0);const r=wi(null);try{e(n,t)}finally{wi(r)}}function yO(n){return n[Ma]||(n[Ma]=[])}function vO(n){return n.cleanup||(n.cleanup=[])}function IO(n,e){const t=n[ns],r=t?t.get(fo,null):null;r&&r.handleError(e)}function XC(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];gO(n.data[o],e[o],r,a,i)}}function KG(n,e){const t=li(e,n),r=t[Ee];!function ZG(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[vn];null!==i&&null===t[Rs]&&(t[Rs]=NC(i,t[ns])),JC(r,t,t[bn])}function JC(n,e,t){lp(e);try{const r=n.viewQuery;null!==r&&YC(1,r,t);const i=n.template;null!==i&&cO(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&_O(n,e),n.staticViewQueries&&YC(2,n.viewQuery,t);const s=n.components;null!==s&&function QG(n,e){for(let t=0;t<e.length;t++)KG(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Ye]&=-5,up()}}let wO=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function pb(n,e,t){const r=Object.create(gb);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>G_(r),run:()=>{if(r.dirty=!1,r.hasRun&&!W_(r))return;r.hasRun=!0;const o=ed(r);try{r.cleanupFn(),r.cleanupFn=J_,r.fn(i)}finally{ul(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(t,u=>{this.all.has(u)&&this.queue.set(u,s)},i);let a;this.all.add(o),o.notify();const c=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(c),{destroy:c}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=de({token:n,providedIn:"root",factory:()=>new n})}return n})();function hv(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Xi(i,a):2==s&&(r=Xi(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Fp(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(Ot(s)),Br(s)&&bO(s,r);const o=t.type;if(8&o)Fp(n,e,t.child,r);else if(32&o){const a=rC(t,e);let c;for(;c=a();)r.push(c)}else if(16&o){const a=sx(e,t);if(Array.isArray(a))r.push(...a);else{const c=Tp(e[un]);Fp(c[Ee],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function bO(n,e){for(let t=Jn;t<n.length;t++){const r=n[t],i=r[Ee].firstChild;null!==i&&Fp(r[Ee],r,i,e)}n[ss]!==n[vn]&&e.push(n[ss])}function fv(n,e,t,r=!0){const i=e[Pa],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{CO(n,e,n.template,t)}catch(c){throw r&&IO(e,c),c}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function CO(n,e,t,r){const i=e[Ye];if(256!=(256&i)){e[Pa].effectManager?.flush(),lp(e);try{ry(e),function np(n){return Ve.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&cO(n,e,t,2,r);const o=3==(3&i);if(o){const u=n.preOrderCheckHooks;null!==u&&fd(e,u,null)}else{const u=n.preOrderHooks;null!==u&&ja(e,u,0,null),yl(e,0)}if(function JG(n){for(let e=WP(n);null!==e;e=KP(e)){if(!e[Lf])continue;const t=e[Na];for(let r=0;r<t.length;r++){Qf(t[r])}}}(e),TO(e,2),null!==n.contentQueries&&_O(n,e),o){const u=n.contentCheckHooks;null!==u&&fd(e,u)}else{const u=n.contentHooks;null!==u&&ja(e,u,1),yl(e,1)}!function CG(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=nO(e,Oa);try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)Wo(~s);else{const o=s,a=t[++i],c=t[++i];ip(a,o),r.dirty=!1;const u=ed(r);try{c(2,e[o])}finally{ul(r,u)}}}}finally{null===e[Oa]&&rO(e,Oa),Wo(-1)}}(n,e);const a=n.components;null!==a&&SO(e,a,0);const c=n.viewQuery;if(null!==c&&YC(2,c,r),o){const u=n.viewCheckHooks;null!==u&&fd(e,u)}else{const u=n.viewHooks;null!==u&&ja(e,u,2),yl(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Ye]&=-73,iy(e)}finally{up()}}}function TO(n,e){for(let t=WP(n);null!==t;t=KP(t))for(let r=Jn;r<t.length;r++)DO(t[r],e)}function e9(n,e,t){DO(li(e,n),t)}function DO(n,e){if(!function Zf(n){return 128==(128&n[Ye])}(n))return;const t=n[Ee],r=n[Ye];if(80&r&&0===e||1024&r||2===e)CO(t,n,t.template,n[bn]);else if(n[rl]>0){TO(n,1);const i=t.components;null!==i&&SO(n,i,1)}}function SO(n,e,t){for(let r=0;r<e.length;r++)e9(n,e[r],t)}class Lp{get rootNodes(){const e=this._lView,t=e[Ee];return Fp(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[bn]}set context(e){this._lView[bn]=e}get destroyed(){return 256==(256&this._lView[Ye])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[qt];if(Br(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(zy(e,r),Ga(t,r))}this._attachedToViewContainer=!1}sC(this._lView[Ee],this._lView)}onDestroy(e){sy(this._lView,e)}markForCheck(){Np(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ye]&=-129}reattach(){this._lView[Ye]|=128}detectChanges(){fv(this._lView[Ee],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new k(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function j4(n,e){Sp(n,e,e[$e],2,null,null)}(this._lView[Ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new k(902,!1);this._appRef=e}}class t9 extends Lp{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;fv(e[Ee],e,e[bn],!1)}checkNoChanges(){}get context(){return null}}class AO extends ov{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=gt(e);return new Vp(t,this.ngModule)}}function RO(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class r9{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Bu(r);const i=this.injector.get(e,LC,r);return i!==LC||t===LC?i:this.parentInjector.get(e,t,r)}}class Vp extends Ox{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=RO(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return RO(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function Nf(n){return n.map(O_).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof Ui?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new r9(e,s):e,a=o.get(Op,null);if(null===a)throw new k(407,!1);const g={rendererFactory:a,sanitizer:o.get(eG,null),effectManager:o.get(wO,null),afterRenderEventManager:o.get($C,null)},m=a.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",E=r?function DG(n,e,t,r){const s=r.get(Xx,!1)||t===si.ShadowDom,o=n.selectRootElement(e,s);return function SG(n){uO(n)}(o),o}(m,r,this.componentDef.encapsulation,o):$y(m,y,function n9(n){const e=n.toLowerCase();return"svg"===e?id:"math"===e?"math":null}(y)),P=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let S=null;null!==E&&(S=NC(E,o,!0));const F=WC(0,null,null,1,0,null,null,null,null,null,null),Y=uv(null,F,null,P,null,null,g,m,o,null,S);let he,Oe;lp(Y);try{const We=this.componentDef;let Ft,Ei=null;We.findHostDirectiveDefs?(Ft=[],Ei=new Map,We.findHostDirectiveDefs(We,Ft,Ei),Ft.push(We)):Ft=[We];const xi=function s9(n,e){const t=n[Ee],r=st;return n[r]=e,Bd(t,r,2,"#host",null)}(Y,E),Ww=function o9(n,e,t,r,i,s,o){const a=i[Ee];!function a9(n,e,t,r){for(const i of n)e.mergedAttrs=Xs(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(hv(e,e.mergedAttrs,!0),null!==t&&lx(r,t,e))}(r,n,e,o);let c=null;null!==e&&(c=NC(e,i[ns]));const u=s.rendererFactory.createRenderer(e,t);let h=16;t.signals?h=4096:t.onPush&&(h=64);const g=uv(i,lO(t),null,h,i[n.index],n,s,u,null,null,c);return a.firstCreatePass&&ZC(a,n,r.length-1),dv(i,g),i[n.index]=g}(xi,E,We,Ft,Y,g,m);Oe=sd(F,st),E&&function l9(n,e,t,r){if(r)zu(n,t,["ng-version",kx.full]);else{const{attrs:i,classes:s}=function N_(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Ur(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&zu(n,t,i),s&&s.length>0&&cx(n,t,s.join(" "))}}(m,We,E,r),void 0!==t&&function u9(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(Oe,this.ngContentSelectors,t),he=function c9(n,e,t,r,i,s){const o=On(),a=i[Ee],c=jn(o,i);fO(a,i,o,t,null,r);for(let h=0;h<t.length;h++)$r(Zo(i,a,o.directiveStart+h,o),i);pO(a,i,o),c&&$r(c,i);const u=Zo(i,a,o.directiveStart+o.componentOffset,o);if(n[bn]=i[bn]=u,null!==s)for(const h of s)h(u,e);return HC(a,o,n),u}(Ww,We,Ft,Ei,Y,[d9]),JC(F,Y,null)}finally{up()}return new i9(this.componentType,he,Fd(Oe,Y),Y,Oe)}}class i9 extends Kq{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new t9(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;XC(s[Ee],s,i,e,t),this.previousInputValues.set(e,t),Np(li(this._tNode.index,s))}}get injector(){return new ir(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function d9(){const n=On();hd(se()[Ee],n)}function Nt(n){let e=function MO(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(os(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new k(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=pv(n.inputs),o.inputTransforms=pv(n.inputTransforms),o.declaredInputs=pv(n.declaredInputs),o.outputs=pv(n.outputs);const a=i.hostBindings;a&&g9(n,a);const c=i.viewQuery,u=i.contentQueries;if(c&&f9(n,c),u&&p9(n,u),Yn(n.inputs,i.inputs),Yn(n.declaredInputs,i.declaredInputs),Yn(n.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Yn(o.inputTransforms,i.inputTransforms)),os(i)&&i.data.animation){const h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Nt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function h9(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Xs(i.hostAttrs,t=Xs(t,i.hostAttrs))}}(r)}function pv(n){return n===ki?{}:n===It?[]:n}function f9(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function p9(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function g9(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function NO(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(t[r]=i[2])}n.inputTransforms=t}function gv(n){return!!eT(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function eT(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function go(n,e,t){return n[e]=t}function zr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Hr(n,e,t,r){const i=se();return zr(i,Go(),e)&&(mt(),po(Qt(),i,n,e,t,r)),Hr}function $d(n,e,t,r){return zr(n,Go(),t)?e+Ae(t)+r:Je}function At(n,e,t,r,i,s,o,a){const c=se(),u=mt(),h=n+st,g=u.firstCreatePass?function B9(n,e,t,r,i,s,o,a,c){const u=e.consts,h=Bd(e,n,4,o||null,so(u,a));KC(e,t,h,so(u,c)),hd(e,h);const g=h.tView=WC(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return null!==e.queries&&(e.queries.template(e,h),g.queries=e.queries.embeddedTView(h)),h}(h,u,c,e,t,r,i,s,o):u.data[h];bi(g,!1);const m=WO(u,c,g,n);dd()&&qy(u,c,m,g),$r(m,c),dv(c,c[h]=mO(m,c,m,g)),Xu(g)&&qC(u,c,g),null!=o&&GC(c,g,a)}let WO=function KO(n,e,t,r){return ao(!0),e[$e].createComment("")};function Ya(n){return function Ba(n,e){return n[e]}(function ld(){return Ve.lFrame.contextLView}(),st+n)}function we(n,e,t){const r=se();return zr(r,Go(),e)&&Bi(mt(),Qt(),r,n,e,r[$e],t,!1),we}function oT(n,e,t,r,i){const o=i?"class":"style";XC(n,t,e.inputs[o],o,r)}function re(n,e,t,r){const i=se(),s=mt(),o=st+n,a=i[$e],c=s.firstCreatePass?function H9(n,e,t,r,i,s){const o=e.consts,c=Bd(e,n,2,r,so(o,i));return KC(e,t,c,so(o,s)),null!==c.attrs&&hv(c,c.attrs,!1),null!==c.mergedAttrs&&hv(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,i,e,t,r):s.data[o],u=ZO(s,i,c,a,e,n);i[o]=u;const h=Xu(c);return bi(c,!0),lx(a,u,c),32!=(32&c.flags)&&dd()&&qy(s,i,u,c),0===function Eb(){return Ve.lFrame.elementDepthCount}()&&$r(u,i),function Ib(){Ve.lFrame.elementDepthCount++}(),h&&(qC(s,i,c),HC(s,c,i)),null!==r&&GC(i,c),re}function te(){let n=On();ep()?ml():(n=n.parent,bi(n,!1));const e=n;(function wb(n){return Ve.skipHydrationRootTNode===n})(e)&&function bb(){Ve.skipHydrationRootTNode=null}(),function Xf(){Ve.lFrame.elementDepthCount--}();const t=mt();return t.firstCreatePass&&(hd(t,n),cl(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function vy(n){return 0!=(8&n.flags)}(e)&&oT(t,e,se(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function gd(n){return 0!=(16&n.flags)}(e)&&oT(t,e,se(),e.stylesWithoutHost,!1),te}function qr(n,e,t,r){return re(n,e,t,r),te(),qr}let ZO=(n,e,t,r,i,s)=>(ao(!0),$y(r,i,function gy(){return Ve.lFrame.currentNamespace}()));function aT(n,e,t){const r=se(),i=mt(),s=n+st,o=i.firstCreatePass?function W9(n,e,t,r,i){const s=e.consts,o=so(s,r),a=Bd(e,n,8,"ng-container",o);return null!==o&&hv(a,o,!0),KC(e,t,a,so(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,t):i.data[s];bi(o,!0);const a=QO(i,r,o,n);return r[s]=a,dd()&&qy(i,r,a,o),$r(a,r),Xu(o)&&(qC(i,r,o),HC(i,o,r)),null!=t&&GC(r,o),aT}function cT(){let n=On();const e=mt();return ep()?ml():(n=n.parent,bi(n,!1)),e.firstCreatePass&&(hd(e,n),cl(n)&&e.queries.elementEnd(n)),cT}function zp(n,e,t){return aT(n,e,t),cT(),zp}let QO=(n,e,t,r)=>(ao(!0),iC(e[$e],""));function ps(){return se()}function Hp(n){return!!n&&"function"==typeof n.then}function YO(n){return!!n&&"function"==typeof n.subscribe}function ze(n,e,t,r){const i=se(),s=mt(),o=On();return function JO(n,e,t,r,i,s,o){const a=Xu(r),u=n.firstCreatePass&&vO(n),h=e[bn],g=yO(e);let m=!0;if(3&r.type||o){const I=jn(r,e),b=o?o(I):I,P=g.length,S=o?Y=>o(Ot(Y[r.index])):r.index;let F=null;if(!o&&a&&(F=function Q9(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[Ma],c=i[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==F)(F.__ngLastListenerFn__||F).__ngNextListenerFn__=s,F.__ngLastListenerFn__=s,m=!1;else{s=tN(r,e,h,s,!1);const Y=t.listen(b,i,s);g.push(s,Y),u&&u.push(i,S,P,P+1)}}else s=tN(r,e,h,s,!1);const y=r.outputs;let E;if(m&&null!==y&&(E=y[i])){const I=E.length;if(I)for(let b=0;b<I;b+=2){const he=e[E[b]][E[b+1]].subscribe(s),Oe=g.length;g.push(s,he),u&&u.push(i,r.index,Oe,-(Oe+1))}}}(s,i,i[$e],o,n,e,r),ze}function eN(n,e,t,r){try{return cs(6,e,t),!1!==t(r)}catch(i){return IO(n,i),!1}finally{cs(7,e,t)}}function tN(n,e,t,r,i){return function s(o){if(o===Function)return r;Np(n.componentOffset>-1?li(n.index,e):e);let c=eN(e,t,r,o),u=s.__ngNextListenerFn__;for(;u;)c=eN(e,t,u,o)&&c,u=u.__ngNextListenerFn__;return i&&!1===c&&o.preventDefault(),c}}function ot(n=1){return function Sb(n){return(Ve.lFrame.contextLView=function Ab(n,e){for(;n>0;)e=e[xa],n--;return e}(n,Ve.lFrame.contextLView))[bn]}(n)}function qp(n,e,t){return lT(n,"",e,"",t),qp}function lT(n,e,t,r,i){const s=se(),o=$d(s,e,t,r);return o!==Je&&Bi(mt(),Qt(),s,n,o,s[$e],i,!1),lT}function Ev(n,e){return n<<17|e<<2}function Xa(n){return n>>17&32767}function uT(n){return 2|n}function Fl(n){return(131068&n)>>2}function dT(n,e){return-131069&n|e<<2}function hT(n){return 1|n}function uN(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?Xa(s):Fl(s),c=!1;for(;0!==a&&(!1===c||o);){const h=n[a+1];sW(n[a],e)&&(c=!0,n[a+1]=r?hT(h):uT(h)),a=r?Xa(h):Fl(h)}c&&(n[t+1]=r?uT(s):hT(s))}function sW(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Wa(n,e)>=0}function Gp(n,e,t){return Ns(n,e,t,!1),Gp}function Ll(n,e){return Ns(n,e,null,!0),Ll}function Ns(n,e,t,r){const i=se(),s=mt(),o=function ls(n){const e=Ve.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function yN(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[Cr()],o=function _N(n,e){return e>=n.expandoStartIndex}(n,t);(function wN(n,e){return 0!=(n.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function pW(n,e,t,r){const i=function op(n){const e=Ve.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Wp(t=fT(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=fT(i,n,e,t,r),null===s){let c=function gW(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Fl(r))return n[Xa(r)]}(n,e,r);void 0!==c&&Array.isArray(c)&&(c=fT(null,n,e,c[1],r),c=Wp(c,e.attrs,r),function mW(n,e,t,r){n[Xa(t?e.classBindings:e.styleBindings)]=r}(n,e,r,c))}else s=function _W(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Wp(r,n[s].hostAttrs,t);return Wp(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function rW(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Xa(o),c=Fl(o);n[r]=t;let h,u=!1;if(Array.isArray(t)?(h=t[1],(null===h||Wa(t,h)>0)&&(u=!0)):h=t,i)if(0!==c){const m=Xa(n[a+1]);n[r+1]=Ev(m,a),0!==m&&(n[m+1]=dT(n[m+1],r)),n[a+1]=function tW(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=Ev(a,0),0!==a&&(n[a+1]=dT(n[a+1],r)),a=r;else n[r+1]=Ev(c,0),0===a?a=r:n[c+1]=dT(n[c+1],r),c=r;u&&(n[r+1]=uT(n[r+1])),uN(n,h,r,!0),uN(n,h,r,!1),function iW(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Wa(s,e)>=0&&(t[r+1]=hT(t[r+1]))}(e,h,n,r,s),o=Ev(a,c),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==Je&&zr(i,o,e)&&function EN(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const c=n.data,u=c[a+1],h=function nW(n){return 1==(1&n)}(u)?IN(c,e,t,i,Fl(u),o):void 0;Iv(h)||(Iv(s)||function eW(n){return 2==(2&n)}(u)&&(s=IN(c,null,t,i,a,o)),function Y4(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:Za.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Za.Important),n.setStyle(t,r,i,s))}}(r,o,Ua(Cr(),t),i,s))}(s,s.data[Cr()],i,i[$e],n,i[o+1]=function IW(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Vt(Vi(n)))),n}(e,t),r,o)}function fT(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=Wp(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Wp(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),di(n,o,!!t||e[++s]))}return void 0===n?null:n}function IN(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const c=n[i],u=Array.isArray(c),h=u?c[1]:c,g=null===h;let m=t[i+1];m===Je&&(m=g?It:void 0);let y=g?vp(m,r):h===r?m:void 0;if(u&&!Iv(y)&&(y=vp(c,r)),Iv(y)&&(a=y,o))return a;const E=n[i+1];i=o?Xa(E):Fl(E)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=vp(c,r))}return a}function Iv(n){return void 0!==n}function pe(n,e=""){const t=se(),r=mt(),i=n+st,s=r.firstCreatePass?Bd(r,i,1,e,null):r.data[i],o=bN(r,t,s,e,n);t[i]=o,dd()&&qy(r,t,o,s),bi(s,!1)}let bN=(n,e,t,r,i)=>(ao(!0),function jy(n,e){return n.createText(e)}(e[$e],r));function yo(n){return Di("",n,""),yo}function Di(n,e,t){const r=se(),i=$d(r,n,e,t);return i!==Je&&function ea(n,e,t){const r=Ua(e,n);!function QP(n,e,t){n.setValue(e,t)}(n[$e],r,t)}(r,Cr(),i),Di}const Xd="en-US";let qN=Xd;function mT(n,e,t,r,i){if(n=M(n),Array.isArray(n))for(let s=0;s<n.length;s++)mT(n[s],e,t,r,i);else{const s=mt(),o=se(),a=On();let c=Nl(n)?n:M(n.provide);const u=Ax(n),h=1048575&a.providerIndexes,g=a.directiveStart,m=a.providerIndexes>>20;if(Nl(n)||!n.multi){const y=new vl(u,i,$),E=yT(c,e,i?h:h+m,g);-1===E?(Cl(md(a,o),s,c),_T(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),o.push(y)):(t[E]=y,o[E]=y)}else{const y=yT(c,e,h+m,g),E=yT(c,e,h,h+m),b=E>=0&&t[E];if(i&&!b||!i&&!(y>=0&&t[y])){Cl(md(a,o),s,c);const P=function $5(n,e,t,r,i){const s=new vl(n,t,$);return s.multi=[],s.index=e,s.componentProviders=0,mk(s,i,r&&!t),s}(i?j5:B5,t.length,i,r,u);!i&&b&&(t[E].providerFactory=P),_T(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(P),o.push(P)}else _T(s,n,y>-1?y:E,mk(t[i?E:y],u,!i&&r));!i&&r&&b&&t[E].componentProviders++}}}function _T(n,e,t,r){const i=Nl(e),s=function Pq(n){return!!n.useClass}(e);if(i||s){const c=(s?M(e.useClass):e).prototype.ngOnDestroy;if(c){const u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const h=u.indexOf(t);-1===h?u.push(t,[r,c]):u[h+1].push(r,c)}else u.push(t,c)}}}function mk(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function yT(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function B5(n,e,t,r){return vT(this.multi,[])}function j5(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Zo(t,t[Ee],this.providerFactory.index,r);s=a.slice(0,o),vT(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],vT(i,s);return s}function vT(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function kt(n,e=[]){return t=>{t.providersResolver=(r,i)=>function U5(n,e,t){const r=mt();if(r.firstCreatePass){const i=os(n);mT(t,r.data,r.blueprint,i,!0),mT(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class Ul{}class _k{}class ET extends Ul{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new AO(this);const i=ai(e);this._bootstrapComponents=Jo(i.bootstrap),this._r3Injector=Bx(e,t,[{provide:Ul,useValue:this},{provide:ov,useValue:this.componentFactoryResolver},...r],Vt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class IT extends _k{constructor(e){super(),this.moduleType=e}create(e){return new ET(this.moduleType,e,[])}}class yk extends Ul{constructor(e){super(),this.componentFactoryResolver=new AO(this),this.instance=null;const t=new xd([...e.providers,{provide:Ul,useValue:this},{provide:ov,useValue:this.componentFactoryResolver}],e.parent||Jy(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function wT(n,e,t=null){return new yk({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let q5=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=Cx(0,t.type),i=r.length>0?wT([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=de({token:n,providedIn:"environment",factory:()=>new n(N(Ui))})}return n})();function vk(n){n.getStandaloneInjector=e=>e.get(q5).getOrCreateStandaloneInjector(n)}function Jp(n,e,t){const r=rr()+n,i=se();return i[r]===Je?go(i,r,t?e.call(t):e()):function Up(n,e){return n[e]}(i,r)}function ta(n,e,t,r){return function Dk(n,e,t,r,i,s){const o=e+t;return zr(n,o,i)?go(n,o+1,s?r.call(s,i):r(i)):function eg(n,e){const t=n[e];return t===Je?void 0:t}(n,o+1)}(se(),rr(),n,e,t,r)}function g6(){return this._results[Symbol.iterator]()}class CT{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new bt)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=CT.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=g6)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=function ui(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function Dl(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function _6(n,e,t,r=!0){const i=e[Ee];if(function z4(n,e,t,r){const i=Jn+r,s=t.length;r>0&&(t[i-1][Fi]=e),r<s-Jn?(e[Fi]=t[i],wd(t,Jn+r,e)):(t.push(e),e[Fi]=null),e[qt]=t;const o=e[sl];null!==o&&t!==o&&function H4(n,e){const t=n[Na];e[un]!==e[qt][qt][un]&&(n[Lf]=!0),null===t?n[Na]=[e]:t.push(e)}(o,e);const a=e[rs];null!==a&&a.insertView(n),e[Ye]|=128}(i,e,n,t),r){const s=lC(t,n),o=e[$e],a=Hy(o,n[ss]);null!==a&&function B4(n,e,t,r,i,s){r[vn]=i,r[Bn]=e,Sp(n,r,t,1,i,s)}(i,n[Bn],o,e,a,s)}}let Fs=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=E6}return n})();const y6=Fs,v6=class extends y6{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function m6(n,e,t,r){const i=e.tView,a=uv(n,i,t,4096&n[Ye]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[sl]=n[e.index];const u=n[rs];return null!==u&&(a[rs]=u.createEmbeddedView(i)),JC(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new Lp(i)}};function E6(){return Dv(On(),se())}function Dv(n,e){return 4&n.type?new v6(e,n,Fd(n,e)):null}let gs=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=D6}return n})();function D6(){return Lk(On(),se())}const S6=gs,kk=class extends S6{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Fd(this._hostTNode,this._hostLView)}get injector(){return new ir(this._hostTNode,this._hostLView)}get parentInjector(){const e=_d(this._hostTNode,this._hostLView);if(pp(e)){const t=Il(e,this._hostLView),r=El(e);return new ir(t[Ee].data[r+8],t)}return new ir(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=Fk(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Jn}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,s){const o=e&&!function sr(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const I=t||{};a=I.index,r=I.injector,i=I.projectableNodes,s=I.environmentInjector||I.ngModuleRef}const c=o?e:new Vp(gt(e)),u=r||this.parentInjector;if(!s&&null==c.ngModule){const b=(o?u:this.parentInjector).get(Ui,null);b&&(s=b)}gt(c.componentType??{});const y=c.create(u,i,null,s);return this.insertImpl(y.hostView,a,false),y}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function ny(n){return Br(n[qt])}(i)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const u=i[qt],h=new kk(u,u[Bn],u[qt]);h.detach(h.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return _6(a,i,o,!r),e.attachToViewContainerRef(),wd(TT(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=Fk(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=zy(this._lContainer,t);r&&(Ga(TT(this._lContainer),t),sC(r[Ee],r))}detach(e){const t=this._adjustIndex(e,-1),r=zy(this._lContainer,t);return r&&null!=Ga(TT(this._lContainer),t)?new Lp(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Fk(n){return n[8]}function TT(n){return n[8]||(n[8]=[])}function Lk(n,e){let t;const r=e[n.index];return Br(r)?t=r:(t=mO(r,e,null,n),e[n.index]=t,dv(e,t)),Vk(t,e,n,r),new kk(t,n,e)}let Vk=function Uk(n,e,t,r){if(n[ss])return;let i;i=8&t.type?Ot(r):function A6(n,e){const t=n[$e],r=t.createComment(""),i=jn(e,n);return Pl(t,Hy(t,i),r,function K4(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[ss]=i};class DT{constructor(e){this.queryList=e,this.matches=null}clone(){return new DT(this.queryList)}setDirty(){this.queryList.setDirty()}}class ST{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new ST(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==Hk(e,t).matches&&this.queries[t].setDirty()}}class Bk{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class AT{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new AT(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class RT{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new RT(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,P6(t,s)),this.matchTNodeWithReadOption(e,t,vd(t,e,s,!1,!1))}else r===Fs?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,vd(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===gr||i===gs||i===Fs&&4&t.type)this.addMatch(t.index,-2);else{const s=vd(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function P6(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function O6(n,e,t,r){return-1===t?function x6(n,e){return 11&n.type?Fd(n,e):4&n.type?Dv(n,e):null}(e,n):-2===t?function N6(n,e,t){return t===gr?Fd(e,n):t===Fs?Dv(e,n):t===gs?Lk(e,n):void 0}(n,e,r):Zo(n,n[Ee],t,e)}function jk(n,e,t,r){const i=e[rs].queries[r];if(null===i.matches){const s=n.data,o=t.matches,a=[];for(let c=0;c<o.length;c+=2){const u=o[c];a.push(u<0?null:O6(e,s[u],o[c+1],t.metadata.read))}i.matches=a}return i.matches}function MT(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=jk(n,e,i,t);for(let a=0;a<s.length;a+=2){const c=s[a];if(c>0)r.push(o[a/2]);else{const u=s[a+1],h=e[-c];for(let g=Jn;g<h.length;g++){const m=h[g];m[sl]===m[qt]&&MT(m[Ee],m,u,r)}if(null!==h[Na]){const g=h[Na];for(let m=0;m<g.length;m++){const y=g[m];MT(y[Ee],y,u,r)}}}}}return r}function Bl(n){const e=se(),t=mt(),r=ud();ap(r+1);const i=Hk(t,r);if(n.dirty&&function vb(n){return 4==(4&n[Ye])}(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const s=i.crossesNgTemplate?MT(t,e,r,[]):jk(t,e,i,r);n.reset(s,Xq),n.notifyOnChanges()}return!0}return!1}function PT(n,e,t){const r=mt();r.firstCreatePass&&(zk(r,new Bk(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),$k(r,se(),e)}function jl(){return function k6(n,e){return n[rs].queries[e].queryList}(se(),ud())}function $k(n,e,t){const r=new CT(4==(4&t));(function MG(n,e,t,r){const i=yO(e);i.push(t),n.firstCreatePass&&vO(n).push(r,i.length-1)})(n,e,r,r.destroy),null===e[rs]&&(e[rs]=new ST),e[rs].queries.push(new DT(r))}function zk(n,e,t){null===n.queries&&(n.queries=new AT),n.queries.track(new RT(e,t))}function Hk(n,e){return n.queries.getByIndex(e)}function rg(n,e){return Dv(n,e)}const LT=new B("Application Initializer");let VT=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=le(LT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(Hp(s))t.push(s);else if(YO(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),c1=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const vo=new B("LocaleId",{providedIn:"root",factory:()=>le(vo,ht.Optional|ht.SkipSelf)||function r8(){return typeof $localize<"u"&&$localize.locale||Xd}()});let Rv=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new x(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class o8{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let l1=(()=>{class n{compileModuleSync(t){return new IT(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=Jo(ai(t).declarations).reduce((o,a)=>{const c=gt(a);return c&&o.push(new Vp(c)),o},[]);return new o8(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const f1=new B(""),Pv=new B("");let zT,jT=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,zT||(function A8(n){zT=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ft.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||n)(N(ft),N($T),N(Pv))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})(),$T=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return zT?.findTestabilityInTree(this,t,r)??null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Ja=null;const p1=new B("AllowMultipleToken"),HT=new B("PlatformDestroyListeners"),qT=new B("appBootstrapListener");class m1{constructor(e,t){this.name=e,this.token=t}}function y1(n,e,t=[]){const r=`Platform: ${e}`,i=new B(r);return(s=[])=>{let o=GT();if(!o||o.injector.get(p1,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function P8(n){if(Ja&&!Ja.get(p1,!1))throw new k(400,!1);(function g1(){!function Va(n){Z_=n}(()=>{throw new k(600,!1)})})(),Ja=n;const e=n.get(E1);(function _1(n){n.get(Rx,null)?.forEach(t=>t())})(n)}(function v1(n=[],e){return Ti.create({name:e,providers:[{provide:IC,useValue:"platform"},{provide:HT,useValue:new Set([()=>Ja=null])},...n]})}(a,r))}return function O8(n){const e=GT();if(!e)throw new k(401,!1);return e}()}}function GT(){return Ja?.get(E1)??null}let E1=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function N8(n="zone.js",e){return"noop"===n?new fG:"zone.js"===n?new ft(e):n}(r?.ngZone,function I1(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function H5(n,e,t){return new ET(n,e,t)}(t.moduleType,this.injector,function D1(n){return[{provide:ft,useFactory:n},{provide:Ol,multi:!0,useFactory:()=>{const e=le(F8,{optional:!0});return()=>e.initialize()}},{provide:T1,useFactory:k8},{provide:qx,useFactory:Gx}]}(()=>i)),o=s.injector.get(fo,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:c=>{o.handleError(c)}});s.onDestroy(()=>{xv(this._modules,s),a.unsubscribe()})}),function w1(n,e,t){try{const r=t();return Hp(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(VT);return a.runInitializers(),a.donePromise.then(()=>(function GN(n){Lr(n,"Expected localeId to be defined"),"string"==typeof n&&(qN=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(vo,Xd)||Xd),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=b1({},r);return function R8(n,e,t){const r=new IT(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get($l);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new k(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new k(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(HT,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||n)(N(Ti))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function b1(n,e){return Array.isArray(e)?e.reduce(b1,n):{...n,...e}}let $l=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=le(T1),this.zoneIsStable=le(qx),this.componentTypes=[],this.components=[],this.isStable=le(Rv).hasPendingTasks.pipe(_t(t=>t?W(!1):this.zoneIsStable),Zt(),je()),this._injector=le(Ui)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof Ox;if(!this._injector.get(VT).done)throw!i&&function Js(n){const e=gt(n)||xn(n)||br(n);return null!==e&&e.standalone}(t),new k(405,!1);let o;o=i?t:this._injector.get(ov).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function M8(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Ul),u=o.create(Ti.NULL,[],r||o.selector,a),h=u.location.nativeElement,g=u.injector.get(f1,null);return g?.registerApplication(h),u.onDestroy(()=>{this.detachView(u.hostView),xv(this.components,u),g?.unregisterApplication(h)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new k(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;xv(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(qT,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>xv(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new k(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function xv(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const T1=new B("",{providedIn:"root",factory:()=>le(fo).handleError.bind(void 0)});function k8(){const n=le(ft),e=le(fo);return t=>n.runOutsideAngular(()=>e.handleError(t))}let F8=(()=>{class n{constructor(){this.zone=le(ft),this.applicationRef=le($l)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let zl=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=V8}return n})();function V8(n){return function U8(n,e,t){if($o(n)&&!t){const r=li(n.index,e);return new Lp(r,r)}return 47&n.type?new Lp(e[un],e):null}(On(),se(),16==(16&n))}class M1{constructor(){}supports(e){return gv(e)}create(e){return new q8(e)}}const H8=(n,e)=>e;class q8{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||H8}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<x1(r,i,s)?t:r,a=x1(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const u=a-i,h=c-i;if(u!=h){for(let m=0;m<u;m++){const y=m<s.length?s[m]:s[m]=0,E=y+m;h<=E&&E<u&&(s[m]=y+1)}s[o.previousIndex]=h-u}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!gv(e))throw new k(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function w9(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new G8(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new P1),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new P1),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class G8{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class W8{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class P1{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new W8,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function x1(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class O1{constructor(){}supports(e){return e instanceof Map||eT(e)}create(){return new K8}}class K8{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||eT(e)))throw new k(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new Z8(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class Z8{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function N1(){return new Fv([new M1])}let Fv=(()=>{class n{static#e=this.\u0275prov=de({token:n,providedIn:"root",factory:N1});constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||N1()),deps:[[n,new Td,new xs]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new k(901,!1)}}return n})();function k1(){return new og([new O1])}let og=(()=>{class n{static#e=this.\u0275prov=de({token:n,providedIn:"root",factory:k1});constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||k1()),deps:[[n,new Td,new xs]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new k(901,!1)}}return n})();const X8=y1(null,"core",[]);let J8=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(r){return new(r||n)(N($l))};static#t=this.\u0275mod=Bt({type:n});static#n=this.\u0275inj=Ut({})}return n})();function th(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let XT=null;function ec(){return XT}class fK{}const hn=new B("DocumentToken");let JT=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:function(){return le(gK)},providedIn:"platform"})}return n})();const pK=new B("Location Initialized");let gK=(()=>{class n extends JT{constructor(){super(),this._doc=le(hn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ec().getBaseHref(this._doc)}onPopState(t){const r=ec().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=ec().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function eD(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function H1(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function na(n){return n&&"?"!==n[0]?"?"+n:n}let ql=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:function(){return le(G1)},providedIn:"root"})}return n})();const q1=new B("appBaseHref");let G1=(()=>{class n extends ql{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??le(hn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return eD(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+na(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+na(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+na(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(N(JT),N(q1,8))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),mK=(()=>{class n extends ql{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=eD(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+na(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+na(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(N(JT),N(q1,8))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})(),ag=(()=>{class n{constructor(t){this._subject=new bt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function vK(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(H1(W1(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+na(r))}normalize(t){return n.stripTrailingSlash(function yK(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,W1(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+na(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+na(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=na;static#t=this.joinWithSlash=eD;static#n=this.stripTrailingSlash=H1;static#r=this.\u0275fac=function(r){return new(r||n)(N(ql))};static#i=this.\u0275prov=de({token:n,factory:function(){return function _K(){return new ag(N(ql))}()},providedIn:"root"})}return n})();function W1(n){return n.replace(/\/index.html$/,"")}function nF(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}const uD=/\s+/,rF=[];let Kv=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this.initialClasses=rF,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(uD):rF}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(uD):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(uD).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||n)($(Fv),$(og),$(gr),$(Xo))};static#t=this.\u0275dir=ke({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class i7{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ug=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new i7(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),sF(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{sF(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)($(gs),$(Fs),$(Fv))};static#t=this.\u0275dir=ke({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function sF(n,e){n.context.$implicit=e.item}let tc=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new s7,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){oF("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){oF("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)($(gs),$(Fs))};static#t=this.\u0275dir=ke({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class s7{constructor(){this.$implicit=null,this.ngIf=null}}function oF(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Vt(e)}'.`)}let cF=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:i,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=r.createEmbeddedView(i,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}static#e=this.\u0275fac=function(r){return new(r||n)($(gs))};static#t=this.\u0275dir=ke({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[jr]})}return n})(),uF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Bt({type:n});static#n=this.\u0275inj=Ut({})}return n})();const dF="browser";function Zv(n){return"server"===n}let F7=(()=>{class n{static#e=this.\u0275prov=de({token:n,providedIn:"root",factory:()=>new L7(N(hn),window)})}return n})();class L7{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function V7(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class hF{}class aZ extends fK{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class _D extends aZ{static makeCurrent(){!function hK(n){XT||(XT=n)}(new _D)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function cZ(){return hg=hg||document.querySelector("base"),hg?hg.getAttribute("href"):null}();return null==t?null:function lZ(n){Xv=Xv||document.createElement("a"),Xv.setAttribute("href",n);const e=Xv.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){hg=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return nF(document.cookie,e)}}let Xv,hg=null,dZ=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();const yD=new B("EventManagerPlugins");let _F=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new k(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(N(yD),N(ft))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();class yF{constructor(e){this._doc=e}}const vD="ng-app-id";let vF=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Zv(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${vD}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(vD),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(vD,this.appId),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(N(hn),N(ev),N(DC,8),N(Os))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();const ED={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ID=/%COMP%/g,gZ=new B("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function IF(n,e){return e.map(t=>t.replace(ID,n))}let wD=(()=>{class n{constructor(t,r,i,s,o,a,c,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Zv(a),this.defaultRenderer=new bD(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===si.ShadowDom&&(r={...r,encapsulation:si.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof bF?i.applyToHost(t):i instanceof CD&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case si.Emulated:s=new bF(c,u,r,this.appId,h,o,a,g);break;case si.ShadowDom:return new vZ(c,u,t,r,o,a,this.nonce,g);default:s=new CD(c,u,r,h,o,a,g)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(N(_F),N(vF),N(ev),N(gZ),N(hn),N(Os),N(ft),N(DC))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();class bD{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(ED[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(wF(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(wF(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new k(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=ED[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ED[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Za.DashCase|Za.Important)?e.style.setProperty(t,r,i&Za.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Za.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=ec().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function wF(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class vZ extends bD{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=IF(i.id,i.styles);for(const h of u){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=h,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class CD extends bD{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?IF(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class bF extends CD{constructor(e,t,r,i,s,o,a,c){const u=i+"-"+r.id;super(e,t,r,s,o,a,c,u),this.contentAttr=function mZ(n){return"_ngcontent-%COMP%".replace(ID,n)}(u),this.hostAttr=function _Z(n){return"_nghost-%COMP%".replace(ID,n)}(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let EZ=(()=>{class n extends yF{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(N(hn))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();const CF=["alt","control","meta","shift"],IZ={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wZ={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let bZ=(()=>{class n extends yF{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ec().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),CF.forEach(u=>{const h=r.indexOf(u);h>-1&&(r.splice(h,1),o+=u+".")}),o+=s,0!=r.length||0===s.length)return null;const c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=IZ[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),CF.forEach(o=>{o!==i&&(0,wZ[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(N(hn))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();const DF=[{provide:Os,useValue:dF},{provide:Rx,useValue:function CZ(){_D.makeCurrent()},multi:!0},{provide:hn,useFactory:function DZ(){return function nq(n){hC=n}(document),document},deps:[]}],SZ=y1(X8,"browser",DF),AZ=new B(""),SF=[{provide:Pv,useClass:class uZ{addToWindow(e){Mt.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new k(5103,!1);return s},Mt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Mt.getAllAngularRootElements=()=>e.getAllRootElements(),Mt.frameworkStabilizers||(Mt.frameworkStabilizers=[]),Mt.frameworkStabilizers.push(r=>{const i=Mt.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(c){o=o||c,s--,0==s&&r(o)};i.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?ec().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:f1,useClass:jT,deps:[ft,$T,Pv]},{provide:jT,useClass:jT,deps:[ft,$T,Pv]}],AF=[{provide:IC,useValue:"root"},{provide:fo,useFactory:function TZ(){return new fo},deps:[]},{provide:yD,useClass:EZ,multi:!0,deps:[hn,ft,Os]},{provide:yD,useClass:bZ,multi:!0,deps:[hn]},wD,vF,_F,{provide:Op,useExisting:wD},{provide:hF,useClass:dZ,deps:[]},[]];let RF=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:ev,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(N(AZ,12))};static#t=this.\u0275mod=Bt({type:n});static#n=this.\u0275inj=Ut({providers:[...AF,...SF],imports:[uF,J8]})}return n})(),MF=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(N(hn))};static#t=this.\u0275prov=de({token:n,factory:function(r){let i=null;return i=r?new r:function MZ(){return new MF(N(hn))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;let OF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:function(r){let i=null;return i=r?new(r||n):N(NF),i},providedIn:"root"})}return n})(),NF=(()=>{class n extends OF{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case hs.NONE:return r;case hs.HTML:return ho(r,"HTML")?Vi(r):vx(this._doc,String(r)).toString();case hs.STYLE:return ho(r,"Style")?Vi(r):r;case hs.SCRIPT:if(ho(r,"Script"))return Vi(r);throw new k(5200,!1);case hs.URL:return ho(r,"URL")?Vi(r):Zy(String(r));case hs.RESOURCE_URL:if(ho(r,"ResourceURL"))return Vi(r);throw new k(5201,!1);default:throw new k(5202,!1)}}bypassSecurityTrustHtml(t){return function lq(n){return new rq(n)}(t)}bypassSecurityTrustStyle(t){return function uq(n){return new iq(n)}(t)}bypassSecurityTrustScript(t){return function dq(n){return new sq(n)}(t)}bypassSecurityTrustUrl(t){return function hq(n){return new oq(n)}(t)}bypassSecurityTrustResourceUrl(t){return function fq(n){return new aq(n)}(t)}static#e=this.\u0275fac=function(r){return new(r||n)(N(hn))};static#t=this.\u0275prov=de({token:n,factory:function(r){let i=null;return i=r?new r:function NZ(n){return new NF(n.get(hn))}(N(Ti)),i},providedIn:"root"})}return n})();function fg(n,e=0){return function kZ(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function DD(n){return Array.isArray(n)?n:[n]}function Gr(n){return n instanceof gr?n.nativeElement:n}const{isArray:FZ}=Array;function SD(n){return ve(e=>function LZ(n,e){return FZ(e)?n(...e):n(e)}(n,e))}class HZ extends at{constructor(e,t){super()}schedule(e,t=0){return this}}const Jv={setInterval(n,e,...t){const{delegate:r}=Jv;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Jv;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class eE extends HZ{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Jv.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&Jv.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Be(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const pg={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=pg;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(s=>{t=void 0,n(s)});return new at(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=pg;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=pg;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0},RD={now:()=>(RD.delegate||Date).now(),delegate:void 0};class gg{constructor(e,t=gg.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}gg.now=RD.now;class tE extends gg{constructor(e,t=gg.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const LF=new class GZ extends tE{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class qZ extends eE{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=pg.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:s}=e;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(pg.cancelAnimationFrame(t),e._scheduled=void 0)}});let MD,WZ=1;const nE={};function VF(n){return n in nE&&(delete nE[n],!0)}const KZ={setImmediate(n){const e=WZ++;return nE[e]=!0,MD||(MD=Promise.resolve()),MD.then(()=>VF(e)&&n()),e},clearImmediate(n){VF(n)}},{setImmediate:ZZ,clearImmediate:QZ}=KZ,rE={setImmediate(...n){const{delegate:e}=rE;return(e?.setImmediate||ZZ)(...n)},clearImmediate(n){const{delegate:e}=rE;return(e?.clearImmediate||QZ)(n)},delegate:void 0},rh=(new class XZ extends tE{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class YZ extends eE{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=rE.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:s}=e;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(rE.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))}}),new tE(eE)),eQ=rh;function UF(n=0,e,t=eQ){let r=-1;return null!=e&&(ni(e)?t=e:r=e),new Ge(i=>{let s=function nQ(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function Dr(n,e){return H((t,r)=>{let i=0;t.subscribe(fe(r,s=>n.call(e,s,i++)&&r.next(s)))})}let PD;try{PD=typeof Intl<"u"&&Intl.v8BreakIterator}catch{PD=!1}let mg,xD,iE=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function k7(n){return n===dF}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!PD)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(r){return new(r||n)(N(Os))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Gl(n){return function rQ(){if(null==mg&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>mg=!0}))}finally{mg=mg||!1}return mg}()?n:!!n.capture}function $F(n){if(function iQ(){if(null==xD){const n=typeof document<"u"?document.head:null;xD=!(!n||!n.createShadowRoot&&!n.attachShadow)}return xD}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function _g(n){return n.composedPath?n.composedPath()[0]:n.target}let lQ=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new V,this._changeListener=s=>{this._change.next(s)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(function BF(n,e=rh){return function tQ(n){return H((e,t)=>{let r=!1,i=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,r){r=!1;const u=i;i=null,t.next(u)}o&&t.complete()},c=()=>{s=null,o&&t.complete()};e.subscribe(fe(t,u=>{r=!0,i=u,s||Kt(n(u)).subscribe(s=fe(t,a,c))},()=>{o=!0,(!r||!s||s.closed)&&t.complete()}))})}(()=>UF(n,e))}(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(r){return new(r||n)(N(iE),N(ft),N(hn,8))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),uQ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Bt({type:n});static#n=this.\u0275inj=Ut({})}return n})();const{isArray:mQ}=Array,{getPrototypeOf:_Q,prototype:yQ,keys:vQ}=Object;function zF(n){if(1===n.length){const e=n[0];if(mQ(e))return{args:e,keys:null};if(function EQ(n){return n&&"object"==typeof n&&_Q(n)===yQ}(e)){const t=vQ(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function HF(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function oE(...n){const e=Ws(n),t=Bo(n),{args:r,keys:i}=zF(n);if(0===r.length)return R([],e);const s=new Ge(function IQ(n,e,t=Dn){return r=>{qF(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let c=0;c<i;c++)qF(e,()=>{const u=R(n[c],e);let h=!1;u.subscribe(fe(r,g=>{s[c]=g,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>HF(i,o):Dn));return t?s.pipe(SD(t)):s}function qF(n,e,t){n?dr(t,n,e):e()}function aE(...n){return function wQ(){return Ni(1)}()(R(n,Ws(n)))}function Us(n){return n<=0?()=>Pn:H((e,t)=>{let r=0;e.subscribe(fe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function GF(n,e=rh){return H((t,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const u=s;s=null,r.next(u)}};function c(){const u=o+n,h=e.now();if(h<u)return i=this.schedule(void 0,u-h),void r.add(i);a()}t.subscribe(fe(r,u=>{s=u,o=e.now(),i||(i=e.schedule(c,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function ic(...n){const e=Ws(n);return H((t,r)=>{(e?aE(n,t,e):aE(n,t)).subscribe(r)})}function sh(n){return H((e,t)=>{Kt(n).subscribe(fe(t,()=>t.complete(),Te)),!t.closed&&e.subscribe(t)})}const WF=new Set;let Kl,CQ=(()=>{class n{constructor(t,r){this._platform=t,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):DQ}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function TQ(n,e){if(!WF.has(n))try{Kl||(Kl=document.createElement("style"),e&&(Kl.nonce=e),Kl.setAttribute("type","text/css"),document.head.appendChild(Kl)),Kl.sheet&&(Kl.sheet.insertRule(`@media ${n} {body{ }}`,0),WF.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(r){return new(r||n)(N(iE),N(DC,8))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function DQ(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let SQ=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new V}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return KF(DD(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=oE(KF(DD(t)).map(o=>this._registerQuery(o).observable));return s=aE(s.pipe(Us(1)),s.pipe(function bQ(n){return Dr((e,t)=>n<=t)}(1),GF(0))),s.pipe(ve(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:c,query:u})=>{a.matches=a.matches||c,a.breakpoints[u]=c}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new Ge(o=>{const a=c=>this._zone.run(()=>o.next(c));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(ic(r),ve(({matches:o})=>({query:t,matches:o})),sh(this._destroySubject)),mql:r};return this._queries.set(t,s),s}static#e=this.\u0275fac=function(r){return new(r||n)(N(CQ),N(ft))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function KF(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function XF(n){return 0===n.buttons||0===n.detail}function JF(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const eL="cdk-high-contrast-black-on-white",tL="cdk-high-contrast-white-on-black",OD="cdk-high-contrast-active";let FQ=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=le(SQ).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(OD,eL,tL),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(OD,eL):2===r&&t.add(OD,tL)}}static#e=this.\u0275fac=function(r){return new(r||n)(N(iE),N(hn))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Hn(n,e,t){const r=w(n)||e||t?{next:n,error:e,complete:t}:n;return r?H((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(fe(s,c=>{var u;null===(u=r.next)||void 0===u||u.call(r,c),s.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),s.complete()},c=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,c),s.error(c)},()=>{var c,u;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):Dn}let rL=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Bt({type:n});static#n=this.\u0275inj=Ut({})}return n})();function ND(n,e,t){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];i?n.setProperty(r,i,t?.has(r)?"important":""):n.removeProperty(r)}return n}function oh(n,e){const t=e?"":"none";ND(n.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function iL(n,e,t){ND(n.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function cE(n,e){return e&&"none"!=e?n+" "+e:n}function sL(n){const e=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*e}function kD(n,e){return n.getPropertyValue(e).split(",").map(r=>r.trim())}function FD(n){const e=n.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function LD(n,e,t){const{top:r,bottom:i,left:s,right:o}=n;return t>=r&&t<=i&&e>=s&&e<=o}function yg(n,e,t){n.top+=e,n.bottom=n.top+n.height,n.left+=t,n.right=n.left+n.width}function oL(n,e,t,r){const{top:i,right:s,bottom:o,left:a,width:c,height:u}=n,h=c*e,g=u*e;return r>i-g&&r<o+g&&t>a-h&&t<s+h}class aL{constructor(e){this._document=e,this.positions=new Map}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:FD(t)})})}handleScroll(e){const t=_g(e),r=this.positions.get(t);if(!r)return null;const i=r.scrollPosition;let s,o;if(t===this._document){const u=this.getViewportScrollPosition();s=u.top,o=u.left}else s=t.scrollTop,o=t.scrollLeft;const a=i.top-s,c=i.left-o;return this.positions.forEach((u,h)=>{u.clientRect&&t!==h&&t.contains(h)&&yg(u.clientRect,a,c)}),i.top=s,i.left=o,{top:a,left:c}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function cL(n){const e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),r=n.nodeName.toLowerCase();e.removeAttribute("id");for(let i=0;i<t.length;i++)t[i].removeAttribute("id");return"canvas"===r?dL(n,e):("input"===r||"select"===r||"textarea"===r)&&uL(n,e),lL("canvas",n,e,dL),lL("input, textarea, select",n,e,uL),e}function lL(n,e,t,r){const i=e.querySelectorAll(n);if(i.length){const s=t.querySelectorAll(n);for(let o=0;o<i.length;o++)r(i[o],s[o])}}let zQ=0;function uL(n,e){"file"!==e.type&&(e.value=n.value),"radio"===e.type&&e.name&&(e.name=`mat-clone-${e.name}-${zQ++}`)}function dL(n,e){const t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch{}}const hL=Gl({passive:!0}),lE=Gl({passive:!1}),VD=new Set(["position"]);class qQ{get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(e){const t=function rc(n){return null!=n&&"false"!=`${n}`}(e);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(r=>oh(r,t)))}constructor(e,t,r,i,s,o){this._config=t,this._document=r,this._ngZone=i,this._viewportRuler=s,this._dragDropRegistry=o,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new V,this._pointerMoveSubscription=at.EMPTY,this._pointerUpSubscription=at.EMPTY,this._scrollSubscription=at.EMPTY,this._resizeSubscription=at.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new V,this.started=new V,this.released=new V,this.ended=new V,this.entered=new V,this.exited=new V,this.dropped=new V,this.moved=this._moveEvents,this._pointerDown=a=>{if(this.beforeStarted.next(),this._handles.length){const c=this._getTargetHandle(a);c&&!this._disabledHandles.has(c)&&!this.disabled&&this._initializeDragSequence(c,a)}else this.disabled||this._initializeDragSequence(this._rootElement,a)},this._pointerMove=a=>{const c=this._getPointerPositionOnPage(a);if(!this._hasStartedDragging){if(Math.abs(c.x-this._pickupPositionOnPage.x)+Math.abs(c.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const y=Date.now()>=this._dragStartTime+this._getDragStartDelay(a),E=this._dropContainer;if(!y)return void this._endDragSequence(a);(!E||!E.isDragging()&&!E.isReceiving())&&(a.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(a)))}return}a.preventDefault();const u=this._getConstrainedPointerPosition(c);if(this._hasMoved=!0,this._lastKnownPointerPosition=c,this._updatePointerDirectionDelta(u),this._dropContainer)this._updateActiveDropContainer(u,c);else{const h=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,g=this._activeTransform;g.x=u.x-h.x+this._passiveTransform.x,g.y=u.y-h.y+this._passiveTransform.y,this._applyRootElementTransform(g.x,g.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:u,event:a,distance:this._getDragDistance(u),delta:this._pointerDirectionDelta})})},this._pointerUp=a=>{this._endDragSequence(a)},this._nativeDragStart=a=>{if(this._handles.length){const c=this._getTargetHandle(a);c&&!this._disabledHandles.has(c)&&!this.disabled&&a.preventDefault()}else this.disabled||a.preventDefault()},this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new aL(r),o.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(r=>Gr(r)),this._handles.forEach(r=>oh(r,this.disabled)),this._toggleNativeDragInteractions();const t=new Set;return this._disabledHandles.forEach(r=>{this._handles.indexOf(r)>-1&&t.add(r)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){const t=Gr(e);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,lE),t.addEventListener("touchstart",this._pointerDown,hL),t.addEventListener("dragstart",this._nativeDragStart,lE)}),this._initialTransform=void 0,this._rootElement=t),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?Gr(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),oh(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),oh(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){const e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){const e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){vg(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const t=this._dropContainer;if(t){const r=this._rootElement,i=r.parentNode,s=this._placeholder=this._createPlaceholderElement(),o=this._anchor=this._anchor||this._document.createComment(""),a=this._getShadowRoot();i.insertBefore(o,r),this._initialTransform=r.style.transform||"",this._preview=this._createPreviewElement(),iL(r,!1,VD),this._document.body.appendChild(i.replaceChild(s,r)),this._getPreviewInsertionPoint(i,a).appendChild(this._preview),this.started.next({source:this,event:e}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();const r=this.isDragging(),i=vg(t),s=!i&&0!==t.button,o=this._rootElement,a=_g(t),c=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),u=i?JF(t):XF(t);if(a&&a.draggable&&"mousedown"===t.type&&t.preventDefault(),r||s||c||u)return;if(this._handles.length){const m=o.style;this._rootElementTapHighlight=m.webkitTapHighlightColor||"",m.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(m=>this._updateOnScroll(m)),this._boundaryElement&&(this._boundaryRect=FD(this._boundaryElement));const h=this._previewTemplate;this._pickupPositionInElement=h&&h.template&&!h.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,e,t);const g=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:g.x,y:g.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){iL(this._rootElement,!0,VD),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const t=this._dropContainer,r=t.getItemIndex(this),i=this._getPointerPositionOnPage(e),s=this._getDragDistance(i),o=t._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:s,dropPoint:i,event:e}),this.dropped.next({item:this,currentIndex:r,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:o,distance:s,dropPoint:i,event:e}),t.drop(this,r,this._initialIndex,this._initialContainer,o,s,i,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:r,y:i}){let s=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,e,t,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(r,i),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_createPreviewElement(){const e=this._previewTemplate,t=this.previewClass,r=e?e.template:null;let i;if(r&&e){const s=e.matchSize?this._initialClientRect:null,o=e.viewContainer.createEmbeddedView(r,e.context);o.detectChanges(),i=pL(o,this._document),this._previewRef=o,e.matchSize?gL(i,s):i.style.transform=uE(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else i=cL(this._rootElement),gL(i,this._initialClientRect),this._initialTransform&&(i.style.transform=this._initialTransform);return ND(i.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},VD),oh(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(s=>i.classList.add(s)):i.classList.add(t)),i}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);const t=function $Q(n){const e=getComputedStyle(n),t=kD(e,"transition-property"),r=t.find(a=>"transform"===a||"all"===a);if(!r)return 0;const i=t.indexOf(r),s=kD(e,"transition-duration"),o=kD(e,"transition-delay");return sL(s[i])+sL(o[i])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(r=>{const i=o=>{(!o||_g(o)===this._preview&&"transform"===o.propertyName)&&(this._preview?.removeEventListener("transitionend",i),r(),clearTimeout(s))},s=setTimeout(i,1.5*t);this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){const e=this._placeholderTemplate,t=e?e.template:null;let r;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),r=pL(this._placeholderRef,this._document)):r=cL(this._rootElement),r.style.pointerEvents="none",r.classList.add("cdk-drag-placeholder"),r}_getPointerPositionInElement(e,t,r){const i=t===this._rootElement?null:t,s=i?i.getBoundingClientRect():e,o=vg(r)?r.targetTouches[0]:r,a=this._getViewportScrollPosition();return{x:s.left-e.left+(o.pageX-s.left-a.left),y:s.top-e.top+(o.pageY-s.top-a.top)}}_getPointerPositionOnPage(e){const t=this._getViewportScrollPosition(),r=vg(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,i=r.pageX-t.left,s=r.pageY-t.top;if(this._ownerSVGElement){const o=this._ownerSVGElement.getScreenCTM();if(o){const a=this._ownerSVGElement.createSVGPoint();return a.x=i,a.y=s,a.matrixTransform(o.inverse())}}return{x:i,y:s}}_getConstrainedPointerPosition(e){const t=this._dropContainer?this._dropContainer.lockAxis:null;let{x:r,y:i}=this.constrainPosition?this.constrainPosition(e,this,this._initialClientRect,this._pickupPositionInElement):e;if("x"===this.lockAxis||"x"===t?i=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):("y"===this.lockAxis||"y"===t)&&(r=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){const{x:s,y:o}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:c,height:u}=this._getPreviewRect(),h=a.top+o,g=a.bottom-(u-o);r=fL(r,a.left+s,a.right-(c-s)),i=fL(i,h,g)}return{x:r,y:i}}_updatePointerDirectionDelta(e){const{x:t,y:r}=e,i=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,o=Math.abs(t-s.x),a=Math.abs(r-s.y);return o>this._config.pointerDirectionChangeThreshold&&(i.x=t>s.x?1:-1,s.x=t),a>this._config.pointerDirectionChangeThreshold&&(i.y=r>s.y?1:-1,s.y=r),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,oh(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,lE),e.removeEventListener("touchstart",this._pointerDown,hL),e.removeEventListener("dragstart",this._nativeDragStart,lE)}_applyRootElementTransform(e,t){const r=uE(e,t),i=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=i.transform&&"none"!=i.transform?i.transform:""),i.transform=cE(r,this._initialTransform)}_applyPreviewTransform(e,t){const r=this._previewTemplate?.template?void 0:this._initialTransform,i=uE(e,t);this._preview.style.transform=cE(i,r)}_getDragDistance(e){const t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(0===e&&0===t||this.isDragging()||!this._boundaryElement)return;const r=this._rootElement.getBoundingClientRect(),i=this._boundaryElement.getBoundingClientRect();if(0===i.width&&0===i.height||0===r.width&&0===r.height)return;const s=i.left-r.left,o=r.right-i.right,a=i.top-r.top,c=r.bottom-i.bottom;i.width>r.width?(s>0&&(e+=s),o>0&&(e-=o)):e=0,i.height>r.height?(a>0&&(t+=a),c>0&&(t-=c)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){const t=this.dragStartDelay;return"number"==typeof t?t:vg(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){const t=this._parentPositions.handleScroll(e);if(t){const r=_g(e);this._boundaryRect&&r!==this._boundaryElement&&r.contains(this._boundaryElement)&&yg(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=$F(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){const r=this._previewContainer||"global";if("parent"===r)return e;if("global"===r){const i=this._document;return t||i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body}return Gr(r)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}}function uE(n,e){return`translate3d(${Math.round(n)}px, ${Math.round(e)}px, 0)`}function fL(n,e,t){return Math.max(e,Math.min(t,n))}function vg(n){return"t"===n.type[0]}function pL(n,e){const t=n.rootNodes;if(1===t.length&&t[0].nodeType===e.ELEMENT_NODE)return t[0];const r=e.createElement("div");return t.forEach(i=>r.appendChild(i)),r}function gL(n,e){n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=uE(e.left,e.top)}function Eg(n,e){return Math.max(0,Math.min(e,n))}class WQ{constructor(e,t){this._element=e,this._dragDropRegistry=t,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(e){this.withItems(e)}sort(e,t,r,i){const s=this._itemPositions,o=this._getItemIndexFromPointerPosition(e,t,r,i);if(-1===o&&s.length>0)return null;const a="horizontal"===this.orientation,c=s.findIndex(b=>b.drag===e),u=s[o],g=u.clientRect,m=c>o?1:-1,y=this._getItemOffsetPx(s[c].clientRect,g,m),E=this._getSiblingOffsetPx(c,s,m),I=s.slice();return function GQ(n,e,t){const r=Eg(e,n.length-1),i=Eg(t,n.length-1);if(r===i)return;const s=n[r],o=i<r?-1:1;for(let a=r;a!==i;a+=o)n[a]=n[a+o];n[i]=s}(s,c,o),s.forEach((b,P)=>{if(I[P]===b)return;const S=b.drag===e,F=S?y:E,Y=S?e.getPlaceholderElement():b.drag.getRootElement();b.offset+=F,a?(Y.style.transform=cE(`translate3d(${Math.round(b.offset)}px, 0, 0)`,b.initialTransform),yg(b.clientRect,0,F)):(Y.style.transform=cE(`translate3d(0, ${Math.round(b.offset)}px, 0)`,b.initialTransform),yg(b.clientRect,F,0))}),this._previousSwap.overlaps=LD(g,t,r),this._previousSwap.drag=u.drag,this._previousSwap.delta=a?i.x:i.y,{previousIndex:c,currentIndex:o}}enter(e,t,r,i){const s=null==i||i<0?this._getItemIndexFromPointerPosition(e,t,r):i,o=this._activeDraggables,a=o.indexOf(e),c=e.getPlaceholderElement();let u=o[s];if(u===e&&(u=o[s+1]),!u&&(null==s||-1===s||s<o.length-1)&&this._shouldEnterAsFirstChild(t,r)&&(u=o[0]),a>-1&&o.splice(a,1),u&&!this._dragDropRegistry.isDragging(u)){const h=u.getRootElement();h.parentElement.insertBefore(c,h),o.splice(s,0,e)}else Gr(this._element).appendChild(c),o.push(e);c.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables.forEach(e=>{const t=e.getRootElement();if(t){const r=this._itemPositions.find(i=>i.drag===e)?.initialTransform;t.style.transform=r||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(r=>r.drag===e)}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:r})=>{yg(r,e,t)}),this._itemPositions.forEach(({drag:r})=>{this._dragDropRegistry.isDragging(r)&&r._sortFromLastPointerPosition()})}_cacheItemPositions(){const e="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(t=>{const r=t.getVisibleElement();return{drag:t,offset:0,initialTransform:r.style.transform||"",clientRect:FD(r)}}).sort((t,r)=>e?t.clientRect.left-r.clientRect.left:t.clientRect.top-r.clientRect.top)}_getItemOffsetPx(e,t,r){const i="horizontal"===this.orientation;let s=i?t.left-e.left:t.top-e.top;return-1===r&&(s+=i?t.width-e.width:t.height-e.height),s}_getSiblingOffsetPx(e,t,r){const i="horizontal"===this.orientation,s=t[e].clientRect,o=t[e+-1*r];let a=s[i?"width":"height"]*r;if(o){const c=i?"left":"top",u=i?"right":"bottom";-1===r?a-=o.clientRect[c]-s[u]:a+=s[c]-o.clientRect[u]}return a}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;const r=this._itemPositions,i="horizontal"===this.orientation;if(r[0].drag!==this._activeDraggables[0]){const o=r[r.length-1].clientRect;return i?e>=o.right:t>=o.bottom}{const o=r[0].clientRect;return i?e<=o.left:t<=o.top}}_getItemIndexFromPointerPosition(e,t,r,i){const s="horizontal"===this.orientation,o=this._itemPositions.findIndex(({drag:a,clientRect:c})=>a!==e&&((!i||a!==this._previousSwap.drag||!this._previousSwap.overlaps||(s?i.x:i.y)!==this._previousSwap.delta)&&(s?t>=Math.floor(c.left)&&t<Math.floor(c.right):r>=Math.floor(c.top)&&r<Math.floor(c.bottom))));return-1!==o&&this._sortPredicate(o,e)?o:-1}}class KQ{constructor(e,t,r,i,s){this._dragDropRegistry=t,this._ngZone=i,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new V,this.entered=new V,this.exited=new V,this.dropped=new V,this.sorted=new V,this.receivingStarted=new V,this.receivingStopped=new V,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=at.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new V,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function LQ(n=0,e=rh){return n<0&&(n=0),UF(n,n,e)}(0,LF).pipe(sh(this._stopScrollTimers)).subscribe(()=>{const o=this._scrollNode,a=this.autoScrollStep;1===this._verticalScrollDirection?o.scrollBy(0,-a):2===this._verticalScrollDirection&&o.scrollBy(0,a),1===this._horizontalScrollDirection?o.scrollBy(-a,0):2===this._horizontalScrollDirection&&o.scrollBy(a,0)})},this.element=Gr(e),this._document=r,this.withScrollableParents([this.element]),t.registerDropContainer(this),this._parentPositions=new aL(r),this._sortStrategy=new WQ(this.element,t),this._sortStrategy.withSortPredicate((o,a)=>this.sortPredicate(o,a,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,r,i){this._draggingStarted(),null==i&&this.sortingDisabled&&(i=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,r,i),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,r,i,s,o,a,c={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:r,container:this,previousContainer:i,isPointerOverContainer:s,distance:o,dropPoint:a,event:c})}withItems(e){const t=this._draggables;return this._draggables=e,e.forEach(r=>r._withDropContainer(this)),this.isDragging()&&(t.filter(i=>i.isDragging()).every(i=>-1===e.indexOf(i))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._sortStrategy.direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._sortStrategy.orientation=e,this}withScrollableParents(e){const t=Gr(this.element);return this._scrollableElements=-1===e.indexOf(t)?[t,...e]:e.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,r,i){if(this.sortingDisabled||!this._clientRect||!oL(this._clientRect,.05,t,r))return;const s=this._sortStrategy.sort(e,t,r,i);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let r,i=0,s=0;if(this._parentPositions.positions.forEach((o,a)=>{a===this._document||!o.clientRect||r||oL(o.clientRect,.05,e,t)&&([i,s]=function ZQ(n,e,t,r){const i=yL(e,r),s=vL(e,t);let o=0,a=0;if(i){const c=n.scrollTop;1===i?c>0&&(o=1):n.scrollHeight-c>n.clientHeight&&(o=2)}if(s){const c=n.scrollLeft;1===s?c>0&&(a=1):n.scrollWidth-c>n.clientWidth&&(a=2)}return[o,a]}(a,o.clientRect,e,t),(i||s)&&(r=a))}),!i&&!s){const{width:o,height:a}=this._viewportRuler.getViewportSize(),c={width:o,height:a,top:0,right:o,bottom:a,left:0};i=yL(c,t),s=vL(c,e),r=window}r&&(i!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||r!==this._scrollNode)&&(this._verticalScrollDirection=i,this._horizontalScrollDirection=s,this._scrollNode=r,(i||s)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const e=Gr(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const e=Gr(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(e).clientRect}_reset(){this._isDragging=!1;const e=Gr(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(e,t){return null!=this._clientRect&&LD(this._clientRect,e,t)}_getSiblingContainerFromPosition(e,t,r){return this._siblings.find(i=>i._canReceive(e,t,r))}_canReceive(e,t,r){if(!this._clientRect||!LD(this._clientRect,t,r)||!this.enterPredicate(e,this))return!1;const i=this._getShadowRoot().elementFromPoint(t,r);if(!i)return!1;const s=Gr(this.element);return i===s||s.contains(i)}_startReceiving(e,t){const r=this._activeSiblings;!r.has(e)&&t.every(i=>this.enterPredicate(i,this)||this._draggables.indexOf(i)>-1)&&(r.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:t}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){const t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const e=$F(Gr(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}}function yL(n,e){const{top:t,bottom:r,height:i}=n,s=.05*i;return e>=t-s&&e<=t+s?1:e>=r-s&&e<=r+s?2:0}function vL(n,e){const{left:t,right:r,width:i}=n,s=.05*i;return e>=t-s&&e<=t+s?1:e>=r-s&&e<=r+s?2:0}const dE=Gl({passive:!1,capture:!0});let QQ=(()=>{class n{constructor(t,r){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=i=>i.isDragging(),this.pointerMove=new V,this.pointerUp=new V,this.scroll=new V,this._preventDefaultWhileDragging=i=>{this._activeDragInstances.length>0&&i.preventDefault()},this._persistentTouchmoveListener=i=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&i.preventDefault(),this.pointerMove.next(i))},this._document=r}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,dE)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,dE)}startDragging(t,r){if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){const i=r.type.startsWith("touch");this._globalListeners.set(i?"touchend":"mouseup",{handler:s=>this.pointerUp.next(s),options:!0}).set("scroll",{handler:s=>this.scroll.next(s),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:dE}),i||this._globalListeners.set("mousemove",{handler:s=>this.pointerMove.next(s),options:dE}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((s,o)=>{this._document.addEventListener(o,s.handler,s.options)})})}}stopDragging(t){const r=this._activeDragInstances.indexOf(t);r>-1&&(this._activeDragInstances.splice(r,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(t){return this._activeDragInstances.indexOf(t)>-1}scrolled(t){const r=[this.scroll];return t&&t!==this._document&&r.push(new Ge(i=>this._ngZone.runOutsideAngular(()=>{const o=a=>{this._activeDragInstances.length&&i.next(a)};return t.addEventListener("scroll",o,!0),()=>{t.removeEventListener("scroll",o,!0)}}))),K(...r)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,r)=>{this._document.removeEventListener(r,t.handler,t.options)}),this._globalListeners.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(N(ft),N(hn))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const YQ={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let UD=(()=>{class n{constructor(t,r,i,s){this._document=t,this._ngZone=r,this._viewportRuler=i,this._dragDropRegistry=s}createDrag(t,r=YQ){return new qQ(t,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new KQ(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static#e=this.\u0275fac=function(r){return new(r||n)(N(hn),N(ft),N(lQ),N(QQ))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sY=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Bt({type:n});static#n=this.\u0275inj=Ut({providers:[UD],imports:[uQ]})}return n})();function ah(n,e){return w(e)?Lt(n,e,1):Lt(n,1)}function Ig(n){return H((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class hE{}class fE{}class Eo{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Eo?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Eo;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Eo?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class oY{encodeKey(e){return CL(e)}encodeValue(e){return CL(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const cY=/%(\d[a-f0-9])/gi,lY={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function CL(n){return encodeURIComponent(n).replace(cY,(e,t)=>lY[t]??e)}function pE(n){return`${n}`}class Io{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new oY,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function aY(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(pE):[pE(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Io({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(pE(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(pE(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class uY{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function TL(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function DL(n){return typeof Blob<"u"&&n instanceof Blob}function SL(n){return typeof FormData<"u"&&n instanceof FormData}class wg{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function dY(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Eo),this.context||(this.context=new uY),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Io,this.urlWithParams=t}serializeBody(){return null===this.body?null:TL(this.body)||DL(this.body)||SL(this.body)||function hY(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Io?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||SL(this.body)?null:DL(this.body)?this.body.type||null:TL(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Io?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,u=e.params||this.params;const h=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((g,m)=>g.set(m,e.setHeaders[m]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((g,m)=>g.set(m,e.setParams[m]),u)),new wg(t,r,s,{params:u,headers:c,context:h,reportProgress:a,responseType:i,withCredentials:o})}}var ch=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(ch||{});class zD{constructor(e,t=200,r="OK"){this.headers=e.headers||new Eo,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class HD extends zD{constructor(e={}){super(e),this.type=ch.ResponseHeader}clone(e={}){return new HD({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class lh extends zD{constructor(e={}){super(e),this.type=ch.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new lh({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class AL extends zD{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function qD(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let RL=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof wg)s=t;else{let c,u;c=i.headers instanceof Eo?i.headers:new Eo(i.headers),i.params&&(u=i.params instanceof Io?i.params:new Io({fromObject:i.params})),s=new wg(t,r,void 0!==i.body?i.body:null,{headers:c,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const o=W(s).pipe(ah(c=>this.handler.handle(c)));if(t instanceof wg||"events"===i.observe)return o;const a=o.pipe(Dr(c=>c instanceof lh));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(ve(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(ve(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(ve(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe(ve(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Io).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,qD(i,r))}post(t,r,i={}){return this.request("POST",t,qD(i,r))}put(t,r,i={}){return this.request("PUT",t,qD(i,r))}static#e=this.\u0275fac=function(r){return new(r||n)(N(hE))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();function xL(n,e){return e(n)}function pY(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const mY=new B(""),bg=new B(""),OL=new B("");function _Y(){let n=null;return(e,t)=>{null===n&&(n=(le(mY,{optional:!0})??[]).reduceRight(pY,xL));const r=le(Rv),i=r.add();return n(e,t).pipe(Ig(()=>r.remove(i)))}}let NL=(()=>{class n extends hE{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=le(Rv)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(bg),...this.injector.get(OL,[])]));this.chain=i.reduceRight((s,o)=>function gY(n,e,t){return(r,i)=>t.runInContext(()=>e(r,s=>n(s,i)))}(s,o,this.injector),xL)}const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Ig(()=>this.pendingTasks.remove(r)))}static#e=this.\u0275fac=function(r){return new(r||n)(N(fE),N(Ui))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();const IY=/^\)\]\}',?\n/;let FL=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new k(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?R(r.\u0275loadImpl()):W(null)).pipe(_t(()=>new Ge(s=>{const o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((I,b)=>o.setRequestHeader(I,b.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const I=t.detectContentTypeHeader();null!==I&&o.setRequestHeader("Content-Type",I)}if(t.responseType){const I=t.responseType.toLowerCase();o.responseType="json"!==I?I:"text"}const a=t.serializeBody();let c=null;const u=()=>{if(null!==c)return c;const I=o.statusText||"OK",b=new Eo(o.getAllResponseHeaders()),P=function wY(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return c=new HD({headers:b,status:o.status,statusText:I,url:P}),c},h=()=>{let{headers:I,status:b,statusText:P,url:S}=u(),F=null;204!==b&&(F=typeof o.response>"u"?o.responseText:o.response),0===b&&(b=F?200:0);let Y=b>=200&&b<300;if("json"===t.responseType&&"string"==typeof F){const he=F;F=F.replace(IY,"");try{F=""!==F?JSON.parse(F):null}catch(Oe){F=he,Y&&(Y=!1,F={error:Oe,text:F})}}Y?(s.next(new lh({body:F,headers:I,status:b,statusText:P,url:S||void 0})),s.complete()):s.error(new AL({error:F,headers:I,status:b,statusText:P,url:S||void 0}))},g=I=>{const{url:b}=u(),P=new AL({error:I,status:o.status||0,statusText:o.statusText||"Unknown Error",url:b||void 0});s.error(P)};let m=!1;const y=I=>{m||(s.next(u()),m=!0);let b={type:ch.DownloadProgress,loaded:I.loaded};I.lengthComputable&&(b.total=I.total),"text"===t.responseType&&o.responseText&&(b.partialText=o.responseText),s.next(b)},E=I=>{let b={type:ch.UploadProgress,loaded:I.loaded};I.lengthComputable&&(b.total=I.total),s.next(b)};return o.addEventListener("load",h),o.addEventListener("error",g),o.addEventListener("timeout",g),o.addEventListener("abort",g),t.reportProgress&&(o.addEventListener("progress",y),null!==a&&o.upload&&o.upload.addEventListener("progress",E)),o.send(a),s.next({type:ch.Sent}),()=>{o.removeEventListener("error",g),o.removeEventListener("abort",g),o.removeEventListener("load",h),o.removeEventListener("timeout",g),t.reportProgress&&(o.removeEventListener("progress",y),null!==a&&o.upload&&o.upload.removeEventListener("progress",E)),o.readyState!==o.DONE&&o.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||n)(N(hF))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();const GD=new B("XSRF_ENABLED"),LL=new B("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),VL=new B("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class UL{}let TY=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=nF(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||n)(N(hn),N(Os),N(LL))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();function DY(n,e){const t=n.url.toLowerCase();if(!le(GD)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=le(UL).getToken(),i=le(VL);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var sc=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(sc||{});function SY(...n){const e=[RL,FL,NL,{provide:hE,useExisting:NL},{provide:fE,useExisting:FL},{provide:bg,useValue:DY,multi:!0},{provide:GD,useValue:!0},{provide:UL,useClass:TY}];for(const t of n)e.push(...t.\u0275providers);return function yC(n){return{\u0275providers:n}}(e)}const BL=new B("LEGACY_INTERCEPTOR_FN");function AY(){return function Zl(n,e){return{\u0275kind:n,\u0275providers:e}}(sc.LegacyInterceptors,[{provide:BL,useFactory:_Y},{provide:bg,useExisting:BL,multi:!0}])}let RY=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Bt({type:n});static#n=this.\u0275inj=Ut({providers:[SY(AY())]})}return n})();var sa=Qe(534);(0,sa.registerVersion)("firebase","10.7.0","app");const jL=new class VY extends tE{}(class LY extends eE{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),WD=new Qa("ANGULARFIRE2_VERSION"),$L=(n,e)=>{const t=e?[e]:(0,sa.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};class zL{constructor(){return $L(BY)}}const BY="app-check";function uh(){}class HL{zone;delegate;constructor(e,t=jL){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class jY{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",uh,{},uh,uh)),t.pipe(Hn({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let qL=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new HL(Zone.current)),this.insideAngular=t.run(()=>new HL(Zone.current,rh)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(N(ft))};static \u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $i(n){return function zY(n){return function(t){return(t=t.lift(new jY(n.ngZone))).pipe(Fr(n.outsideAngular),hr(n.insideAngular))}}(function dh(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}())(n)}var oc=Qe(106);oc.Z.registerVersion("firebase","10.7.0","app-compat");const WY=["ngOnDestroy"];class GL{constructor(e){return e}}const mE=new B("angularfire2.app.options"),_E=new B("angularfire2.app.name");function KD(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=oc.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>oc.Z.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;QY("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new GL(o)}const QY=(n,...e)=>{},YY={provide:GL,useFactory:KD,deps:[mE,ft,[new xs,_E]]};let XY=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:mE,useValue:t},{provide:_E,useValue:r}]}}constructor(t){oc.Z.registerVersion("angularfire",WD.full,"core"),oc.Z.registerVersion("angularfire",WD.full,"app-compat"),oc.Z.registerVersion("angular",kx.full,t.toString())}static \u0275fac=function(r){return new(r||n)(N(Os))};static \u0275mod=Bt({type:n});static \u0275inj=Ut({providers:[YY]})}return n})();function WL(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function JY(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(KL("error",`${e} was already initialized on the ${t} Firebase App with different settings.${eX?" You may need to reload as Firebase is not HMR aware.":""}`),KL("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const eX=typeof module<"u"&&!!module.hot,KL=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[];var Ie,Q=Qe(861),ZL=Qe(537),wo=Qe(879),Xt=Qe(58),sX=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Bs={},QD=QD||{},Xe=sX||self;function vE(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Cg(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var YD="closure_uid_"+(1e9*Math.random()>>>0),aX=0;function cX(n,e,t){return n.call.apply(n.bind,arguments)}function lX(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Wr(n,e,t){return(Wr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?cX:lX).apply(null,arguments)}function EE(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function mr(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function ac(){this.s=this.s,this.o=this.o}ac.prototype.s=!1,ac.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function oX(n){Object.prototype.hasOwnProperty.call(n,YD)&&n[YD]||(n[YD]=++aX)}(this)},ac.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const QL=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function XD(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function YL(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(vE(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let o=0;o<s;o++)n[i+o]=r[o]}else n.push(r)}}function Kr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Kr.prototype.h=function(){this.defaultPrevented=!0};var dX=function(){if(!Xe.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{const t=()=>{};Xe.addEventListener("test",t,e),Xe.removeEventListener("test",t,e)}catch{}return n}();function Tg(n){return/^[\s\xa0]*$/.test(n)}function IE(){var n=Xe.navigator;return n&&(n=n.userAgent)?n:""}function bo(n){return-1!=IE().indexOf(n)}function JD(n){return JD[" "](n),n}JD[" "]=function(){};var t0,n,fX=bo("Opera"),hh=bo("Trident")||bo("MSIE"),XL=bo("Edge"),e0=XL||hh,JL=bo("Gecko")&&!(-1!=IE().toLowerCase().indexOf("webkit")&&!bo("Edge"))&&!(bo("Trident")||bo("MSIE"))&&!bo("Edge"),pX=-1!=IE().toLowerCase().indexOf("webkit")&&!bo("Edge");function eV(){var n=Xe.document;return n?n.documentMode:void 0}e:{var n0="",r0=(n=IE(),JL?/rv:([^\);]+)(\)|;)/.exec(n):XL?/Edge\/([\d\.]+)/.exec(n):hh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):pX?/WebKit\/(\S+)/.exec(n):fX?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(r0&&(n0=r0?r0[1]:""),hh){var s0=eV();if(null!=s0&&s0>parseFloat(n0)){t0=String(s0);break e}}t0=n0}var gX=Xe.document&&hh&&(eV()||parseInt(t0,10))||void 0;function Dg(n,e){if(Kr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(JL){e:{try{JD(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:mX[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Dg.$.h.call(this)}}mr(Dg,Kr);var mX={2:"touch",3:"pen",4:"mouse"};Dg.prototype.h=function(){Dg.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Sg="closure_listenable_"+(1e6*Math.random()|0),_X=0;function yX(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++_X,this.fa=this.ia=!1}function wE(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function a0(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function nV(n){const e={};for(const t in n)e[t]=n[t];return e}const rV="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function iV(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<rV.length;s++)t=rV[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function bE(n){this.src=n,this.g={},this.h=0}function c0(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=QL(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(wE(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function l0(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==r)return i}return-1}bE.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var o=l0(n,e,r,i);return-1<o?(e=n[o],t||(e.ia=!1)):((e=new yX(e,this.src,s,!!r,i)).ia=t,n.push(e)),e};var u0="closure_lm_"+(1e6*Math.random()|0),d0={};function sV(n,e,t,r,i){if(r&&r.once)return aV(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)sV(n,e[s],t,r,i);return null}return t=g0(t),n&&n[Sg]?n.O(e,t,Cg(r)?!!r.capture:!!r,i):oV(n,e,t,!1,r,i)}function oV(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var o=Cg(i)?!!i.capture:!!i,a=f0(n);if(a||(n[u0]=a=new bE(n)),(t=a.add(e,t,r,o,s)).proxy)return t;if(r=function EX(){const e=IX;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)dX||(i=o),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(lV(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function aV(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)aV(n,e[s],t,r,i);return null}return t=g0(t),n&&n[Sg]?n.P(e,t,Cg(r)?!!r.capture:!!r,i):oV(n,e,t,!0,r,i)}function cV(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)cV(n,e[s],t,r,i);else r=Cg(r)?!!r.capture:!!r,t=g0(t),n&&n[Sg]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=l0(s=n.g[e],t,r,i))&&(wE(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=f0(n))&&(e=n.g[e.toString()],n=-1,e&&(n=l0(e,t,r,i)),(t=-1<n?e[n]:null)&&h0(t))}function h0(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Sg])c0(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(lV(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=f0(e))?(c0(t,n),0==t.h&&(t.src=null,e[u0]=null)):wE(n)}}}function lV(n){return n in d0?d0[n]:d0[n]="on"+n}function IX(n,e){if(n.fa)n=!0;else{e=new Dg(e,this);var t=n.listener,r=n.la||n.src;n.ia&&h0(n),n=t.call(r,e)}return n}function f0(n){return(n=n[u0])instanceof bE?n:null}var p0="__closure_events_fn_"+(1e9*Math.random()>>>0);function g0(n){return"function"==typeof n?n:(n[p0]||(n[p0]=function(e){return n.handleEvent(e)}),n[p0])}function _r(){ac.call(this),this.i=new bE(this),this.S=this,this.J=null}function Sr(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Kr(e,n);else if(e instanceof Kr)e.target=e.target||n;else{var i=e;iV(e=new Kr(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];i=CE(o,r,!0,e)&&i}if(i=CE(o=e.g=n,r,!0,e)&&i,i=CE(o,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=CE(o=e.g=t[s],r,!1,e)&&i}function CE(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==t){var a=o.listener,c=o.la||o.src;o.ia&&c0(n.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}mr(_r,ac),_r.prototype[Sg]=!0,_r.prototype.removeEventListener=function(n,e,t,r){cV(this,n,e,t,r)},_r.prototype.N=function(){if(_r.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)wE(t[r]);delete n.g[e],n.h--}}this.J=null},_r.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},_r.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var m0=Xe.JSON.stringify;function bX(){var n=_0;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var uV=new class wX{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new TX,n=>n.reset());class TX{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function DX(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function SX(n){Xe.setTimeout(()=>{throw n},0)}let Ag,Rg=!1,_0=new class CX{constructor(){this.h=this.g=null}add(e,t){const r=uV.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},dV=()=>{const n=Xe.Promise.resolve(void 0);Ag=()=>{n.then(AX)}};var AX=()=>{for(var n;n=bX();){try{n.h.call(n.g)}catch(t){SX(t)}var e=uV;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Rg=!1};function TE(n,e){_r.call(this),this.h=n||1,this.g=e||Xe,this.j=Wr(this.qb,this),this.l=Date.now()}function y0(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function v0(n,e,t){if("function"==typeof n)t&&(n=Wr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Wr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Xe.setTimeout(n,e||0)}function hV(n){n.g=v0(()=>{n.g=null,n.i&&(n.i=!1,hV(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}mr(TE,_r),(Ie=TE.prototype).ga=!1,Ie.T=null,Ie.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Sr(this,"tick"),this.ga&&(y0(this),this.start()))}},Ie.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ie.N=function(){TE.$.N.call(this),y0(this),delete this.g};class RX extends ac{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:hV(this)}N(){super.N(),this.g&&(Xe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mg(n){ac.call(this),this.h=n,this.g={}}mr(Mg,ac);var fV=[];function pV(n,e,t,r){Array.isArray(t)||(t&&(fV[0]=t.toString()),t=fV);for(var i=0;i<t.length;i++){var s=sV(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function gV(n){a0(n.g,function(e,t){this.g.hasOwnProperty(t)&&h0(e)},n),n.g={}}function DE(){this.g=!0}function fh(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function OX(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return m0(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Mg.prototype.N=function(){Mg.$.N.call(this),gV(this)},Mg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},DE.prototype.Ea=function(){this.g=!1},DE.prototype.info=function(){};var Yl={},mV=null;function SE(){return mV=mV||new _r}function _V(n){Kr.call(this,Yl.Ta,n)}function Pg(n){const e=SE();Sr(e,new _V(e))}function yV(n,e){Kr.call(this,Yl.STAT_EVENT,n),this.stat=e}function gi(n){const e=SE();Sr(e,new yV(e,n))}function vV(n,e){Kr.call(this,Yl.Ua,n),this.size=e}function xg(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Xe.setTimeout(function(){n()},e)}Yl.Ta="serverreachability",mr(_V,Kr),Yl.STAT_EVENT="statevent",mr(yV,Kr),Yl.Ua="timingevent",mr(vV,Kr);var AE={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},EV={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function E0(){}function wV(){}E0.prototype.h=null;var b0,Og={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function I0(){Kr.call(this,"d")}function w0(){Kr.call(this,"c")}function RE(){}function Ng(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Mg(this),this.P=NX,this.V=new TE(n=e0?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new bV}function bV(){this.i=null,this.g="",this.h=!1}mr(I0,Kr),mr(w0,Kr),mr(RE,E0),RE.prototype.g=function(){return new XMLHttpRequest},RE.prototype.i=function(){return{}},b0=new RE;var NX=45e3,CV={},C0={};function T0(n,e,t){n.L=1,n.A=OE(oa(e)),n.u=t,n.S=!0,TV(n,null)}function TV(n,e){n.G=Date.now(),kg(n),n.B=oa(n.A);var t=n.B,r=n.W;Array.isArray(r)||(r=[String(r)]),kV(t.i,"t",r),n.o=0,t=n.l.J,n.h=new bV,n.g=o2(n.l,t?e:null,!n.u),0<n.O&&(n.M=new RX(Wr(n.Pa,n,n.g),n.O)),pV(n.U,n.g,"readystatechange",n.nb),e=n.I?nV(n.I):{},n.u?(n.v||(n.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.B,n.v,n.u,e)):(n.v="GET",n.g.ha(n.B,n.v,null,e)),Pg(),function MX(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var h=u[0];u=u[1];var g=h.split("_");o=2<=g.length&&"type"==g[1]?o+(h+"=")+u+"&":o+(h+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+o})}(n.j,n.v,n.B,n.m,n.W,n.u)}function DV(n){return!!n.g&&"GET"==n.v&&2!=n.L&&n.l.Ha}function SV(n,e,t){let i,r=!0;for(;!n.J&&n.o<t.length;){if(i=kX(n,t),i==C0){4==e&&(n.s=4,gi(14),r=!1),fh(n.j,n.m,null,"[Incomplete Response]");break}if(i==CV){n.s=4,gi(15),fh(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}fh(n.j,n.m,i,null),D0(n,i)}DV(n)&&0!=n.o&&(n.h.g=n.h.g.slice(n.o),n.o=0),4!=e||0!=t.length||n.h.h||(n.s=1,gi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),O0(e),e.M=!0,gi(11))):(fh(n.j,n.m,t,"[Invalid Chunked Response]"),Xl(n),Fg(n))}function kX(n,e){var t=n.o,r=e.indexOf("\n",t);return-1==r?C0:(t=Number(e.substring(t,r)),isNaN(t)?CV:(r+=1)+t>e.length?C0:(e=e.slice(r,r+t),n.o=r+t,e))}function kg(n){n.Y=Date.now()+n.P,AV(n,n.P)}function AV(n,e){if(null!=n.C)throw Error("WatchDog timer not null");n.C=xg(Wr(n.lb,n),e)}function ME(n){n.C&&(Xe.clearTimeout(n.C),n.C=null)}function Fg(n){0==n.l.H||n.J||t2(n.l,n)}function Xl(n){ME(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,y0(n.V),gV(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function D0(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||S0(t.i,n)))if(!n.K&&S0(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;UE(t),LE(t)}x0(t),gi(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=xg(Wr(t.ib,t),6e3));if(1>=VV(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else eu(t,11)}else if((n.K||t.g==n)&&UE(t),!Tg(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(t.V=u[0],u=u[1],2==t.H)if("c"==u[0]){t.K=u[1],t.pa=u[2];const h=u[3];null!=h&&(t.ra=h,t.l.info("VER="+t.ra));const g=u[4];null!=g&&(t.Ga=g,t.l.info("SVER="+t.Ga));const m=u[5];null!=m&&"number"==typeof m&&0<m&&(t.L=r=1.5*m,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const y=n.g;if(y){const E=y.g?y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(E){var s=r.i;s.g||-1==E.indexOf("spdy")&&-1==E.indexOf("quic")&&-1==E.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(A0(s,s.h),s.h=null))}if(r.F){const I=y.g?y.g.getResponseHeader("X-HTTP-Session-Id"):null;I&&(r.Da=I,fn(r.I,r.F,I))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var o=n;if((r=t).wa=s2(r,r.J?r.pa:null,r.Y),o.K){UV(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(ME(a),kg(a)),r.g=o}else JV(r);0<t.j.length&&VE(t)}else"stop"!=u[0]&&"close"!=u[0]||eu(t,7);else 3==t.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?eu(t,7):P0(t):"noop"!=u[0]&&t.h&&t.h.Aa(u),t.A=0)}Pg()}catch{}}function RV(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(vE(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function LX(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(vE(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function FX(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(vE(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(Ie=Ng.prototype).setTimeout=function(n){this.P=n},Ie.nb=function(n){n=n.target;const e=this.M;e&&3==Co(n)?e.l():this.Pa(n)},Ie.Pa=function(n){try{if(n==this.g)e:{const h=Co(this.g);var e=this.g.Ia();if(this.g.da(),!(3>h)&&(3!=h||e0||this.g&&(this.h.h||this.g.ja()||WV(this.g)))){this.J||4!=h||7==e||Pg(),ME(this);var t=this.g.da();this.ca=t;t:if(DV(this)){var r=WV(this.g);n="";var i=r.length,s=4==Co(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Xl(this),Fg(this);var o="";break t}this.h.i=new Xe.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=n,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==t,function PX(n,e,t,r,i,s,o){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+o})}(this.j,this.v,this.B,this.m,this.W,h,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Tg(a)){var u=a;break t}}u=null}if(!(t=u)){this.i=!1,this.s=3,gi(12),Xl(this),Fg(this);break e}fh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,D0(this,t)}this.S?(SV(this,h,o),e0&&this.i&&3==h&&(pV(this.U,this.V,"tick",this.mb),this.V.start())):(fh(this.j,this.m,o,null),D0(this,o)),4==h&&Xl(this),this.i&&!this.J&&(4==h?t2(this.l,this):(this.i=!1,kg(this)))}else(function tJ(n){const e={};n=(n.g&&2<=Co(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(Tg(n[r]))continue;var t=DX(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[i]||[];e[i]=s,s.push(t)}!function vX(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<o.indexOf("Unknown SID")?(this.s=3,gi(12)):(this.s=0,gi(13)),Xl(this),Fg(this)}}}catch{}},Ie.mb=function(){if(this.g){var n=Co(this.g),e=this.g.ja();this.o<e.length&&(ME(this),SV(this,n,e),this.i&&4!=n&&kg(this))}},Ie.cancel=function(){this.J=!0,Xl(this)},Ie.lb=function(){this.C=null;const n=Date.now();0<=n-this.Y?(function xX(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(Pg(),gi(17)),Xl(this),this.s=2,Fg(this)):AV(this,this.Y-n)};var MV=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Jl(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Jl){this.h=n.h,PE(this,n.j),this.s=n.s,this.g=n.g,xE(this,n.m),this.l=n.l;var e=n.i,t=new Ug;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),PV(this,t),this.o=n.o}else n&&(e=String(n).match(MV))?(this.h=!1,PE(this,e[1]||"",!0),this.s=Lg(e[2]||""),this.g=Lg(e[3]||"",!0),xE(this,e[4]),this.l=Lg(e[5]||"",!0),PV(this,e[6]||"",!0),this.o=Lg(e[7]||"")):(this.h=!1,this.i=new Ug(null,this.h))}function oa(n){return new Jl(n)}function PE(n,e,t){n.j=t?Lg(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function xE(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function PV(n,e,t){e instanceof Ug?(n.i=e,function HX(n,e){e&&!n.j&&(cc(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(OV(this,r),kV(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Vg(e,$X)),n.i=new Ug(e,n.h))}function fn(n,e,t){n.i.set(e,t)}function OE(n){return fn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Lg(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Vg(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,UX),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function UX(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Jl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Vg(e,xV,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Vg(e,xV,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Vg(t,"/"==t.charAt(0)?jX:BX,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Vg(t,zX)),n.join("")};var xV=/[#\/\?@]/g,BX=/[#\?:]/g,jX=/[#\?]/g,$X=/[#\?@]/g,zX=/#/g;function Ug(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function cc(n){n.g||(n.g=new Map,n.h=0,n.i&&function VX(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function OV(n,e){cc(n),e=ph(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function NV(n,e){return cc(n),e=ph(n,e),n.g.has(e)}function kV(n,e,t){OV(n,e),0<t.length&&(n.i=null,n.g.set(ph(n,e),XD(t)),n.h+=t.length)}function ph(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function FV(n){this.l=n||GX,n=Xe.PerformanceNavigationTiming?0<(n=Xe.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Xe.g&&Xe.g.Ka&&Xe.g.Ka()&&Xe.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ie=Ug.prototype).add=function(n,e){cc(this),this.i=null,n=ph(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ie.forEach=function(n,e){cc(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Ie.ta=function(){cc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},Ie.Z=function(n){cc(this);let e=[];if("string"==typeof n)NV(this,n)&&(e=e.concat(this.g.get(ph(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Ie.set=function(n,e){return cc(this),this.i=null,NV(this,n=ph(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ie.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Ie.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),n.push(i)}}return this.i=n.join("&")};var GX=10;function LV(n){return!!n.h||!!n.g&&n.g.size>=n.j}function VV(n){return n.h?1:n.g?n.g.size:0}function S0(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function A0(n,e){n.g?n.g.add(e):n.h=e}function UV(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function BV(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return XD(n.i)}FV.prototype.cancel=function(){if(this.i=BV(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var WX=class{stringify(n){return Xe.JSON.stringify(n,void 0)}parse(n){return Xe.JSON.parse(n,void 0)}};function KX(){this.g=new WX}function ZX(n,e,t){const r=t||"";try{RV(n,function(i,s){let o=i;Cg(i)&&(o=m0(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function NE(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Bg(n){this.l=n.ec||null,this.j=n.ob||!1}function kE(n,e){_r.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=R0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}mr(Bg,E0),Bg.prototype.g=function(){return new kE(this.l,this.j)},Bg.prototype.i=function(n){return function(){return n}}({}),mr(kE,_r);var R0=0;function jV(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function jg(n){n.readyState=4,n.l=null,n.j=null,n.A=null,$g(n)}function $g(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ie=kE.prototype).open=function(n,e){if(this.readyState!=R0)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,$g(this)},Ie.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Xe).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Ie.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,jg(this)),this.readyState=R0},Ie.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,$g(this)),this.g&&(this.readyState=3,$g(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Xe.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;jV(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Ie.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?jg(this):$g(this),3==this.readyState&&jV(this)}},Ie.Za=function(n){this.g&&(this.response=this.responseText=n,jg(this))},Ie.Ya=function(n){this.g&&(this.response=n,jg(this))},Ie.ka=function(){this.g&&jg(this)},Ie.setRequestHeader=function(n,e){this.v.append(n,e)},Ie.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ie.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(kE.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var YX=Xe.JSON.parse;function An(n){_r.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=$V,this.L=this.M=!1}mr(An,_r);var $V="",XX=/^https?$/i,JX=["POST","PUT"];function zV(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,HV(n),FE(n)}function HV(n){n.F||(n.F=!0,Sr(n,"complete"),Sr(n,"error"))}function qV(n){if(n.h&&typeof QD<"u"&&(!n.C[1]||4!=Co(n)||2!=n.da()))if(n.v&&4==Co(n))v0(n.La,0,n);else if(Sr(n,"readystatechange"),4==Co(n)){n.h=!1;try{const o=n.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===o){var i=String(n.I).match(MV)[1]||null;!i&&Xe.self&&Xe.self.location&&(i=Xe.self.location.protocol.slice(0,-1)),r=!XX.test(i?i.toLowerCase():"")}t=r}if(t)Sr(n,"complete"),Sr(n,"success");else{n.m=6;try{var s=2<Co(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",HV(n)}}finally{FE(n)}}}function FE(n,e){if(n.g){GV(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Sr(n,"ready");try{t.onreadystatechange=r}catch{}}}function GV(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Xe.clearTimeout(n.A),n.A=null)}function Co(n){return n.g?n.g.readyState:0}function WV(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case $V:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function KV(n){let e="";return a0(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function M0(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=KV(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):fn(n,e,t))}function zg(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function ZV(n){this.Ga=0,this.j=[],this.l=new DE,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=zg("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=zg("baseRetryDelayMs",5e3,n),this.hb=zg("retryDelaySeedMs",1e4,n),this.eb=zg("forwardChannelMaxRetries",2,n),this.xa=zg("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new FV(n&&n.concurrentRequestLimit),this.Ja=new KX,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function P0(n){if(QV(n),3==n.H){var e=n.W++,t=oa(n.I);if(fn(t,"SID",n.K),fn(t,"RID",e),fn(t,"TYPE","terminate"),Hg(n,t),(e=new Ng(n,n.l,e)).L=2,e.A=OE(oa(t)),t=!1,Xe.navigator&&Xe.navigator.sendBeacon)try{t=Xe.navigator.sendBeacon(e.A.toString(),"")}catch{}!t&&Xe.Image&&((new Image).src=e.A,t=!0),t||(e.g=o2(e.l,null),e.g.ha(e.A)),e.G=Date.now(),kg(e)}r2(n)}function LE(n){n.g&&(O0(n),n.g.cancel(),n.g=null)}function QV(n){LE(n),n.u&&(Xe.clearTimeout(n.u),n.u=null),UE(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Xe.clearTimeout(n.m),n.m=null)}function VE(n){if(!LV(n.i)&&!n.m){n.m=!0;var e=n.Na;Ag||dV(),Rg||(Ag(),Rg=!0),_0.add(e,n),n.C=0}}function YV(n,e){var t;t=e?e.m:n.W++;const r=oa(n.I);fn(r,"SID",n.K),fn(r,"RID",t),fn(r,"AID",n.V),Hg(n,r),n.o&&n.s&&M0(r,n.o,n.s),t=new Ng(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=XV(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),A0(n.i,t),T0(t,r,e)}function Hg(n,e){n.na&&a0(n.na,function(t,r){fn(e,r,t)}),n.h&&RV({},function(t,r){fn(e,r,t)})}function XV(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Wr(n.h.Va,n.h,n):null;e:{var i=n.j;let s=-1;for(;;){const o=["count="+t];-1==s?0<t?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<t;c++){let u=i[c].g;const h=i[c].map;if(u-=s,0>u)s=Math.max(0,i[c].g-100),a=!1;else try{ZX(h,o,"req"+u+"_")}catch{r&&r(h)}}if(a){r=o.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function JV(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Ag||dV(),Rg||(Ag(),Rg=!0),_0.add(e,n),n.A=0}}function x0(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=xg(Wr(n.Ma,n),n2(n,n.A)),n.A++,0))}function O0(n){null!=n.B&&(Xe.clearTimeout(n.B),n.B=null)}function e2(n){n.g=new Ng(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=oa(n.wa);fn(e,"RID","rpc"),fn(e,"SID",n.K),fn(e,"AID",n.V),fn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&fn(e,"TO",n.qa),fn(e,"TYPE","xmlhttp"),Hg(n,e),n.o&&n.s&&M0(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.A=OE(oa(e)),t.u=null,t.S=!0,TV(t,n)}function UE(n){null!=n.v&&(Xe.clearTimeout(n.v),n.v=null)}function t2(n,e){var t=null;if(n.g==e){UE(n),O0(n),n.g=null;var r=2}else{if(!S0(n.i,e))return;t=e.F,UV(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.u?e.u.length:0,e=Date.now()-e.G;var i=n.C;Sr(r=SE(),new vV(r,t)),VE(n)}else JV(n);else if(3==(i=e.s)||0==i&&0<e.ca||!(1==r&&function nJ(n,e){return!(VV(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=xg(Wr(n.Na,n,e),n2(n,n.C)),n.C++,0)))}(n,e)||2==r&&x0(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:eu(n,5);break;case 4:eu(n,10);break;case 3:eu(n,6);break;default:eu(n,2)}}function n2(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function eu(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Wr(n.pb,n);t||(t=new Jl("//www.google.com/images/cleardot.gif"),Xe.location&&"http"==Xe.location.protocol||PE(t,"https"),OE(t)),function QX(n,e){const t=new DE;if(Xe.Image){const r=new Image;r.onload=EE(NE,t,r,"TestLoadImage: loaded",!0,e),r.onerror=EE(NE,t,r,"TestLoadImage: error",!1,e),r.onabort=EE(NE,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=EE(NE,t,r,"TestLoadImage: timeout",!1,e),Xe.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else gi(2);n.H=0,n.h&&n.h.za(e),r2(n),QV(n)}function r2(n){if(n.H=0,n.ma=[],n.h){const e=BV(n.i);(0!=e.length||0!=n.j.length)&&(YL(n.ma,e),YL(n.ma,n.j),n.i.i.length=0,XD(n.j),n.j.length=0),n.h.ya()}}function s2(n,e,t){var r=t instanceof Jl?oa(t):new Jl(t);if(""!=r.g)e&&(r.g=e+"."+r.g),xE(r,r.m);else{var i=Xe.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Jl(null);r&&PE(s,r),e&&(s.g=e),i&&xE(s,i),t&&(s.l=t),r=s}return e=n.Da,(t=n.F)&&e&&fn(r,t,e),fn(r,"VER",n.ra),Hg(n,r),r}function o2(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new An(n.Ha&&!n.va?new Bg({ob:t}):n.va)).Oa(n.J),e}function a2(){}function BE(){if(hh&&!(10<=Number(gX)))throw Error("Environmental error: no available transport.")}function zi(n,e){_r.call(this),this.g=new ZV(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Tg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Tg(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new gh(this)}function c2(n){I0.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function l2(){w0.call(this),this.status=1}function gh(n){this.g=n}function js(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function N0(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],o=(e=n.g[0])+(s^(t=n.g[1])&((i=n.g[2])^s))+r[0]+3614090360&4294967295;o=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=t+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(t^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(t|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(t|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(t|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=t+((o=e+(i^(t|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~t))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+s&4294967295}function jt(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var s=0|n[i];r&&s==e||(t[i]=s,r=!1)}this.g=t}(Ie=An.prototype).Oa=function(n){this.M=n},Ie.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():b0.g(),this.C=function IV(n){return n.h||(n.h=n.i())}(this.u?this.u:b0),this.g.onreadystatechange=Wr(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void zV(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=Xe.FormData&&n instanceof Xe.FormData,!(0<=QL(JX,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{GV(this),0<this.B&&((this.L=function eJ(n){return hh&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Wr(this.ua,this)):this.A=v0(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){zV(this,s)}},Ie.ua=function(){typeof QD<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Sr(this,"timeout"),this.abort(8))},Ie.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Sr(this,"complete"),Sr(this,"abort"),FE(this))},Ie.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),FE(this,!0)),An.$.N.call(this)},Ie.La=function(){this.s||(this.G||this.v||this.l?qV(this):this.kb())},Ie.kb=function(){qV(this)},Ie.isActive=function(){return!!this.g},Ie.da=function(){try{return 2<Co(this)?this.g.status:-1}catch{return-1}},Ie.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ie.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),YX(e)}},Ie.Ia=function(){return this.m},Ie.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ie=ZV.prototype).ra=8,Ie.H=1,Ie.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Ng(this,this.l,n);let s=this.s;if(this.U&&(s?(s=nV(s),iV(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=XV(this,i,e),fn(t=oa(this.I),"RID",n),fn(t,"CVER",22),this.F&&fn(t,"X-HTTP-Session-Id",this.F),Hg(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(KV(s)))+"&"+e:this.o&&M0(t,this.o,s)),A0(this.i,i),this.bb&&fn(t,"TYPE","init"),this.P?(fn(t,"$req",e),fn(t,"SID","null"),i.aa=!0,T0(i,t,null)):T0(i,t,e),this.H=2}}else 3==this.H&&(n?YV(this,n):0==this.j.length||LV(this.i)||YV(this))},Ie.Ma=function(){if(this.u=null,e2(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=xg(Wr(this.jb,this),n)}},Ie.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,gi(10),LE(this),e2(this))},Ie.ib=function(){null!=this.v&&(this.v=null,LE(this),x0(this),gi(19))},Ie.pb=function(n){n?(this.l.info("Successfully pinged google.com"),gi(2)):(this.l.info("Failed to ping google.com"),gi(1))},Ie.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ie=a2.prototype).Ba=function(){},Ie.Aa=function(){},Ie.za=function(){},Ie.ya=function(){},Ie.isActive=function(){return!0},Ie.Va=function(){},BE.prototype.g=function(n,e){return new zi(n,e)},mr(zi,_r),zi.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;gi(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=s2(n,null,n.Y),VE(n)},zi.prototype.close=function(){P0(this.g)},zi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=m0(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&VE(e)},zi.prototype.N=function(){this.g.h=null,delete this.j,P0(this.g),delete this.g,zi.$.N.call(this)},mr(c2,I0),mr(l2,w0),mr(gh,a2),gh.prototype.Ba=function(){Sr(this.g,"a")},gh.prototype.Aa=function(n){Sr(this.g,new c2(n))},gh.prototype.za=function(n){Sr(this.g,new l2)},gh.prototype.ya=function(){Sr(this.g,"b")},mr(js,function rJ(){this.blockSize=-1}),js.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},js.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=t;)N0(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(r[i++]=n.charCodeAt(s++),i==this.blockSize){N0(this,r),i=0;break}}else for(;s<e;)if(r[i++]=n[s++],i==this.blockSize){N0(this,r),i=0;break}}this.h=i,this.i+=e},js.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var iJ={};function k0(n){return-128<=n&&128>n?function hX(n,e){var t=iJ;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new jt([0|e],0>e?-1:0)}):new jt([0|n],0>n?-1:0)}function To(n){if(isNaN(n)||!isFinite(n))return mh;if(0>n)return Ar(To(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=F0;return new jt(e,0)}var F0=4294967296,mh=k0(0),L0=k0(1),d2=k0(16777216);function aa(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function ys(n){return-1==n.h}function Ar(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new jt(t,~n.h).add(L0)}function jE(n,e){return n.add(Ar(e))}function $E(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function qg(n,e){this.g=n,this.h=e}function zE(n,e){if(aa(e))throw Error("division by zero");if(aa(n))return new qg(mh,mh);if(ys(n))return e=zE(Ar(n),e),new qg(Ar(e.g),Ar(e.h));if(ys(e))return e=zE(n,Ar(e)),new qg(Ar(e.g),e.h);if(30<n.g.length){if(ys(n)||ys(e))throw Error("slowDivide_ only works with positive integers.");for(var t=L0,r=e;0>=r.X(n);)t=h2(t),r=h2(r);var i=_h(t,1),s=_h(r,1);for(r=_h(r,2),t=_h(t,2);!aa(r);){var o=s.add(r);0>=o.X(n)&&(i=i.add(t),s=o),r=_h(r,1),t=_h(t,1)}return e=jE(n,i.R(e)),new qg(i,e)}for(i=mh;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),o=(s=To(t)).R(e);ys(o)||0<o.X(n);)o=(s=To(t-=r)).R(e);aa(s)&&(s=L0),i=i.add(s),n=jE(n,o)}return new qg(i,n)}function h2(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new jt(t,n.h)}function _h(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],s=0;s<r;s++)i[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new jt(i,n.h)}(Ie=jt.prototype).ea=function(){if(ys(this))return-Ar(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:F0+r)*e,e*=F0}return n},Ie.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(aa(this))return"0";if(ys(this))return"-"+Ar(this).toString(n);for(var e=To(Math.pow(n,6)),t=this,r="";;){var i=zE(t,e).g,s=((0<(t=jE(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(aa(t=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},Ie.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Ie.X=function(n){return ys(n=jE(this,n))?-1:aa(n)?0:1},Ie.abs=function(){return ys(this)?Ar(this):this},Ie.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&n.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=o>>>16,t[i]=(o&=65535)<<16|(s&=65535)}return new jt(t,-2147483648&t[t.length-1]?-1:0)},Ie.R=function(n){if(aa(this)||aa(n))return mh;if(ys(this))return ys(n)?Ar(this).R(Ar(n)):Ar(Ar(this).R(n));if(ys(n))return Ar(this.R(Ar(n)));if(0>this.X(d2)&&0>n.X(d2))return To(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=n.D(i)>>>16,c=65535&n.D(i);t[2*r+2*i]+=o*c,$E(t,2*r+2*i),t[2*r+2*i+1]+=s*c,$E(t,2*r+2*i+1),t[2*r+2*i+1]+=o*a,$E(t,2*r+2*i+1),t[2*r+2*i+2]+=s*a,$E(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new jt(t,0)},Ie.gb=function(n){return zE(this,n).h},Ie.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new jt(t,this.h&n.h)},Ie.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new jt(t,this.h|n.h)},Ie.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new jt(t,this.h^n.h)},BE.prototype.createWebChannel=BE.prototype.g,zi.prototype.send=zi.prototype.u,zi.prototype.open=zi.prototype.m,zi.prototype.close=zi.prototype.close,AE.NO_ERROR=0,AE.TIMEOUT=8,AE.HTTP_ERROR=6,EV.COMPLETE="complete",wV.EventType=Og,Og.OPEN="a",Og.CLOSE="b",Og.ERROR="c",Og.MESSAGE="d",_r.prototype.listen=_r.prototype.O,An.prototype.listenOnce=An.prototype.P,An.prototype.getLastError=An.prototype.Sa,An.prototype.getLastErrorCode=An.prototype.Ia,An.prototype.getStatus=An.prototype.da,An.prototype.getResponseJson=An.prototype.Wa,An.prototype.getResponseText=An.prototype.ja,An.prototype.send=An.prototype.ha,An.prototype.setWithCredentials=An.prototype.Oa,js.prototype.digest=js.prototype.l,js.prototype.reset=js.prototype.reset,js.prototype.update=js.prototype.j,jt.prototype.add=jt.prototype.add,jt.prototype.multiply=jt.prototype.R,jt.prototype.modulo=jt.prototype.gb,jt.prototype.compare=jt.prototype.X,jt.prototype.toNumber=jt.prototype.ea,jt.prototype.toString=jt.prototype.toString,jt.prototype.getBits=jt.prototype.D,jt.fromNumber=To,jt.fromString=function u2(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Ar(u2(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=To(Math.pow(e,8)),r=mh,i=0;i<n.length;i+=8){var s=Math.min(8,n.length-i),o=parseInt(n.substring(i,i+s),e);8>s?(s=To(Math.pow(e,s)),r=r.R(s).add(To(o))):r=(r=r.R(t)).add(To(o))}return r};var sJ=Bs.createWebChannelTransport=function(){return new BE},oJ=Bs.getStatEventTarget=function(){return SE()},V0=Bs.ErrorCode=AE,aJ=Bs.EventType=EV,cJ=Bs.Event=Yl,f2=Bs.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},HE=(Bs.FetchXmlHttpFactory=Bg,Bs.WebChannel=wV),lJ=Bs.XhrIo=An,uJ=Bs.Md5=js,yh=Bs.Integer=jt;const p2="@firebase/firestore";class yr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yr.UNAUTHENTICATED=new yr(null),yr.GOOGLE_CREDENTIALS=new yr("google-credentials-uid"),yr.FIRST_PARTY=new yr("first-party-uid"),yr.MOCK_USER=new yr("mock-user");let vh="10.7.0";const lc=new wo.Yd("@firebase/firestore");function Eh(){return lc.logLevel}function ce(n,...e){if(lc.logLevel<=wo.in.DEBUG){const t=e.map(U0);lc.debug(`Firestore (${vh}): ${n}`,...t)}}function kn(n,...e){if(lc.logLevel<=wo.in.ERROR){const t=e.map(U0);lc.error(`Firestore (${vh}): ${n}`,...t)}}function Ri(n,...e){if(lc.logLevel<=wo.in.WARN){const t=e.map(U0);lc.warn(`Firestore (${vh}): ${n}`,...t)}}function U0(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Ce(n="Unexpected state"){const e=`FIRESTORE (${vh}) INTERNAL ASSERTION FAILED: `+n;throw kn(e),new Error(e)}function xe(n,e){n||Ce()}function me(n,e){return n}const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends Xt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ar{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class g2{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fJ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yr.UNAUTHENTICATED))}shutdown(){}}class pJ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class gJ{constructor(e){this.t=e,this.currentUser=yr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=u=>this.i!==i?(i=this.i,t(u)):Promise.resolve();let o=new ar;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ar,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable((0,Q.Z)(function*(){yield u.promise,yield s(r.currentUser)}))},c=u=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ar)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xe("string"==typeof r.accessToken),new g2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return xe(null===e||"string"==typeof e),new yr(e)}}class mJ{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=yr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class _J{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new mJ(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(yr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class m2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yJ{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{null!=s.error&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ce("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(xe("string"==typeof t.token),this.R=t.token,new m2(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function vJ(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class _2{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=vJ(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function Ze(n,e){return n<e?-1:n>e?1:0}function Ih(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function y2(n){return n+"\0"}class In{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new oe(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new oe(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new oe(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return In.fromMillis(Date.now())}static fromDate(e){return In.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new In(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ze(this.nanoseconds,e.nanoseconds):Ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ne{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new In(0,0))}static max(){return new Ne(new In(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Gg{constructor(e,t,r){void 0===t?t=0:t>e.length&&Ce(),void 0===r?r=e.length-t:r>e.length-t&&Ce(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Gg.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Gg?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ct extends Gg{construct(e,t,r){return new Ct(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new oe(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Ct(t)}static emptyPath(){return new Ct([])}}const EJ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pn extends Gg{construct(e,t,r){return new pn(e,t,r)}static isValidIdentifier(e){return EJ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new pn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new oe(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new oe(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new oe(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new oe(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pn(t)}static emptyPath(){return new pn([])}}class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Ct.fromString(e))}static fromName(e){return new ye(Ct.fromString(e).popFirst(5))}static empty(){return new ye(Ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ct.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ct.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Ct(e.slice()))}}class wh{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function B0(n){return n.fields.find(e=>2===e.kind)}function tu(n){return n.fields.filter(e=>2!==e.kind)}wh.UNKNOWN_ID=-1;class nu{constructor(e,t){this.fieldPath=e,this.kind=t}}class bh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new bh(0,Hi.min())}}function v2(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ne.fromTimestamp(1e9===r?new In(t+1,0):new In(t,r));return new Hi(i,ye.empty(),e)}function E2(n){return new Hi(n.readTime,n.key,-1)}class Hi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Hi(Ne.min(),ye.empty(),-1)}static max(){return new Hi(Ne.max(),ye.empty(),-1)}}function j0(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ye.comparator(n.documentKey,e.documentKey),0!==t?t:Ze(n.largestBatchId,e.largestBatchId))}const I2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class w2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function uc(n){return $0.apply(this,arguments)}function $0(){return $0=(0,Q.Z)(function*(n){if(n.code!==z.FAILED_PRECONDITION||n.message!==I2)throw n;ce("LocalStore","Unexpectedly lost primary lease")}),$0.apply(this,arguments)}class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new L((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof L?t:L.resolve(t)}catch(t){return L.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):L.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):L.reject(t)}static resolve(e){return new L((t,r)=>{t(e)})}static reject(e){return new L((t,r)=>{r(e)})}static waitFor(e){return new L((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=L.resolve(!1);for(const r of e)t=t.next(i=>i?L.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new L((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const u=c;t(e[u]).next(h=>{o[u]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new L((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class qE{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new ar,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Wg(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=z0(r.target.error);this.V.reject(new Wg(e,i))}}static open(e,t,r,i){try{return new qE(t,e.transaction(i,r))}catch(s){throw new Wg(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ce("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new CJ(t)}}class $s{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===$s.S((0,Xt.z$)())&&kn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ce("SimpleDb","Removing database:",e),ru(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Xt.hl)())return!1;if($s.C())return!0;const e=(0,Xt.z$)(),t=$s.S(e),r=0<t&&t<10,i=$s.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var t=this;return(0,Q.Z)(function*(){return t.db||(ce("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new Wg(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new oe(z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new oe(z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new Wg(e,a))},s.onupgradeneeded=o=>{ce("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.N(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{ce("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,Q.Z)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.O(e);const c=qE.open(s.db,e,o?"readonly":"readwrite",r),u=i(c).next(h=>(c.g(),h)).catch(h=>(c.abort(h),L.reject(h))).toPromise();return u.catch(()=>{}),yield c.m,u}catch(c){const u=c,h="FirebaseError"!==u.name&&a<3;if(ce("SimpleDb","Transaction failed with error:",u.message,"Retrying:",h),s.close(),!h)return Promise.reject(u)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class bJ{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return ru(this.k.delete())}}class Wg extends oe{constructor(e,t){super(z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function dc(n){return"IndexedDbTransactionError"===n.name}class CJ{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ce("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ce("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ru(r)}add(e){return ce("SimpleDb","ADD",this.store.name,e,e),ru(this.store.add(e))}get(e){return ru(this.store.get(e)).next(t=>(void 0===t&&(t=null),ce("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ce("SimpleDb","DELETE",this.store.name,e),ru(this.store.delete(e))}count(){return ce("SimpleDb","COUNT",this.store.name),ru(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.G(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new L((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new L((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,t){ce("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.J=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.G(i,t)}Z(e){const t=this.cursor({});return new L((r,i)=>{t.onerror=s=>{const o=z0(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,t){const r=[];return new L((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const c=new bJ(a),u=t(a.primaryKey,a.value,c);if(u instanceof L){const h=u.catch(g=>(c.done(),L.reject(g)));r.push(h)}c.isDone?i():null===c.$?a.continue():a.continue(c.$)}}).next(()=>L.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ru(n){return new L((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=z0(r.target.error);t(i)}})}let b2=!1;function z0(n){const e=$s.S((0,Xt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new oe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return b2||(b2=!0,setTimeout(()=>{throw r},0)),r}}return n}class TJ{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var t=this;ce("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Q.Z)(function*(){t.task=null;try{ce("IndexBackiller",`Documents written: ${yield t.X.te()}`)}catch(r){dc(r)?ce("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield uc(r)}yield t.ee(6e4)}))}}class DJ{constructor(e,t){this.localStore=e,this.persistence=t}te(e=50){var t=this;return(0,Q.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.ne(r,e))})()}ne(e,t){const r=new Set;let i=t,s=!0;return L.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return ce("IndexBackiller",`Processing collection: ${o}`),this.re(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}re(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(i,s)).next(a=>(ce("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}ie(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=E2(s);j0(o,r)>0&&(r=o)}),new Hi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let qi=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}return n._e=-1,n})();function Kg(n){return null==n}function Zg(n){return 0===n&&1/n==-1/0}function C2(n){return"number"==typeof n&&Number.isInteger(n)&&!Zg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Zr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=T2(e)),e=SJ(n.get(t),e);return T2(e)}function SJ(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function T2(n){return n+"\x01\x01"}function Do(n){const e=n.length;if(xe(e>=2),2===e)return xe("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Ct.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&Ce(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let c;0===i.length?c=a:(i+=a,c=i,i=""),r.push(c);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:Ce()}s=o+2}return new Ct(r)}const D2=["userId","batchId"];function GE(n,e){return[n,Zr(e)]}function S2(n,e,t){return[n,Zr(e),t]}const AJ={},RJ=["prefixPath","collectionGroup","readTime","documentId"],MJ=["prefixPath","collectionGroup","documentId"],PJ=["collectionGroup","readTime","prefixPath","documentId"],xJ=["canonicalId","targetId"],OJ=["targetId","path"],NJ=["path","targetId"],kJ=["collectionId","parent"],FJ=["indexId","uid"],LJ=["uid","sequenceNumber"],VJ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],UJ=["indexId","uid","orderedDocumentKey"],BJ=["userId","collectionPath","documentId"],jJ=["userId","collectionPath","largestBatchId"],$J=["userId","collectionGroup","largestBatchId"],A2=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],zJ=[...A2,"documentOverlays"],R2=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],M2=R2,HJ=[...M2,"indexConfiguration","indexState","indexEntries"];class H0 extends w2{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function vr(n,e){const t=me(n);return $s.M(t.ae,e)}function P2(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function hc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function x2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class sn{constructor(e,t){this.comparator=e,this.root=t||Rr.EMPTY}insert(e,t){return new sn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Rr.BLACK,null,null))}remove(e){return new sn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new WE(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new WE(this.root,e,this.comparator,!1)}getReverseIterator(){return new WE(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new WE(this.root,e,this.comparator,!0)}}class WE{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rr{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Rr.RED,this.left=i??Rr.EMPTY,this.right=s??Rr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Rr(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Rr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Rr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ce();const e=this.left.check();if(e!==this.right.check())throw Ce();return e+(this.isRed()?0:1)}}Rr.EMPTY=null,Rr.RED=!0,Rr.BLACK=!1,Rr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce()}get value(){throw Ce()}get color(){throw Ce()}get left(){throw Ce()}get right(){throw Ce()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Rr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Gt{constructor(e){this.comparator=e,this.data=new sn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new O2(this.data.getIterator())}getIteratorFrom(e){return new O2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Gt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Gt(this.comparator);return t.data=e,t}}class O2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ch(n){return n.hasNext()?n.getNext():void 0}class Mi{constructor(e){this.fields=e,e.sort(pn.comparator)}static empty(){return new Mi([])}unionWith(e){let t=new Gt(pn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Mi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ih(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class N2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class cr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new N2("Invalid base64 string: "+s):s}}(e);return new cr(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new cr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cr.EMPTY_BYTE_STRING=new cr("");const GJ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fc(n){if(xe(!!n),"string"==typeof n){let e=0;const t=GJ.exec(n);if(xe(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Rn(n.seconds),nanos:Rn(n.nanos)}}function Rn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ca(n){return"string"==typeof n?cr.fromBase64String(n):cr.fromUint8Array(n)}function KE(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ZE(n){const e=n.mapValue.fields.__previous_value__;return KE(e)?ZE(e):e}function Qg(n){const e=fc(n.mapValue.fields.__local_write_time__.timestampValue);return new In(e.seconds,e.nanos)}class WJ{constructor(e,t,r,i,s,o,a,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}}class pc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new pc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof pc&&e.projectId===this.projectId&&e.database===this.database}}const gc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},QE={nullValue:"NULL_VALUE"};function mc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?KE(n)?4:V2(n)?9007199254740991:10:Ce()}function So(n,e){if(n===e)return!0;const t=mc(n);if(t!==mc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Qg(n).isEqual(Qg(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=fc(i.timestampValue),a=fc(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,ca(n.bytesValue).isEqual(ca(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Rn(i.geoPointValue.latitude)===Rn(s.geoPointValue.latitude)&&Rn(i.geoPointValue.longitude)===Rn(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Rn(i.integerValue)===Rn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Rn(i.doubleValue),a=Rn(s.doubleValue);return o===a?Zg(o)===Zg(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Ih(n.arrayValue.values||[],e.arrayValue.values||[],So);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(P2(o)!==P2(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(void 0===a[c]||!So(o[c],a[c])))return!1;return!0}(n,e);default:return Ce()}var s}function Yg(n,e){return void 0!==(n.values||[]).find(t=>So(t,e))}function _c(n,e){if(n===e)return 0;const t=mc(n),r=mc(e);if(t!==r)return Ze(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ze(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Rn(s.integerValue||s.doubleValue),c=Rn(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return k2(n.timestampValue,e.timestampValue);case 4:return k2(Qg(n),Qg(e));case 5:return Ze(n.stringValue,e.stringValue);case 6:return function(s,o){const a=ca(s),c=ca(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){const h=Ze(a[u],c[u]);if(0!==h)return h}return Ze(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ze(Rn(s.latitude),Rn(o.latitude));return 0!==a?a:Ze(Rn(s.longitude),Rn(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],c=o.values||[];for(let u=0;u<a.length&&u<c.length;++u){const h=_c(a[u],c[u]);if(h)return h}return Ze(a.length,c.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===gc.mapValue&&o===gc.mapValue)return 0;if(s===gc.mapValue)return 1;if(o===gc.mapValue)return-1;const a=s.fields||{},c=Object.keys(a),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let g=0;g<c.length&&g<h.length;++g){const m=Ze(c[g],h[g]);if(0!==m)return m;const y=_c(a[c[g]],u[h[g]]);if(0!==y)return y}return Ze(c.length,h.length)}(n.mapValue,e.mapValue);default:throw Ce()}}function k2(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ze(n,e);const t=fc(n),r=fc(e),i=Ze(t.seconds,r.seconds);return 0!==i?i:Ze(t.nanos,r.nanos)}function Th(n){return q0(n)}function q0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=fc(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ca(n.bytesValue).toBase64():"referenceValue"in n?ye.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=q0(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${q0(t.fields[o])}`;return i+"}"}(n.mapValue):Ce()}function iu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function G0(n){return!!n&&"integerValue"in n}function Xg(n){return!!n&&"arrayValue"in n}function F2(n){return!!n&&"nullValue"in n}function L2(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function XE(n){return!!n&&"mapValue"in n}function Jg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return hc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Jg(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Jg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function V2(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function KJ(n){return"nullValue"in n?QE:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?iu(pc.empty(),ye.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Ce()}function ZJ(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?iu(pc.empty(),ye.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?gc:Ce()}function U2(n,e){const t=_c(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function B2(n,e){const t=_c(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Mr{constructor(e){this.value=e}static empty(){return new Mr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!XE(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jg(t)}setAll(e){let t=pn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Jg(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());XE(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return So(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];XE(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){hc(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Mr(Jg(this.value))}}function j2(n){const e=[];return hc(n.fields,(t,r)=>{const i=new pn([t]);if(XE(r)){const s=j2(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Mi(e)}class gn{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new gn(e,0,Ne.min(),Ne.min(),Ne.min(),Mr.empty(),0)}static newFoundDocument(e,t,r,i){return new gn(e,1,t,Ne.min(),r,i,0)}static newNoDocument(e,t){return new gn(e,2,t,Ne.min(),Ne.min(),Mr.empty(),0)}static newUnknownDocument(e,t){return new gn(e,3,t,Ne.min(),Ne.min(),Mr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ne.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class yc{constructor(e,t){this.position=e,this.inclusive=t}}function $2(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?ye.comparator(ye.fromName(o.referenceValue),t.key):_c(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function z2(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!So(n.position[t],e.position[t]))return!1;return!0}class em{constructor(e,t="asc"){this.field=e,this.dir=t}}function QJ(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class H2{}class Et extends H2{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new YJ(e,t,r):"array-contains"===t?new eee(e,r):"in"===t?new Q2(e,r):"not-in"===t?new tee(e,r):"array-contains-any"===t?new nee(e,r):new Et(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new XJ(e,r):new JJ(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(_c(t,this.value)):null!==t&&mc(this.value)===mc(t)&&this.matchesComparison(_c(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ce()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $t extends H2{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new $t(e,t)}matches(e){return Dh(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Dh(n){return"and"===n.op}function W0(n){return"or"===n.op}function K0(n){return q2(n)&&Dh(n)}function q2(n){for(const e of n.filters)if(e instanceof $t)return!1;return!0}function Z0(n){if(n instanceof Et)return n.field.canonicalString()+n.op.toString()+Th(n.value);if(K0(n))return n.filters.map(e=>Z0(e)).join(",");{const e=n.filters.map(t=>Z0(t)).join(",");return`${n.op}(${e})`}}function G2(n,e){return n instanceof Et?(r=n,(i=e)instanceof Et&&r.op===i.op&&r.field.isEqual(i.field)&&So(r.value,i.value)):n instanceof $t?function(r,i){return i instanceof $t&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&G2(o,i.filters[a]),!0)}(n,e):void Ce();var r,i}function W2(n,e){const t=n.filters.concat(e);return $t.create(t,n.op)}function K2(n){return n instanceof Et?`${(t=n).field.canonicalString()} ${t.op} ${Th(t.value)}`:n instanceof $t?function(t){return t.op.toString()+" {"+t.getFilters().map(K2).join(" ,")+"}"}(n):"Filter";var t}class YJ extends Et{constructor(e,t,r){super(e,t,r),this.key=ye.fromName(r.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class XJ extends Et{constructor(e,t){super(e,"in",t),this.keys=Z2(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class JJ extends Et{constructor(e,t){super(e,"not-in",t),this.keys=Z2(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Z2(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ye.fromName(r.referenceValue))}class eee extends Et{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xg(t)&&Yg(t.arrayValue,this.value)}}class Q2 extends Et{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Yg(this.value.arrayValue,t)}}class tee extends Et{constructor(e,t){super(e,"not-in",t)}matches(e){if(Yg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Yg(this.value.arrayValue,t)}}class nee extends Et{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Yg(this.value.arrayValue,r))}}class ree{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function Q0(n,e=null,t=[],r=[],i=null,s=null,o=null){return new ree(n,e,t,r,i,s,o)}function su(n){const e=me(n);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Z0(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Kg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Th(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Th(r)).join(",")),e.ce=t}return e.ce}function tm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!QJ(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!G2(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!z2(n.startAt,e.startAt)&&z2(n.endAt,e.endAt)}function JE(n){return ye.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function eI(n,e){return n.filters.filter(t=>t instanceof Et&&t.field.isEqual(e))}function Y2(n,e,t){let r=QE,i=!0;for(const s of eI(n,e)){let o=QE,a=!0;switch(s.op){case"<":case"<=":o=KJ(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=QE}U2({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];U2({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function X2(n,e,t){let r=gc,i=!0;for(const s of eI(n,e)){let o=gc,a=!0;switch(s.op){case">=":case">":o=ZJ(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=gc}B2({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];B2({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class la{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null}}function J2(n,e,t,r,i,s,o,a){return new la(n,e,t,r,i,s,o,a)}function Sh(n){return new la(n)}function eU(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Y0(n){return null!==n.collectionGroup}function Ah(n){const e=me(n);if(null===e.le){e.le=[];const t=new Set;for(const s of e.explicitOrderBy)e.le.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Gt(pn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.le.push(new em(s,r))}),t.has(pn.keyField().canonicalString())||e.le.push(new em(pn.keyField(),r))}return e.le}function mi(n){const e=me(n);return e.he||(e.he=function tU(n,e){if("F"===n.limitType)return Q0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new em(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new yc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new yc(n.startAt.position,n.startAt.inclusive):null;return Q0(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,Ah(n))),e.he}function X0(n,e){const t=n.filters.concat([e]);return new la(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function tI(n,e,t){return new la(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function nm(n,e){return tm(mi(n),mi(e))&&n.limitType===e.limitType}function nU(n){return`${su(mi(n))}|lt:${n.limitType}`}function Rh(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>K2(i)).join(", ")}]`),Kg(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Th(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Th(i)).join(",")),`Target(${r})`}(mi(n))}; limitType=${n.limitType})`}function rm(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ye.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Ah(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,c){const u=$2(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,Ah(r),i)||r.endAt&&!function(o,a,c){const u=$2(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,Ah(r),i)));var r,i}function rU(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function iU(n){return(e,t)=>{let r=!1;for(const i of Ah(n)){const s=iee(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function iee(n,e,t){const r=n.field.isKeyField()?ye.comparator(e.key,t.key):function(s,o,a){const c=o.data.field(s),u=a.data.field(s);return null!==c&&null!==u?_c(c,u):Ce()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ce()}}class ua{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){hc(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return x2(this.inner)}size(){return this.innerSize}}const see=new sn(ye.comparator);function Pi(){return see}const sU=new sn(ye.comparator);function im(...n){let e=sU;for(const t of n)e=e.insert(t.key,t);return e}function oU(n){let e=sU;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ao(){return sm()}function aU(){return sm()}function sm(){return new ua(n=>n.toString(),(n,e)=>n.isEqual(e))}const oee=new sn(ye.comparator),aee=new Gt(ye.comparator);function rt(...n){let e=aee;for(const t of n)e=e.add(t);return e}const cee=new Gt(Ze);function J0(){return cee}function cU(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zg(e)?"-0":e}}function lU(n){return{integerValue:""+n}}function uU(n,e){return C2(e)?lU(e):cU(n,e)}class nI{constructor(){this._=void 0}}function lee(n,e,t){return n instanceof Mh?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&KE(s)&&(s=ZE(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof ou?hU(n,e):n instanceof au?fU(n,e):function(i,s){const o=dU(i,s),a=pU(o)+pU(i.Ie);return G0(o)&&G0(i.Ie)?lU(a):cU(i.serializer,a)}(n,e)}function uee(n,e,t){return n instanceof ou?hU(n,e):n instanceof au?fU(n,e):t}function dU(n,e){return n instanceof Ph?G0(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class Mh extends nI{}class ou extends nI{constructor(e){super(),this.elements=e}}function hU(n,e){const t=gU(e);for(const r of n.elements)t.some(i=>So(i,r))||t.push(r);return{arrayValue:{values:t}}}class au extends nI{constructor(e){super(),this.elements=e}}function fU(n,e){let t=gU(e);for(const r of n.elements)t=t.filter(i=>!So(i,r));return{arrayValue:{values:t}}}class Ph extends nI{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function pU(n){return Rn(n.integerValue||n.doubleValue)}function gU(n){return Xg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class om{constructor(e,t){this.field=e,this.transform=t}}class hee{constructor(e,t){this.version=e,this.transformResults=t}}class wn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new wn}static exists(e){return new wn(void 0,e)}static updateTime(e){return new wn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rI(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class iI{}function mU(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Oh(n.key,wn.none()):new xh(n.key,n.data,wn.none());{const t=n.data,r=Mr.empty();let i=new Gt(pn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new da(n.key,r,new Mi(i.toArray()),wn.none())}}function fee(n,e,t){n instanceof xh?function(i,s,o){const a=i.value.clone(),c=vU(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof da?function(i,s,o){if(!rI(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=vU(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(yU(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function am(n,e,t,r){return n instanceof xh?function(s,o,a,c){if(!rI(s.precondition,o))return a;const u=s.value.clone(),h=EU(s.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof da?function(s,o,a,c){if(!rI(s.precondition,o))return a;const u=EU(s.fieldTransforms,c,o),h=o.data;return h.setAll(yU(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,e,t,r):(a=t,rI(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function pee(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=dU(r.transform,i||null);null!=s&&(null===t&&(t=Mr.empty()),t.set(r.field,s))}return t||null}function _U(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&Ih(r,i,(s,o)=>function dee(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof ou&&i instanceof ou||r instanceof au&&i instanceof au?Ih(r.elements,i.elements,So):r instanceof Ph&&i instanceof Ph?So(r.Ie,i.Ie):r instanceof Mh&&i instanceof Mh);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class xh extends iI{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class da extends iI{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function yU(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function vU(n,e,t){const r=new Map;xe(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,uee(o,a,t[i]))}return r}function EU(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,lee(s,o,e))}return r}class Oh extends iI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eS extends iI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class tS{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&fee(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=am(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=am(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=aU();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const c=mU(o,a);null!==c&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Ne.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),rt())}isEqual(e){return this.batchId===e.batchId&&Ih(this.mutations,e.mutations,(t,r)=>_U(t,r))&&Ih(this.baseMutations,e.baseMutations,(t,r)=>_U(t,r))}}class nS{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){xe(e.mutations.length===r.length);let i=oee;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new nS(e,t,r,i)}}class rS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class mee{constructor(e,t){this.count=e,this.unchangedNames=t}}var qn,Tt;function IU(n){switch(n){default:return Ce();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0}}function wU(n){if(void 0===n)return kn("GRPC error has no .code"),z.UNKNOWN;switch(n){case qn.OK:return z.OK;case qn.CANCELLED:return z.CANCELLED;case qn.UNKNOWN:return z.UNKNOWN;case qn.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case qn.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case qn.INTERNAL:return z.INTERNAL;case qn.UNAVAILABLE:return z.UNAVAILABLE;case qn.UNAUTHENTICATED:return z.UNAUTHENTICATED;case qn.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case qn.NOT_FOUND:return z.NOT_FOUND;case qn.ALREADY_EXISTS:return z.ALREADY_EXISTS;case qn.PERMISSION_DENIED:return z.PERMISSION_DENIED;case qn.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case qn.ABORTED:return z.ABORTED;case qn.OUT_OF_RANGE:return z.OUT_OF_RANGE;case qn.UNIMPLEMENTED:return z.UNIMPLEMENTED;case qn.DATA_LOSS:return z.DATA_LOSS;default:return Ce()}}(Tt=qn||(qn={}))[Tt.OK=0]="OK",Tt[Tt.CANCELLED=1]="CANCELLED",Tt[Tt.UNKNOWN=2]="UNKNOWN",Tt[Tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tt[Tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tt[Tt.NOT_FOUND=5]="NOT_FOUND",Tt[Tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tt[Tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tt[Tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tt[Tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tt[Tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tt[Tt.ABORTED=10]="ABORTED",Tt[Tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tt[Tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tt[Tt.INTERNAL=13]="INTERNAL",Tt[Tt.UNAVAILABLE=14]="UNAVAILABLE",Tt[Tt.DATA_LOSS=15]="DATA_LOSS";function bU(){return new TextEncoder}const _ee=new yh([4294967295,4294967295],0);function CU(n){const e=bU().encode(n),t=new uJ;return t.update(e),new Uint8Array(t.digest())}function TU(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new yh([t,r],0),new yh([i,s],0)]}class iS{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new cm(`Invalid padding: ${t}`);if(r<0)throw new cm(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new cm(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new cm(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=yh.fromNumber(this.Te)}de(e,t,r){let i=e.add(t.multiply(yh.fromNumber(r)));return 1===i.compare(_ee)&&(i=new yh([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=CU(e),[r,i]=TU(t);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new iS(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Te)return;const t=CU(e),[r,i]=TU(t);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class cm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class lm{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,um.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new lm(Ne.min(),i,new sn(Ze),Pi(),rt())}}class um{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new um(r,t,rt(),rt(),rt())}}class oI{constructor(e,t,r,i){this.Ve=e,this.removedTargetIds=t,this.key=r,this.me=i}}class DU{constructor(e,t){this.targetId=e,this.fe=t}}class SU{constructor(e,t,r=cr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class AU{constructor(){this.ge=0,this.pe=MU(),this.ye=cr.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=rt(),t=rt(),r=rt();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ce()}}),new um(this.ye,this.we,e,t,r)}Fe(){this.Se=!1,this.pe=MU()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,xe(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class yee{constructor(e){this.Le=e,this.ke=new Map,this.qe=Pi(),this.Qe=RU(),this.Ke=new sn(Ze)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(t);break;case 3:this.je(t)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.Ce(e.resumeToken));break;default:Ce()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((r,i)=>{this.je(i)&&t(i)})}Je(e){const t=e.targetId,r=e.fe.count,i=this.Ye(t);if(i){const s=i.target;if(JE(s))if(0===r){const o=new ye(s.path);this.We(t,o,gn.newNoDocument(o,Ne.min()))}else xe(1===r);else{const o=this.Ze(t);if(o!==r){const a=this.Xe(e),c=a?this.et(a,e,o):1;0!==c&&(this.He(t),this.Ke=this.Ke.insert(t,2===c?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=ca(r).toUint8Array()}catch(c){if(c instanceof N2)return Ri("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new iS(o,i,s)}catch(c){return Ri(c instanceof cm?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return 0===a.Te?null:a}et(e,t,r){return t.fe.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(t,s,null),i++)}),i}it(e){const t=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&JE(a.target)){const c=new ye(a.target.path);null!==this.qe.get(c)||this.st(o,c)||this.We(o,c,gn.newNoDocument(c,e))}s.De&&(t.set(o,s.ve()),s.Fe())}});let r=rt();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const u=this.Ye(c);return!u||"TargetPurposeLimboResolution"===u.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new lm(e,t,this.Ke,this.qe,r);return this.qe=Pi(),this.Qe=RU(),this.Ke=new sn(Ze),i}Ue(e,t){if(!this.je(e))return;const r=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,r),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,t)?i.Me(t,1):i.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),r&&(this.qe=this.qe.insert(t,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new AU,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new Gt(Ze),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||ce("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new AU),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function RU(){return new sn(ye.comparator)}function MU(){return new sn(ye.comparator)}const vee={asc:"ASCENDING",desc:"DESCENDING"},Eee={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Iee={and:"AND",or:"OR"};class wee{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function sS(n,e){return n.useProto3Json||Kg(e)?e:{value:e}}function Nh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PU(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function bee(n,e){return Nh(n,e.toTimestamp())}function Fn(n){return xe(!!n),Ne.fromTimestamp(function(t){const r=fc(t);return new In(r.seconds,r.nanos)}(n))}function oS(n,e){return(r=n,new Ct(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function xU(n){const e=Ct.fromString(n);return xe(jU(e)),e}function dm(n,e){return oS(n.databaseId,e.path)}function Ro(n,e){const t=xU(e);if(t.get(1)!==n.databaseId.projectId)throw new oe(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new oe(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ye(NU(t))}function aS(n,e){return oS(n.databaseId,e)}function OU(n){const e=xU(n);return 4===e.length?Ct.emptyPath():NU(e)}function hm(n){return new Ct(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function NU(n){return xe(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function kU(n,e,t){return{name:dm(n,e),fields:t.value.mapValue.fields}}function FU(n,e,t){const r=Ro(n,e.name),i=Fn(e.updateTime),s=e.createTime?Fn(e.createTime):Ne.min(),o=new Mr({mapValue:{fields:e.fields}}),a=gn.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function fm(n,e){let t;if(e instanceof xh)t={update:kU(n,e.key,e.value)};else if(e instanceof Oh)t={delete:dm(n,e.key)};else if(e instanceof da)t={update:kU(n,e.key,e.data),updateMask:Pee(e.fieldMask)};else{if(!(e instanceof eS))return Ce();t={verify:dm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Mh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ou)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof au)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ph)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw Ce()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:bee(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Ce()),t;var s}function cS(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?wn.updateTime(Fn(s.updateTime)):void 0!==s.exists?wn.exists(s.exists):wn.none():wn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;"setToServerValue"in a?(xe("REQUEST_TIME"===a.setToServerValue),c=new Mh):"appendMissingElements"in a?c=new ou(a.appendMissingElements.values||[]):"removeAllFromArray"in a?c=new au(a.removeAllFromArray.values||[]):"increment"in a?c=new Ph(o,a.increment):Ce();const u=pn.fromServerFormat(a.fieldPath);return new om(u,c)}(n,i)):[];var s;if(e.update){const i=Ro(n,e.update.name),s=new Mr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new Mi((e.updateMask.fieldPaths||[]).map(h=>pn.fromServerFormat(h)));return new da(i,s,o,t,r)}return new xh(i,s,t,r)}if(e.delete){const i=Ro(n,e.delete);return new Oh(i,t)}if(e.verify){const i=Ro(n,e.verify);return new eS(i,t)}return Ce()}function LU(n,e){return{documents:[aS(n,e.path)]}}function lS(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=aS(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=aS(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(c){if(0!==c.length)return BU($t.create(c,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const s=function(c){if(0!==c.length)return c.map(u=>{return{field:vc((g=u).field),direction:Aee(g.dir)};var g})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=sS(n,e.limit);return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),t;var c}function VU(n){let e=OU(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){xe(1===r);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(g){const m=UU(g);return m instanceof $t&&K0(m)?m.getFilters():[m]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(m=>{return new em(kh((E=m).field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction));var E}));let a=null;t.limit&&(a=function(g){let m;return m="object"==typeof g?g.value:g,Kg(m)?null:m}(t.limit));let c=null;var g;t.startAt&&(c=new yc((g=t.startAt).values||[],!!g.before));let u=null;return t.endAt&&(u=function(g){return new yc(g.values||[],!g.before)}(t.endAt)),J2(e,i,o,s,a,"F",c,u)}function UU(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=kh(t.unaryFilter.field);return Et.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=kh(t.unaryFilter.field);return Et.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=kh(t.unaryFilter.field);return Et.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=kh(t.unaryFilter.field);return Et.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ce()}}(n):void 0!==n.fieldFilter?Et.create(kh((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ce()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return $t.create(t.compositeFilter.filters.map(r=>UU(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ce()}}(t.compositeFilter.op))}(n):Ce();var t}function Aee(n){return vee[n]}function Ree(n){return Eee[n]}function Mee(n){return Iee[n]}function vc(n){return{fieldPath:n.canonicalString()}}function kh(n){return pn.fromServerFormat(n.fieldPath)}function BU(n){return n instanceof Et?function(t){if("=="===t.op){if(L2(t.value))return{unaryFilter:{field:vc(t.field),op:"IS_NAN"}};if(F2(t.value))return{unaryFilter:{field:vc(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(L2(t.value))return{unaryFilter:{field:vc(t.field),op:"IS_NOT_NAN"}};if(F2(t.value))return{unaryFilter:{field:vc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vc(t.field),op:Ree(t.op),value:t.value}}}(n):n instanceof $t?function(t){const r=t.getFilters().map(i=>BU(i));return 1===r.length?r[0]:{compositeFilter:{op:Mee(t.op),filters:r}}}(n):Ce()}function Pee(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function jU(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class ha{constructor(e,t,r,i,s=Ne.min(),o=Ne.min(),a=cr.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new ha(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ha(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ha(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ha(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class $U{constructor(e){this.ut=e}}function zU(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:aI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:dm(s=n.ut,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Nh(s,o.version.toTimestamp()),createTime:Nh(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:cu(e.version)};else{if(!e.isUnknownDocument())return Ce();r.unknownDocument={path:t.path.toArray(),version:cu(e.version)}}var s,o;return r}function aI(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function cu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function lu(n){const e=new In(n.seconds,n.nanoseconds);return Ne.fromTimestamp(e)}function uu(n,e){const t=(e.baseMutations||[]).map(s=>cS(n.ut,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>cS(n.ut,s)),i=In.fromMillis(e.localWriteTimeMs);return new tS(e.batchId,i,t,r)}function pm(n){const e=lu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?lu(n.lastLimboFreeSnapshotVersion):Ne.min();let r;return r=void 0!==n.query.documents?(xe(1===(s=n.query).documents.length),mi(Sh(OU(s.documents[0])))):function(s){return mi(VU(s))}(n.query),new ha(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,cr.fromBase64String(n.resumeToken));var s}function HU(n,e){const t=cu(e.snapshotVersion),r=cu(e.lastLimboFreeSnapshotVersion);let i;i=JE(e.target)?LU(n.ut,e.target):lS(n.ut,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:su(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function uS(n){const e=VU({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?tI(e,e.limit,"L"):e}function dS(n,e){return new rS(e.largestBatchId,cS(n.ut,e.overlayMutation))}function qU(n,e){const t=e.path.lastSegment();return[n,Zr(e.path.popLast()),t]}function GU(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:cu(r.readTime),documentKey:Zr(r.documentKey.path),largestBatchId:r.largestBatchId}}class Oee{getBundleMetadata(e,t){return WU(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:lu(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return WU(e).put({bundleId:(i=t).id,createTime:cu(Fn(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return KU(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:uS(s.bundledQuery),readTime:lu(s.readTime)};var s})}saveNamedQuery(e,t){return KU(e).put({name:(i=t).name,readTime:cu(Fn(i.readTime)),bundledQuery:i.bundledQuery});var i}}function WU(n){return vr(n,"bundles")}function KU(n){return vr(n,"namedQueries")}class cI{constructor(e,t){this.serializer=e,this.userId=t}static ct(e,t){return new cI(e,t.uid||"")}getOverlay(e,t){return gm(e).get(qU(this.userId,t)).next(r=>r?dS(this.serializer,r):null)}getOverlays(e,t){const r=Ao();return L.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new rS(t,o);i.push(this.lt(e,a))}),L.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(Zr(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(gm(e).H("collectionPathOverlayIndex",a))}),L.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Ao(),s=Zr(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return gm(e).W("collectionPathOverlayIndex",o).next(a=>{for(const c of a){const u=dS(this.serializer,c);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Ao();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return gm(e).Y({index:"collectionGroupOverlayIndex",range:a},(c,u,h)=>{const g=dS(this.serializer,u);s.size()<i||g.largestBatchId===o?(s.set(g.getKey(),g),o=g.largestBatchId):h.done()}).next(()=>s)}lt(e,t){return gm(e).put(function(i,s,o){const[a,c,u]=qU(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:fm(i.ut,o.mutation)}}(this.serializer,this.userId,t))}}function gm(n){return vr(n,"documentOverlays")}class du{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(Rn(e.integerValue));else if("doubleValue"in e){const r=Rn(e.doubleValue);isNaN(r)?this.Tt(t,13):(this.Tt(t,15),Zg(r)?t.Et(0):t.Et(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Tt(t,20),"string"==typeof r?t.dt(r):(t.dt(`${r.seconds||""}`),t.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(ca(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Tt(t,45),t.Et(r.latitude||0),t.Et(r.longitude||0)}else"mapValue"in e?V2(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):Ce()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const r=e.fields||{};this.Tt(t,55);for(const i of Object.keys(r))this.At(i,t),this.Pt(r[i],t)}yt(e,t){const r=e.values||[];this.Tt(t,50);for(const i of r)this.Pt(i,t)}ft(e,t){this.Tt(t,37),ye.fromName(e).path.forEach(r=>{this.Tt(t,60),this.wt(r,t)})}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}function Nee(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function ZU(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=Nee(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}du.St=new du;class kee{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Dt(r.value),r=t.next();this.Ct()}vt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{const i=t.codePointAt(0);this.Dt(240|i>>>18),this.Dt(128|63&i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i)}}this.Ct()}Ot(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Nt(e){const t=this.Bt(e),r=ZU(t);this.Lt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}kt(e){const t=this.Bt(e),r=ZU(t);this.Lt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Dt(e){const t=255&e;0===t?(this.Qt(0),this.Qt(255)):255===t?(this.Qt(255),this.Qt(0)):this.Qt(t)}Ft(e){const t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Fee{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class Lee{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class mm{constructor(){this.Wt=new kee,this.Gt=new Fee(this.Wt),this.zt=new Lee(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class hu{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ht(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new hu(this.indexId,this.documentKey,this.arrayValue,r)}}function Ec(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=QU(n.arrayValue,e.arrayValue),0!==t?t:(t=QU(n.directionalValue,e.directionalValue),0!==t?t:ye.comparator(n.documentKey,e.documentKey)))}function QU(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class YU{constructor(e){this.Jt=new Gt((t,r)=>pn.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const t of e.filters){const r=t;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if(xe(e.collectionGroup===this.collectionId),this.Xt)return!1;const t=B0(e);if(void 0!==t&&!this.tn(t))return!1;const r=tu(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.tn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Jt.size>0){const a=this.Jt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const c=r[s];if(!this.nn(a,c)||!this.rn(this.Yt[o++],c))return!1}++s}for(;s<r.length;++s)if(o>=this.Yt.length||!this.rn(this.Yt[o++],r[s]))return!1;return!0}sn(){if(this.Xt)return null;let e=new Gt(pn.comparator);const t=[];for(const r of this.Zt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new nu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new nu(r.field,0))}for(const r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new nu(r.field,"asc"===r.dir?0:1)));return new wh(wh.UNKNOWN_ID,this.collectionId,t,bh.empty())}tn(e){for(const t of this.Zt)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function XU(n){var e,t;if(xe(n instanceof Et||n instanceof $t),n instanceof Et){if(n instanceof Q2){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>Et.create(n.field,"==",s)))||[];return $t.create(i,"or")}return n}const r=n.filters.map(i=>XU(i));return $t.create(r,n.op)}function Vee(n){if(0===n.getFilters().length)return[];const e=pS(XU(n));return xe(JU(e)),hS(e)||fS(e)?[e]:e.getFilters()}function hS(n){return n instanceof Et}function fS(n){return n instanceof $t&&K0(n)}function JU(n){return hS(n)||fS(n)||function(t){if(t instanceof $t&&W0(t)){for(const r of t.getFilters())if(!hS(r)&&!fS(r))return!1;return!0}return!1}(n)}function pS(n){if(xe(n instanceof Et||n instanceof $t),n instanceof Et)return n;if(1===n.filters.length)return pS(n.filters[0]);const e=n.filters.map(r=>pS(r));let t=$t.create(e,n.op);return t=lI(t),JU(t)?t:(xe(t instanceof $t),xe(Dh(t)),xe(t.filters.length>1),t.filters.reduce((r,i)=>gS(r,i)))}function gS(n,e){let t;return xe(n instanceof Et||n instanceof $t),xe(e instanceof Et||e instanceof $t),t=n instanceof Et?e instanceof Et?$t.create([n,e],"and"):eB(n,e):e instanceof Et?eB(e,n):function(i,s){if(xe(i.filters.length>0&&s.filters.length>0),Dh(i)&&Dh(s))return W2(i,s.getFilters());const o=W0(i)?i:s,a=W0(i)?s:i,c=o.filters.map(u=>gS(u,a));return $t.create(c,"or")}(n,e),lI(t)}function eB(n,e){if(Dh(e))return W2(e,n.getFilters());{const t=e.filters.map(r=>gS(n,r));return $t.create(t,"or")}}function lI(n){if(xe(n instanceof Et||n instanceof $t),n instanceof Et)return n;const e=n.getFilters();if(1===e.length)return lI(e[0]);if(q2(n))return n;const t=e.map(i=>lI(i)),r=[];return t.forEach(i=>{i instanceof Et?r.push(i):i instanceof $t&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:$t.create(r,n.op)}class Uee{constructor(){this.on=new mS}addToCollectionParentIndex(e,t){return this.on.add(t),L.resolve()}getCollectionParents(e,t){return L.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return L.resolve()}deleteFieldIndex(e,t){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,t){return L.resolve()}getDocumentsMatchingTarget(e,t){return L.resolve(null)}getIndexType(e,t){return L.resolve(0)}getFieldIndexes(e,t){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,t){return L.resolve(Hi.min())}getMinOffsetFromCollectionGroup(e,t){return L.resolve(Hi.min())}updateCollectionGroup(e,t,r){return L.resolve()}updateIndexEntries(e,t){return L.resolve()}}class mS{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Gt(Ct.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Gt(Ct.comparator)).toArray()}}const uI=new Uint8Array(0);class Bee{constructor(e,t){this.user=e,this.databaseId=t,this._n=new mS,this.an=new ua(r=>su(r),(r,i)=>tm(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this._n.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this._n.add(t)});const s={collectionId:r,parent:Zr(i)};return tB(e).put(s)}return L.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[y2(t),""],!1,!0);return tB(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(Do(o.parent))}return r})}addFieldIndex(e,t){const r=_m(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=Lh(e);return s.next(a=>{o.put(GU(a,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=_m(e),i=Lh(e),s=Fh(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=_m(e),r=Fh(e),i=Lh(e);return t.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,t){return L.forEach(this.un(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new YU(r).sn();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=Fh(e);let i=!0;const s=new Map;return L.forEach(this.un(t),o=>this.cn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=rt();const a=[];return L.forEach(s,(c,u)=>{var F;ce("IndexedDbIndexManager",`Using index ${F=c,`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map(Y=>`${Y.fieldPath}:${Y.kind}`).join(",")}`} to execute ${su(t)}`);const h=function(F,Y){const he=B0(Y);if(void 0===he)return null;for(const Oe of eI(F,he.fieldPath))switch(Oe.op){case"array-contains-any":return Oe.value.arrayValue.values||[];case"array-contains":return[Oe.value]}return null}(u,c),g=function(F,Y){const he=new Map;for(const Oe of tu(Y))for(const We of eI(F,Oe.fieldPath))switch(We.op){case"==":case"in":he.set(Oe.fieldPath.canonicalString(),We.value);break;case"not-in":case"!=":return he.set(Oe.fieldPath.canonicalString(),We.value),Array.from(he.values())}return null}(u,c),m=function(F,Y){const he=[];let Oe=!0;for(const We of tu(Y)){const Ft=0===We.kind?Y2(F,We.fieldPath,F.startAt):X2(F,We.fieldPath,F.startAt);he.push(Ft.value),Oe&&(Oe=Ft.inclusive)}return new yc(he,Oe)}(u,c),y=function(F,Y){const he=[];let Oe=!0;for(const We of tu(Y)){const Ft=0===We.kind?X2(F,We.fieldPath,F.endAt):Y2(F,We.fieldPath,F.endAt);he.push(Ft.value),Oe&&(Oe=Ft.inclusive)}return new yc(he,Oe)}(u,c),E=this.ln(c,u,m),I=this.ln(c,u,y),b=this.hn(c,u,g),P=this.Pn(c.indexId,h,E,m.inclusive,I,y.inclusive,b);return L.forEach(P,S=>r.j(S,t.limit).next(F=>{F.forEach(Y=>{const he=ye.fromSegments(Y.documentKey);o.has(he)||(o=o.add(he),a.push(he))})}))}).next(()=>a)}return L.resolve(null)})}un(e){let t=this.an.get(e);return t||(t=0===e.filters.length?[e]:Vee($t.create(e.filters,"and")).map(r=>Q0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,t),t)}Pn(e,t,r,i,s,o,a){const c=(null!=t?t.length:1)*Math.max(r.length,s.length),u=c/(null!=t?t.length:1),h=[];for(let g=0;g<c;++g){const m=t?this.In(t[g/u]):uI,y=this.Tn(e,m,r[g%u],i),E=this.En(e,m,s[g%u],o),I=a.map(b=>this.Tn(e,m,b,!0));h.push(...this.createRange(y,E,I))}return h}Tn(e,t,r,i){const s=new hu(e,ye.empty(),t,r);return i?s:s.Ht()}En(e,t,r,i){const s=new hu(e,ye.empty(),t,r);return i?s.Ht():s}cn(e,t){const r=new YU(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.en(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.un(t);return L.forEach(i,s=>this.cn(e,s).next(o=>{o?0!==r&&o.fields.length<function(c){let u=new Gt(pn.comparator),h=!1;for(const g of c.filters)for(const m of g.getFlattenedFilters())m.field.isKeyField()||("array-contains"===m.op||"array-contains-any"===m.op?h=!0:u=u.add(m.field));for(const g of c.orderBy)g.field.isKeyField()||(u=u.add(g.field));return u.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}dn(e,t){const r=new mm;for(const i of tu(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.jt(i.kind);du.St.ht(s,o)}return r.Ut()}In(e){const t=new mm;return du.St.ht(e,t.jt(0)),t.Ut()}An(e,t){const r=new mm;return du.St.ht(iu(this.databaseId,t),r.jt(function(s){const o=tu(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Ut()}hn(e,t,r){if(null===r)return[];let i=[];i.push(new mm);let s=0;for(const o of tu(e)){const a=r[s++];for(const c of i)if(this.Rn(t,o.fieldPath)&&Xg(a))i=this.Vn(i,o,a);else{const u=c.jt(o.kind);du.St.ht(a,u)}}return this.mn(i)}ln(e,t,r){return this.hn(e,t,r.position)}mn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Ut();return t}Vn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const c=new mm;c.seed(a.Ut()),du.St.ht(o,c.jt(t.kind)),s.push(c)}return s}Rn(e,t){return!!e.filters.find(r=>r instanceof Et&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=_m(e),i=Lh(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(s=>{const o=[];return L.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(h,g){const m=g?new bh(g.sequenceNumber,new Hi(lu(g.readTime),new ye(Do(g.documentKey)),g.largestBatchId)):bh.empty(),y=h.fields.map(([E,I])=>new nu(pn.fromServerFormat(E),I));return new wh(h.indexId,h.collectionGroup,y,m)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Ze(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=_m(e),s=Lh(e);return this.fn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>L.forEach(a,c=>s.put(GU(c.indexId,this.user,o,r)))))}updateIndexEntries(e,t){const r=new Map;return L.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?L.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),L.forEach(a,c=>this.gn(e,i,c).next(u=>{const h=this.pn(s,c);return u.isEqual(h)?L.resolve():this.yn(e,s,c,u,h)}))))})}wn(e,t,r,i){return Fh(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.An(r,t.key),documentKey:t.key.path.toArray()})}Sn(e,t,r,i){return Fh(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.An(r,t.key),t.key.path.toArray()])}gn(e,t,r){const i=Fh(e);let s=new Gt(Ec);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,t)])},(o,a)=>{s=s.add(new hu(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}pn(e,t){let r=new Gt(Ec);const i=this.dn(t,e);if(null==i)return r;const s=B0(t);if(null!=s){const o=e.data.field(s.fieldPath);if(Xg(o))for(const a of o.arrayValue.values||[])r=r.add(new hu(t.indexId,e.key,this.In(a),i))}else r=r.add(new hu(t.indexId,e.key,uI,i));return r}yn(e,t,r,i,s){ce("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(c,u,h,g,m){const y=c.getIterator(),E=u.getIterator();let I=Ch(y),b=Ch(E);for(;I||b;){let P=!1,S=!1;if(I&&b){const F=h(I,b);F<0?S=!0:F>0&&(P=!0)}else null!=I?S=!0:P=!0;P?(g(b),b=Ch(E)):S?(m(I),I=Ch(y)):(I=Ch(y),b=Ch(E))}}(i,s,Ec,a=>{o.push(this.wn(e,t,r,a))},a=>{o.push(this.Sn(e,t,r,a))}),L.waitFor(o)}fn(e){let t=1;return Lh(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Ec(o,a)).filter((o,a,c)=>!a||0!==Ec(o,c[a-1]));const i=[];i.push(e);for(const o of r){const a=Ec(o,e),c=Ec(o,t);if(0===a)i[0]=e.Ht();else if(a>0&&c<0)i.push(o),i.push(o.Ht());else if(c>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.bn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,uI,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,uI,[]]))}return s}bn(e,t){return Ec(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(nB)}getMinOffset(e,t){return L.mapArray(this.un(t),r=>this.cn(e,r).next(i=>i||Ce())).next(nB)}}function tB(n){return vr(n,"collectionParents")}function Fh(n){return vr(n,"indexEntries")}function _m(n){return vr(n,"indexConfiguration")}function Lh(n){return vr(n,"indexState")}function nB(n){xe(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;j0(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Hi(e.readTime,e.documentKey,t)}const rB={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Qr{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Qr(e,Qr.DEFAULT_COLLECTION_PERCENTILE,Qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function iB(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const c=r.Y({range:o},(h,g,m)=>(a++,m.delete()));s.push(c.next(()=>{xe(1===a)}));const u=[];for(const h of t.mutations){const g=S2(e,h.key.path,t.batchId);s.push(i.delete(g)),u.push(h.key)}return L.waitFor(s).next(()=>u)}function dI(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ce();e=n.noDocument}return JSON.stringify(e).length}Qr.DEFAULT_COLLECTION_PERCENTILE=10,Qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qr.DEFAULT=new Qr(41943040,Qr.DEFAULT_COLLECTION_PERCENTILE,Qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qr.DISABLED=new Qr(-1,0,0);class hI{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Dn={}}static ct(e,t,r,i){xe(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new hI(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ic(e).Y({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Vh(e),o=Ic(e);return o.add({}).next(a=>{xe("number"==typeof a);const c=new tS(a,t,r,i),u=function(y,E,I){const b=I.baseMutations.map(S=>fm(y.ut,S)),P=I.mutations.map(S=>fm(y.ut,S));return{userId:E,batchId:I.batchId,localWriteTimeMs:I.localWriteTime.toMillis(),baseMutations:b,mutations:P}}(this.serializer,this.userId,c),h=[];let g=new Gt((m,y)=>Ze(m.canonicalString(),y.canonicalString()));for(const m of i){const y=S2(this.userId,m.key.path,a);g=g.add(m.key.path.popLast()),h.push(o.put(u)),h.push(s.put(y,AJ))}return g.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Dn[a]=c.keys()}),L.waitFor(h).next(()=>c)})}lookupMutationBatch(e,t){return Ic(e).get(t).next(r=>r?(xe(r.userId===this.userId),uu(this.serializer,r)):null)}Cn(e,t){return this.Dn[t]?L.resolve(this.Dn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Dn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Ic(e).Y({index:"userMutationsIndex",range:i},(o,a,c)=>{a.userId===this.userId&&(xe(a.batchId>=r),s=uu(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ic(e).Y({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ic(e).W("userMutationsIndex",t).next(r=>r.map(i=>uu(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=GE(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Vh(e).Y({range:i},(o,a,c)=>{const[u,h,g]=o,m=Do(h);if(u===this.userId&&t.path.isEqual(m))return Ic(e).get(g).next(y=>{if(!y)throw Ce();xe(y.userId===this.userId),s.push(uu(this.serializer,y))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Gt(Ze);const i=[];return t.forEach(s=>{const o=GE(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=Vh(e).Y({range:a},(u,h,g)=>{const[m,y,E]=u,I=Do(y);m===this.userId&&s.path.isEqual(I)?r=r.add(E):g.done()});i.push(c)}),L.waitFor(i).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=GE(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Gt(Ze);return Vh(e).Y({range:o},(c,u,h)=>{const[g,m,y]=c,E=Do(m);g===this.userId&&r.isPrefixOf(E)?E.length===i&&(a=a.add(y)):h.done()}).next(()=>this.vn(e,a))}vn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Ic(e).get(s).next(o=>{if(null===o)throw Ce();xe(o.userId===this.userId),r.push(uu(this.serializer,o))}))}),L.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return iB(e.ae,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Fn(t.batchId)}),L.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return L.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Vh(e).Y({range:r},(s,o,a)=>{if(s[0]===this.userId){const c=Do(s[1]);i.push(c)}else a.done()}).next(()=>{xe(0===i.length)})})}containsKey(e,t){return sB(e,this.userId,t)}Mn(e){return oB(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function sB(n,e,t){const r=GE(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Vh(n).Y({range:s,J:!0},(a,c,u)=>{const[h,g,m]=a;h===e&&g===i&&(o=!0),u.done()}).next(()=>o)}function Ic(n){return vr(n,"mutations")}function Vh(n){return vr(n,"documentMutations")}function oB(n){return vr(n,"mutationQueues")}class fu{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new fu(0)}static Nn(){return new fu(-1)}}class jee{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{const r=new fu(t.highestTargetId);return t.highestTargetId=r.next(),this.Ln(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>Ne.fromTimestamp(new In(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Ln(e,i)))}addTargetData(e,t){return this.kn(e,t).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.qn(t,r),this.Ln(e,r))))}updateTargetData(e,t){return this.kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Uh(e).delete(t.targetId)).next(()=>this.Bn(e)).next(r=>(xe(r.targetCount>0),r.targetCount-=1,this.Ln(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Uh(e).Y((o,a)=>{const c=pm(a);c.sequenceNumber<=t&&null===r.get(c.targetId)&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>L.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Uh(e).Y((r,i)=>{const s=pm(i);t(s)})}Bn(e){return aB(e).get("targetGlobalKey").next(t=>(xe(null!==t),t))}Ln(e,t){return aB(e).put("targetGlobalKey",t)}kn(e,t){return Uh(e).put(HU(this.serializer,t))}qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=su(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Uh(e).Y({range:i,index:"queryTargetsIndex"},(o,a,c)=>{const u=pm(a);tm(t,u.target)&&(s=u,c.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=wc(e);return t.forEach(o=>{const a=Zr(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),L.waitFor(i)}removeMatchingKeys(e,t,r){const i=wc(e);return L.forEach(t,s=>{const o=Zr(s.path);return L.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=wc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=wc(e);let s=rt();return i.Y({range:r,J:!0},(o,a,c)=>{const u=Do(o[1]),h=new ye(u);s=s.add(h)}).next(()=>s)}containsKey(e,t){const r=Zr(t.path),i=IDBKeyRange.bound([r],[y2(r)],!1,!0);let s=0;return wc(e).Y({index:"documentTargetsIndex",J:!0,range:i},([o,a],c,u)=>{0!==o&&(s++,u.done())}).next(()=>s>0)}_t(e,t){return Uh(e).get(t).next(r=>r?pm(r):null)}}function Uh(n){return vr(n,"targets")}function aB(n){return vr(n,"targetGlobal")}function wc(n){return vr(n,"targetDocuments")}function cB([n,e],[t,r]){const i=Ze(n,t);return 0===i?Ze(e,r):i}class $ee{constructor(e){this.Qn=e,this.buffer=new Gt(cB),this.Kn=0}$n(){return++this.Kn}Un(e){const t=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();cB(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class lB{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var t=this;ce("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Q.Z)(function*(){t.Wn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){dc(r)?ce("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield uc(r)}yield t.Gn(3e5)}))}}class zee{constructor(e,t){this.zn=e,this.params=t}calculateTargetCount(e,t){return this.zn.jn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return L.resolve(qi._e);const r=new $ee(t);return this.zn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.zn.Hn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.zn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(rB)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rB):this.Jn(e,t))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,t){let r,i,s,o,a,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,t))).next(g=>(s=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(u=Date.now(),Eh()<=wo.in.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-h}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(c-a)+`ms\n\tRemoved ${g} documents in `+(u-c)+`ms\nTotal Duration: ${u-h}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}class Hee{constructor(e,t){this.db=e,this.garbageCollector=function uB(n,e){return new zee(n,e)}(this,t)}jn(e){const t=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Yn(e){let t=0;return this.Hn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Hn(e,t){return this.Zn(e,(r,i)=>t(i))}addReference(e,t,r){return fI(e,r)}removeReference(e,t,r){return fI(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return fI(e,t)}Xn(e,t){return function(i,s){let o=!1;return oB(i).Z(a=>sB(i,a,s).next(c=>(c&&(o=!0),L.resolve(!c)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Zn(e,(o,a)=>{if(a<=t){const c=this.Xn(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Ne.min()),wc(e).delete([0,Zr(o.path)])))});i.push(c)}}).next(()=>L.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return fI(e,t)}Zn(e,t){const r=wc(e);let i,s=qi._e;return r.Y({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:u})=>{0===o?(s!==qi._e&&t(new ye(Do(i)),s),s=u,i=c):s=qi._e}).next(()=>{s!==qi._e&&t(new ye(Do(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function fI(n,e){return wc(n).put((i=n.currentSequenceNumber,{targetId:0,path:Zr(e.path),sequenceNumber:i}));var i}class dB{constructor(){this.changes=new ua(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,gn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?L.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class qee{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return pu(e).put(r)}removeEntry(e,t,r){return pu(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],aI(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.er(e,r)))}getEntry(e,t){let r=gn.newInvalidDocument(t);return pu(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(ym(t))},(i,s)=>{r=this.tr(t,s)}).next(()=>r)}nr(e,t){let r={size:0,document:gn.newInvalidDocument(t)};return pu(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(ym(t))},(i,s)=>{r={document:this.tr(t,s),size:dI(s)}}).next(()=>r)}getEntries(e,t){let r=Pi();return this.rr(e,t,(i,s)=>{const o=this.tr(i,s);r=r.insert(i,o)}).next(()=>r)}ir(e,t){let r=Pi(),i=new sn(ye.comparator);return this.rr(e,t,(s,o)=>{const a=this.tr(s,o);r=r.insert(s,a),i=i.insert(s,dI(o))}).next(()=>({documents:r,sr:i}))}rr(e,t,r){if(t.isEmpty())return L.resolve();let i=new Gt(gB);t.forEach(c=>i=i.add(c));const s=IDBKeyRange.bound(ym(i.first()),ym(i.last())),o=i.getIterator();let a=o.getNext();return pu(e).Y({index:"documentKeyIndex",range:s},(c,u,h)=>{const g=ye.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&gB(a,g)<0;)r(a,null),a=o.getNext();a&&a.isEqual(g)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?h.U(ym(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),aI(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pu(e).W(IDBKeyRange.bound(a,c,!0)).next(u=>{s?.incrementDocumentReadCount(u.length);let h=Pi();for(const g of u){const m=this.tr(ye.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);m.isFoundDocument()&&(rm(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,i){let s=Pi();const o=pB(t,r),a=pB(t,Hi.max());return pu(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,u,h)=>{const g=this.tr(ye.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(g.key,g),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new Gee(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return fB(e).get("remoteDocumentGlobalKey").next(t=>(xe(!!t),t))}er(e,t){return fB(e).put("remoteDocumentGlobalKey",t)}tr(e,t){if(t){const r=function xee(n,e){let t;if(e.document)t=FU(n.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ye.fromSegments(e.noDocument.path),i=lu(e.noDocument.readTime);t=gn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ce();{const r=ye.fromSegments(e.unknownDocument.path),i=lu(e.unknownDocument.version);t=gn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new In(i[0],i[1]);return Ne.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Ne.min()))return r}return gn.newInvalidDocument(e)}}function hB(n){return new qee(n)}class Gee extends dB{constructor(e,t){super(),this._r=e,this.trackRemovals=t,this.ar=new ua(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Gt((s,o)=>Ze(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ar.get(s);if(t.push(this._r.removeEntry(e,s,a.readTime)),o.isValidDocument()){const c=zU(this._r.serializer,o);i=i.add(s.path.popLast());const u=dI(c);r+=u-a.size,t.push(this._r.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){const c=zU(this._r.serializer,o.convertToNoDocument(Ne.min()));t.push(this._r.addEntry(e,s,c))}}),i.forEach(s=>{t.push(this._r.indexManager.addToCollectionParentIndex(e,s))}),t.push(this._r.updateMetadata(e,r)),L.waitFor(t)}getFromCache(e,t){return this._r.nr(e,t).next(r=>(this.ar.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this._r.ir(e,t).next(({documents:r,sr:i})=>(i.forEach((s,o)=>{this.ar.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function fB(n){return vr(n,"remoteDocumentGlobal")}function pu(n){return vr(n,"remoteDocumentsV14")}function ym(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function pB(n,e){const t=e.documentKey.path.toArray();return[n,aI(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function gB(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Ze(t[s],r[s]),i)return i;return i=Ze(t.length,r.length),i||(i=Ze(t[t.length-2],r[r.length-2]),i||Ze(t[t.length-1],r[r.length-1]))}class Wee{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class mB{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&am(r.mutation,i,Mi.empty(),In.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,rt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=rt()){const i=Ao();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=im();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Ao();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,rt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Pi();const o=sm(),a=sm();return t.forEach((c,u)=>{const h=r.get(u.key);i.has(u.key)&&(void 0===h||h.mutation instanceof da)?s=s.insert(u.key,u):void 0!==h?(o.set(u.key,h.mutation.getFieldMask()),am(h.mutation,u,h.mutation.getFieldMask(),In.now())):o.set(u.key,Mi.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,h)=>o.set(u,h)),t.forEach((u,h)=>{var g;return a.set(u,new Wee(h,null!==(g=o.get(u))&&void 0!==g?g:null))}),a))}recalculateAndSaveOverlays(e,t){const r=sm();let i=new sn((o,a)=>o-a),s=rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(c=>{const u=t.get(c);if(null===u)return;let h=r.get(c)||Mi.empty();h=a.applyToLocalView(u,h),r.set(c,h);const g=(i.get(a.batchId)||rt()).add(c);i=i.insert(a.batchId,g)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,h=c.value,g=aU();h.forEach(m=>{if(!s.has(m)){const y=mU(t.get(m),r.get(m));null!==y&&g.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,g))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return ye.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Y0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):L.resolve(Ao());let a=-1,c=s;return o.next(u=>L.forEach(u,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(h)?L.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,rt())).next(h=>({batchId:a,changes:oU(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next(r=>{let i=im();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=im();return this.indexManager.getCollectionParents(e,s).next(a=>L.forEach(a,c=>{const u=(g=t,m=c.child(s),new la(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,m;return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((g,m)=>{o=o.insert(g,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,u)=>{const h=u.getKey();null===o.get(h)&&(o=o.insert(h,gn.newInvalidDocument(h)))});let a=im();return o.forEach((c,u)=>{const h=s.get(c);void 0!==h&&am(h.mutation,u,Mi.empty(),In.now()),rm(t,u)&&(a=a.insert(c,u))}),a})}}class Kee{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return L.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,{id:(i=t).id,version:i.version,createTime:Fn(i.createTime)}),L.resolve();var i}getNamedQuery(e,t){return L.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,{name:(i=t).name,query:uS(i.bundledQuery),readTime:Fn(i.readTime)}),L.resolve();var i}}class Zee{constructor(){this.overlays=new sn(ye.comparator),this.lr=new Map}getOverlay(e,t){return L.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ao();return L.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.lt(e,t,s)}),L.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.lr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),L.resolve()}getOverlaysForCollection(e,t,r){const i=Ao(),s=t.length+1,o=new ye(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return L.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new sn((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let h=s.get(u.largestBatchId);null===h&&(h=Ao(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Ao(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return L.resolve(a)}lt(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new rS(t,r));let s=this.lr.get(t);void 0===s&&(s=rt(),this.lr.set(t,s)),this.lr.set(t,s.add(r.key))}}class _S{constructor(){this.hr=new Gt(Er.Pr),this.Ir=new Gt(Er.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const r=new Er(e,t);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.dr(new Er(e,t))}Ar(e,t){e.forEach(r=>this.removeReference(r,t))}Rr(e){const t=new ye(new Ct([])),r=new Er(t,e),i=new Er(t,e+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new ye(new Ct([])),r=new Er(t,e),i=new Er(t,e+1);let s=rt();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Er(e,0),r=this.hr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Er{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return ye.comparator(e.key,t.key)||Ze(e.gr,t.gr)}static Tr(e,t){return Ze(e.gr,t.gr)||ye.comparator(e.key,t.key)}}class Qee{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new Gt(Er.Pr)}checkEmpty(e){return L.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.pr;this.pr++;const o=new tS(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.yr=this.yr.add(new Er(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,t){return L.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Sr(t+1),s=i<0?0:i;return L.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Er(t,0),i=new Er(t,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{const a=this.wr(o.gr);s.push(a)}),L.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Gt(Ze);return t.forEach(i=>{const s=new Er(i,0),o=new Er(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{r=r.add(a.gr)})}),L.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;ye.isDocumentKey(s)||(s=s.child(""));const o=new Er(new ye(s),0);let a=new Gt(Ze);return this.yr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.gr)),!0)},o),L.resolve(this.br(a))}br(e){const t=[];return e.forEach(r=>{const i=this.wr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){xe(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.yr;return L.forEach(t.mutations,i=>{const s=new Er(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,t){const r=new Er(t,0),i=this.yr.firstAfterOrEqual(r);return L.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return L.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Yee{constructor(e){this.Cr=e,this.docs=new sn(ye.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return L.resolve(r?r.document.mutableCopy():gn.newInvalidDocument(t))}getEntries(e,t){let r=Pi();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():gn.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Pi();const o=t.path,a=new ye(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||j0(E2(h),r)<=0||(i.has(h.key)||rm(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return L.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ce()}vr(e,t){return L.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Xee(this)}getSize(e){return L.resolve(this.size)}}class Xee extends dB{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),L.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class Jee{constructor(e){this.persistence=e,this.Fr=new ua(t=>su(t),tm),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.Mr=0,this.Or=new _S,this.targetCount=0,this.Nr=fu.On()}forEachTarget(e,t){return this.Fr.forEach((r,i)=>t(i)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Mr&&(this.Mr=t),L.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new fu(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,L.resolve()}updateTargetData(e,t){return this.kn(t),L.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),L.waitFor(s).next(()=>i)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,t){const r=this.Fr.get(t)||null;return L.resolve(r)}addMatchingKeys(e,t,r){return this.Or.Er(t,r),L.resolve()}removeMatchingKeys(e,t,r){this.Or.Ar(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),L.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),L.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Or.mr(t);return L.resolve(r)}containsKey(e,t){return L.resolve(this.Or.containsKey(t))}}class yS{constructor(e,t){this.Br={},this.overlays={},this.Lr=new qi(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new Jee(this),this.indexManager=new Uee,this.remoteDocumentCache=new Yee(r=>this.referenceDelegate.Qr(r)),this.serializer=new $U(t),this.Kr=new Kee(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Zee,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new Qee(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,r){ce("MemoryPersistence","Starting transaction:",e);const i=new ete(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(e,t){return L.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}}class ete extends w2{constructor(e){super(),this.currentSequenceNumber=e}}class pI{constructor(e){this.persistence=e,this.Gr=new _S,this.zr=null}static jr(e){return new pI(e)}get Hr(){if(this.zr)return this.zr;throw Ce()}addReference(e,t,r){return this.Gr.addReference(r,t),this.Hr.delete(r.toString()),L.resolve()}removeReference(e,t,r){return this.Gr.removeReference(r,t),this.Hr.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),L.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach(i=>this.Hr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.Hr,r=>{const i=ye.fromPath(r);return this.Jr(e,i).next(s=>{s||t.removeEntry(i,Ne.min())})}).next(()=>(this.zr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Jr(e,t).next(r=>{r?this.Hr.delete(t.toString()):this.Hr.add(t.toString())})}Qr(e){return 0}Jr(e,t){return L.or([()=>L.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class tte{constructor(e){this.serializer=e}N(e,t,r,i){const s=new qE("createOrUpgrade",t);var c;r<1&&i>=1&&(e.createObjectStore("owner"),(c=e).createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",D2,{unique:!0}),c.createObjectStore("documentMutations"),_B(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=L.resolve();return r<3&&i>=3&&(0!==r&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),_B(e)),o=o.next(()=>function(c){const u=c.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ne.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",h)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(c,u){return u.store("mutations").W().next(h=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",D2,{unique:!0});const g=u.store("mutations"),m=h.map(y=>g.put(y));return L.waitFor(m)})}(e,s))),o=o.next(()=>{!function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Zr(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(s)))),r<7&&i>=7&&(o=o.next(()=>this.ei(s))),r<8&&i>=8&&(o=o.next(()=>this.ti(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ni(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(c){const u=c.createObjectStore("documentOverlays",{keyPath:BJ});u.createIndex("collectionPathOverlayIndex",jJ,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",$J,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){const u=c.createObjectStore("remoteDocumentsV14",{keyPath:RJ});u.createIndex("documentKeyIndex",MJ),u.createIndex("collectionGroupIndex",PJ)}(e)).next(()=>this.ri(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ii(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:FJ}).createIndex("sequenceNumberIndex",LJ,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:VJ}).createIndex("documentKeyIndex",UJ,{unique:!1})}(e))),o}Xr(e){let t=0;return e.store("remoteDocuments").Y((r,i)=>{t+=dI(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>L.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>L.forEach(a,c=>{xe(c.userId===s.userId);const u=uu(this.serializer,c);return iB(e,s.userId,u).next(()=>{})}))}))}ei(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Y((o,a)=>{const c=new Ct(o),u=[0,Zr(c)];s.push(t.get(u).next(h=>h?L.resolve():t.put({targetId:0,path:Zr(c),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>L.waitFor(s))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:kJ});const r=t.store("collectionParents"),i=new mS,s=o=>{if(i.add(o)){const a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:Zr(c)})}};return t.store("remoteDocuments").Y({J:!0},(o,a)=>{const c=new Ct(o);return s(c.popLast())}).next(()=>t.store("documentMutations").Y({J:!0},([o,a,c],u)=>{const h=Do(a);return s(h.popLast())}))}ni(e){const t=e.store("targets");return t.Y((r,i)=>{const s=pm(i),o=HU(this.serializer,s);return t.put(o)})}ri(e,t){const r=t.store("remoteDocuments"),i=[];return r.Y((s,o)=>{const a=t.store("remoteDocumentsV14"),c=(g=o,g.document?new ye(Ct.fromString(g.document.name).popFirst(5)):g.noDocument?ye.fromSegments(g.noDocument.path):g.unknownDocument?ye.fromSegments(g.unknownDocument.path):Ce()).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var g;i.push(a.put(u))}).next(()=>L.waitFor(i))}ii(e,t){const r=t.store("mutations"),i=hB(this.serializer),s=new yS(pI.jr,this.serializer.ut);return r.W().next(o=>{const a=new Map;return o.forEach(c=>{var u;let h=null!==(u=a.get(c.userId))&&void 0!==u?u:rt();uu(this.serializer,c).keys().forEach(g=>h=h.add(g)),a.set(c.userId,h)}),L.forEach(a,(c,u)=>{const h=new yr(u),g=cI.ct(this.serializer,h),m=s.getIndexManager(h),y=hI.ct(h,this.serializer,m,s.referenceDelegate);return new mB(i,y,g,m).recalculateAndSaveOverlaysForDocumentKeys(new H0(t,qi._e),c).next()})})}}function _B(n){n.createObjectStore("targetDocuments",{keyPath:OJ}).createIndex("documentTargetsIndex",NJ,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",xJ,{unique:!0}),n.createObjectStore("targetGlobal")}const vS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ES{constructor(e,t,r,i,s,o,a,c,u,h,g=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.si=s,this.window=o,this.document=a,this.oi=u,this._i=h,this.ai=g,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=m=>Promise.resolve(),!ES.D())throw new oe(z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Hee(this,i),this.Ii=t+"main",this.serializer=new $U(c),this.Ti=new $s(this.Ii,this.ai,new tte(this.serializer)),this.qr=new jee(this.referenceDelegate,this.serializer),this.remoteDocumentCache=hB(this.serializer),this.Kr=new Oee,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===h&&kn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new oe(z.FAILED_PRECONDITION,vS);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new qi(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var t=this;return this.Pi=function(){var r=(0,Q.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var t=(0,Q.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,Q.Z)(function*(){t.started&&(yield t.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>mI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(t=>this.isPrimary&&!t?this.pi(e).next(()=>!1):!!t&&this.yi(e).next(()=>!0))).catch(e=>{if(dc(e))return ce("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ce("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return vm(e).get("owner").next(t=>L.resolve(this.wi(t)))}Si(e){return mI(e).delete(this.clientId)}bi(){var e=this;return(0,Q.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=vr(r,"clientMetadata");return i.W().next(s=>{const o=e.Ci(s,18e5),a=s.filter(c=>-1===o.indexOf(c));return L.forEach(a,c=>i.delete(c.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Ei)for(const r of t)e.Ei.removeItem(e.vi(r.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?L.resolve(!0):vm(e).get("owner").next(t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)){if(this.wi(t)&&this.networkEnabled)return!0;if(!this.wi(t)){if(!t.allowTabSynchronization)throw new oe(z.FAILED_PRECONDITION,vS);return!1}}return!(!this.networkEnabled||!this.inForeground)||mI(e).W().next(r=>void 0===this.Ci(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&ce("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Q.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new H0(t,qi._e);return e.pi(r).next(()=>e.Si(r))}),e.Ti.close(),e.Ni()})()}Ci(e,t){return e.filter(r=>this.Di(r.updateTimeMs,t)&&!this.Fi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>mI(e).W().next(t=>this.Ci(t,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,t){return hI.ct(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Bee(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return cI.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,t,r){ce("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(c=this.ai)?HJ:14===c?M2:13===c?R2:12===c?zJ:11===c?A2:void Ce();var c;let o;return this.Ti.runTransaction(e,i,s,a=>(o=new H0(a,this.Lr?this.Lr.next():qi._e),"readwrite-primary"===t?this.fi(o).next(c=>!!c||this.gi(o)).next(c=>{if(!c)throw kn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new oe(z.FAILED_PRECONDITION,I2);return r(o)}).next(c=>this.yi(o).next(()=>c)):this.Li(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Li(e){return vm(e).get("owner").next(t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)&&!this.wi(t)&&!(this._i||this.allowTabSynchronization&&t.allowTabSynchronization))throw new oe(z.FAILED_PRECONDITION,vS)})}yi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vm(e).put("owner",t)}static D(){return $s.D()}pi(e){const t=vm(e);return t.get("owner").next(r=>this.wi(r)?(ce("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):L.resolve())}Di(e,t){const r=Date.now();return!(e<r-t||e>r&&(kn(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const t=/(?:Version|Mobile)\/1[456]/;(0,Xt.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var t;try{const r=null!==(null===(t=this.Ei)||void 0===t?void 0:t.getItem(this.vi(e)));return ce("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return kn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){kn("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function vm(n){return vr(n,"owner")}function mI(n){return vr(n,"clientMetadata")}function IS(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class wS{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ki=r,this.qi=i}static Qi(e,t){let r=rt(),i=rt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new wS(e,t.fromCache,r,i)}}class nte{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class yB{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.zi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new nte;return this.Hi(e,t,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,t,o,a.size)})}).next(()=>s.result)}Ji(e,t,r,i){return r.documentReadCount<this.Ui?(Eh()<=wo.in.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",Rh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),L.resolve()):(Eh()<=wo.in.DEBUG&&ce("QueryEngine","Query:",Rh(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(Eh()<=wo.in.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",Rh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mi(t))):L.resolve())}zi(e,t){if(eU(t))return L.resolve(null);let r=mi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=tI(t,null,"F"),r=mi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=rt(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.Yi(t,a);return this.Zi(t,u,o,c.readTime)?this.zi(e,tI(t,null,"F")):this.Xi(e,u,t,c)}))})))}ji(e,t,r,i){return eU(t)||i.isEqual(Ne.min())?L.resolve(null):this.Gi.getDocuments(e,r).next(s=>{const o=this.Yi(t,s);return this.Zi(t,o,r,i)?L.resolve(null):(Eh()<=wo.in.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Rh(t)),this.Xi(e,o,t,v2(i,-1)).next(a=>a))})}Yi(e,t){let r=new Gt(iU(e));return t.forEach((i,s)=>{rm(e,s)&&(r=r.add(s))}),r}Zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(e,t,r){return Eh()<=wo.in.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",Rh(t)),this.Gi.getDocumentsMatchingQuery(e,t,Hi.min(),r)}Xi(e,t,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class rte{constructor(e,t,r,i){this.persistence=e,this.es=t,this.serializer=i,this.ts=new sn(Ze),this.ns=new ua(s=>su(s),tm),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mB(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ts))}}function vB(n,e,t,r){return new rte(n,e,t,r)}function EB(n,e){return bS.apply(this,arguments)}function bS(){return bS=(0,Q.Z)(function*(n,e){const t=me(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.os(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let c=rt();for(const u of i){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of s){a.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(u=>({_s:u,removedBatchIds:o,addedBatchIds:a}))})})}),bS.apply(this,arguments)}function IB(n){const e=me(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.qr.getLastRemoteSnapshotVersion(t))}function wB(n,e,t){let r=rt(),i=rt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Pi();return t.forEach((a,c)=>{const u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Ne.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||0===c.version.compareTo(u.version)&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):ce("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{us:o,cs:i}})}function ote(n,e){const t=me(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Bh(n,e){const t=me(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.qr.getTargetData(r,e).next(s=>s?(i=s,L.resolve(i)):t.qr.allocateTargetId(r).next(o=>(i=new ha(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ts.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ts=t.ts.insert(r.targetId,r),t.ns.set(e,r.targetId)),r})}function jh(n,e,t){return CS.apply(this,arguments)}function CS(){return CS=(0,Q.Z)(function*(n,e,t){const r=me(n),i=r.ts.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!dc(o))throw o;ce("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)}),CS.apply(this,arguments)}function _I(n,e,t){const r=me(n);let i=Ne.min(),s=rt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const g=me(c),m=g.ns.get(h);return void 0!==m?L.resolve(g.ts.get(m)):g.qr.getTargetData(u,h)}(r,o,mi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.es.getDocumentsMatchingQuery(o,e,t?i:Ne.min(),t?s:rt())).next(a=>(TB(r,rU(e),a),{documents:a,ls:s})))}function bB(n,e){const t=me(n),r=me(t.qr),i=t.ts.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r._t(s,e).next(o=>o?o.target:null))}function CB(n,e){const t=me(n),r=t.rs.get(e)||Ne.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.ss.getAllFromCollectionGroup(i,e,v2(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(TB(t,e,i),i))}function TB(n,e,t){let r=n.rs.get(e)||Ne.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.rs.set(e,r)}function TS(){return TS=(0,Q.Z)(function*(n,e,t,r){const i=me(n);let s=rt(),o=Pi();for(const u of t){const h=e.hs(u.metadata.name);u.document&&(s=s.add(h));const g=e.Ps(u);g.setReadTime(e.Is(u.metadata.readTime)),o=o.insert(h,g)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),c=yield Bh(i,(h=r,mi(Sh(Ct.fromString(`__bundle__/docs/${h}`)))));var h;return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>wB(u,a,o).next(h=>(a.apply(u),h)).next(h=>i.qr.removeMatchingKeysForTargetId(u,c.targetId).next(()=>i.qr.addMatchingKeys(u,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,h.us,h.cs)).next(()=>h.us)))}),TS.apply(this,arguments)}function cte(n,e){return DS.apply(this,arguments)}function DS(){return DS=(0,Q.Z)(function*(n,e,t=rt()){const r=yield Bh(n,mi(uS(e.bundledQuery))),i=me(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Fn(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Kr.saveNamedQuery(s,e);const a=r.withResumeToken(cr.EMPTY_BYTE_STRING,o);return i.ts=i.ts.insert(a.targetId,a),i.qr.updateTargetData(s,a).next(()=>i.qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.qr.addMatchingKeys(s,t,r.targetId)).next(()=>i.Kr.saveNamedQuery(s,e))})}),DS.apply(this,arguments)}function DB(n,e){return`firestore_clients_${n}_${e}`}function SB(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function SS(n,e){return`firestore_targets_${n}_${e}`}class yI{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ts(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new oe(i.error.code,i.error.message))),o?new yI(e,t,i.state,s):(kn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Em{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ts(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new oe(r.error.code,r.error.message))),s?new Em(e,r.state,i):(kn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ts(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=J0();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=C2(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new vI(e,s):(kn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class AS{constructor(e,t){this.clientId=e,this.onlineState=t}static Ts(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new AS(t.clientId,t.onlineState):(kn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class RS{constructor(){this.activeTargetIds=J0()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class MS{constructor(e,t,r,i,s){this.window=e,this.si=t,this.persistenceKey=r,this.Rs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new sn(Ze),this.started=!1,this.ps=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ys=DB(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new RS),this.Ss=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Q.Z)(function*(){const t=yield e.syncEngine.Bi();for(const i of t){if(i===e.Rs)continue;const s=e.getItem(DB(e.persistenceKey,i));if(s){const o=vI.Ts(i,s);o&&(e.gs=e.gs.insert(o.clientId,o))}}e.Fs();const r=e.storage.getItem(e.Cs);if(r){const i=e.Ms(r);i&&e.xs(i)}for(const i of e.ps)e.fs(i);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let t=!1;return this.gs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,t,r){this.Ns(e,t,r),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(SS(this.persistenceKey,e));if(r){const i=Em.Ts(e,r);i&&(t=i.state)}}return this.Ls.ds(e),this.Fs(),t}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(SS(this.persistenceKey,e))}updateQueryState(e,t,r){this.ks(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ce("SharedClientState","READ",e,t),t}setItem(e,t){ce("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ce("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ce("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ys)return void kn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,Q.Z)(function*(){if(t.started){if(null!==r.key)if(t.Ss.test(r.key)){if(null==r.newValue){const i=t.Ks(r.key);return t.$s(i,null)}{const i=t.Us(r.key,r.newValue);if(i)return t.$s(i.clientId,i)}}else if(t.bs.test(r.key)){if(null!==r.newValue){const i=t.Ws(r.key,r.newValue);if(i)return t.Gs(i)}}else if(t.Ds.test(r.key)){if(null!==r.newValue){const i=t.zs(r.key,r.newValue);if(i)return t.js(i)}}else if(r.key===t.Cs){if(null!==r.newValue){const i=t.Ms(r.newValue);if(i)return t.xs(i)}}else if(r.key===t.ws){const i=function(o){let a=qi._e;if(null!=o)try{const c=JSON.parse(o);xe("number"==typeof c),a=c}catch(c){kn("SharedClientState","Failed to read sequence number from WebStorage",c)}return a}(r.newValue);i!==qi._e&&t.sequenceNumberHandler(i)}else if(r.key===t.vs){const i=t.Hs(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Js(s)))}}else t.ps.push(r)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,t,r){const i=new yI(this.currentUser,e,t,r),s=SB(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Es())}Bs(e){const t=SB(this.persistenceKey,this.currentUser,e);this.removeItem(t)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,t,r){const i=SS(this.persistenceKey,e),s=new Em(e,t,r);this.setItem(i,s.Es())}Qs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.vs,t)}Ks(e){const t=this.Ss.exec(e);return t?t[1]:null}Us(e,t){const r=this.Ks(e);return vI.Ts(r,t)}Ws(e,t){const r=this.bs.exec(e),i=Number(r[1]);return yI.Ts(new yr(void 0!==r[2]?r[2]:null),i,t)}zs(e,t){const r=this.Ds.exec(e),i=Number(r[1]);return Em.Ts(i,t)}Ms(e){return AS.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var t=this;return(0,Q.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Ys(e.batchId,e.state,e.error);ce("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,t){const r=t?this.gs.insert(e,t):this.gs.remove(e),i=this.Os(this.gs),s=this.Os(r),o=[],a=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.Xs(o,a).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let t=J0();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class AB{constructor(){this.eo=new RS,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,r){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new RS,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class lte{ro(e){}shutdown(){}}class RB{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){ce("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){ce("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let EI=null;function PS(){return null===EI?EI=268435456+Math.round(2147483648*Math.random()):EI++,"0x"+EI.toString(16)}const ute={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dte{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const Yr="WebChannelConnection";class hte extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+t.host,this.fo=`projects/${i}/databases/${s}`,this.po="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get yo(){return!1}wo(t,r,i,s,o){const a=PS(),c=this.So(t,r);ce("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);const u={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(u,s,o),this.Do(t,c,u,i).then(h=>(ce("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw Ri("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}Co(t,r,i,s,o,a){return this.wo(t,r,i,s,o)}bo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+vh,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}So(t,r){return`${this.mo}/v1/${r}:${ute[t]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,t,r,i){const s=PS();return new Promise((o,a)=>{const c=new lJ;c.setWithCredentials(!0),c.listenOnce(aJ.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case V0.NO_ERROR:const h=c.getResponseJson();ce(Yr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case V0.TIMEOUT:ce(Yr,`RPC '${e}' ${s} timed out`),a(new oe(z.DEADLINE_EXCEEDED,"Request time out"));break;case V0.HTTP_ERROR:const g=c.getStatus();if(ce(Yr,`RPC '${e}' ${s} failed with status:`,g,"response text:",c.getResponseText()),g>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m?.error;if(y&&y.status&&y.message){const E=function(b){const P=b.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(P)>=0?P:z.UNKNOWN}(y.status);a(new oe(E,y.message))}else a(new oe(z.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new oe(z.UNAVAILABLE,"Connection failed."));break;default:Ce()}}finally{ce(Yr,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);ce(Yr,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",u,r,15)})}vo(e,t,r){const i=PS(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=sJ(),a=oJ(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.bo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const h=s.join("");ce(Yr,`Creating RPC '${e}' stream ${i}: ${h}`,c);const g=o.createWebChannel(h,c);let m=!1,y=!1;const E=new dte({co:b=>{y?ce(Yr,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(m||(ce(Yr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),m=!0),ce(Yr,`RPC '${e}' stream ${i} sending:`,b),g.send(b))},lo:()=>g.close()}),I=(b,P,S)=>{b.listen(P,F=>{try{S(F)}catch(Y){setTimeout(()=>{throw Y},0)}})};return I(g,HE.EventType.OPEN,()=>{y||ce(Yr,`RPC '${e}' stream ${i} transport opened.`)}),I(g,HE.EventType.CLOSE,()=>{y||(y=!0,ce(Yr,`RPC '${e}' stream ${i} transport closed`),E.Ro())}),I(g,HE.EventType.ERROR,b=>{y||(y=!0,Ri(Yr,`RPC '${e}' stream ${i} transport errored:`,b),E.Ro(new oe(z.UNAVAILABLE,"The operation could not be completed")))}),I(g,HE.EventType.MESSAGE,b=>{var P;if(!y){const S=b.data[0];xe(!!S);const Y=S.error||(null===(P=S[0])||void 0===P?void 0:P.error);if(Y){ce(Yr,`RPC '${e}' stream ${i} received error:`,Y);const he=Y.status;let Oe=function(Ei){const xi=qn[Ei];if(void 0!==xi)return wU(xi)}(he),We=Y.message;void 0===Oe&&(Oe=z.INTERNAL,We="Unknown error status: "+he+" with message "+Y.message),y=!0,E.Ro(new oe(Oe,We)),g.close()}else ce(Yr,`RPC '${e}' stream ${i} received:`,S),E.Vo(S)}}),I(a,cJ.STAT_EVENT,b=>{b.stat===f2.PROXY?ce(Yr,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===f2.NOPROXY&&ce(Yr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.Ao()},0),E}}function MB(){return typeof window<"u"?window:null}function II(){return typeof document<"u"?document:null}function Im(n){return new wee(n,!0)}class xS{constructor(e,t,r=1e3,i=1.5,s=6e4){this.si=e,this.timerId=t,this.Fo=r,this.Mo=i,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const t=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,t-r);i>0&&ce("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class PB{constructor(e,t,r,i,s,o,a,c){this.si=e,this.Ko=r,this.$o=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new xS(e,t)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,Q.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,Q.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,t){var r=this;return(0,Q.Z)(function*(){r.t_(),r.n_(),r.zo.cancel(),r.Uo++,4!==e?r.zo.reset():t&&t.code===z.RESOURCE_EXHAUSTED?(kn(t.toString()),kn("Using maximum backoff delay to prevent overloading the backend."),r.zo.Lo()):t&&t.code===z.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.r_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Io(t)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),t=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===t&&this.s_(r,i)},r=>{e(()=>{const i=new oe(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(e,t){const r=this.i_(this.Uo);this.stream=this.__(e,t),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){var e=this;this.state=5,this.zo.ko((0,Q.Z)(function*(){e.state=0,e.start()}))}o_(e){return ce("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return t=>{this.si.enqueueAndForget(()=>this.Uo===e?t():(ce("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fte extends PB{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}__(e,t){return this.connection.vo("Listen",e,t)}onMessage(e){this.zo.reset();const t=function Tee(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:Ce(),i=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(xe(void 0===h||"string"==typeof h),cr.fromBase64String(h||"")):(xe(void 0===h||h instanceof Uint8Array),cr.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=void 0===u.code?z.UNKNOWN:wU(u.code);return new oe(h,u.message||"")}(o);t=new SU(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Ro(n,r.document.name),s=Fn(r.document.updateTime),o=r.document.createTime?Fn(r.document.createTime):Ne.min(),a=new Mr({mapValue:{fields:r.document.fields}}),c=gn.newFoundDocument(i,s,o,a);t=new oI(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const r=e.documentDelete,i=Ro(n,r.document),s=r.readTime?Fn(r.readTime):Ne.min(),o=gn.newNoDocument(i,s);t=new oI([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Ro(n,r.document);t=new oI([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Ce();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new mee(i,s);t=new DU(r.targetId,o)}}var u;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ne.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Ne.min():o.readTime?Fn(o.readTime):Ne.min()}(e);return this.listener.a_(t,r)}u_(e){const t={};t.database=hm(this.serializer),t.addTarget=function(s,o){let a;const c=o.target;if(a=JE(c)?{documents:LU(s,c)}:{query:lS(s,c)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=PU(s,o.resumeToken);const u=sS(s,o.expectedCount);null!==u&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Ne.min())>0){a.readTime=Nh(s,o.snapshotVersion.toTimestamp());const u=sS(s,o.expectedCount);null!==u&&(a.expectedCount=u)}return a}(this.serializer,e);const r=function See(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.e_(t)}c_(e){const t={};t.database=hm(this.serializer),t.removeTarget=e,this.e_(t)}}class pte extends PB{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,t){return this.connection.vo("Write",e,t)}onMessage(e){if(xe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const t=function Dee(n,e){return n&&n.length>0?(xe(void 0!==e),n.map(t=>function(i,s){let o=Fn(i.updateTime?i.updateTime:s);return o.isEqual(Ne.min())&&(o=Fn(s)),new hee(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Fn(e.commitTime);return this.listener.I_(r,t)}return xe(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=hm(this.serializer),this.e_(e)}P_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>fm(this.serializer,r))};this.e_(t)}}class gte extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new oe(z.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,t,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.wo(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new oe(z.UNKNOWN,i.toString())})}Co(e,t,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,t,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new oe(z.UNKNOWN,s.toString())})}terminate(){this.d_=!0}}class _te{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(kn(t),this.f_=!1):ce("OnlineStateTracker",t)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class yte{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(a=>{r.enqueueAndForget((0,Q.Z)(function*(){var c;bc(o)&&(ce("RemoteStore","Restarting streams for network reachability change."),yield(c=(0,Q.Z)(function*(h){const g=me(h);g.C_.add(4),yield $h(g),g.M_.set("Unknown"),g.C_.delete(4),yield wm(g)}),function u(h){return c.apply(this,arguments)})(o))}))}),this.M_=new _te(r,i)}}function wm(n){return NS.apply(this,arguments)}function NS(){return NS=(0,Q.Z)(function*(n){if(bc(n))for(const e of n.v_)yield e(!0)}),NS.apply(this,arguments)}function $h(n){return kS.apply(this,arguments)}function kS(){return kS=(0,Q.Z)(function*(n){for(const e of n.v_)yield e(!1)}),kS.apply(this,arguments)}function wI(n,e){const t=me(n);t.D_.has(e.targetId)||(t.D_.set(e.targetId,e),VS(t)?LS(t):Hh(t).Ho()&&FS(t,e))}function bm(n,e){const t=me(n),r=Hh(t);t.D_.delete(e),r.Ho()&&xB(t,e),0===t.D_.size&&(r.Ho()?r.Zo():bc(t)&&t.M_.set("Unknown"))}function FS(n,e){if(n.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Hh(n).u_(e)}function xB(n,e){n.x_.Oe(e),Hh(n).c_(e)}function LS(n){n.x_=new yee({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>n.D_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),Hh(n).start(),n.M_.g_()}function VS(n){return bc(n)&&!Hh(n).jo()&&n.D_.size>0}function bc(n){return 0===me(n).C_.size}function OB(n){n.x_=void 0}function vte(n){return US.apply(this,arguments)}function US(){return US=(0,Q.Z)(function*(n){n.D_.forEach((e,t)=>{FS(n,e)})}),US.apply(this,arguments)}function Ete(n,e){return BS.apply(this,arguments)}function BS(){return BS=(0,Q.Z)(function*(n,e){OB(n),VS(n)?(n.M_.w_(e),LS(n)):n.M_.set("Unknown")}),BS.apply(this,arguments)}function Ite(n,e,t){return jS.apply(this,arguments)}function jS(){return jS=(0,Q.Z)(function*(n,e,t){if(n.M_.set("Online"),e instanceof SU&&2===e.state&&e.cause)try{yield(r=(0,Q.Z)(function*(s,o){const a=o.cause;for(const c of o.targetIds)s.D_.has(c)&&(yield s.remoteSyncer.rejectListen(c,a),s.D_.delete(c),s.x_.removeTarget(c))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){ce("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield bI(n,r)}else if(e instanceof oI?n.x_.$e(e):e instanceof DU?n.x_.Je(e):n.x_.Ge(e),!t.isEqual(Ne.min()))try{const r=yield IB(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.x_.it(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=s.D_.get(u);h&&s.D_.set(u,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{const h=s.D_.get(c);if(!h)return;s.D_.set(c,h.withResumeToken(cr.EMPTY_BYTE_STRING,h.snapshotVersion)),xB(s,c);const g=new ha(h.target,c,u,h.sequenceNumber);FS(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){ce("RemoteStore","Failed to raise snapshot:",r),yield bI(n,r)}var r}),jS.apply(this,arguments)}function bI(n,e,t){return $S.apply(this,arguments)}function $S(){return $S=(0,Q.Z)(function*(n,e,t){if(!dc(e))throw e;n.C_.add(1),yield $h(n),n.M_.set("Offline"),t||(t=()=>IB(n.localStore)),n.asyncQueue.enqueueRetryable((0,Q.Z)(function*(){ce("RemoteStore","Retrying IndexedDB access"),yield t(),n.C_.delete(1),yield wm(n)}))}),$S.apply(this,arguments)}function NB(n,e){return e().catch(t=>bI(n,t,e))}function zh(n){return zS.apply(this,arguments)}function zS(){return zS=(0,Q.Z)(function*(n){const e=me(n),t=Cc(e);let r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;wte(e);)try{const i=yield ote(e.localStore,r);if(null===i){0===e.b_.length&&t.Zo();break}r=i.batchId,bte(e,i)}catch(i){yield bI(e,i)}kB(e)&&FB(e)}),zS.apply(this,arguments)}function wte(n){return bc(n)&&n.b_.length<10}function bte(n,e){n.b_.push(e);const t=Cc(n);t.Ho()&&t.h_&&t.P_(e.mutations)}function kB(n){return bc(n)&&!Cc(n).jo()&&n.b_.length>0}function FB(n){Cc(n).start()}function Cte(n){return HS.apply(this,arguments)}function HS(){return HS=(0,Q.Z)(function*(n){Cc(n).E_()}),HS.apply(this,arguments)}function Tte(n){return qS.apply(this,arguments)}function qS(){return qS=(0,Q.Z)(function*(n){const e=Cc(n);for(const t of n.b_)e.P_(t.mutations)}),qS.apply(this,arguments)}function Dte(n,e,t){return GS.apply(this,arguments)}function GS(){return GS=(0,Q.Z)(function*(n,e,t){const r=n.b_.shift(),i=nS.from(r,e,t);yield NB(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield zh(n)}),GS.apply(this,arguments)}function Ste(n,e){return WS.apply(this,arguments)}function WS(){return WS=(0,Q.Z)(function*(n,e){var t;e&&Cc(n).h_&&(yield(t=(0,Q.Z)(function*(i,s){if(IU(a=s.code)&&a!==z.ABORTED){const o=i.b_.shift();Cc(i).Yo(),yield NB(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield zh(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),kB(n)&&FB(n)}),WS.apply(this,arguments)}function LB(n,e){return KS.apply(this,arguments)}function KS(){return KS=(0,Q.Z)(function*(n,e){const t=me(n);t.asyncQueue.verifyOperationInProgress(),ce("RemoteStore","RemoteStore received new credentials");const r=bc(t);t.C_.add(3),yield $h(t),r&&t.M_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.C_.delete(3),yield wm(t)}),KS.apply(this,arguments)}function ZS(n,e){return QS.apply(this,arguments)}function QS(){return QS=(0,Q.Z)(function*(n,e){const t=me(n);e?(t.C_.delete(2),yield wm(t)):e||(t.C_.add(2),yield $h(t),t.M_.set("Unknown"))}),QS.apply(this,arguments)}function Hh(n){return n.O_||(n.O_=function(t,r,i){const s=me(t);return s.A_(),new fte(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{ho:vte.bind(null,n),Io:Ete.bind(null,n),a_:Ite.bind(null,n)}),n.v_.push(function(){var e=(0,Q.Z)(function*(t){t?(n.O_.Yo(),VS(n)?LS(n):n.M_.set("Unknown")):(yield n.O_.stop(),OB(n))});return function(t){return e.apply(this,arguments)}}())),n.O_}function Cc(n){return n.N_||(n.N_=function(t,r,i){const s=me(t);return s.A_(),new pte(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{ho:Cte.bind(null,n),Io:Ste.bind(null,n),T_:Tte.bind(null,n),I_:Dte.bind(null,n)}),n.v_.push(function(){var e=(0,Q.Z)(function*(t){t?(n.N_.Yo(),yield zh(n)):(yield n.N_.stop(),n.b_.length>0&&(ce("RemoteStore",`Stopping write stream with ${n.b_.length} pending writes`),n.b_=[]))});return function(t){return e.apply(this,arguments)}}())),n.N_}class YS{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new YS(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new oe(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qh(n,e){if(kn("AsyncQueue",`${e}: ${n}`),dc(n))return new oe(z.UNAVAILABLE,`${e}: ${n}`);throw n}class Gh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ye.comparator(t.key,r.key):(t,r)=>ye.comparator(t.key,r.key),this.keyedMap=im(),this.sortedSet=new sn(this.comparator)}static emptySet(e){return new Gh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Gh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Gh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class VB{constructor(){this.B_=new sn(ye.comparator)}track(e){const t=e.doc.key,r=this.B_.get(t);r?0!==e.type&&3===r.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==r.type?this.B_=this.B_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.B_=this.B_.remove(t):1===e.type&&2===r.type?this.B_=this.B_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):Ce():this.B_=this.B_.insert(t,e)}L_(){const e=[];return this.B_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Wh{constructor(e,t,r,i,s,o,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Wh(e,t,Gh.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Ate{constructor(){this.k_=void 0,this.listeners=[]}}class Rte{constructor(){this.queries=new ua(e=>nU(e),nm),this.onlineState="Unknown",this.q_=new Set}}function XS(n,e){return JS.apply(this,arguments)}function JS(){return JS=(0,Q.Z)(function*(n,e){const t=me(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new Ate),i)try{s.k_=yield t.onListen(r)}catch(o){const a=qh(o,`Initialization of query '${Rh(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.listeners.push(e),e.Q_(t.onlineState),s.k_&&e.K_(s.k_)&&nA(t)}),JS.apply(this,arguments)}function eA(n,e){return tA.apply(this,arguments)}function tA(){return tA=(0,Q.Z)(function*(n,e){const t=me(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),tA.apply(this,arguments)}function Mte(n,e){const t=me(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.listeners)a.K_(i)&&(r=!0);o.k_=i}}r&&nA(t)}function Pte(n,e,t){const r=me(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function nA(n){n.q_.forEach(e=>{e.next()})}class rA{constructor(e,t,r){this.query=e,this.U_=t,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Wh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.W_?this.z_(e)&&(this.U_.next(e),t=!0):this.j_(e,this.onlineState)&&(this.H_(e),t=!0),this.G_=e,t}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let t=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),t=!0),t}j_(e,t){return!e.fromCache||(!this.options.J_||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=Wh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class xte{constructor(e,t){this.Y_=e,this.byteLength=t}Z_(){return"metadata"in this.Y_}}class UB{constructor(e){this.serializer=e}hs(e){return Ro(this.serializer,e)}Ps(e){return e.metadata.exists?FU(this.serializer,e.document,!1):gn.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return Fn(e)}}class Ote{constructor(e,t,r){this.X_=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=BB(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++t;const r=Ct.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ta(e){const t=new Map,r=new UB(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.hs(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||rt()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,Q.Z)(function*(){const t=yield function ate(n,e,t,r){return TS.apply(this,arguments)}(e.localStore,new UB(e.serializer),e.documents,e.X_.id),r=e.ta(e.documents);for(const i of e.queries)yield cte(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:t}})()}}function BB(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class jB{constructor(e){this.key=e}}class $B{constructor(e){this.key=e}}class zB{constructor(e,t){this.query=e,this.ia=t,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=rt(),this.mutatedKeys=rt(),this._a=iU(e),this.aa=new Gh(this._a)}get ua(){return this.ia}ca(e,t){const r=t?t.la:new VB,i=t?t.aa:this.aa;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,u="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{const m=i.get(h),y=rm(this.query,g)?g:null,E=!!m&&this.mutatedKeys.has(m.key),I=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let b=!1;m&&y?m.data.isEqual(y.data)?E!==I&&(r.track({type:3,doc:y}),b=!0):this.ha(m,y)||(r.track({type:2,doc:y}),b=!0,(c&&this._a(y,c)>0||u&&this._a(y,u)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),b=!0):m&&!y&&(r.track({type:1,doc:m}),b=!0,(c||u)&&(a=!0)),b&&(y?(o=o.add(y),s=I?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const h="F"===this.query.limitType?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{aa:o,la:r,Zi:a,mutatedKeys:s}}ha(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const o=e.la.L_();o.sort((h,g)=>function(y,E){const I=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce()}};return I(y)-I(E)}(h.type,g.type)||this._a(h.doc,g.doc)),this.Pa(r),i=null!=i&&i;const a=t&&!i?this.Ia():[],c=0===this.oa.size&&this.current&&!i?1:0,u=c!==this.sa;return this.sa=c,0!==o.length||u?{snapshot:new Wh(this.query,e.aa,s,o,e.mutatedKeys,0===c,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new VB,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(t=>this.ia=this.ia.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.ia=this.ia.delete(t)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=rt(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const t=[];return e.forEach(r=>{this.oa.has(r)||t.push(new $B(r))}),this.oa.forEach(r=>{e.has(r)||t.push(new jB(r))}),t}da(e){this.ia=e.ls,this.oa=rt();const t=this.ca(e.documents);return this.applyChanges(t,!0)}Aa(){return Wh.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class Nte{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class kte{constructor(e){this.key=e,this.Ra=!1}}class Fte{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new ua(a=>nU(a),nm),this.fa=new Map,this.ga=new Set,this.pa=new sn(ye.comparator),this.ya=new Map,this.wa=new _S,this.Sa={},this.ba=new Map,this.Da=fu.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function Lte(n,e){return iA.apply(this,arguments)}function iA(){return iA=(0,Q.Z)(function*(n,e){const t=SA(n);let r,i;const s=t.ma.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{const o=yield Bh(t.localStore,mi(e)),a=t.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield sA(t,e,r,"current"===a,o.resumeToken),t.isPrimaryClient&&wI(t.remoteStore,o)}return i}),iA.apply(this,arguments)}function sA(n,e,t,r,i){return oA.apply(this,arguments)}function oA(){return oA=(0,Q.Z)(function*(n,e,t,r,i){n.va=(g,m,y)=>{return(E=(0,Q.Z)(function*(b,P,S,F){let Y=P.view.ca(S);Y.Zi&&(Y=yield _I(b.localStore,P.query,!1).then(({documents:Ft})=>P.view.ca(Ft,Y)));const he=F&&F.targetChanges.get(P.targetId),Oe=F&&null!=F.targetMismatches.get(P.targetId),We=P.view.applyChanges(Y,b.isPrimaryClient,he,Oe);return mA(b,P.targetId,We.Ta),We.snapshot}),function I(b,P,S,F){return E.apply(this,arguments)})(n,g,m,y);var E};const s=yield _I(n.localStore,e,!0),o=new zB(e,s.ls),a=o.ca(s.documents),c=um.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),u=o.applyChanges(a,n.isPrimaryClient,c);mA(n,t,u.Ta);const h=new Nte(e,t,o);return n.ma.set(e,h),n.fa.has(t)?n.fa.get(t).push(e):n.fa.set(t,[e]),u.snapshot}),oA.apply(this,arguments)}function Vte(n,e){return aA.apply(this,arguments)}function aA(){return aA=(0,Q.Z)(function*(n,e){const t=me(n),r=t.ma.get(e),i=t.fa.get(r.targetId);if(i.length>1)return t.fa.set(r.targetId,i.filter(s=>!nm(s,e))),void t.ma.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield jh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),bm(t.remoteStore,r.targetId),Kh(t,r.targetId)}).catch(uc))):(Kh(t,r.targetId),yield jh(t.localStore,r.targetId,!0))}),aA.apply(this,arguments)}function cA(){return cA=(0,Q.Z)(function*(n,e,t){const r=AA(n);try{const i=yield function(o,a){const c=me(o),u=In.now(),h=a.reduce((y,E)=>y.add(E.key),rt());let g,m;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let E=Pi(),I=rt();return c.ss.getEntries(y,h).next(b=>{E=b,E.forEach((P,S)=>{S.isValidDocument()||(I=I.add(P))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,E)).next(b=>{g=b;const P=[];for(const S of a){const F=pee(S,g.get(S.key).overlayedDocument);null!=F&&P.push(new da(S.key,F,j2(F.value.mapValue),wn.exists(!0)))}return c.mutationQueue.addMutationBatch(y,u,P,a)}).next(b=>{m=b;const P=b.applyToLocalDocumentSet(g,I);return c.documentOverlayCache.saveOverlays(y,b.batchId,P)})}).then(()=>({batchId:m.batchId,changes:oU(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let u=o.Sa[o.currentUser.toKey()];u||(u=new sn(Ze)),u=u.insert(a,c),o.Sa[o.currentUser.toKey()]=u}(r,i.batchId,t),yield fa(r,i.changes),yield zh(r.remoteStore)}catch(i){const s=qh(i,"Failed to persist write");t.reject(s)}}),cA.apply(this,arguments)}function HB(n,e){return lA.apply(this,arguments)}function lA(){return lA=(0,Q.Z)(function*(n,e){const t=me(n);try{const r=yield function ste(n,e){const t=me(n),r=e.snapshotVersion;let i=t.ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.ss.newChangeBuffer({trackRemovals:!0});i=t.ts;const a=[];e.targetChanges.forEach((h,g)=>{const m=i.get(g);if(!m)return;a.push(t.qr.removeMatchingKeys(s,h.removedDocuments,g).next(()=>t.qr.addMatchingKeys(s,h.addedDocuments,g)));let y=m.withSequenceNumber(s.currentSequenceNumber);var I,b,P;null!==e.targetMismatches.get(g)?y=y.withResumeToken(cr.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(g,y),b=y,P=h,(0===(I=m).resumeToken.approximateByteSize()||b.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8||P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0)&&a.push(t.qr.updateTargetData(s,y))});let c=Pi(),u=rt();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(wB(s,o,e.documentUpdates).next(h=>{c=h.us,u=h.cs})),!r.isEqual(Ne.min())){const h=t.qr.getLastRemoteSnapshotVersion(s).next(g=>t.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return L.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(t.ts=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.ya.get(s);o&&(xe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ra=!0:i.modifiedDocuments.size>0?xe(o.Ra):i.removedDocuments.size>0&&(xe(o.Ra),o.Ra=!1))}),yield fa(t,r,e)}catch(r){yield uc(r)}}),lA.apply(this,arguments)}function qB(n,e,t){const r=me(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ma.forEach((s,o)=>{const a=o.view.Q_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const c=me(o);c.onlineState=a;let u=!1;c.queries.forEach((h,g)=>{for(const m of g.listeners)m.Q_(a)&&(u=!0)}),u&&nA(c)}(r.eventManager,e),i.length&&r.Va.a_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Bte(n,e,t){return uA.apply(this,arguments)}function uA(){return uA=(0,Q.Z)(function*(n,e,t){const r=me(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ya.get(e),s=i&&i.key;if(s){let o=new sn(ye.comparator);o=o.insert(s,gn.newNoDocument(s,Ne.min()));const a=rt().add(s),c=new lm(Ne.min(),new Map,new sn(Ze),o,a);yield HB(r,c),r.pa=r.pa.remove(s),r.ya.delete(e),_A(r)}else yield jh(r.localStore,e,!1).then(()=>Kh(r,e,t)).catch(uc)}),uA.apply(this,arguments)}function jte(n,e){return dA.apply(this,arguments)}function dA(){return dA=(0,Q.Z)(function*(n,e){const t=me(n),r=e.batch.batchId;try{const i=yield function ite(n,e){const t=me(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.ss.newChangeBuffer({trackRemovals:!0});return function(a,c,u,h){const g=u.batch,m=g.keys();let y=L.resolve();return m.forEach(E=>{y=y.next(()=>h.getEntry(c,E)).next(I=>{const b=u.docVersions.get(E);xe(null!==b),I.version.compareTo(b)<0&&(g.applyToRemoteDocument(I,u),I.isValidDocument()&&(I.setReadTime(u.commitVersion),h.addEntry(I)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,g))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=rt();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);gA(t,r,null),pA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield fa(t,i)}catch(i){yield uc(i)}}),dA.apply(this,arguments)}function $te(n,e,t){return hA.apply(this,arguments)}function hA(){return hA=(0,Q.Z)(function*(n,e,t){const r=me(n);try{const i=yield function(o,a){const c=me(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,a).next(g=>(xe(null!==g),h=g.keys(),c.mutationQueue.removeMutationBatch(u,g))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);gA(r,e,t),pA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield fa(r,i)}catch(i){yield uc(i)}}),hA.apply(this,arguments)}function fA(){return fA=(0,Q.Z)(function*(n,e){const t=me(n);bc(t.remoteStore)||ce("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=me(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ba.get(r)||[];i.push(e),t.ba.set(r,i)}catch(r){const i=qh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),fA.apply(this,arguments)}function pA(n,e){(n.ba.get(e)||[]).forEach(t=>{t.resolve()}),n.ba.delete(e)}function gA(n,e,t){const r=me(n);let i=r.Sa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Sa[r.currentUser.toKey()]=i}}function Kh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.fa.get(e))n.ma.delete(r),t&&n.Va.Fa(r,t);n.fa.delete(e),n.isPrimaryClient&&n.wa.Rr(e).forEach(r=>{n.wa.containsKey(r)||GB(n,r)})}function GB(n,e){n.ga.delete(e.path.canonicalString());const t=n.pa.get(e);null!==t&&(bm(n.remoteStore,t),n.pa=n.pa.remove(e),n.ya.delete(t),_A(n))}function mA(n,e,t){for(const r of t)r instanceof jB?(n.wa.addReference(r.key,e),Hte(n,r)):r instanceof $B?(ce("SyncEngine","Document no longer in limbo: "+r.key),n.wa.removeReference(r.key,e),n.wa.containsKey(r.key)||GB(n,r.key)):Ce()}function Hte(n,e){const t=e.key,r=t.path.canonicalString();n.pa.get(t)||n.ga.has(r)||(ce("SyncEngine","New document in limbo: "+t),n.ga.add(r),_A(n))}function _A(n){for(;n.ga.size>0&&n.pa.size<n.maxConcurrentLimboResolutions;){const e=n.ga.values().next().value;n.ga.delete(e);const t=new ye(Ct.fromString(e)),r=n.Da.next();n.ya.set(r,new kte(t)),n.pa=n.pa.insert(t,r),wI(n.remoteStore,new ha(mi(Sh(t.path)),r,"TargetPurposeLimboResolution",qi._e))}}function fa(n,e,t){return yA.apply(this,arguments)}function yA(){return yA=(0,Q.Z)(function*(n,e,t){const r=me(n),i=[],s=[],o=[];var a;r.ma.isEmpty()||(r.ma.forEach((a,c)=>{o.push(r.va(c,e,t).then(u=>{if((u||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u?.fromCache?"not-current":"current"),u){i.push(u);const h=wS.Qi(c.targetId,u);s.push(h)}}))}),yield Promise.all(o),r.Va.a_(i),yield(a=(0,Q.Z)(function*(u,h){const g=me(u);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>L.forEach(h,y=>L.forEach(y.ki,E=>g.persistence.referenceDelegate.addReference(m,y.targetId,E)).next(()=>L.forEach(y.qi,E=>g.persistence.referenceDelegate.removeReference(m,y.targetId,E)))))}catch(m){if(!dc(m))throw m;ce("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const E=g.ts.get(y),b=E.withLastLimboFreeSnapshotVersion(E.snapshotVersion);g.ts=g.ts.insert(y,b)}}}),function c(u,h){return a.apply(this,arguments)})(r.localStore,s))}),yA.apply(this,arguments)}function qte(n,e){return vA.apply(this,arguments)}function vA(){return vA=(0,Q.Z)(function*(n,e){const t=me(n);if(!t.currentUser.isEqual(e)){ce("SyncEngine","User change. New user:",e.toKey());const r=yield EB(t.localStore,e);t.currentUser=e,(s=t).ba.forEach(a=>{a.forEach(c=>{c.reject(new oe(z.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ba.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield fa(t,r._s)}var s}),vA.apply(this,arguments)}function Gte(n,e){const t=me(n),r=t.ya.get(e);if(r&&r.Ra)return rt().add(r.key);{let i=rt();const s=t.fa.get(e);if(!s)return i;for(const o of s){const a=t.ma.get(o);i=i.unionWith(a.view.ua)}return i}}function Wte(n,e){return EA.apply(this,arguments)}function EA(){return EA=(0,Q.Z)(function*(n,e){const t=me(n),r=yield _I(t.localStore,e.query,!0),i=e.view.da(r);return t.isPrimaryClient&&mA(t,e.targetId,i.Ta),i}),EA.apply(this,arguments)}function Kte(n,e){return IA.apply(this,arguments)}function IA(){return IA=(0,Q.Z)(function*(n,e){const t=me(n);return CB(t.localStore,e).then(r=>fa(t,r))}),IA.apply(this,arguments)}function Zte(n,e,t,r){return wA.apply(this,arguments)}function wA(){return wA=(0,Q.Z)(function*(n,e,t,r){const i=me(n),s=yield function(a,c){const u=me(a),h=me(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",g=>h.Cn(g,c).next(m=>m?u.localDocuments.getDocuments(g,m):L.resolve(null)))}(i.localStore,e);var c;null!==s?("pending"===t?yield zh(i.remoteStore):"acknowledged"===t||"rejected"===t?(gA(i,e,r||null),pA(i,e),c=e,me(me(i.localStore).mutationQueue).Fn(c)):Ce(),yield fa(i,s)):ce("SyncEngine","Cannot apply mutation batch with id: "+e)}),wA.apply(this,arguments)}function bA(){return bA=(0,Q.Z)(function*(n,e){const t=me(n);if(SA(t),AA(t),!0===e&&!0!==t.Ca){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield WB(t,r.toArray());t.Ca=!0,yield ZS(t.remoteStore,!0);for(const s of i)wI(t.remoteStore,s)}else if(!1===e&&!1!==t.Ca){const r=[];let i=Promise.resolve();t.fa.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Kh(t,o),jh(t.localStore,o,!0))),bm(t.remoteStore,o)}),yield i,yield WB(t,r),function(o){const a=me(o);a.ya.forEach((c,u)=>{bm(a.remoteStore,u)}),a.wa.Vr(),a.ya=new Map,a.pa=new sn(ye.comparator)}(t),t.Ca=!1,yield ZS(t.remoteStore,!1)}}),bA.apply(this,arguments)}function WB(n,e,t){return CA.apply(this,arguments)}function CA(){return CA=(0,Q.Z)(function*(n,e,t){const r=me(n),i=[],s=[];for(const o of e){let a;const c=r.fa.get(o);if(c&&0!==c.length){a=yield Bh(r.localStore,mi(c[0]));for(const u of c){const h=r.ma.get(u),g=yield Wte(r,h);g.snapshot&&s.push(g.snapshot)}}else{const u=yield bB(r.localStore,o);a=yield Bh(r.localStore,u),yield sA(r,KB(u),o,!1,a.resumeToken)}i.push(a)}return r.Va.a_(s),i}),CA.apply(this,arguments)}function KB(n){return J2(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Yte(n){return t=me(n).localStore,me(me(t).persistence).Bi();var t}function Xte(n,e,t,r){return TA.apply(this,arguments)}function TA(){return TA=(0,Q.Z)(function*(n,e,t,r){const i=me(n);if(i.Ca)return void ce("SyncEngine","Ignoring unexpected query state notification.");const s=i.fa.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield CB(i.localStore,rU(s[0])),a=lm.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,cr.EMPTY_BYTE_STRING);yield fa(i,o,a);break}case"rejected":yield jh(i.localStore,e,!0),Kh(i,e,r);break;default:Ce()}}),TA.apply(this,arguments)}function Jte(n,e,t){return DA.apply(this,arguments)}function DA(){return DA=(0,Q.Z)(function*(n,e,t){const r=SA(n);if(r.Ca){for(const i of e){if(r.fa.has(i)){ce("SyncEngine","Adding an already active target "+i);continue}const s=yield bB(r.localStore,i),o=yield Bh(r.localStore,s);yield sA(r,KB(s),o.targetId,!1,o.resumeToken),wI(r.remoteStore,o)}for(const i of t)r.fa.has(i)&&(yield jh(r.localStore,i,!1).then(()=>{bm(r.remoteStore,i),Kh(r,i)}).catch(uc))}}),DA.apply(this,arguments)}function SA(n){const e=me(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=HB.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Gte.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Bte.bind(null,e),e.Va.a_=Mte.bind(null,e.eventManager),e.Va.Fa=Pte.bind(null,e.eventManager),e}function AA(n){const e=me(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jte.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$te.bind(null,e),e}class Cm{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Q.Z)(function*(){t.serializer=Im(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return vB(this.persistence,new yB,e.initialUser,this.serializer)}createPersistence(e){return new yS(pI.jr,this.serializer)}createSharedClientState(e){return new AB}terminate(){var e=this;return(0,Q.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class RA extends Cm{constructor(e,t,r){super(),this.xa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Q.Z)(function*(){yield t().call(r,e),yield r.xa.initialize(r,e),yield AA(r.xa.syncEngine),yield zh(r.xa.remoteStore),yield r.persistence.mi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return vB(this.persistence,new yB,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new lB(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new DJ(t,this.persistence);return new TJ(e.asyncQueue,r)}createPersistence(e){const t=IS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Qr.withCacheSize(this.cacheSizeBytes):Qr.DEFAULT;return new ES(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,MB(),II(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new AB}}class ZB extends RA{constructor(e,t){super(e,t,!1),this.xa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Q.Z)(function*(){yield t().call(r,e);const i=r.xa.syncEngine;r.sharedClientState instanceof MS&&(r.sharedClientState.syncEngine={Ys:Zte.bind(null,i),Zs:Xte.bind(null,i),Xs:Jte.bind(null,i),Bi:Yte.bind(null,i),Js:Kte.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.mi(function(){var s=(0,Q.Z)(function*(o){yield function Qte(n,e){return bA.apply(this,arguments)}(r.xa.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=MB();if(!MS.D(t))throw new oe(z.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=IS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new MS(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Zh{initialize(e,t){var r=this;return(0,Q.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>qB(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=qte.bind(null,r.syncEngine),yield ZS(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Rte}createDatastore(e){const t=Im(e.databaseInfo.databaseId),r=new hte(e.databaseInfo);return new gte(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=t=>qB(this.syncEngine,t,0),a=RB.D()?new RB:new lte,new yte(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,t){return function(i,s,o,a,c,u,h){const g=new Fte(i,s,o,a,c,u);return h&&(g.Ca=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Q.Z)(function*(r){const i=me(r);ce("RemoteStore","RemoteStore shutting down."),i.C_.add(5),yield $h(i),i.F_.shutdown(),i.M_.set("Unknown")}),function t(r){return e.apply(this,arguments)})(this.remoteStore);var e}}function QB(n,e=10240){let t=0;return{read:()=>(0,Q.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Q.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class CI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):kn("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class nne{constructor(e,t){this.Ba=e,this.serializer=t,this.metadata=new ar,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(r=>{r&&r.Z_()?this.metadata.resolve(r.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Y_)}`))},r=>this.metadata.reject(r))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,Q.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,Q.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,Q.Z)(function*(){const t=yield e.qa();if(null===t)return null;const r=e.La.decode(t),i=Number(r);isNaN(i)&&e.Qa(`length string (${r}) is not valid number`);const s=yield e.Ka(i);return new xte(JSON.parse(s),t.length+i)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,Q.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const t=e.$a();t<0&&e.Qa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Ka(e){var t=this;return(0,Q.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ua())&&t.Qa("Reached the end of bundle when more is expected.");const r=t.La.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,Q.Z)(function*(){const t=yield e.Ba.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class rne{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Q.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new oe(z.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Q.Z)(function*(o,a){const c=me(o),u=hm(c.serializer)+"/documents",h={documents:a.map(E=>dm(c.serializer,E))},g=yield c.Co("BatchGetDocuments",u,h,a.length),m=new Map;g.forEach(E=>{const I=function Cee(n,e){return"found"in e?function(r,i){xe(!!i.found);const s=Ro(r,i.found.name),o=Fn(i.found.updateTime),a=i.found.createTime?Fn(i.found.createTime):Ne.min(),c=new Mr({mapValue:{fields:i.found.fields}});return gn.newFoundDocument(s,o,a,c)}(n,e):"missing"in e?function(r,i){xe(!!i.missing),xe(!!i.readTime);const s=Ro(r,i.missing),o=Fn(i.readTime);return gn.newNoDocument(s,o)}(n,e):Ce()}(c.serializer,E);m.set(I.key.toString(),I)});const y=[];return a.forEach(E=>{const I=m.get(E.toString());xe(!!I),y.push(I)}),y}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Oh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Q.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=ye.fromPath(i);e.mutations.push(new eS(s,e.precondition(s)))}),yield(r=(0,Q.Z)(function*(s,o){const a=me(s),c=hm(a.serializer)+"/documents",u={writes:o.map(h=>fm(a.serializer,h))};yield a.wo("Commit",c,u)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ce();t=Ne.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new oe(z.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ne.min())?wn.exists(!1):wn.updateTime(t):wn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ne.min()))throw new oe(z.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return wn.updateTime(t)}return wn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class ine{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Wa=r.maxAttempts,this.zo=new xS(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,Q.Z)(function*(){const t=new rne(e.datastore),r=e.za(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.ja(s)}))}).catch(i=>{e.ja(i)})}))}za(e){try{const t=this.updateFunction(e);return!Kg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!IU(t)}return!1}}class sne{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=yr.UNAUTHENTICATED,this.clientId=_2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,Q.Z)(function*(a){ce("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(ce("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return(0,Q.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new oe(z.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Q.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=qh(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function TI(n,e){return MA.apply(this,arguments)}function MA(){return MA=(0,Q.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ce("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Q.Z)(function*(s){r.isEqual(s)||(yield EB(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),MA.apply(this,arguments)}function PA(n,e){return xA.apply(this,arguments)}function xA(){return xA=(0,Q.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield OA(n);ce("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>LB(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>LB(e.remoteStore,s)),n._onlineComponents=e}),xA.apply(this,arguments)}function YB(n){return"FirebaseError"===n.name?n.code===z.FAILED_PRECONDITION||n.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function OA(n){return NA.apply(this,arguments)}function NA(){return NA=(0,Q.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ce("FirestoreClient","Using user provided OfflineComponentProvider");try{yield TI(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!YB(t))throw t;Ri("Error using user provided cache. Falling back to memory cache: "+t),yield TI(n,new Cm)}}else ce("FirestoreClient","Using default OfflineComponentProvider"),yield TI(n,new Cm);return n._offlineComponents}),NA.apply(this,arguments)}function DI(n){return kA.apply(this,arguments)}function kA(){return kA=(0,Q.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ce("FirestoreClient","Using user provided OnlineComponentProvider"),yield PA(n,n._uninitializedComponentsProvider._online)):(ce("FirestoreClient","Using default OnlineComponentProvider"),yield PA(n,new Zh))),n._onlineComponents}),kA.apply(this,arguments)}function XB(n){return OA(n).then(e=>e.persistence)}function Qh(n){return OA(n).then(e=>e.localStore)}function JB(n){return DI(n).then(e=>e.remoteStore)}function FA(n){return DI(n).then(e=>e.syncEngine)}function Yh(n){return LA.apply(this,arguments)}function LA(){return LA=(0,Q.Z)(function*(n){const e=yield DI(n),t=e.eventManager;return t.onListen=Lte.bind(null,e.syncEngine),t.onUnlisten=Vte.bind(null,e.syncEngine),t}),LA.apply(this,arguments)}function tj(n,e,t={}){const r=new ar;return n.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return function(s,o,a,c,u){const h=new CI({next:m=>{o.enqueueAndForget(()=>eA(s,g));const y=m.docs.has(a);!y&&m.fromCache?u.reject(new oe(z.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&c&&"server"===c.source?u.reject(new oe(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),g=new rA(Sh(a.path),h,{includeMetadataChanges:!0,J_:!0});return XS(s,g)}(yield Yh(n),n.asyncQueue,e,t,r)})),r.promise}function nj(n,e,t={}){const r=new ar;return n.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return function(s,o,a,c,u){const h=new CI({next:m=>{o.enqueueAndForget(()=>eA(s,g)),m.fromCache&&"server"===c.source?u.reject(new oe(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),g=new rA(a,h,{includeMetadataChanges:!0,J_:!0});return XS(s,g)}(yield Yh(n),n.asyncQueue,e,t,r)})),r.promise}function rj(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const ij=new Map;function VA(n,e,t){if(!t)throw new oe(z.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function sj(n,e,t,r){if(!0===e&&!0===r)throw new oe(z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function oj(n){if(!ye.isDocumentKey(n))throw new oe(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function aj(n){if(ye.isDocumentKey(n))throw new oe(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function SI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Ce()}function yt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new oe(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=SI(n);throw new oe(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function cj(n,e){if(e<=0)throw new oe(z.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class lj{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new oe(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new oe(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=rj(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new oe(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new oe(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new oe(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Tm{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lj({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new oe(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new oe(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lj(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new fJ;switch(r.type){case"firstParty":return new _J(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new oe(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=ij.get(t);r&&(ce("ComponentProvider","Removing Datastore"),ij.delete(t),r.terminate())}(this),Promise.resolve()}}class Pr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Pr(this.firestore,e,this._query)}}class mn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mn(this.firestore,e,this._key)}}class Mo extends Pr{constructor(e,t,r){super(e,t,Sh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mn(this.firestore,null,new ye(e))}withConverter(e){return new Mo(this.firestore,e,this._path)}}function dj(n,e,...t){if(n=(0,Xt.m9)(n),VA("collection","path",e),n instanceof Tm){const r=Ct.fromString(e,...t);return aj(r),new Mo(n,null,r)}{if(!(n instanceof mn||n instanceof Mo))throw new oe(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ct.fromString(e,...t));return aj(r),new Mo(n.firestore,null,r)}}function AI(n,e,...t){if(n=(0,Xt.m9)(n),1===arguments.length&&(e=_2.newId()),VA("doc","path",e),n instanceof Tm){const r=Ct.fromString(e,...t);return oj(r),new mn(n,null,new ye(r))}{if(!(n instanceof mn||n instanceof Mo))throw new oe(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ct.fromString(e,...t));return oj(r),new mn(n.firestore,n instanceof Mo?n.converter:null,new ye(r))}}function hj(n,e){return n=(0,Xt.m9)(n),e=(0,Xt.m9)(e),(n instanceof mn||n instanceof Mo)&&(e instanceof mn||e instanceof Mo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function UA(n,e){return n=(0,Xt.m9)(n),e=(0,Xt.m9)(e),n instanceof Pr&&e instanceof Pr&&n.firestore===e.firestore&&nm(n._query,e._query)&&n.converter===e.converter}class _ne{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new xS(this,"async_queue_retry"),this.iu=()=>{const t=II();t&&ce("AsyncQueue","Visibility state changed to "+t.visibilityState),this.zo.Qo()};const e=II();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const t=II();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const t=new ar;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,Q.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(t){if(!dc(t))throw t;ce("AsyncQueue","Operation failed with retryable error: "+t)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const t=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{throw this.eu=r,this.tu=!1,kn("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.tu=!1,r))));return this.Ja=t,t}enqueueAfterDelay(e,t,r){this.su(),this.ru.indexOf(e)>-1&&(t=0);const i=YS.createAndSchedule(this,e,t,r,s=>this.au(s));return this.Xa.push(i),i}su(){this.eu&&Ce()}verifyOperationInProgress(){}uu(){var e=this;return(0,Q.Z)(function*(){let t;do{t=e.Ja,yield t}while(t!==e.Ja)})()}cu(e){for(const t of this.Xa)if(t.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Xa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const t=this.Xa.indexOf(e);this.Xa.splice(t,1)}}function BA(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class yne{constructor(){this._progressObserver={},this._taskCompletionResolver=new ar,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class on extends Tm{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new _ne,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||fj(this),this._firestoreClient.terminate()}}function Mn(n){return n._firestoreClient||fj(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function fj(n){var e,t,r;const i=n._freezeSettings(),s=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new WJ(n._databaseId,c,n._persistenceKey,(h=i).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,rj(h.experimentalLongPollingOptions),h.useFetchStreams));var c,h;n._firestoreClient=new sne(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function pj(n,e,t){const r=new ar;return n.asyncQueue.enqueue((0,Q.Z)(function*(){try{yield TI(n,t),yield PA(n,e),r.resolve()}catch(i){const s=i;if(!YB(s))throw s;Ri("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function gj(n){if(n._initialized||n._terminated)throw new oe(z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Po{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Po(cr.fromBase64String(e))}catch(t){throw new oe(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Po(cr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class pa{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new oe(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class gu{constructor(e){this._methodName=e}}class RI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new oe(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new oe(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ze(this._lat,e._lat)||Ze(this._long,e._long)}}const Rne=/^__.*__$/;class Mne{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new da(e,this.data,this.fieldMask,t,this.fieldTransforms):new xh(e,this.data,t,this.fieldTransforms)}}class mj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new da(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function _j(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce()}}class MI{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new MI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Tu({path:r,du:!1});return i.Au(e),i}Ru(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return OI(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(_j(this.Iu)&&Rne.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class Pne{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Im(e)}pu(e,t,r,i=!1){return new MI({Iu:e,methodName:t,gu:r,path:pn.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mu(n){const e=n._freezeSettings(),t=Im(n._databaseId);return new Pne(n._databaseId,!!e.ignoreUndefinedProperties,t)}function PI(n,e,t,r,i,s={}){const o=n.pu(s.merge||s.mergeFields?2:0,e,t,i);HA("Data must be an object, but it was:",o,r);const a=Ej(r,o);let c,u;if(s.merge)c=new Mi(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const g of s.mergeFields){const m=Am(e,g,t);if(!o.contains(m))throw new oe(z.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);wj(h,m)||h.push(m)}c=new Mi(h),u=o.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,u=o.fieldTransforms;return new Mne(new Mr(a),c,u)}class Sm extends gu{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sm}}function yj(n,e,t){return new MI({Iu:3,gu:e.settings.gu,methodName:n._methodName,du:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class jA extends gu{_toFieldTransform(e){return new om(e.path,new Mh)}isEqual(e){return e instanceof jA}}class xne extends gu{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=yj(this,e,!0),r=this.yu.map(s=>_u(s,t)),i=new ou(r);return new om(e.path,i)}isEqual(e){return this===e}}class One extends gu{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=yj(this,e,!0),r=this.yu.map(s=>_u(s,t)),i=new au(r);return new om(e.path,i)}isEqual(e){return this===e}}class Nne extends gu{constructor(e,t){super(e),this.wu=t}_toFieldTransform(e){const t=new Ph(e.serializer,uU(e.serializer,this.wu));return new om(e.path,t)}isEqual(e){return this===e}}function $A(n,e,t,r){const i=n.pu(1,e,t);HA("Data must be an object, but it was:",i,r);const s=[],o=Mr.empty();hc(r,(c,u)=>{const h=xI(e,c,t);u=(0,Xt.m9)(u);const g=i.Ru(h);if(u instanceof Sm)s.push(h);else{const m=_u(u,g);null!=m&&(s.push(h),o.set(h,m))}});const a=new Mi(s);return new mj(o,a,i.fieldTransforms)}function zA(n,e,t,r,i,s){const o=n.pu(1,e,t),a=[Am(e,r,t)],c=[i];if(s.length%2!=0)throw new oe(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(Am(e,s[m])),c.push(s[m+1]);const u=[],h=Mr.empty();for(let m=a.length-1;m>=0;--m)if(!wj(u,a[m])){const y=a[m];let E=c[m];E=(0,Xt.m9)(E);const I=o.Ru(y);if(E instanceof Sm)u.push(y);else{const b=_u(E,I);null!=b&&(u.push(y),h.set(y,b))}}const g=new Mi(u);return new mj(h,g,o.fieldTransforms)}function vj(n,e,t,r=!1){return _u(t,n.pu(r?4:3,e))}function _u(n,e){if(Ij(n=(0,Xt.m9)(n)))return HA("Unsupported field value:",e,n),Ej(n,e);if(n instanceof gu)return function(r,i){if(!_j(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let c=_u(a,i.Vu(o));null==c&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,Xt.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return uU(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=In.fromDate(r);return{timestampValue:Nh(i.serializer,s)}}if(r instanceof In){const s=new In(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Nh(i.serializer,s)}}if(r instanceof RI)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Po)return{bytesValue:PU(i.serializer,r._byteString)};if(r instanceof mn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:oS(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${SI(r)}`)}(n,e)}function Ej(n,e){const t={};return x2(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hc(n,(r,i)=>{const s=_u(i,e.Eu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function Ij(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof In||n instanceof RI||n instanceof Po||n instanceof mn||n instanceof gu)}function HA(n,e,t){if(!Ij(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=SI(t);throw e.mu("an object"===r?n+" a custom object":n+" "+r)}var i}function Am(n,e,t){if((e=(0,Xt.m9)(e))instanceof pa)return e._internalPath;if("string"==typeof e)return xI(n,e);throw OI("Field path arguments must be of type string or ",n,!1,void 0,t)}const kne=new RegExp("[~\\*/\\[\\]]");function xI(n,e,t){if(e.search(kne)>=0)throw OI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new pa(...e.split("."))._internalPath}catch{throw OI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function OI(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new oe(z.INVALID_ARGUMENT,a+n+c)}function wj(n,e){return n.some(t=>t.isEqual(e))}class Rm{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new mn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Fne(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(NI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Fne extends Rm{data(){return super.data()}}function NI(n,e){return"string"==typeof e?xI(n,e):e instanceof pa?e._internalPath:e._delegate._internalPath}function bj(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new oe(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qA{}class Mm extends qA{}function Tc(n,e,...t){let r=[];e instanceof qA&&r.push(e),r=r.concat(t),function(s){const o=s.filter(c=>c instanceof Xh).length,a=s.filter(c=>c instanceof Pm).length;if(o>1||o>0&&a>0)throw new oe(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Pm extends Mm{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Pm(e,t,r)}_apply(e){const t=this._parse(e);return Sj(e._query,t),new Pr(e.firestore,e.converter,X0(e._query,t))}_parse(e){const t=mu(e.firestore);return function(s,o,a,c,u,h,g){let m;if(u.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new oe(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){Dj(g,h);const y=[];for(const E of g)y.push(Tj(c,s,E));m={arrayValue:{values:y}}}else m=Tj(c,s,g)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||Dj(g,h),m=vj(a,"where",g,"in"===h||"not-in"===h);return Et.create(u,h,m)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Xh extends qA{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Xh(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:$t.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const c of a)Sj(o,c),o=X0(o,c)}(e._query,t),new Pr(e.firestore,e.converter,X0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class GA extends Mm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new GA(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new oe(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new oe(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new em(s,o)}(e._query,this._field,this._direction);return new Pr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new la(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class kI extends Mm{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new kI(e,t,r)}_apply(e){return new Pr(e.firestore,e.converter,tI(e._query,this._limit,this._limitType))}}class FI extends Mm{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new FI(e,t,r)}_apply(e){const t=Cj(e,this.type,this._docOrFields,this._inclusive);return new Pr(e.firestore,e.converter,(s=t,new la((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class LI extends Mm{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new LI(e,t,r)}_apply(e){const t=Cj(e,this.type,this._docOrFields,this._inclusive);return new Pr(e.firestore,e.converter,(s=t,new la((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function Cj(n,e,t,r){if(t[0]=(0,Xt.m9)(t[0]),t[0]instanceof Rm)return function(s,o,a,c,u){if(!c)throw new oe(z.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const g of Ah(s))if(g.field.isKeyField())h.push(iu(o,c.key));else{const m=c.data.field(g.field);if(KE(m))throw new oe(z.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===m){const y=g.field.canonicalString();throw new oe(z.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(m)}return new yc(h,u)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=mu(n.firestore);return function(o,a,c,u,h,g){const m=o.explicitOrderBy;if(h.length>m.length)throw new oe(z.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let E=0;E<h.length;E++){const I=h[E];if(m[E].field.isKeyField()){if("string"!=typeof I)throw new oe(z.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof I}`);if(!Y0(o)&&-1!==I.indexOf("/"))throw new oe(z.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${I}' contains a slash.`);const b=o.path.child(Ct.fromString(I));if(!ye.isDocumentKey(b))throw new oe(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);const P=new ye(b);y.push(iu(a,P))}else{const b=vj(c,u,I);y.push(b)}}return new yc(y,g)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Tj(n,e,t){if("string"==typeof(t=(0,Xt.m9)(t))){if(""===t)throw new oe(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Y0(e)&&-1!==t.indexOf("/"))throw new oe(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ct.fromString(t));if(!ye.isDocumentKey(r))throw new oe(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return iu(n,new ye(r))}if(t instanceof mn)return iu(n,t._key);throw new oe(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${SI(t)}.`)}function Dj(n,e){if(!Array.isArray(n)||0===n.length)throw new oe(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Sj(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new oe(z.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class WA{convertValue(e,t="none"){switch(mc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ca(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ce()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return hc(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new RI(Rn(e.latitude),Rn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ZE(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Qg(e));default:return null}}convertTimestamp(e){const t=fc(e);return new In(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ct.fromString(e);xe(jU(r));const i=new pc(r.get(1),r.get(3)),s=new ye(r.popFirst(5));return i.isEqual(t)||kn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function VI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class qne extends WA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Po(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mn(this.firestore,null,t)}}class yu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ga extends Rm{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new xm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(NI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class xm extends ga{data(e={}){return super.data(e)}}class Dc{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new yu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new xm(this._firestore,this._userDataWriter,r.key,r,new yu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new oe(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new xm(i._firestore,i._userDataWriter,a.doc.key,a.doc,new yu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const c=new xm(i._firestore,i._userDataWriter,a.doc.key,a.doc,new yu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return 0!==a.type&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:Wne(a.type),doc:c,oldIndex:u,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Wne(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce()}}function Rj(n,e){return n instanceof ga&&e instanceof ga?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Dc&&e instanceof Dc&&n._firestore===e._firestore&&UA(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Sc extends WA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Po(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mn(this.firestore,null,t)}}function Mj(n,e,t){n=yt(n,mn);const r=yt(n.firestore,on),i=VI(n.converter,e,t);return Jh(r,[PI(mu(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,wn.none())])}function Pj(n,e,t,...r){n=yt(n,mn);const i=yt(n.firestore,on),s=mu(i);let o;return o="string"==typeof(e=(0,Xt.m9)(e))||e instanceof pa?zA(s,"updateDoc",n._key,e,t,r):$A(s,"updateDoc",n._key,e),Jh(i,[o.toMutation(n._key,wn.exists(!0))])}function xj(n,...e){var t,r,i;n=(0,Xt.m9)(n);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||BA(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(BA(e[o])){const g=e[o];e[o]=null===(t=g.next)||void 0===t?void 0:t.bind(g),e[o+1]=null===(r=g.error)||void 0===r?void 0:r.bind(g),e[o+2]=null===(i=g.complete)||void 0===i?void 0:i.bind(g)}let c,u,h;if(n instanceof mn)u=yt(n.firestore,on),h=Sh(n._key.path),c={next:g=>{e[o]&&e[o](KA(u,n,g))},error:e[o+1],complete:e[o+2]};else{const g=yt(n,Pr);u=yt(g.firestore,on),h=g._query;const m=new Sc(u);c={next:y=>{e[o]&&e[o](new Dc(u,m,g,y))},error:e[o+1],complete:e[o+2]},bj(n._query)}return function(m,y,E,I){const b=new CI(I),P=new rA(y,b,E);return m.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return XS(yield Yh(m),P)})),()=>{b.Na(),m.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return eA(yield Yh(m),P)}))}}(Mn(u),h,a,c)}function Jh(n,e){return function(r,i){const s=new ar;return r.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return function Ute(n,e,t){return cA.apply(this,arguments)}(yield FA(r),i,s)})),s.promise}(Mn(n),e)}function KA(n,e,t){const r=t.docs.get(e._key),i=new Sc(n);return new ga(n,i,e._key,r,new yu(t.hasPendingWrites,t.fromCache),e.converter)}const dre={maxAttempts:5};class Oj{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=mu(e)}set(e,t,r){this._verifyNotCommitted();const i=Ac(e,this._firestore),s=VI(i.converter,t,r),o=PI(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,wn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Ac(e,this._firestore);let o;return o="string"==typeof(t=(0,Xt.m9)(t))||t instanceof pa?zA(this._dataReader,"WriteBatch.update",s._key,t,r,i):$A(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,wn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ac(e,this._firestore);return this._mutations=this._mutations.concat(new Oh(t._key,wn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new oe(z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ac(n,e){if((n=(0,Xt.m9)(n)).firestore!==e)throw new oe(z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class hre extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=mu(t)}get(t){const r=Ac(t,this._firestore),i=new qne(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return Ce();const o=s[0];if(o.isFoundDocument())return new Rm(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Rm(this._firestore,i,r._key,null,r.converter);throw Ce()})}set(t,r,i){const s=Ac(t,this._firestore),o=VI(s.converter,r,i),a=PI(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=Ac(t,this._firestore);let a;return a="string"==typeof(r=(0,Xt.m9)(r))||r instanceof pa?zA(this._dataReader,"Transaction.update",o._key,r,i,s):$A(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=Ac(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ac(e,this._firestore),r=new Sc(this._firestore);return super.get(e).then(i=>new ga(this._firestore,r,t._key,i._document,new yu(!1,!1),t.converter))}}!function(e,t=!0){vh=sa.SDK_VERSION,(0,sa._registerComponent)(new ZL.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new on(new gJ(r.getProvider("auth-internal")),new yJ(r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new oe(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pc(u.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,sa.registerVersion)(p2,"4.4.0",e),(0,sa.registerVersion)(p2,"4.4.0","esm2017")}();class QA{constructor(e){return e}}const Lj="firestore",YA=new B("angularfire2.firestore-instances"),bre={provide:class Ere{constructor(){return $L(Lj)}},deps:[[new xs,YA]]},Cre={provide:QA,useFactory:function Ire(n,e){const t=function UY(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}(Lj,n,e);return t&&new QA(t)},deps:[[new xs,YA],class yE{constructor(e){return e}}]};let Vj=(()=>{class n{constructor(){(0,sa.registerVersion)("angularfire",WD.full,"fst")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Bt({type:n});static \u0275inj=Ut({providers:[Cre,bre]})}return n})(),Uj=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)($(Xo),$(gr))};static#t=this.\u0275dir=ke({type:n})}return n})(),vu=(()=>{class n extends Uj{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=$n(n)))(i||n)}}();static#t=this.\u0275dir=ke({type:n,features:[Nt]})}return n})();const xo=new B("NgValueAccessor"),Dre={provide:xo,useExisting:U(()=>XA),multi:!0};let XA=(()=>{class n extends vu{writeValue(t){this.setProperty("checked",t)}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=$n(n)))(i||n)}}();static#t=this.\u0275dir=ke({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){1&r&&ze("change",function(o){return i.onChange(o.target.checked)})("blur",function(){return i.onTouched()})},features:[kt([Dre]),Nt]})}return n})();const Sre={provide:xo,useExisting:U(()=>ef),multi:!0},Rre=new B("CompositionEventMode");let ef=(()=>{class n extends Uj{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Are(){const n=ec()?ec().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)($(Xo),$(gr),$(Rre,8))};static#t=this.\u0275dir=ke({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&ze("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[kt([Sre]),Nt]})}return n})();const Xr=new B("NgValidators"),Mc=new B("NgAsyncValidators");function zj(n){return function Rc(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}(n.value)?{required:!0}:null}function Hj(n){return!0===n.value?null:{required:!0}}function BI(n){return null}function Zj(n){return null!=n}function Qj(n){return Hp(n)?R(n):n}function Yj(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Xj(n,e){return e.map(t=>t(n))}function Jj(n){return n.map(e=>function Pre(n){return!n.validate}(e)?e:t=>e.validate(t))}function JA(n){return null!=n?function e$(n){if(!n)return null;const e=n.filter(Zj);return 0==e.length?null:function(t){return Yj(Xj(t,e))}}(Jj(n)):null}function eR(n){return null!=n?function t$(n){if(!n)return null;const e=n.filter(Zj);return 0==e.length?null:function(t){return function Tre(...n){const e=Bo(n),{args:t,keys:r}=zF(n),i=new Ge(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let c=o,u=o;for(let h=0;h<o;h++){let g=!1;Kt(t[h]).subscribe(fe(s,m=>{g||(g=!0,u--),a[h]=m},()=>c--,void 0,()=>{(!c||!g)&&(u||s.next(r?HF(r,a):a),s.complete())}))}});return e?i.pipe(SD(e)):i}(Xj(t,e).map(Qj)).pipe(ve(Yj))}}(Jj(n)):null}function n$(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function tR(n){return n?Array.isArray(n)?n:[n]:[]}function jI(n,e){return Array.isArray(n)?n.includes(e):n===e}function s$(n,e){const t=tR(e);return tR(n).forEach(i=>{jI(t,i)||t.push(i)}),t}function o$(n,e){return tR(e).filter(t=>!jI(n,t))}class a${constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=JA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=eR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class _i extends a${get formDirective(){return null}get path(){return null}}class Pc extends a${constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class c${constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let $I=(()=>{class n extends c${constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)($(Pc,2))};static#t=this.\u0275dir=ke({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Ll("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Nt]})}return n})(),zI=(()=>{class n extends c${constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)($(_i,10))};static#t=this.\u0275dir=ke({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&Ll("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Nt]})}return n})();const Om="VALID",qI="INVALID",tf="PENDING",Nm="DISABLED";function iR(n){return(GI(n)?n.validators:n)||null}function sR(n,e){return(GI(e)?e.asyncValidators:n)||null}function GI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class h${constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Om}get invalid(){return this.status===qI}get pending(){return this.status==tf}get disabled(){return this.status===Nm}get enabled(){return this.status!==Nm}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(s$(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(s$(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(o$(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(o$(e,this._rawAsyncValidators))}hasValidator(e){return jI(this._rawValidators,e)}hasAsyncValidator(e){return jI(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=tf,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Nm,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Om,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Om||this.status===tf)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Nm:Om}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=tf,this._hasOwnPendingAsyncValidator=!0;const t=Qj(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new bt,this.statusChanges=new bt}_calculateStatus(){return this._allControlsDisabled()?Nm:this.errors?qI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(tf)?tf:this._anyControlsHaveStatus(qI)?qI:Om}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){GI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function kre(n){return Array.isArray(n)?JA(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Fre(n){return Array.isArray(n)?eR(n):n||null}(this._rawAsyncValidators)}}class oR extends h${constructor(e,t,r){super(iR(t),sR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function d$(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new k(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function u$(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new k(1e3,"");if(!r[t])throw new k(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const nf=new B("CallSetDisabledState",{providedIn:"root",factory:()=>WI}),WI="always";function km(n,e,t=WI){aR(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Ure(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&f$(n,e)})}(n,e),function jre(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Bre(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&f$(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Vre(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function QI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function aR(n,e){const t=function r$(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(n$(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function i$(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(n$(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();QI(e._rawValidators,i),QI(e._rawAsyncValidators,i)}function f$(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const Gre={provide:_i,useExisting:U(()=>rf)},Fm=(()=>Promise.resolve())();let rf=(()=>{class n extends _i{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new bt,this.form=new oR({},JA(t),eR(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Fm.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),km(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Fm.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Fm.then(()=>{const r=this._findContainer(t.path),i=new oR({});(function p$(n,e){aR(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Fm.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Fm.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function g$(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||n)($(Xr,10),$(Mc,10),$(nf,8))};static#t=this.\u0275dir=ke({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&ze("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[kt([Gre]),Nt]})}return n})();function m$(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function _$(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const y$=class extends h${constructor(e=null,t,r){super(iR(t),sR(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),GI(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=_$(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){m$(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){m$(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){_$(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Zre={provide:Pc,useExisting:U(()=>Lm)},I$=(()=>Promise.resolve())();let Lm=(()=>{class n extends Pc{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new y$,this._registered=!1,this.name="",this.update=new bt,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function uR(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===ef?t=s:function Hre(n){return Object.getPrototypeOf(n.constructor)===vu}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function lR(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){km(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){I$.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&th(r);I$.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function KI(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)($(_i,9),$(Xr,10),$(Mc,10),$(xo,10),$(zl,8),$(nf,8))};static#t=this.\u0275dir=ke({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[kt([Zre]),Nt,jr]})}return n})(),XI=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=ke({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),b$=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Bt({type:n});static#n=this.\u0275inj=Ut({})}return n})();const sie={provide:xo,useExisting:U(()=>pR),multi:!0};function M$(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let pR=(()=>{class n extends vu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=M$(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function oie(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=$n(n)))(i||n)}}();static#t=this.\u0275dir=ke({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){1&r&&ze("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[kt([sie]),Nt]})}return n})(),P$=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(M$(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||n)($(gr),$(Xo),$(pR,9))};static#t=this.\u0275dir=ke({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})();const aie={provide:xo,useExisting:U(()=>gR),multi:!0};function x$(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let gR=(()=>{class n extends vu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],s=r.selectedOptions;if(void 0!==s){const o=s;for(let a=0;a<o.length;a++){const u=this._getOptionValue(o[a].value);i.push(u)}}else{const o=r.options;for(let a=0;a<o.length;a++){const c=o[a];if(c.selected){const u=this._getOptionValue(c.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function cie(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=$n(n)))(i||n)}}();static#t=this.\u0275dir=ke({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){1&r&&ze("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[kt([aie]),Nt]})}return n})(),O$=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(x$(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(x$(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||n)($(gr),$(Xo),$(gR,9))};static#t=this.\u0275dir=ke({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})(),Eu=(()=>{class n{constructor(){this._validator=BI}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):BI,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=ke({type:n,features:[jr]})}return n})();const die={provide:Xr,useExisting:U(()=>Vm),multi:!0},hie={provide:Xr,useExisting:U(()=>mR),multi:!0};let Vm=(()=>{class n extends Eu{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=th,this.createValidator=t=>zj}enabled(t){return t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=$n(n)))(i||n)}}();static#t=this.\u0275dir=ke({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&Hr("required",i._enabled?"":null)},inputs:{required:"required"},features:[kt([die]),Nt]})}return n})(),mR=(()=>{class n extends Vm{constructor(){super(...arguments),this.createValidator=t=>Hj}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=$n(n)))(i||n)}}();static#t=this.\u0275dir=ke({type:n,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&Hr("required",i._enabled?"":null)},features:[kt([hie]),Nt]})}return n})(),_ie=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Bt({type:n});static#n=this.\u0275inj=Ut({imports:[b$]})}return n})(),vie=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:nf,useValue:t.callSetDisabledState??WI}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Bt({type:n});static#n=this.\u0275inj=Ut({imports:[_ie]})}return n})();const Iie=new B("mat-sanity-checks",{providedIn:"root",factory:function Eie(){return!0}});let wie=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function sQ(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static#e=this.\u0275fac=function(r){return new(r||n)(N(FQ),N(Iie,8),N(hn))};static#t=this.\u0275mod=Bt({type:n});static#n=this.\u0275inj=Ut({imports:[rL,rL]})}return n})();function bie(n,e){return class extends n{get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}constructor(...t){super(...t),this.defaultColor=e,this.color=e}}}const H$=Gl({passive:!0,capture:!0});class Die{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=_g(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,r,i){const s=this._events.get(t);if(s){const o=s.get(r);o?o.add(i):s.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,H$)})}removeHandler(e,t,r){const i=this._events.get(e);if(!i)return;const s=i.get(t);s&&(s.delete(r),0===s.size&&i.delete(t),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,H$)))}}class _R{static#e=this._eventManager=new Die;constructor(e,t,r,i){this._target=e,this._ngZone=t,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Gr(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...q$,...r.animation},o=r.radius||function Aie(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),a=e-i.left,c=t-i.top,u=s.enterDuration,h=document.createElement("div");h.classList.add("mat-ripple-element"),h.style.left=a-o+"px",h.style.top=c-o+"px",h.style.height=2*o+"px",h.style.width=2*o+"px",null!=r.color&&(h.style.backgroundColor=r.color),h.style.transitionDuration=`${u}ms`,this._containerElement.appendChild(h);const g=window.getComputedStyle(h),y=g.transitionDuration,E="none"===g.transitionProperty||"0s"===y||"0s, 0s"===y||0===i.width&&0===i.height,I=new Tie(this,h,r,E);h.style.transform="scale3d(1, 1, 1)",I.state=0,r.persistent||(this._mostRecentTransientRipple=I);return!E&&(u||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const P=()=>this._finishRippleTransition(I),S=()=>this._destroyRipple(I);h.addEventListener("transitionend",P),h.addEventListener("transitioncancel",S)}),this._activeRipples.set(I,null),(E||!u)&&this._finishRippleTransition(I),I}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...q$,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Gr(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,W$.forEach(r=>{_R._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{K$.forEach(t=>{this._triggerElement.addEventListener(t,this,G$)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=XF(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!JF(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(W$.forEach(t=>_R._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&K$.forEach(t=>e.removeEventListener(t,this,G$)))}}const Rie=["determinateSpinner"];function Mie(n,e){if(1&n&&(dp(),re(0,"svg",11),qr(1,"circle",12),te()),2&n){const t=ot();Hr("viewBox",t._viewBox()),ge(1),Gp("stroke-dasharray",t._strokeCircumference(),"px")("stroke-dashoffset",t._strokeCircumference()/2,"px")("stroke-width",t._circleStrokeWidth(),"%"),Hr("r",t._circleRadius())}}const Pie=bie(class{constructor(n){this._elementRef=n}},"primary"),xie=new B("mat-progress-spinner-default-options",{providedIn:"root",factory:function Oie(){return{diameter:Z$}}}),Z$=100;let JI=(()=>{class n extends Pie{constructor(t,r,i){super(t),this.mode="mat-spinner"===this._elementRef.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",this._value=0,this._diameter=Z$,this._noopAnimations="NoopAnimations"===r&&!!i&&!i._forceAnimations,i&&(i.color&&(this.color=this.defaultColor=i.color),i.diameter&&(this.diameter=i.diameter),i.strokeWidth&&(this.strokeWidth=i.strokeWidth))}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,fg(t)))}get diameter(){return this._diameter}set diameter(t){this._diameter=fg(t)}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(t){this._strokeWidth=fg(t)}_circleRadius(){return(this.diameter-10)/2}_viewBox(){const t=2*this._circleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static#e=this.\u0275fac=function(r){return new(r||n)($(gr),$(TC,8),$(xie))};static#t=this.\u0275cmp=pr({type:n,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(r,i){if(1&r&&PT(Rie,5),2&r){let s;Bl(s=jl())&&(i._determinateCircle=s.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:16,hostBindings:function(r,i){2&r&&(Hr("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===i.mode?i.value:null)("mode",i.mode),Gp("width",i.diameter,"px")("height",i.diameter,"px")("--mdc-circular-progress-size",i.diameter+"px")("--mdc-circular-progress-active-indicator-width",i.diameter+"px"),Ll("_mat-animation-noopable",i._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===i.mode))},inputs:{color:"color",mode:"mode",value:"value",diameter:"diameter",strokeWidth:"strokeWidth"},exportAs:["matProgressSpinner"],features:[Nt],decls:14,vars:11,consts:[["circle",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["determinateSpinner",""],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(r,i){if(1&r&&(At(0,Mie,2,8,"ng-template",null,0,rg),re(2,"div",1,2),dp(),re(4,"svg",3),qr(5,"circle",4),te()(),function py(){!function Mb(){Ve.lFrame.currentNamespace=null}()}(),re(6,"div",5)(7,"div",6)(8,"div",7),zp(9,8),te(),re(10,"div",9),zp(11,8),te(),re(12,"div",10),zp(13,8),te()()()),2&r){const s=Ya(1);ge(4),Hr("viewBox",i._viewBox()),ge(1),Gp("stroke-dasharray",i._strokeCircumference(),"px")("stroke-dashoffset",i._strokeDashOffset(),"px")("stroke-width",i._circleStrokeWidth(),"%"),Hr("r",i._circleRadius()),ge(4),we("ngTemplateOutlet",s),ge(2),we("ngTemplateOutlet",s),ge(2),we("ngTemplateOutlet",s)}},dependencies:[cF],styles:["@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-color-1-fade-in-out{from{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdc-circular-progress-color-2-fade-in-out{from{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-3-fade-in-out{from{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-4-fade-in-out{from{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}.mdc-circular-progress{display:inline-flex;position:relative;direction:ltr;line-height:0;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-1{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-1-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-2{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-2-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-3{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-3-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-4{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-4-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--closed{opacity:0}.mat-mdc-progress-spinner{--mdc-circular-progress-active-indicator-width:4px;--mdc-circular-progress-size:48px}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-1 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-2 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-3 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-4 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner .mdc-circular-progress{width:var(--mdc-circular-progress-size) !important;height:var(--mdc-circular-progress-size) !important}.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}"],encapsulation:2,changeDetection:0})}return n})(),kie=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Bt({type:n});static#n=this.\u0275inj=Ut({imports:[uF,wie]})}return n})();class Q${}class Fie{}const ma="*";function ew(n,e){return{type:7,name:n,definitions:e,options:{}}}function xc(n,e=null){return{type:4,styles:e,timings:n}}function Y$(n,e=null){return{type:2,steps:n,options:e}}function lr(n){return{type:6,styles:n,offset:null}}function Iu(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function X$(n=null){return{type:9,options:n}}function sf(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}class Bm{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class J${constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function ez(n){return new k(3e3,!1)}function Oc(n){switch(n.length){case 0:return new Bm;case 1:return n[0];default:return new J$(n)}}function tz(n,e,t=new Map,r=new Map){const i=[],s=[];let o=-1,a=null;if(e.forEach(c=>{const u=c.get("offset"),h=u==o,g=h&&a||new Map;c.forEach((m,y)=>{let E=y,I=m;if("offset"!==y)switch(E=n.normalizePropertyName(E,i),I){case"!":I=t.get(y);break;case ma:I=r.get(y);break;default:I=n.normalizeStyleValue(y,E,I,i)}g.set(E,I)}),h||s.push(g),a=g,o=u}),i.length)throw function ose(n){return new k(3502,!1)}();return s}function vR(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&ER(t,"start",n)));break;case"done":n.onDone(()=>r(t&&ER(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&ER(t,"destroy",n)))}}function ER(n,e,t){const s=IR(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function IR(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function Gi(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function nz(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const yse=(()=>typeof document>"u"?null:document.documentElement)();function wR(n){const e=n.parentNode||n.host||null;return e===yse?null:e}let wu=null,rz=!1;function iz(n,e){for(;e;){if(e===n)return!0;e=wR(e)}return!1}function sz(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]}let oz=(()=>{class n{validateStyleProperty(t){return function Ese(n){wu||(wu=function Ise(){return typeof document<"u"?document.body:null}()||{},rz=!!wu.style&&"WebkitAppearance"in wu.style);let e=!0;return wu.style&&!function vse(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in wu.style,!e&&rz&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in wu.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return iz(t,r)}getParentElement(t){return wR(t)}query(t,r,i){return sz(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],c){return new Bm(i,s)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})(),bR=(()=>{class n{static#e=this.NOOP=new oz}return n})();const wse=1e3,CR="ng-enter",tw="ng-leave",nw="ng-trigger",rw=".ng-trigger",cz="ng-animating",TR=".ng-animating";function _a(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:DR(parseFloat(e[1]),e[2])}function DR(n,e){return"s"===e?n*wse:n}function iw(n,e,t){return n.hasOwnProperty("duration")?n:function Cse(n,e,t){let i,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(ez()),{duration:0,delay:0,easing:""};i=DR(parseFloat(a[1]),a[2]);const c=a[3];null!=c&&(s=DR(parseFloat(c),a[4]));const u=a[5];u&&(o=u)}else i=n;if(!t){let a=!1,c=e.length;i<0&&(e.push(function Vie(){return new k(3100,!1)}()),a=!0),s<0&&(e.push(function Uie(){return new k(3101,!1)}()),a=!0),a&&e.splice(c,0,ez())}return{duration:i,delay:s,easing:o}}(n,e,t)}function jm(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function lz(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Nc(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function Oo(n,e,t){e.forEach((r,i)=>{const s=AR(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function bu(n,e){e.forEach((t,r)=>{const i=AR(r);n.style[i]=""})}function $m(n){return Array.isArray(n)?1==n.length?n[0]:Y$(n):n}const SR=new RegExp("{{\\s*(.+?)\\s*}}","g");function dz(n){let e=[];if("string"==typeof n){let t;for(;t=SR.exec(n);)e.push(t[1]);SR.lastIndex=0}return e}function zm(n,e,t){const r=n.toString(),i=r.replace(SR,(s,o)=>{let a=e[o];return null==a&&(t.push(function jie(n){return new k(3003,!1)}()),a=""),a.toString()});return i==r?n:i}function sw(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Sse=/-+([a-z0-9])/g;function AR(n){return n.replace(Sse,(...e)=>e[1].toUpperCase())}function Wi(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function $ie(n){return new k(3004,!1)}()}}function hz(n,e){return window.getComputedStyle(n)[e]}const ow="*";function Mse(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function Pse(n,e,t){if(":"==n[0]){const c=function xse(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function nse(n){return new k(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof c)return void e.push(c);n=c}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function tse(n){return new k(3015,!1)}()),e;const i=r[1],s=r[2],o=r[3];e.push(fz(i,o));"<"==s[0]&&!(i==ow&&o==ow)&&e.push(fz(o,i))}(r,t,e)):t.push(n),t}const aw=new Set(["true","1"]),cw=new Set(["false","0"]);function fz(n,e){const t=aw.has(n)||cw.has(n),r=aw.has(e)||cw.has(e);return(i,s)=>{let o=n==ow||n==i,a=e==ow||e==s;return!o&&t&&"boolean"==typeof i&&(o=i?aw.has(n):cw.has(n)),!a&&r&&"boolean"==typeof s&&(a=s?aw.has(e):cw.has(e)),o&&a}}const Ose=new RegExp("s*:selfs*,?","g");function RR(n,e,t,r){return new Nse(n).build(e,t,r)}class Nse{constructor(e){this._driver=e}build(e,t,r){const i=new Lse(t);return this._resetContextStyleTimingState(i),Wi(this,$m(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function Hie(){return new k(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const c=a,u=c.name;u.toString().split(/\s*,\s*/).forEach(h=>{c.name=h,s.push(this.visitState(c,t))}),c.name=u}else if(1==a.type){const c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,o.push(c)}else t.errors.push(function qie(){return new k(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{dz(c).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}),s.size&&(sw(s.values()),t.errors.push(function Gie(n,e){return new k(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Wi(this,$m(e.animation),t);return{type:1,matchers:Mse(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Cu(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Wi(this,r,t)),options:Cu(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(o=>{t.currentTime=r;const a=Wi(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:3,steps:s,options:Cu(e.options)}}visitAnimate(e,t){const r=function Use(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return MR(iw(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=MR(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=iw(t,e);return MR(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:lr({});if(5==s.type)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const u={};r.easing&&(u.easing=r.easing),o=lr(u)}t.currentTime+=r.duration+r.delay;const c=this.visitStyle(o,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===ma?r.push(a):t.errors.push(new k(3002,!1)):r.push(lz(a));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let c of a.values())if(c.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,c)=>{const u=t.collectedStyles.get(t.currentQuerySelector),h=u.get(c);let g=!0;h&&(s!=i&&s>=h.startTime&&i<=h.endTime&&(t.errors.push(function Kie(n,e,t,r,i){return new k(3010,!1)}()),g=!1),s=h.startTime),g&&u.set(c,{startTime:s,endTime:i}),t.options&&function Dse(n,e,t){const r=e.params||{},i=dz(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function Bie(n){return new k(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Zie(){return new k(3011,!1)}()),r;let s=0;const o=[];let a=!1,c=!1,u=0;const h=e.steps.map(P=>{const S=this._makeStyleAst(P,t);let F=null!=S.offset?S.offset:function Vse(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(S.styles),Y=0;return null!=F&&(s++,Y=S.offset=F),c=c||Y<0||Y>1,a=a||Y<u,u=Y,o.push(Y),S});c&&t.errors.push(function Qie(){return new k(3012,!1)}()),a&&t.errors.push(function Yie(){return new k(3200,!1)}());const g=e.steps.length;let m=0;s>0&&s<g?t.errors.push(function Xie(){return new k(3202,!1)}()):0==s&&(m=1/(g-1));const y=g-1,E=t.currentTime,I=t.currentAnimateTimings,b=I.duration;return h.forEach((P,S)=>{const F=m>0?S==y?1:m*S:o[S],Y=F*b;t.currentTime=E+I.delay+Y,I.duration=Y,this._validateStyleAst(P,t),P.offset=F,r.styles.push(P)}),r}visitReference(e,t){return{type:8,animation:Wi(this,$m(e.animation),t),options:Cu(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Cu(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Cu(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function kse(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Ose,"")),n=n.replace(/@\*/g,rw).replace(/@\w+/g,t=>rw+"-"+t.slice(1)).replace(/:animating/g,TR),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,Gi(t.collectedStyles,t.currentQuerySelector,new Map);const a=Wi(this,$m(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Cu(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Jie(){return new k(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:iw(e.timings,t.errors,!0);return{type:12,animation:Wi(this,$m(e.animation),t),timings:r,options:null}}}class Lse{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Cu(n){return n?(n=jm(n)).params&&(n.params=function Fse(n){return n?jm(n):null}(n.params)):n={},n}function MR(n,e,t){return{duration:n,delay:e,easing:t}}function PR(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class lw{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const $se=new RegExp(":enter","g"),Hse=new RegExp(":leave","g");function xR(n,e,t,r,i,s=new Map,o=new Map,a,c,u=[]){return(new qse).buildKeyframes(n,e,t,r,i,s,o,a,c,u)}class qse{buildKeyframes(e,t,r,i,s,o,a,c,u,h=[]){u=u||new lw;const g=new OR(e,t,u,i,s,h,[]);g.options=c;const m=c.delay?_a(c.delay):0;g.currentTimeline.delayNextStep(m),g.currentTimeline.setStyles([o],null,g.errors,c),Wi(this,r,g);const y=g.timelines.filter(E=>E.containsAnimation());if(y.length&&a.size){let E;for(let I=y.length-1;I>=0;I--){const b=y[I];if(b.element===t){E=b;break}}E&&!E.allowOnlyTimelineStyles()&&E.setStyles([a],null,g.errors,c)}return y.length?y.map(E=>E.buildKeyframes()):[PR(t,[],[],[],0,m,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const o="number"==typeof s?s:_a(zm(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const o=null!=r.duration?_a(r.duration):null,a=null!=r.delay?_a(r.delay):null;return 0!==o&&e.forEach(c=>{const u=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,u.duration+u.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Wi(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=uw);const o=_a(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Wi(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?_a(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),Wi(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return iw(t.params?zm(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{a.forwardTime((c.offset||0)*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?_a(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=uw);let o=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((u,h)=>{t.currentQueryIndex=h;const g=t.createSubContext(e.options,u);s&&g.delayNextStep(s),u===t.element&&(c=g.currentTimeline),Wi(this,e.animation,g),g.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,g.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime}const h=t.currentTimeline;c&&h.delayNextStep(c);const g=h.currentTime;Wi(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-g+(i.startTime-r.currentTimeline.startTime)}}const uw={};class OR{constructor(e,t,r,i,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=uw,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new dw(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=_a(r.duration)),null!=r.delay&&(i.delay=_a(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=zm(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new OR(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=uw,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new Gse(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace($se,"."+this._enterClassName)).replace(Hse,"."+this._leaveClassName);let u=this._driver.query(this.element,e,1!=r);0!==r&&(u=r<0?u.slice(u.length+r,u.length):u.slice(0,r)),a.push(...u)}return!s&&0==a.length&&o.push(function ese(n){return new k(3014,!1)}()),a}}class dw{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new dw(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||ma),this._currentKeyframe.set(t,ma);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},o=function Wse(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,ma)}else Nc(i,t)}),t}(e,this._globalTimelineStyles);for(let[a,c]of o){const u=zm(c,s,r);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??ma),this._updateStyle(a,u)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,c)=>{const u=Nc(a,new Map,this._backFill);u.forEach((h,g)=>{"!"===h?e.add(g):h===ma&&t.add(g)}),r||u.set("offset",c/this.duration),i.push(u)});const s=e.size?sw(e.values()):[],o=t.size?sw(t.values()):[];if(r){const a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return PR(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class Gse extends dw{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=r+t,a=t/o,c=Nc(e[0]);c.set("offset",0),s.push(c);const u=Nc(e[0]);u.set("offset",mz(a)),s.push(u);const h=e.length-1;for(let g=1;g<=h;g++){let m=Nc(e[g]);const y=m.get("offset");m.set("offset",mz((t+y*r)/o)),s.push(m)}r=o,t=0,i="",e=s}return PR(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function mz(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class NR{}const Kse=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Zse extends NR{normalizePropertyName(e,t){return AR(e)}normalizeStyleValue(e,t,r,i){let s="";const o=r.toString().trim();if(Kse.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function zie(n,e){return new k(3005,!1)}())}return o+s}}function _z(n,e,t,r,i,s,o,a,c,u,h,g,m){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:u,postStyleProps:h,totalTime:g,errors:m}}const kR={};class yz{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function Qse(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,c,u,h){const g=[],m=this.ast.options&&this.ast.options.params||kR,E=this.buildStyles(r,a&&a.params||kR,g),I=c&&c.params||kR,b=this.buildStyles(i,I,g),P=new Set,S=new Map,F=new Map,Y="void"===i,he={params:Yse(I,m),delay:this.ast.options?.delay},Oe=h?[]:xR(e,t,this.ast.animation,s,o,E,b,he,u,g);let We=0;if(Oe.forEach(Ei=>{We=Math.max(Ei.duration+Ei.delay,We)}),g.length)return _z(t,this._triggerName,r,i,Y,E,b,[],[],S,F,We,g);Oe.forEach(Ei=>{const xi=Ei.element,Ww=Gi(S,xi,new Set);Ei.preStyleProps.forEach(Ou=>Ww.add(Ou));const __=Gi(F,xi,new Set);Ei.postStyleProps.forEach(Ou=>__.add(Ou)),xi!==t&&P.add(xi)});const Ft=sw(P.values());return _z(t,this._triggerName,r,i,Y,E,b,Oe,Ft,S,F,We)}}function Yse(n,e){const t=jm(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class Xse{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=jm(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(i[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=zm(o,i,t));const c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),r.set(a,o)})}),r}}class eoe{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new Xse(i.style,i.options&&i.options.params||{},r))}),vz(this.states,"true","1"),vz(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new yz(e,i,this.states))}),this.fallbackTransition=function toe(n,e,t){return new yz(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function vz(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const noe=new lw;class roe{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=RR(this._driver,t,r,[]);if(r.length)throw function ase(n){return new k(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=tz(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=xR(this._driver,t,s,CR,tw,new Map,new Map,r,noe,i),o.forEach(h=>{const g=Gi(a,h.element,new Map);h.postStyleProps.forEach(m=>g.set(m,null))})):(i.push(function cse(){return new k(3300,!1)}()),o=[]),i.length)throw function lse(n){return new k(3504,!1)}();a.forEach((h,g)=>{h.forEach((m,y)=>{h.set(y,this._driver.computeStyle(g,y,ma))})});const u=Oc(o.map(h=>{const g=a.get(h.element);return this._buildPlayer(h,new Map,g)}));return this._playersById.set(e,u),u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function use(n){return new k(3301,!1)}();return t}listen(e,t,r,i){const s=IR(t,"","","");return vR(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const Ez="ng-animate-queued",FR="ng-animate-disabled",coe=[],Iz={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},loe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},zs="__ng_removed";class LR{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function foe(n){return n??null}(r?e.value:e),r){const s=jm(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Hm="void",VR=new LR(Hm);class uoe{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,vs(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function dse(n,e){return new k(3302,!1)}();if(null==r||0==r.length)throw function hse(n){return new k(3303,!1)}();if(!function poe(n){return"start"==n||"done"==n}(r))throw function fse(n,e){return new k(3400,!1)}();const s=Gi(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);const a=Gi(this._engine.statesByElement,e,new Map);return a.has(t)||(vs(e,nw),vs(e,nw+"-"+t),a.set(t,VR)),()=>{this._engine.afterFlush(()=>{const c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function pse(n){return new k(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),o=new UR(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(vs(e,nw),vs(e,nw+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t);const u=new LR(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&u.absorbOptions(c.options),a.set(t,u),c||(c=VR),u.value!==Hm&&c.value===u.value){if(!function _oe(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(c.params,u.params)){const I=[],b=s.matchStyles(c.value,c.params,I),P=s.matchStyles(u.value,u.params,I);I.length?this._engine.reportError(I):this._engine.afterFlush(()=>{bu(e,b),Oo(e,P)})}return}const m=Gi(this._engine.playersByElement,e,[]);m.forEach(I=>{I.namespaceId==this.id&&I.triggerName==t&&I.queued&&I.destroy()});let y=s.matchTransition(c.value,u.value,e,u.params),E=!1;if(!y){if(!i)return;y=s.fallbackTransition,E=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:y,fromState:c,toState:u,player:o,isFallbackTransition:E}),E||(vs(e,Ez),o.onStart(()=>{af(e,Ez)})),o.onDone(()=>{let I=this.players.indexOf(o);I>=0&&this.players.splice(I,1);const b=this._engine.playersByElement.get(e);if(b){let P=b.indexOf(o);P>=0&&b.splice(P,1)}}),this.players.push(o),m.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,rw,!0);r.forEach(i=>{if(i[zs])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((c,u)=>{if(o.set(u,c.value),this._triggers.has(u)){const h=this.trigger(e,u,Hm,i);h&&a.push(h)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&Oc(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const c=this._triggers.get(o).fallbackTransition,u=r.get(o)||VR,h=new LR(Hm),g=new UR(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:u,toState:h,player:g,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[zs];(!s||s===Iz)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){vs(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const c=IR(s,r.triggerName,r.fromState.value,r.toState.value);c._data=e,vR(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class doe{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new uoe(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const c=i.get(a);if(c){const u=r.indexOf(c);r.splice(u+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(hw(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!hw(t))return;const s=t[zs];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),vs(e,FR)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),af(e,FR))}removeNode(e,t,r){if(hw(t)){const i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[zs]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return hw(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,rw,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,TR,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Oc(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[zs];if(t&&t.setForRemoval){if(e[zs]=Iz,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(FR)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)vs(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Oc(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function gse(n){return new k(3402,!1)}()}_flushAnimations(e,t){const r=new lw,i=[],s=new Map,o=[],a=new Map,c=new Map,u=new Map,h=new Set;this.disabledNodes.forEach(Pe=>{h.add(Pe);const Le=this.driver.query(Pe,".ng-animate-queued",!0);for(let He=0;He<Le.length;He++)h.add(Le[He])});const g=this.bodyNode,m=Array.from(this.statesByElement.keys()),y=Cz(m,this.collectedEnterElements),E=new Map;let I=0;y.forEach((Pe,Le)=>{const He=CR+I++;E.set(Le,He),Pe.forEach(Rt=>vs(Rt,He))});const b=[],P=new Set,S=new Set;for(let Pe=0;Pe<this.collectedLeaveElements.length;Pe++){const Le=this.collectedLeaveElements[Pe],He=Le[zs];He&&He.setForRemoval&&(b.push(Le),P.add(Le),He.hasAnimation?this.driver.query(Le,".ng-star-inserted",!0).forEach(Rt=>P.add(Rt)):S.add(Le))}const F=new Map,Y=Cz(m,Array.from(P));Y.forEach((Pe,Le)=>{const He=tw+I++;F.set(Le,He),Pe.forEach(Rt=>vs(Rt,He))}),e.push(()=>{y.forEach((Pe,Le)=>{const He=E.get(Le);Pe.forEach(Rt=>af(Rt,He))}),Y.forEach((Pe,Le)=>{const He=F.get(Le);Pe.forEach(Rt=>af(Rt,He))}),b.forEach(Pe=>{this.processLeaveNode(Pe)})});const he=[],Oe=[];for(let Pe=this._namespaceList.length-1;Pe>=0;Pe--)this._namespaceList[Pe].drainQueuedTransitions(t).forEach(He=>{const Rt=He.player,Ir=He.element;if(he.push(Rt),this.collectedEnterElements.length){const ei=Ir[zs];if(ei&&ei.setForMove){if(ei.previousTriggersValues&&ei.previousTriggersValues.has(He.triggerName)){const Nu=ei.previousTriggersValues.get(He.triggerName),Is=this.statesByElement.get(He.element);if(Is&&Is.has(He.triggerName)){const Kw=Is.get(He.triggerName);Kw.value=Nu,Is.set(He.triggerName,Kw)}}return void Rt.destroy()}}const Lo=!g||!this.driver.containsElement(g,Ir),Ki=F.get(Ir),jc=E.get(Ir),Tn=this._buildInstruction(He,r,jc,Ki,Lo);if(Tn.errors&&Tn.errors.length)return void Oe.push(Tn);if(Lo)return Rt.onStart(()=>bu(Ir,Tn.fromStyles)),Rt.onDestroy(()=>Oo(Ir,Tn.toStyles)),void i.push(Rt);if(He.isFallbackTransition)return Rt.onStart(()=>bu(Ir,Tn.fromStyles)),Rt.onDestroy(()=>Oo(Ir,Tn.toStyles)),void i.push(Rt);const _4=[];Tn.timelines.forEach(ei=>{ei.stretchStartingKeyframe=!0,this.disabledNodes.has(ei.element)||_4.push(ei)}),Tn.timelines=_4,r.append(Ir,Tn.timelines),o.push({instruction:Tn,player:Rt,element:Ir}),Tn.queriedElements.forEach(ei=>Gi(a,ei,[]).push(Rt)),Tn.preStyleProps.forEach((ei,Nu)=>{if(ei.size){let Is=c.get(Nu);Is||c.set(Nu,Is=new Set),ei.forEach((Kw,JM)=>Is.add(JM))}}),Tn.postStyleProps.forEach((ei,Nu)=>{let Is=u.get(Nu);Is||u.set(Nu,Is=new Set),ei.forEach((Kw,JM)=>Is.add(JM))})});if(Oe.length){const Pe=[];Oe.forEach(Le=>{Pe.push(function mse(n,e){return new k(3505,!1)}())}),he.forEach(Le=>Le.destroy()),this.reportError(Pe)}const We=new Map,Ft=new Map;o.forEach(Pe=>{const Le=Pe.element;r.has(Le)&&(Ft.set(Le,Le),this._beforeAnimationBuild(Pe.player.namespaceId,Pe.instruction,We))}),i.forEach(Pe=>{const Le=Pe.element;this._getPreviousPlayers(Le,!1,Pe.namespaceId,Pe.triggerName,null).forEach(Rt=>{Gi(We,Le,[]).push(Rt),Rt.destroy()})});const Ei=b.filter(Pe=>Dz(Pe,c,u)),xi=new Map;bz(xi,this.driver,S,u,ma).forEach(Pe=>{Dz(Pe,c,u)&&Ei.push(Pe)});const __=new Map;y.forEach((Pe,Le)=>{bz(__,this.driver,new Set(Pe),c,"!")}),Ei.forEach(Pe=>{const Le=xi.get(Pe),He=__.get(Pe);xi.set(Pe,new Map([...Le?.entries()??[],...He?.entries()??[]]))});const Ou=[],g4=[],m4={};o.forEach(Pe=>{const{element:Le,player:He,instruction:Rt}=Pe;if(r.has(Le)){if(h.has(Le))return He.onDestroy(()=>Oo(Le,Rt.toStyles)),He.disabled=!0,He.overrideTotalTime(Rt.totalTime),void i.push(He);let Ir=m4;if(Ft.size>1){let Ki=Le;const jc=[];for(;Ki=Ki.parentNode;){const Tn=Ft.get(Ki);if(Tn){Ir=Tn;break}jc.push(Ki)}jc.forEach(Tn=>Ft.set(Tn,Ir))}const Lo=this._buildAnimation(He.namespaceId,Rt,We,s,__,xi);if(He.setRealPlayer(Lo),Ir===m4)Ou.push(He);else{const Ki=this.playersByElement.get(Ir);Ki&&Ki.length&&(He.parentPlayer=Oc(Ki)),i.push(He)}}else bu(Le,Rt.fromStyles),He.onDestroy(()=>Oo(Le,Rt.toStyles)),g4.push(He),h.has(Le)&&i.push(He)}),g4.forEach(Pe=>{const Le=s.get(Pe.element);if(Le&&Le.length){const He=Oc(Le);Pe.setRealPlayer(He)}}),i.forEach(Pe=>{Pe.parentPlayer?Pe.syncPlayerEvents(Pe.parentPlayer):Pe.destroy()});for(let Pe=0;Pe<b.length;Pe++){const Le=b[Pe],He=Le[zs];if(af(Le,tw),He&&He.hasAnimation)continue;let Rt=[];if(a.size){let Lo=a.get(Le);Lo&&Lo.length&&Rt.push(...Lo);let Ki=this.driver.query(Le,TR,!0);for(let jc=0;jc<Ki.length;jc++){let Tn=a.get(Ki[jc]);Tn&&Tn.length&&Rt.push(...Tn)}}const Ir=Rt.filter(Lo=>!Lo.destroyed);Ir.length?goe(this,Le,Ir):this.processLeaveNode(Le)}return b.length=0,Ou.forEach(Pe=>{this.players.push(Pe),Pe.onDone(()=>{Pe.destroy();const Le=this.players.indexOf(Pe);this.players.splice(Le,1)}),Pe.play()}),Ou}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const c=!s||s==Hm;a.forEach(u=>{u.queued||!c&&u.triggerName!=i||o.push(u)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const c of t.timelines){const u=c.element,h=u!==s,g=Gi(r,u,[]);this._getPreviousPlayers(u,h,o,a,t.toState).forEach(y=>{const E=y.getRealPlayer();E.beforeDestroy&&E.beforeDestroy(),y.destroy(),g.push(y)})}bu(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){const a=t.triggerName,c=t.element,u=[],h=new Set,g=new Set,m=t.timelines.map(E=>{const I=E.element;h.add(I);const b=I[zs];if(b&&b.removedBeforeQueried)return new Bm(E.duration,E.delay);const P=I!==c,S=function moe(n){const e=[];return Tz(n,e),e}((r.get(I)||coe).map(We=>We.getRealPlayer())).filter(We=>!!We.element&&We.element===I),F=s.get(I),Y=o.get(I),he=tz(this._normalizer,E.keyframes,F,Y),Oe=this._buildPlayer(E,he,S);if(E.subTimeline&&i&&g.add(I),P){const We=new UR(e,a,I);We.setRealPlayer(Oe),u.push(We)}return Oe});u.forEach(E=>{Gi(this.playersByQueriedElement,E.element,[]).push(E),E.onDone(()=>function hoe(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,E.element,E))}),h.forEach(E=>vs(E,cz));const y=Oc(m);return y.onDestroy(()=>{h.forEach(E=>af(E,cz)),Oo(c,t.toStyles)}),g.forEach(E=>{Gi(i,E,[]).push(y)}),y}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Bm(e.duration,e.delay)}}class UR{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Bm,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>vR(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Gi(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function hw(n){return n&&1===n.nodeType}function wz(n,e){const t=n.style.display;return n.style.display=e??"none",t}function bz(n,e,t,r,i){const s=[];t.forEach(c=>s.push(wz(c)));const o=[];r.forEach((c,u)=>{const h=new Map;c.forEach(g=>{const m=e.computeStyle(u,g,i);h.set(g,m),(!m||0==m.length)&&(u[zs]=loe,o.push(u))}),n.set(u,h)});let a=0;return t.forEach(c=>wz(c,s[a++])),o}function Cz(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=new Set(e),s=new Map;function o(a){if(!a)return 1;let c=s.get(a);if(c)return c;const u=a.parentNode;return c=t.has(u)?u:i.has(u)?1:o(u),s.set(a,c),c}return e.forEach(a=>{const c=o(a);1!==c&&t.get(c).push(a)}),t}function vs(n,e){n.classList?.add(e)}function af(n,e){n.classList?.remove(e)}function goe(n,e,t){Oc(t).onDone(()=>n.processLeaveNode(e))}function Tz(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof J$?Tz(r.players,e):e.push(r)}}function Dz(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class fw{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new doe(e,t,r),this._timelineEngine=new roe(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const c=[],h=RR(this._driver,s,c,[]);if(c.length)throw function sse(n,e){return new k(3404,!1)}();a=function Jse(n,e,t){return new eoe(n,e,t)}(i,h,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,o]=nz(r);this._timelineEngine.command(s,t,o,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[o,a]=nz(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let voe=(()=>{class n{static#e=this.initialStylesByElement=new WeakMap;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Oo(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Oo(this._element,this._initialStyles),this._endStyles&&(Oo(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(bu(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(bu(this._element,this._endStyles),this._endStyles=null),Oo(this._element,this._initialStyles),this._state=3)}}return n})();function BR(n){let e=null;return n.forEach((t,r)=>{(function Eoe(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class Sz{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:hz(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Ioe{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return iz(e,t)}getParentElement(e){return wR(e)}query(e,t,r){return sz(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,o=[]){const c={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(c.easing=s);const u=new Map,h=o.filter(y=>y instanceof Sz);(function Ase(n,e){return 0===n||0===e})(r,i)&&h.forEach(y=>{y.currentSnapshot.forEach((E,I)=>u.set(I,E))});let g=function Tse(n){return n.length?n[0]instanceof Map?n:n.map(e=>lz(e)):[]}(t).map(y=>Nc(y));g=function Rse(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,hz(n,a)))}}return e}(e,g,u);const m=function yoe(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=BR(e[0]),e.length>1&&(r=BR(e[e.length-1]))):e instanceof Map&&(t=BR(e)),t||r?new voe(n,t,r):null}(e,g);return new Sz(e,g,c,m)}}let woe=(()=>{class n extends Q${constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:si.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?Y$(t):t;return Az(this._renderer,null,r,"register",[i]),new boe(r,this._renderer)}static#e=this.\u0275fac=function(r){return new(r||n)(N(Op),N(hn))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();class boe extends Fie{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Coe(this._id,e,t||{},this._renderer)}}class Coe{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Az(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Az(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const Rz="@.disabled";let Toe=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,r.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let h=this._rendererCache.get(s);return h||(h=new Mz("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,h)),h}const o=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const c=h=>{Array.isArray(h)?h.forEach(c):this.engine.registerTrigger(o,a,t,h.name,h)};return r.data.animation.forEach(c),new Doe(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(r){return new(r||n)(N(Op),N(fw),N(ft))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();class Mz{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==Rz?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Doe extends Mz{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==Rz?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function Soe(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function Aoe(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}let Roe=(()=>{class n extends fw{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(r){return new(r||n)(N(hn),N(bR),N(NR),N($l))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();const Pz=[{provide:Q$,useClass:woe},{provide:NR,useFactory:function Moe(){return new Zse}},{provide:fw,useClass:Roe},{provide:Op,useFactory:function Poe(n,e,t){return new Toe(n,e,t)},deps:[wD,fw,ft]}],jR=[{provide:bR,useFactory:()=>new Ioe},{provide:TC,useValue:"BrowserAnimations"},...Pz],xz=[{provide:bR,useClass:oz},{provide:TC,useValue:"NoopAnimations"},...Pz];let xoe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?xz:jR}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Bt({type:n});static#n=this.\u0275inj=Ut({providers:jR,imports:[RF]})}return n})();function cf(n,e){const t=w(n)?n:()=>n,r=i=>i.error(t());return new Ge(e?i=>e.schedule(r,0,i):r)}class ya{constructor(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}observe(e){return Oz(this,e)}do(e,t,r){const{kind:i,value:s,error:o}=this;return"N"===i?e?.(s):"E"===i?t?.(o):r?.()}accept(e,t,r){var i;return w(null===(i=e)||void 0===i?void 0:i.next)?this.observe(e):this.do(e,t,r)}toObservable(){const{kind:e,value:t,error:r}=this,i="N"===e?W(t):"E"===e?cf(()=>r):"C"===e?Pn:0;if(!i)throw new TypeError(`Unexpected notification kind ${e}`);return i}static createNext(e){return new ya("N",e)}static createError(e){return new ya("E",void 0,e)}static createComplete(){return ya.completeNotification}}function Oz(n,e){var t,r,i;const{kind:s,value:o,error:a}=n;if("string"!=typeof s)throw new TypeError('Invalid notification, missing "kind"');"N"===s?null===(t=e.next)||void 0===t||t.call(e,o):"E"===s?null===(r=e.error)||void 0===r||r.call(e,a):null===(i=e.complete)||void 0===i||i.call(e)}function No(n){return H((e,t)=>{let s,r=null,i=!1;r=e.subscribe(fe(t,void 0,void 0,o=>{s=Kt(n(o,No(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Nz(n,e,t,r){return H((i,s)=>{let o;e&&"function"!=typeof e?({duration:t,element:o,connector:r}=e):o=e;const a=new Map,c=E=>{a.forEach(E),E(s)},u=E=>c(I=>I.error(E));let h=0,g=!1;const m=new pt(s,E=>{try{const I=n(E);let b=a.get(I);if(!b){a.set(I,b=r?r():new V);const P=function y(E,I){const b=new Ge(P=>{h++;const S=I.subscribe(P);return()=>{S.unsubscribe(),0==--h&&g&&m.unsubscribe()}});return b.key=E,b}(I,b);if(s.next(P),t){const S=fe(b,()=>{b.complete(),S?.unsubscribe()},void 0,void 0,()=>a.delete(I));m.add(Kt(t(P)).subscribe(S))}}b.next(o?o(E):E)}catch(I){u(I)}},()=>c(E=>E.complete()),u,()=>a.clear(),()=>(g=!0,0===h));i.subscribe(m)})}function kz(n,e){return e?t=>t.pipe(kz((r,i)=>Kt(n(r,i)).pipe(ve((s,o)=>e(r,s,i,o))))):H((t,r)=>{let i=0,s=null,o=!1;t.subscribe(fe(r,a=>{s||(s=fe(r,void 0,()=>{s=null,o&&r.complete()}),Kt(n(a,i++)).subscribe(s))},()=>{o=!0,!s&&r.complete()}))})}function qm(n,e){return H(function Voe(n,e,t,r,i){return(s,o)=>{let a=t,c=e,u=0;s.subscribe(fe(o,h=>{const g=u++;c=a?n(c,h,g):(a=!0,h),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}(n,e,arguments.length>=2,!0))}ya.completeNotification=new ya("C");class $oe extends Error{constructor(e,t){super(function zoe(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}let xr=null;function mw(n){const e=xr;return xr=n,e}function Gz(n,e){const t=!e?.manualCleanup;t&&!e?.injector&&function av(n){if(!b_()&&!function ib(){return Qs}())throw new k(-203,!1)}();const r=t?e?.injector?.get(Ld)??le(Ld):null;let i;return i=function Y_(n,e){const t=Object.create(ub);function r(){return H_(t),t.value}return t.value=n,e?.equal&&(t.equal=e.equal),r.set=fl,r.update=db,r.mutate=hb,r.asReadonly=fb,r[zo]=t,r}(e?.requireSync?{kind:0}:{kind:1,value:e?.initialValue}),function Joe(n){const e=mw(null);try{return n()}finally{mw(e)}}(()=>{const s=n.subscribe({next:o=>i.set({kind:1,value:o}),error:o=>i.set({kind:2,error:o})});r?.onDestroy(s.unsubscribe.bind(s))}),$f(()=>{const s=i();switch(s.kind){case 1:return s.value;case 2:throw s.error;case 0:throw new $oe(601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}})}const Wm={};function Tu(n,e){if(Wm[n]=(Wm[n]||0)+1,"function"==typeof e)return qR(n,(...r)=>({...e(...r),type:n}));switch(e?e._as:"empty"){case"empty":return qR(n,()=>({type:n}));case"props":return qR(n,r=>({...r,type:n}));default:throw new Error("Unexpected config.")}}function qR(n,e){return Object.defineProperty(e,"type",{value:n,writable:!1})}const Wz="@ngrx/store/init";let Du=(()=>{class n extends x{constructor(){super({type:Wz})}next(t){if("function"==typeof t)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(typeof t>"u")throw new TypeError("Actions must be objects");if(typeof t.type>"u")throw new TypeError("Actions must have a type property");super.next(t)}complete(){}ngOnDestroy(){super.complete()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();const sae=[Du],WR=new B("@ngrx/store Internal Root Guard"),Kz=new B("@ngrx/store Internal Initial State"),KR=new B("@ngrx/store Initial State"),Zz=new B("@ngrx/store Reducer Factory"),Qz=new B("@ngrx/store Internal Reducer Factory Provider"),Yz=new B("@ngrx/store Initial Reducers"),ZR=new B("@ngrx/store Internal Initial Reducers"),Xz=new B("@ngrx/store Store Features"),Jz=new B("@ngrx/store Internal Store Reducers"),QR=new B("@ngrx/store Internal Feature Reducers"),eH=new B("@ngrx/store Internal Feature Configs"),YR=new B("@ngrx/store Internal Store Features"),tH=new B("@ngrx/store Internal Feature Reducers Token"),XR=new B("@ngrx/store Feature Reducers"),nH=new B("@ngrx/store User Provided Meta Reducers"),yw=new B("@ngrx/store Meta Reducers"),rH=new B("@ngrx/store Internal Resolved Meta Reducers"),iH=new B("@ngrx/store User Runtime Checks Config"),sH=new B("@ngrx/store Internal User Runtime Checks Config"),Zm=new B("@ngrx/store Internal Runtime Checks"),Qm=new B("@ngrx/store Check if Action types are unique");function eM(n,e={}){const t=Object.keys(n),r={};for(let s=0;s<t.length;s++){const o=t[s];"function"==typeof n[o]&&(r[o]=n[o])}const i=Object.keys(r);return function(o,a){o=void 0===o?e:o;let c=!1;const u={};for(let h=0;h<i.length;h++){const g=i[h],y=o[g],E=(0,r[g])(y,a);u[g]=E,c=c||E!==y}return c?u:o}}function aH(...n){return function(e){if(0===n.length)return e;const t=n[n.length-1];return n.slice(0,-1).reduceRight((i,s)=>s(i),t(e))}}function cH(n,e){return Array.isArray(e)&&e.length>0&&(n=aH.apply(null,[...e,n])),(t,r)=>{const i=n(t);return(s,o)=>i(s=void 0===s?r:s,o)}}new B("@ngrx/store Root Store Provider"),new B("@ngrx/store Feature State Provider");class vw extends Ge{}class lH extends Du{}let Ym=(()=>{class n extends x{get currentReducers(){return this.reducers}constructor(t,r,i,s){super(s(i,r)),this.dispatcher=t,this.initialState=r,this.reducers=i,this.reducerFactory=s}addFeature(t){this.addFeatures([t])}addFeatures(t){const r=t.reduce((i,{reducers:s,reducerFactory:o,metaReducers:a,initialState:c,key:u})=>{const h="function"==typeof s?function aae(n){const e=Array.isArray(n)&&n.length>0?aH(...n):t=>t;return(t,r)=>(t=e(t),(i,s)=>t(i=void 0===i?r:i,s))}(a)(s,c):cH(o,a)(s,c);return i[u]=h,i},{});this.addReducers(r)}removeFeature(t){this.removeFeatures([t])}removeFeatures(t){this.removeReducers(t.map(r=>r.key))}addReducer(t,r){this.addReducers({[t]:r})}addReducers(t){this.reducers={...this.reducers,...t},this.updateReducers(Object.keys(t))}removeReducer(t){this.removeReducers([t])}removeReducers(t){t.forEach(r=>{this.reducers=function oae(n,e){return Object.keys(n).filter(t=>t!==e).reduce((t,r)=>Object.assign(t,{[r]:n[r]}),{})}(this.reducers,r)}),this.updateReducers(t)}updateReducers(t){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:"@ngrx/store/update-reducers",features:t})}ngOnDestroy(){this.complete()}static#e=this.\u0275fac=function(r){return new(r||n)(N(lH),N(KR),N(Yz),N(Zz))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();const lae=[Ym,{provide:vw,useExisting:Ym},{provide:lH,useExisting:Du}];let Xm=(()=>{class n extends V{ngOnDestroy(){this.complete()}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=$n(n)))(i||n)}}();static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();const uae=[Xm];class uH extends Ge{}let dH=(()=>{class n extends x{static#e=this.INIT=Wz;constructor(t,r,i,s){super(s);const a=t.pipe(hr(jL)).pipe(function Loe(...n){const e=Bo(n);return H((t,r)=>{const i=n.length,s=new Array(i);let o=n.map(()=>!1),a=!1;for(let c=0;c<i;c++)Kt(n[c]).subscribe(fe(r,u=>{s[c]=u,!a&&!o[c]&&(o[c]=!0,(a=o.every(Dn))&&(o=null))},Te));t.subscribe(fe(r,c=>{if(a){const u=[c,...s];r.next(e?e(...u):u)}}))})}(r)),u=a.pipe(qm(dae,{state:s}));this.stateSubscription=u.subscribe(({state:h,action:g})=>{this.next(h),i.next(g)}),this.state=Gz(this,{manualCleanup:!0,requireSync:!0})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}static#t=this.\u0275fac=function(r){return new(r||n)(N(Du),N(vw),N(Xm),N(KR))};static#n=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();function dae(n={state:void 0},[e,t]){const{state:r}=n;return{state:t(r,e),action:e}}const hae=[dH,{provide:uH,useExisting:dH}];let va=(()=>{class n extends Ge{constructor(t,r,i){super(),this.actionsObserver=r,this.reducerManager=i,this.source=t,this.state=t.state}select(t,...r){return pae.call(null,t,...r)(this)}selectSignal(t,r){return $f(()=>t(this.state()),{equal:r?.equal||((i,s)=>i===s)})}lift(t){const r=new n(this,this.actionsObserver,this.reducerManager);return r.operator=t,r}dispatch(t){this.actionsObserver.next(t)}next(t){this.actionsObserver.next(t)}error(t){this.actionsObserver.error(t)}complete(){this.actionsObserver.complete()}addReducer(t,r){this.reducerManager.addReducer(t,r)}removeReducer(t){this.reducerManager.removeReducer(t)}static#e=this.\u0275fac=function(r){return new(r||n)(N(uH),N(Du),N(Ym))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();const fae=[va];function pae(n,e,...t){return function(i){let s;if("string"==typeof n){const o=[e,...t].filter(Boolean);s=i.pipe(function Uoe(...n){const e=n.length;if(0===e)throw new Error("list of properties cannot be empty.");return ve(t=>{let r=t;for(let i=0;i<e;i++){const s=r?.[n[i]];if(!(typeof s<"u"))return;r=s}return r})}(n,...o))}else{if("function"!=typeof n)throw new TypeError(`Unexpected type '${typeof n}' in select operator, expected 'string' or 'function'`);s=i.pipe(ve(o=>n(o,e)))}return s.pipe(Zt())}}const tM="https://ngrx.io/guide/store/configuration/runtime-checks";function hH(n){return void 0===n}function fH(n){return null===n}function pH(n){return Array.isArray(n)}function gH(n){return"object"==typeof n&&null!==n}function nM(n){return"function"==typeof n}function rM(n,e){return n===e}function iM(n,e=rM,t=rM){let s,r=null,i=null;return{memoized:function u(){if(void 0!==s)return s.result;if(!r)return i=n.apply(null,arguments),r=arguments,i;if(!function wae(n,e,t){for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!0;return!1}(arguments,r,e))return i;const h=n.apply(null,arguments);return r=arguments,t(i,h)?i:(i=h,h)},reset:function o(){r=null,i=null},setResult:function a(h=void 0){s={result:h}},clearResult:function c(){s=void 0}}}function sM(...n){return function Cae(n,e={stateFn:bae}){return function(...t){let r=t;if(Array.isArray(r[0])){const[h,...g]=r;r=[...h,...g]}else 1===r.length&&function Tae(n){return!!n&&"object"==typeof n&&Object.values(n).every(e=>"function"==typeof e)}(r[0])&&(r=function Dae(n){const e=Object.values(n),t=Object.keys(n);return[...e,(...i)=>t.reduce((s,o,a)=>({...s,[o]:i[a]}),{})]}(r[0]));const i=r.slice(0,r.length-1),s=r[r.length-1],o=i.filter(h=>h.release&&"function"==typeof h.release),a=n(function(...h){return s.apply(null,h)}),c=iM(function(h,g){return e.stateFn.apply(null,[h,i,g,a])});return Object.assign(c.memoized,{release:function u(){c.reset(),a.reset(),o.forEach(h=>h.release())},projector:a.memoized,setResult:c.setResult,clearResult:c.clearResult})}}(iM)(...n)}function bae(n,e,t,r){if(void 0===t){const s=e.map(o=>o(n));return r.memoized.apply(null,s)}const i=e.map(s=>s(n,t));return r.memoized.apply(null,[...i,t])}function Rae(n){return n instanceof B?le(n):n}function Mae(n,e){return e.map((t,r)=>{if(n[r]instanceof B){const i=le(n[r]);return{key:t.key,reducerFactory:i.reducerFactory?i.reducerFactory:eM,metaReducers:i.metaReducers?i.metaReducers:[],initialState:i.initialState}}return t})}function Pae(n){return n.map(e=>e instanceof B?le(e):e)}function oM(n){return"function"==typeof n?n():n}function xae(n,e){return n.concat(e)}function Oae(){if(le(va,{optional:!0,skipSelf:!0}))throw new TypeError("The root Store has been provided more than once. Feature modules should provide feature states instead.");return"guarded"}function aM(n){Object.freeze(n);const e=nM(n);return Object.getOwnPropertyNames(n).forEach(t=>{if(!t.startsWith("\u0275")&&function Eae(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(n,t)&&(!e||"caller"!==t&&"callee"!==t&&"arguments"!==t)){const r=n[t];(gH(r)||nM(r))&&!Object.isFrozen(r)&&aM(r)}}),n}function cM(n,e=[]){return(hH(n)||fH(n))&&0===e.length?{path:["root"],value:n}:Object.keys(n).reduce((r,i)=>{if(r)return r;const s=n[i];return function vae(n){return nM(n)&&n.hasOwnProperty("\u0275cmp")}(s)?r:!(hH(s)||fH(s)||function _ae(n){return"number"==typeof n}(s)||function mae(n){return"boolean"==typeof n}(s)||function gae(n){return"string"==typeof n}(s)||pH(s))&&(function mH(n){if(!function yae(n){return gH(n)&&!pH(n)}(n))return!1;const e=Object.getPrototypeOf(n);return e===Object.prototype||null===e}(s)?cM(s,[...e,i]):{path:[...e,i],value:s})},!1)}function vH(n,e){if(!1===n)return;const t=n.path.join("."),r=new Error(`Detected unserializable ${e} at "${t}". ${tM}#strict${e}serializability`);throw r.value=n.value,r.unserializablePath=t,r}function Lae(n){return{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function Vae({strictActionSerializability:n,strictStateSerializability:e}){return t=>n||e?function kae(n,e){return function(t,r){e.action(r)&&vH(cM(r),"action");const i=n(t,r);return e.state()&&vH(cM(i),"state"),i}}(t,{action:r=>n&&!lM(r),state:()=>e}):t}function Uae({strictActionImmutability:n,strictStateImmutability:e}){return t=>n||e?function Nae(n,e){return function(t,r){const i=e.action(r)?aM(r):r,s=n(t,i);return e.state()?aM(s):s}}(t,{action:r=>n&&!lM(r),state:()=>e}):t}function lM(n){return n.type.startsWith("@ngrx")}function Bae({strictActionWithinNgZone:n}){return e=>n?function Fae(n,e){return function(t,r){if(e.action(r)&&!ft.isInAngularZone())throw new Error(`Action '${r.type}' running outside NgZone. ${tM}#strictactionwithinngzone`);return n(t,r)}}(e,{action:t=>n&&!lM(t)}):e}function jae(n){return[{provide:sH,useValue:n},{provide:iH,useFactory:$ae,deps:[sH]},{provide:Zm,deps:[iH],useFactory:Lae},{provide:yw,multi:!0,deps:[Zm],useFactory:Uae},{provide:yw,multi:!0,deps:[Zm],useFactory:Vae},{provide:yw,multi:!0,deps:[Zm],useFactory:Bae}]}function EH(){return[{provide:Qm,multi:!0,deps:[Zm],useFactory:zae}]}function $ae(n){return n}function zae(n){if(!n.strictActionTypeUniqueness)return;const e=Object.entries(Wm).filter(([,t])=>t>1).map(([t])=>t);if(e.length)throw new Error(`Action types are registered more than once, ${e.map(t=>`"${t}"`).join(", ")}. ${tM}#strictactiontypeuniqueness`)}function IH(n={},e={}){return[{provide:WR,useFactory:Oae},{provide:Kz,useValue:e.initialState},{provide:KR,useFactory:oM,deps:[Kz]},{provide:ZR,useValue:n},{provide:Jz,useExisting:n instanceof B?n:ZR},{provide:Yz,deps:[ZR,[new Rl(Jz)]],useFactory:Rae},{provide:nH,useValue:e.metaReducers?e.metaReducers:[]},{provide:rH,deps:[yw,nH],useFactory:xae},{provide:Qz,useValue:e.reducerFactory?e.reducerFactory:eM},{provide:Zz,deps:[Qz,rH],useFactory:cH},sae,lae,uae,hae,fae,jae(e.runtimeChecks),EH()]}function wH(n,e,t={}){return[{provide:eH,multi:!0,useValue:n instanceof Object?{}:t},{provide:Xz,multi:!0,useValue:{key:n instanceof Object?n.name:n,reducerFactory:t instanceof B||!t.reducerFactory?eM:t.reducerFactory,metaReducers:t instanceof B||!t.metaReducers?[]:t.metaReducers,initialState:t instanceof B||!t.initialState?void 0:t.initialState}},{provide:YR,deps:[eH,Xz],useFactory:Mae},{provide:QR,multi:!0,useValue:n instanceof Object?n.reducer:e},{provide:tH,multi:!0,useExisting:e instanceof B?e:QR},{provide:XR,multi:!0,deps:[QR,[new Rl(tH)]],useFactory:Pae},EH()]}let Ew=(()=>{class n{constructor(t,r,i,s,o,a){}static#e=this.\u0275fac=function(r){return new(r||n)(N(Du),N(vw),N(Xm),N(va),N(WR,8),N(Qm,8))};static#t=this.\u0275mod=Bt({type:n});static#n=this.\u0275inj=Ut({})}return n})(),uM=(()=>{class n{constructor(t,r,i,s,o){this.features=t,this.featureReducers=r,this.reducerManager=i;const a=t.map((c,u)=>{const g=r.shift()[u];return{...c,reducers:g,initialState:oM(c.initialState)}});i.addFeatures(a)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}static#e=this.\u0275fac=function(r){return new(r||n)(N(YR),N(XR),N(Ym),N(Ew),N(Qm,8))};static#t=this.\u0275mod=Bt({type:n});static#n=this.\u0275inj=Ut({})}return n})(),bH=(()=>{class n{static forRoot(t,r){return{ngModule:Ew,providers:[...IH(t,r)]}}static forFeature(t,r,i={}){return{ngModule:uM,providers:[...wH(t,r,i)]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Bt({type:n});static#n=this.\u0275inj=Ut({})}return n})();function dM(...n){return{reducer:n.pop(),types:n.map(r=>r.type)}}const Zae={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},Iw="__@ngrx/effects_create__";function TH(n){return Object.getPrototypeOf(n)}function hM(n){return"function"==typeof n}function fM(n){return n.filter(hM)}function ece(n,e,t){const r=TH(n),s=r&&"Object"!==r.constructor.name?r.constructor.name:null,o=function CH(n){return function Yae(n){return Object.getOwnPropertyNames(n).filter(r=>!(!n[r]||!n[r].hasOwnProperty(Iw))&&n[r][Iw].hasOwnProperty("dispatch")).map(r=>({propertyName:r,...n[r][Iw]}))}(n)}(n).map(({propertyName:a,dispatch:c,useEffectsErrorHandler:u})=>{const h="function"==typeof n[a]?n[a]():n[a],g=u?t(h,e):h;return!1===c?g.pipe(function Ooe(){return H((n,e)=>{n.subscribe(fe(e,Te))})}()):g.pipe(function koe(){return H((n,e)=>{n.subscribe(fe(e,t=>{e.next(ya.createNext(t))},()=>{e.next(ya.createComplete()),e.complete()},t=>{e.next(ya.createError(t)),e.complete()}))})}()).pipe(ve(y=>({effect:n[a],notification:y,propertyName:a,sourceName:s,sourceInstance:n})))});return K(...o)}function DH(n,e,t=10){return n.pipe(No(r=>(e&&e.handleError(r),t<=1?n:DH(n,e,t-1))))}let nce=(()=>{class n extends Ge{constructor(t){super(),t&&(this.source=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}static#e=this.\u0275fac=function(r){return new(r||n)(N(Xm))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const SH=new B("@ngrx/effects Internal Root Guard"),ww=new B("@ngrx/effects User Provided Effects"),pM=new B("@ngrx/effects Internal Root Effects"),AH=new B("@ngrx/effects Internal Root Effects Instances"),RH=new B("@ngrx/effects Internal Feature Effects"),MH=new B("@ngrx/effects Internal Feature Effects Instance Groups"),ice=new B("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>DH}),PH="@ngrx/effects/init";Tu(PH);function gce(n){return gM(n,"ngrxOnInitEffects")}function gM(n,e){return n&&e in n&&"function"==typeof n[e]}let mM=(()=>{class n extends V{constructor(t,r){super(),this.errorHandler=t,this.effectsErrorHandler=r}addEffects(t){this.next(t)}toActions(){return this.pipe(Nz(t=>function Xae(n){return!!n.constructor&&"Object"!==n.constructor.name&&"Function"!==n.constructor.name}(t)?TH(t):t),Lt(t=>t.pipe(Nz(mce))),Lt(t=>{const r=t.pipe(kz(s=>function _ce(n,e){return t=>{const r=ece(t,n,e);return function fce(n){return gM(n,"ngrxOnRunEffects")}(t)?t.ngrxOnRunEffects(r):r}}(this.errorHandler,this.effectsErrorHandler)(s)),ve(s=>(function oce(n,e){if("N"===n.notification.kind){const t=n.notification.value;!function ace(n){return"function"!=typeof n&&n&&n.type&&"string"==typeof n.type}(t)&&e.handleError(new Error(`Effect ${function cce({propertyName:n,sourceInstance:e,sourceName:t}){const r="function"==typeof e[n];return t?`"${t}.${String(n)}${r?"()":""}"`:`"${String(n)}()"`}(n)} dispatched an invalid action: ${function lce(n){try{return JSON.stringify(n)}catch{return n}}(t)}`))}}(s,this.errorHandler),s.notification)),Dr(s=>"N"===s.kind&&null!=s.value),function Foe(){return H((n,e)=>{n.subscribe(fe(e,t=>Oz(t,e)))})}());return K(r,t.pipe(Us(1),Dr(gce),ve(s=>s.ngrxOnInitEffects())))}))}static#e=this.\u0275fac=function(r){return new(r||n)(N(fo),N(ice))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mce(n){return function dce(n){return gM(n,"ngrxOnIdentifyEffects")}(n)?n.ngrxOnIdentifyEffects():""}let _M=(()=>{class n{get isStarted(){return!!this.effectsSubscription}constructor(t,r){this.effectSources=t,this.store=r,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}static#e=this.\u0275fac=function(r){return new(r||n)(N(mM),N(va))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xH=(()=>{class n{constructor(t,r,i,s,o,a,c){this.sources=t,r.start();for(const u of s)t.addEffects(u);i.dispatch({type:PH})}addEffects(t){this.sources.addEffects(t)}static#e=this.\u0275fac=function(r){return new(r||n)(N(mM),N(_M),N(va),N(AH),N(Ew,8),N(uM,8),N(SH,8))};static#t=this.\u0275mod=Bt({type:n});static#n=this.\u0275inj=Ut({})}return n})(),yce=(()=>{class n{constructor(t,r,i,s){const o=r.flat();for(const a of o)t.addEffects(a)}static#e=this.\u0275fac=function(r){return new(r||n)(N(xH),N(MH),N(Ew,8),N(uM,8))};static#t=this.\u0275mod=Bt({type:n});static#n=this.\u0275inj=Ut({})}return n})(),OH=(()=>{class n{static forFeature(...t){const r=t.flat(),i=fM(r);return{ngModule:yce,providers:[i,{provide:RH,multi:!0,useValue:r},{provide:ww,multi:!0,useValue:[]},{provide:MH,multi:!0,useFactory:NH,deps:[RH,ww]}]}}static forRoot(...t){const r=t.flat(),i=fM(r);return{ngModule:xH,providers:[i,{provide:pM,useValue:[r]},{provide:SH,useFactory:vce},{provide:ww,multi:!0,useValue:[]},{provide:AH,useFactory:NH,deps:[pM,ww]}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Bt({type:n});static#n=this.\u0275inj=Ut({})}return n})();function NH(n,e){const t=[];for(const r of n)t.push(...r);for(const r of e)t.push(...r);return t.map(r=>function Jae(n){return n instanceof B||hM(n)}(r)?le(r):r)}function vce(){const n=le(_M,{optional:!0,skipSelf:!0}),e=le(pM,{self:!0});if((1!==e.length||0!==e[0].length)&&n)throw new TypeError("EffectsModule.forRoot() called twice. Feature modules should use EffectsModule.forFeature() instead.");return"guarded"}const Ece_firebaseConfig={apiKey:"AIzaSyCCgDfnl5q-e9trTxdbgwMLTBMUDmIrUU4",authDomain:"flavorforge-618c2.firebaseapp.com",projectId:"flavorforge-618c2",storageBucket:"flavorforge-618c2.appspot.com",messagingSenderId:"275741258901",appId:"1:275741258901:web:2370d03db5aaf5e066979c"},bw=Ue(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function kH(n){return new Ge(e=>{Kt(n()).subscribe(e)})}function yM(){return H((n,e)=>{let t=null;n._refCount++;const r=fe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class FH extends Ge{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,ie(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new at;const t=this.getSubject();e.add(this.source.subscribe(fe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=at.EMPTY)}return e}refCount(){return yM()(this)}}function Cw(n){return H((e,t)=>{let r=!1;e.subscribe(fe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function LH(n=wce){return H((e,t)=>{let r=!1;e.subscribe(fe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function wce(){return new bw}function Fc(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Dr((i,s)=>n(i,s,r)):Dn,Us(1),t?Cw(e):LH(()=>new bw))}function vM(n){return n<=0?()=>Pn:H((e,t)=>{let r=[];e.subscribe(fe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}const it="primary",Jm=Symbol("RouteTitle");class Tce{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function uf(n){return new Tce(n)}function Dce(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ko(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!VH(n[i],e[i]))return!1;return!0}function VH(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function UH(n){return n.length>0?n[n.length-1]:null}function Lc(n){return function Ice(n){return!!n&&(n instanceof Ge||w(n.lift)&&w(n.subscribe))}(n)?n:Hp(n)?R(Promise.resolve(n)):W(n)}const Ace={exact:function $H(n,e,t){if(!Su(n.segments,e.segments)||!Tw(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!$H(n.children[r],e.children[r],t))return!1;return!0},subset:zH},BH={exact:function Rce(n,e){return ko(n,e)},subset:function Mce(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>VH(n[t],e[t]))},ignored:()=>!0};function jH(n,e,t){return Ace[t.paths](n.root,e.root,t.matrixParams)&&BH[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function zH(n,e,t){return HH(n,e,e.segments,t)}function HH(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Su(i,t)||e.hasChildren()||!Tw(i,t,r))}if(n.segments.length===t.length){if(!Su(n.segments,t)||!Tw(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!zH(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Su(n.segments,i)&&Tw(n.segments,i,r)&&n.children[it])&&HH(n.children[it],e,s,r)}}function Tw(n,e,t){return e.every((r,i)=>BH[t](n[i].parameters,r.parameters))}class df{constructor(e=new zt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=uf(this.queryParams)),this._queryParamMap}toString(){return Oce.serialize(this)}}class zt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Dw(this)}}class e_{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=uf(this.parameters)),this._parameterMap}toString(){return WH(this)}}function Su(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let t_=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:function(){return new EM},providedIn:"root"})}return n})();class EM{parse(e){const t=new Hce(e);return new df(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${n_(e.root,!0)}`,r=function Fce(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Sw(t)}=${Sw(i)}`).join("&"):`${Sw(t)}=${Sw(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function Nce(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const Oce=new EM;function Dw(n){return n.segments.map(e=>WH(e)).join("/")}function n_(n,e){if(!n.hasChildren())return Dw(n);if(e){const t=n.children[it]?n_(n.children[it],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==it&&r.push(`${i}:${n_(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function xce(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===it&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==it&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===it?[n_(n.children[it],!1)]:[`${i}:${n_(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[it]?`${Dw(n)}/${t[0]}`:`${Dw(n)}/(${t.join("//")})`}}function qH(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Sw(n){return qH(n).replace(/%3B/gi,";")}function IM(n){return qH(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Aw(n){return decodeURIComponent(n)}function GH(n){return Aw(n.replace(/\+/g,"%20"))}function WH(n){return`${IM(n.path)}${function kce(n){return Object.keys(n).map(e=>`;${IM(e)}=${IM(n[e])}`).join("")}(n.parameters)}`}const Lce=/^[^\/()?;#]+/;function wM(n){const e=n.match(Lce);return e?e[0]:""}const Vce=/^[^\/()?;=#]+/,Bce=/^[^=?&#]+/,$ce=/^[^&#]+/;class Hce{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new zt([],{}):new zt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[it]=new zt(e,t)),r}parseSegment(){const e=wM(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new k(4009,!1);return this.capture(e),new e_(Aw(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Uce(n){const e=n.match(Vce);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=wM(this.remaining);i&&(r=i,this.capture(r))}e[Aw(t)]=Aw(r)}parseQueryParam(e){const t=function jce(n){const e=n.match(Bce);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function zce(n){const e=n.match($ce);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=GH(t),s=GH(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=wM(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new k(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=it);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[it]:new zt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new k(4011,!1)}}function KH(n){return n.segments.length>0?new zt([],{[it]:n}):n}function ZH(n){const e={};for(const r of Object.keys(n.children)){const s=ZH(n.children[r]);if(r===it&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function qce(n){if(1===n.numberOfChildren&&n.children[it]){const e=n.children[it];return new zt(n.segments.concat(e.segments),e.children)}return n}(new zt(n.segments,e))}function Au(n){return n instanceof df}function QH(n){let e;const i=KH(function t(s){const o={};for(const c of s.children){const u=t(c);o[c.outlet]=u}const a=new zt(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function YH(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return bM(i,i,i,t,r);const s=function Wce(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new JH(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new JH(t,e,r)}(e);if(s.toRoot())return bM(i,i,new zt([],{}),t,r);const o=function Kce(n,e,t){if(n.isAbsolute)return new Mw(e,!0,0);if(!t)return new Mw(e,!1,NaN);if(null===t.parent)return new Mw(t,!0,0);const r=Rw(n.commands[0])?0:1;return function Zce(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new k(4005,!1);i=r.segments.length}return new Mw(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?i_(o.segmentGroup,o.index,s.commands):e3(o.segmentGroup,o.index,s.commands);return bM(i,o.segmentGroup,a,t,r)}function Rw(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function r_(n){return"object"==typeof n&&null!=n&&n.outlets}function bM(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([c,u])=>{s[c]=Array.isArray(u)?u.map(h=>`${h}`):`${u}`}),o=n===e?t:XH(n,e,t);const a=KH(ZH(o));return new df(a,s,i)}function XH(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:XH(s,e,t)}),new zt(n.segments,r)}class JH{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Rw(r[0]))throw new k(4003,!1);const i=r.find(r_);if(i&&i!==UH(r))throw new k(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Mw{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function e3(n,e,t){if(n||(n=new zt([],{})),0===n.segments.length&&n.hasChildren())return i_(n,e,t);const r=function Yce(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(r_(a))break;const c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&void 0===c)break;if(c&&u&&"object"==typeof u&&void 0===u.outlets){if(!n3(c,u,o))return s;r+=2}else{if(!n3(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new zt(n.segments.slice(0,r.pathIndex),{});return s.children[it]=new zt(n.segments.slice(r.pathIndex),n.children),i_(s,0,i)}return r.match&&0===i.length?new zt(n.segments,{}):r.match&&!n.hasChildren()?CM(n,e,t):r.match?i_(n,0,i):CM(n,e,t)}function i_(n,e,t){if(0===t.length)return new zt(n.segments,{});{const r=function Qce(n){return r_(n[0])?n[0].outlets:{[it]:n}}(t),i={};if(Object.keys(r).some(s=>s!==it)&&n.children[it]&&1===n.numberOfChildren&&0===n.children[it].segments.length){const s=i_(n.children[it],e,t);return new zt(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=e3(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new zt(n.segments,i)}}function CM(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(r_(s)){const c=Xce(s.outlets);return new zt(r,c)}if(0===i&&Rw(t[0])){r.push(new e_(n.segments[e].path,t3(t[0]))),i++;continue}const o=r_(s)?s.outlets[it]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Rw(a)?(r.push(new e_(o,t3(a))),i+=2):(r.push(new e_(o,{})),i++)}return new zt(r,{})}function Xce(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=CM(new zt([],{}),0,r))}),e}function t3(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function n3(n,e,t){return n==t.path&&ko(e,t.parameters)}const s_="imperative";class Fo{constructor(e,t){this.id=e,this.url=t}}class Pw extends Fo{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Vc extends Fo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class o_ extends Fo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class hf extends Fo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class xw extends Fo{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class r3 extends Fo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jce extends Fo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ele extends Fo{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class tle extends Fo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nle extends Fo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rle{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ile{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class sle{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ole{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ale{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cle{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class s3{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class TM{}class DM{constructor(e){this.url=e}}class lle{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new a_,this.attachRef=null}}let a_=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new lle,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class o3{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=SM(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=SM(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=AM(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return AM(e,this._root).map(t=>t.value)}}function SM(n,e){if(n===e.value)return e;for(const t of e.children){const r=SM(n,t);if(r)return r}return null}function AM(n,e){if(n===e.value)return[e];for(const t of e.children){const r=AM(n,t);if(r.length)return r.unshift(e),r}return[]}class Ea{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ff(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class a3 extends o3{constructor(e,t){super(e),this.snapshot=t,RM(this,e)}toString(){return this.snapshot.toString()}}function c3(n,e){const t=function ule(n,e){const o=new Ow([],{},{},"",{},it,e,null,{});return new u3("",new Ea(o,[]))}(0,e),r=new x([new e_("",{})]),i=new x({}),s=new x({}),o=new x({}),a=new x(""),c=new Ru(r,i,o,a,s,it,e,t.root);return c.snapshot=t.root,new a3(new Ea(c,[]),t)}class Ru{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ve(u=>u[Jm]))??W(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ve(e=>uf(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ve(e=>uf(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function l3(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function dle(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Ow{get title(){return this.data?.[Jm]}constructor(e,t,r,i,s,o,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=uf(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=uf(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class u3 extends o3{constructor(e,t){super(t),this.url=e,RM(this,t)}toString(){return d3(this._root)}}function RM(n,e){e.value._routerState=n,e.children.forEach(t=>RM(n,t))}function d3(n){const e=n.children.length>0?` { ${n.children.map(d3).join(", ")} } `:"";return`${n.value}${e}`}function MM(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ko(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ko(e.params,t.params)||n.paramsSubject.next(t.params),function Sce(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ko(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),ko(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function PM(n,e){const t=ko(n.params,e.params)&&function Pce(n,e){return Su(n,e)&&n.every((t,r)=>ko(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||PM(n.parent,e.parent))}let xM=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=it,this.activateEvents=new bt,this.deactivateEvents=new bt,this.attachEvents=new bt,this.detachEvents=new bt,this.parentContexts=le(a_),this.location=le(gs),this.changeDetector=le(zl),this.environmentInjector=le(Ui),this.inputBinder=le(Nw,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new k(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new k(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new k(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new k(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new hle(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=ke({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[jr]})}return n})();class hle{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ru?this.route:e===a_?this.childContexts:this.parent.get(e,t)}}const Nw=new B("");let h3=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=oE([r.queryParams,r.params,r.data]).pipe(_t(([s,o,a],c)=>(a={...s,...o,...a},0===c?W(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function dK(n){const e=gt(n);if(!e)return null;const t=new Vp(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();function c_(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function ple(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return c_(n,r,i);return c_(n,r)})}(n,e,t);return new Ea(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>c_(n,a)),o}}const r=function gle(n){return new Ru(new x(n.url),new x(n.params),new x(n.queryParams),new x(n.fragment),new x(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>c_(n,s));return new Ea(r,i)}}const OM="ngNavigationCancelingError";function f3(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Au(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=p3(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function p3(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[OM]=!0,r.cancellationCode=e,t&&(r.url=t),r}function g3(n){return n&&n[OM]}let m3=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=pr({type:n,selectors:[["ng-component"]],standalone:!0,features:[vk],decls:1,vars:0,template:function(r,i){1&r&&qr(0,"router-outlet")},dependencies:[xM],encapsulation:2})}return n})();function NM(n){const e=n.children&&n.children.map(NM),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==it&&(t.component=m3),t}function Hs(n){return n.outlet||it}function l_(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class ble{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),MM(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=ff(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ff(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ff(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=ff(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new cle(s.value.snapshot))}),e.children.length&&this.forwardEvent(new ole(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(MM(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),MM(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=l_(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class _3{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class kw{constructor(e,t){this.component=e,this.route=t}}function Cle(n,e,t){const r=n._root;return u_(r,e?e._root:null,t,[r.value])}function pf(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function eb(n){return null!==Wc(n)}(n)?e.get(n):n:r}function u_(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=ff(e);return n.children.forEach(o=>{(function Dle(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function Sle(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Su(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Su(n.url,e.url)||!ko(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!PM(n,e)||!ko(n.queryParams,e.queryParams);default:return!PM(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new _3(r)):(s.data=o.data,s._resolvedData=o._resolvedData),u_(n,e,s.component?a?a.children:null:t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new kw(a.outlet.component,o))}else o&&d_(e,a,i),i.canActivateChecks.push(new _3(r)),u_(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>d_(a,t.getContext(o),i)),i}function d_(n,e,t){const r=ff(n),i=n.value;Object.entries(r).forEach(([s,o])=>{d_(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new kw(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function h_(n){return"function"==typeof n}function y3(n){return n instanceof bw||"EmptyError"===n?.name}const Fw=Symbol("INITIAL_VALUE");function gf(){return _t(n=>oE(n.map(e=>e.pipe(Us(1),ic(Fw)))).pipe(ve(e=>{for(const t of e)if(!0!==t){if(t===Fw)return Fw;if(!1===t||t instanceof df)return t}return!0}),Dr(e=>e!==Fw),Us(1)))}function v3(n){return function Zi(...n){return Qi(n)}(Hn(e=>{if(Au(e))throw f3(0,e)}),ve(e=>!0===e))}class Lw{constructor(e){this.segmentGroup=e||null}}class E3{constructor(e){this.urlTree=e}}function mf(n){return cf(new Lw(n))}function I3(n){return cf(new E3(n))}class Wle{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new k(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return W(r);if(i.numberOfChildren>1||!i.children[it])return cf(new k(4e3,!1));i=i.children[it]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new df(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new zt(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new k(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const kM={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Kle(n,e,t,r,i){const s=FM(n,e,t);return s.matched?(r=function _le(n,e){return n.providers&&!n._injector&&(n._injector=wT(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function Hle(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?W(i.map(o=>{const a=pf(o,n);return Lc(function Ole(n){return n&&h_(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(gf(),v3()):W(!0)}(r,e,t).pipe(ve(o=>!0===o?s:{...kM}))):W(s)}function FM(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...kM}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Dce)(t,n,e);if(!i)return{...kM};const s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function w3(n,e,t,r){return t.length>0&&function Yle(n,e,t){return t.some(r=>Vw(n,e,r)&&Hs(r)!==it)}(n,t,r)?{segmentGroup:new zt(e,Qle(r,new zt(t,n.children))),slicedSegments:[]}:0===t.length&&function Xle(n,e,t){return t.some(r=>Vw(n,e,r))}(n,t,r)?{segmentGroup:new zt(n.segments,Zle(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new zt(n.segments,n.children),slicedSegments:t}}function Zle(n,e,t,r,i){const s={};for(const o of r)if(Vw(n,t,o)&&!i[Hs(o)]){const a=new zt([],{});s[Hs(o)]=a}return{...i,...s}}function Qle(n,e){const t={};t[it]=e;for(const r of n)if(""===r.path&&Hs(r)!==it){const i=new zt([],{});t[Hs(r)]=i}return t}function Vw(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class nue{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new Wle(this.urlSerializer,this.urlTree)}noMatchError(e){return new k(4002,!1)}recognize(){const e=w3(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,it).pipe(No(t=>{if(t instanceof E3)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof Lw?this.noMatchError(t):t}),ve(t=>{const r=new Ow([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},it,this.rootComponentType,null,{}),i=new Ea(r,t),s=new u3("",i),o=function Gce(n,e,t=null,r=null){return YH(QH(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,it).pipe(No(r=>{throw r instanceof Lw?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=l3(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return R(i).pipe(ah(s=>{const o=r.children[s],a=function Ile(n,e){const t=n.filter(r=>Hs(r)===e);return t.push(...n.filter(r=>Hs(r)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),qm((s,o)=>(s.push(...o),s)),Cw(null),function bce(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Dr((i,s)=>n(i,s,r)):Dn,vM(1),t?Cw(e):LH(()=>new bw))}(),Lt(s=>{if(null===s)return mf(r);const o=b3(s);return function rue(n){n.sort((e,t)=>e.value.outlet===it?-1:t.value.outlet===it?1:e.value.outlet.localeCompare(t.value.outlet))}(o),W(o)}))}processSegment(e,t,r,i,s,o){return R(t).pipe(ah(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(No(c=>{if(c instanceof Lw)return W(null);throw c}))),Fc(a=>!!a),No(a=>{if(y3(a))return function eue(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?W([]):mf(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return function Jle(n,e,t,r){return!!(Hs(n)===r||r!==it&&Vw(e,t,n))&&("**"===n.path||FM(e,n,t).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):mf(i):mf(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?I3(s):this.applyRedirects.lineralizeSegments(r,s).pipe(Lt(o=>{const a=new zt(o,{});return this.processSegment(e,t,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:c,remainingSegments:u,positionalParamSegments:h}=FM(t,i,s);if(!a)return mf(t);const g=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,h);return i.redirectTo.startsWith("/")?I3(g):this.applyRedirects.lineralizeSegments(i,g).pipe(Lt(m=>this.processSegment(e,r,t,m.concat(u),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a;if("**"===r.path){const c=i.length>0?UH(i).parameters:{};a=W({snapshot:new Ow(i,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,C3(r),Hs(r),r.component??r._loadedComponent??null,r,T3(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=Kle(t,r,i,e).pipe(ve(({matched:c,consumedSegments:u,remainingSegments:h,parameters:g})=>c?{snapshot:new Ow(u,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,C3(r),Hs(r),r.component??r._loadedComponent??null,r,T3(r)),consumedSegments:u,remainingSegments:h}:null));return a.pipe(_t(c=>null===c?mf(t):this.getChildConfig(e=r._injector??e,r,i).pipe(_t(({routes:u})=>{const h=r._loadedInjector??e,{snapshot:g,consumedSegments:m,remainingSegments:y}=c,{segmentGroup:E,slicedSegments:I}=w3(t,m,y,u);if(0===I.length&&E.hasChildren())return this.processChildren(h,u,E).pipe(ve(P=>null===P?null:[new Ea(g,P)]));if(0===u.length&&0===I.length)return W([new Ea(g,[])]);const b=Hs(r)===s;return this.processSegment(h,u,E,I,b?it:s,!0).pipe(ve(P=>[new Ea(g,P)]))}))))}getChildConfig(e,t,r){return t.children?W({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?W({routes:t._loadedRoutes,injector:t._loadedInjector}):function zle(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?W(!0):W(i.map(o=>{const a=pf(o,n);return Lc(function Rle(n){return n&&h_(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(gf(),v3())}(e,t,r).pipe(Lt(i=>i?this.configLoader.loadChildren(e,t).pipe(Hn(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function Gle(n){return cf(p3(!1,3))}())):W({routes:[],injector:e})}}function iue(n){const e=n.value.routeConfig;return e&&""===e.path}function b3(n){const e=[],t=new Set;for(const r of n){if(!iue(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=b3(r.children);e.push(new Ea(r.value,i))}return e.filter(r=>!t.has(r))}function C3(n){return n.data||{}}function T3(n){return n.resolve||{}}function D3(n){return"string"==typeof n.title||null===n.title}function LM(n){return _t(e=>{const t=n(e);return t?R(t).pipe(ve(()=>e)):W(e)})}const _f=new B("ROUTES");let VM=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=le(l1)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return W(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Lc(t.loadComponent()).pipe(ve(S3),Hn(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Ig(()=>{this.componentLoaders.delete(t)})),i=new FH(r,()=>new V).pipe(yM());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return W({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function due(n,e,t,r){return Lc(n.loadChildren()).pipe(ve(S3),Lt(i=>i instanceof _k||Array.isArray(i)?W(i):R(e.compileModuleAsync(i))),ve(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(_f,[],{optional:!0,self:!0}).flat()),{routes:o.map(NM),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(Ig(()=>{this.childrenLoaders.delete(r)})),o=new FH(s,()=>new V).pipe(yM());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function S3(n){return function hue(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Uw=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new V,this.transitionAbortSubject=new V,this.configLoader=le(VM),this.environmentInjector=le(Ui),this.urlSerializer=le(t_),this.rootContexts=le(a_),this.inputBindingEnabled=null!==le(Nw,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>W(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new ile(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new rle(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new x({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:s_,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Dr(s=>0!==s.id),ve(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),_t(s=>{this.currentTransition=s;let o=!1,a=!1;return W(s).pipe(Hn(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),_t(c=>{const u=c.currentBrowserUrl.toString(),h=!t.navigated||c.extractedUrl.toString()!==u||u!==c.currentUrlTree.toString();if(!h&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const m="";return this.events.next(new hf(c.id,this.urlSerializer.serialize(c.rawUrl),m,0)),c.resolve(null),Pn}if(t.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return W(c).pipe(_t(m=>{const y=this.transitions?.getValue();return this.events.next(new Pw(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),y!==this.transitions?.getValue()?Pn:Promise.resolve(m)}),function sue(n,e,t,r,i,s){return Lt(o=>function tue(n,e,t,r,i,s,o="emptyOnly"){return new nue(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(ve(({state:a,tree:c})=>({...o,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Hn(m=>{s.targetSnapshot=m.targetSnapshot,s.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:m.urlAfterRedirects};const y=new r3(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}));if(h&&t.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:m,extractedUrl:y,source:E,restoredState:I,extras:b}=c,P=new Pw(m,this.urlSerializer.serialize(y),E,I);this.events.next(P);const S=c3(0,this.rootComponentType).snapshot;return this.currentTransition=s={...c,targetSnapshot:S,urlAfterRedirects:y,extras:{...b,skipLocationChange:!1,replaceUrl:!1}},W(s)}{const m="";return this.events.next(new hf(c.id,this.urlSerializer.serialize(c.extractedUrl),m,1)),c.resolve(null),Pn}}),Hn(c=>{const u=new Jce(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),ve(c=>(this.currentTransition=s={...c,guards:Cle(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},s)),function kle(n,e){return Lt(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?W({...t,guardsResult:!0}):function Fle(n,e,t,r){return R(n).pipe(Lt(i=>function $le(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?W(s.map(a=>{const c=l_(e)??i,u=pf(a,c);return Lc(function xle(n){return n&&h_(n.canDeactivate)}(u)?u.canDeactivate(n,e,t,r):c.runInContext(()=>u(n,e,t,r))).pipe(Fc())})).pipe(gf()):W(!0)}(i.component,i.route,t,e,r)),Fc(i=>!0!==i,!0))}(o,r,i,n).pipe(Lt(a=>a&&function Ale(n){return"boolean"==typeof n}(a)?function Lle(n,e,t,r){return R(e).pipe(ah(i=>aE(function Ule(n,e){return null!==n&&e&&e(new sle(n)),W(!0)}(i.route.parent,r),function Vle(n,e){return null!==n&&e&&e(new ale(n)),W(!0)}(i.route,r),function jle(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function Tle(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>kH(()=>W(o.guards.map(c=>{const u=l_(o.node)??t,h=pf(c,u);return Lc(function Ple(n){return n&&h_(n.canActivateChild)}(h)?h.canActivateChild(r,n):u.runInContext(()=>h(r,n))).pipe(Fc())})).pipe(gf())));return W(s).pipe(gf())}(n,i.path,t),function Ble(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return W(!0);const i=r.map(s=>kH(()=>{const o=l_(e)??t,a=pf(s,o);return Lc(function Mle(n){return n&&h_(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(Fc())}));return W(i).pipe(gf())}(n,i.route,t))),Fc(i=>!0!==i,!0))}(r,s,n,e):W(a)),ve(a=>({...t,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),Hn(c=>{if(s.guardsResult=c.guardsResult,Au(c.guardsResult))throw f3(0,c.guardsResult);const u=new ele(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),Dr(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",3),!1)),LM(c=>{if(c.guards.canActivateChecks.length)return W(c).pipe(Hn(u=>{const h=new tle(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}),_t(u=>{let h=!1;return W(u).pipe(function oue(n,e){return Lt(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return W(t);let s=0;return R(i).pipe(ah(o=>function aue(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!D3(i)&&(s[Jm]=i.title),function cue(n,e,t,r){const i=function lue(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return W({});const s={};return R(i).pipe(Lt(o=>function uue(n,e,t,r){const i=l_(e)??r,s=pf(n,i);return Lc(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(Fc(),Hn(a=>{s[o]=a}))),vM(1),function Cce(n){return ve(()=>n)}(s),No(o=>y3(o)?Pn:cf(o)))}(s,n,e,r).pipe(ve(o=>(n._resolvedData=o,n.data=l3(n,t).resolve,i&&D3(i)&&(n.data[Jm]=i.title),null)))}(o.route,r,n,e)),Hn(()=>s++),vM(1),Lt(o=>s===i.length?W(t):Pn))})}(t.paramsInheritanceStrategy,this.environmentInjector),Hn({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(u,"",2)}}))}),Hn(u=>{const h=new nle(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}))}),LM(c=>{const u=h=>{const g=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(h.routeConfig).pipe(Hn(m=>{h.component=m}),ve(()=>{})));for(const m of h.children)g.push(...u(m));return g};return oE(u(c.targetSnapshot.root)).pipe(Cw(),Us(1))}),LM(()=>this.afterPreactivation()),ve(c=>{const u=function fle(n,e,t){const r=c_(n,e._root,t?t._root:void 0);return new a3(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s={...c,targetRouterState:u},s}),Hn(()=>{this.events.next(new TM)}),((n,e,t,r)=>ve(i=>(new ble(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Us(1),Hn({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Vc(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),t.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),sh(this.transitionAbortSubject.pipe(Hn(c=>{throw c}))),Ig(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),No(c=>{if(a=!0,g3(c))this.events.next(new o_(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),function mle(n){return g3(n)&&Au(n.url)}(c)?this.events.next(new DM(c.url)):s.resolve(!1);else{this.events.next(new xw(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(c))}catch(u){s.reject(u)}}return Pn}))}))}cancelNavigationTransition(t,r,i){const s=new o_(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function A3(n){return n!==s_}let R3=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===it);return r}getResolvedTitleForRoute(t){return t.data[Jm]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:function(){return le(fue)},providedIn:"root"})}return n})(),fue=(()=>{class n extends R3{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(N(MF))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pue=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:function(){return le(mue)},providedIn:"root"})}return n})();class gue{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let mue=(()=>{class n extends gue{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=$n(n)))(i||n)}}();static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Bw=new B("",{providedIn:"root",factory:()=>({})});let _ue=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:function(){return le(yue)},providedIn:"root"})}return n})(),yue=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var f_=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(f_||{});function M3(n,e){n.events.pipe(Dr(t=>t instanceof Vc||t instanceof o_||t instanceof xw||t instanceof hf),ve(t=>t instanceof Vc||t instanceof hf?f_.COMPLETE:t instanceof o_&&(0===t.code||1===t.code)?f_.REDIRECTING:f_.FAILED),Dr(t=>t!==f_.REDIRECTING),Us(1)).subscribe(()=>{e()})}function vue(n){throw n}function Eue(n,e,t){return e.parse("/")}const Iue={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},wue={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Jr=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=le(c1),this.isNgZoneEnabled=!1,this._events=new V,this.options=le(Bw,{optional:!0})||{},this.pendingTasks=le(Rv),this.errorHandler=this.options.errorHandler||vue,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Eue,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=le(_ue),this.routeReuseStrategy=le(pue),this.titleStrategy=le(R3),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=le(_f,{optional:!0})?.flat()??[],this.navigationTransitions=le(Uw),this.urlSerializer=le(t_),this.location=le(ag),this.componentInputBindingEnabled=!!le(Nw,{optional:!0}),this.eventsSubscription=new at,this.isNgZoneEnabled=le(ft)instanceof ft&&ft.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new df,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=c3(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(P3(r)&&this._events.next(r));if(r instanceof Pw)A3(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof hf)this.rawUrlTree=i.rawUrl;else if(r instanceof r3){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof TM)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof o_)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof DM){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||A3(i.source)};this.scheduleNavigation(s,s_,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof xw&&this.restoreHistory(i,!0),r instanceof Vc&&(this.navigated=!0),P3(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),s_,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const c={...i};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(s.state=c)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(NM),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:o;let g,h=null;switch(a){case"merge":h={...this.currentUrlTree.queryParams,...s};break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}null!==h&&(h=this.removeEmptyProps(h));try{g=QH(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),g=this.currentUrlTree.root}return YH(g,t,h,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Au(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,s_,null,r)}navigate(t,r={skipLocationChange:!1}){return function bue(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new k(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...Iue}:!1===r?{...wue}:r,Au(t))return jH(this.currentUrlTree,t,i);const s=this.parseUrl(t);return jH(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,u;o?(a=o.resolve,c=o.reject,u=o.promise):u=new Promise((g,m)=>{a=g,c=m});const h=this.pendingTasks.add();return M3(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(g=>Promise.reject(g))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function P3(n){return!(n instanceof TM||n instanceof DM)}let Uc=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new V,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c,this.isAnchorElement?this.subscription=t.events.subscribe(u=>{u instanceof Vc&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function Ix(n,e,t){return function Aq(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?Ex:Rp}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)($(Jr),$(Ru),function Id(n){return function Vb(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(P_(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(On(),n)}("tabindex"),$(Xo),$(gr),$(ql))};static#t=this.\u0275dir=ke({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&ze("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&Hr("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",th],skipLocationChange:["skipLocationChange","skipLocationChange",th],replaceUrl:["replaceUrl","replaceUrl",th],routerLink:"routerLink"},standalone:!0,features:[NO,jr]})}return n})(),x3=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,s,o){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.link=o,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new bt,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof Vc&&this.update()})}ngAfterContentInit(){W(this.links.changes,W(null)).pipe(Ni()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=R(t).pipe(Ni()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function Cue(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static#e=this.\u0275fac=function(r){return new(r||n)($(Jr),$(gr),$(Xo),$(zl),$(Uc,8))};static#t=this.\u0275dir=ke({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,s){if(1&r&&function ng(n,e,t,r){const i=mt();if(i.firstCreatePass){const s=On();zk(i,new Bk(e,t,r),s.index),function F6(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(i,n),2==(2&t)&&(i.staticContentQueries=!0)}$k(i,se(),t)}(s,Uc,5),2&r){let o;Bl(o=jl())&&(i.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[jr]})}return n})();class O3{}let Tue=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Dr(t=>t instanceof Vc),ah(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=wT(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return R(i).pipe(Ni())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):W(null);const s=i.pipe(Lt(o=>null===o?W(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?R([s,this.loader.loadComponent(r)]).pipe(Ni()):s})}static#e=this.\u0275fac=function(r){return new(r||n)(N(Jr),N(l1),N(Ui),N(O3),N(VM))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const UM=new B("");let N3=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Pw?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Vc?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof hf&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof s3&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new s3(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function aO(){throw new Error("invalid")}()};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();function Ia(n,e){return{\u0275kind:n,\u0275providers:e}}function F3(){const n=le(Ti);return e=>{const t=n.get($l);if(e!==t.components[0])return;const r=n.get(Jr),i=n.get(L3);1===n.get(BM)&&r.initialNavigation(),n.get(V3,null,ht.Optional)?.setUpPreloading(),n.get(UM,null,ht.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const L3=new B("",{factory:()=>new V}),BM=new B("",{providedIn:"root",factory:()=>1}),V3=new B("");function Rue(n){return Ia(0,[{provide:V3,useExisting:Tue},{provide:O3,useExisting:n}])}const U3=new B("ROUTER_FORROOT_GUARD"),Pue=[ag,{provide:t_,useClass:EM},Jr,a_,{provide:Ru,useFactory:function k3(n){return n.routerState.root},deps:[Jr]},VM,[]];function xue(){return new m1("Router",Jr)}let B3=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Pue,[],{provide:_f,multi:!0,useValue:t},{provide:U3,useFactory:Fue,deps:[[Jr,new xs,new Td]]},{provide:Bw,useValue:r||{}},r?.useHash?{provide:ql,useClass:mK}:{provide:ql,useClass:G1},{provide:UM,useFactory:()=>{const n=le(F7),e=le(ft),t=le(Bw),r=le(Uw),i=le(t_);return t.scrollOffset&&n.setOffset(t.scrollOffset),new N3(i,r,n,e,t)}},r?.preloadingStrategy?Rue(r.preloadingStrategy).\u0275providers:[],{provide:m1,multi:!0,useFactory:xue},r?.initialNavigation?Lue(r):[],r?.bindToComponentInputs?Ia(8,[h3,{provide:Nw,useExisting:h3}]).\u0275providers:[],[{provide:j3,useFactory:F3},{provide:qT,multi:!0,useExisting:j3}]]}}static forChild(t){return{ngModule:n,providers:[{provide:_f,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(N(U3,8))};static#t=this.\u0275mod=Bt({type:n});static#n=this.\u0275inj=Ut({})}return n})();function Fue(n){return"guarded"}function Lue(n){return["disabled"===n.initialNavigation?Ia(3,[{provide:LT,multi:!0,useFactory:()=>{const e=le(Jr);return()=>{e.setUpLocationChangeListener()}}},{provide:BM,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Ia(2,[{provide:BM,useValue:0},{provide:LT,multi:!0,deps:[Ti],useFactory:e=>{const t=e.get(pK,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Jr),s=e.get(L3);M3(i,()=>{r(!0)}),e.get(Uw).afterPreactivation=()=>(r(!0),s.closed?W(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const j3=new B("");let Uue=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=pr({type:n,selectors:[["app-about"]],decls:31,vars:0,consts:[[1,"background-container","about"],[1,"about"],["href","https://www.themealdb.com/","target","_blank","rel","noopener"]],template:function(r,i){1&r&&(re(0,"div",0)(1,"div",1)(2,"h1"),pe(3,"Welcome to FlavorForge!"),te(),re(4,"h2"),pe(5,"About us"),te(),re(6,"p"),pe(7," FlavorForge is more than just a personal project; it's a culinary journey crafted with passion and creativity. As an aspiring developer and food enthusiast, I've embarked on a mission to create a delightful recipe homepage that sparks inspiration in the kitchen. "),te(),re(8,"h2"),pe(9,"Our mission"),te(),re(10,"p"),pe(11," At FlavorForge, I believe that cooking is an art, a form of self-expression that brings people together. My mission is to provide a platform where food lovers can discover, share, and explore a world of delicious recipes. "),te(),re(12,"h2"),pe(13,"The project"),te(),re(14,"p"),pe(15," Born out of my shared love for both technology and gastronomy, FlavorForge is my brainchild. I aim to make cooking enjoyable and accessible to everyone, whether you're a seasoned chef or a kitchen novice. Expect a user-friendly interface, a diverse collection of recipes, and exciting features that will elevate your cooking experience "),te(),re(16,"h2"),pe(17,"Why FlavorForge?"),te(),re(18,"p"),pe(19," The name reflects my commitment to crafting and forging unique flavors. Just like a blacksmith molds metal into beautiful shapes, I mold ingredients into delectable dishes. FlavorForge is where my culinary creativity meets technological innovation. "),te(),re(20,"h2"),pe(21,"Credits"),te(),re(22,"p"),pe(23," Recipe Data provided by "),re(24,"a",2),pe(25,"The Meal DB"),te(),pe(26," Background Images by Valeria Aksakova on Freepik "),te(),re(27,"h2"),pe(28,"Join Me on This Culinary Adventure"),te(),re(29,"p"),pe(30," Explore FlavorForge, try out my recipes, and share your culinary creations with the community. Together, let's forge a flavorful world of food experiences. Thank you for being a part of FlavorForge! "),te()()())},styles:[".background-container.about[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.background-container.about[_ngcontent-%COMP%]   .about[_ngcontent-%COMP%]{gap:2rem;margin:20vh 0 10vh;display:flex;flex-direction:column;justify-content:center;align-items:center;color:#fff;width:80%;border-radius:8px;backdrop-filter:blur(5.2px);-webkit-backdrop-filter:blur(5.2px);font-size:1rem}.background-container.about[_ngcontent-%COMP%]   .about[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:2rem}@media (min-width: 992px){.background-container.about[_ngcontent-%COMP%]   .about[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3rem}}@media (min-width: 992px){.background-container.about[_ngcontent-%COMP%]   .about[_ngcontent-%COMP%]{width:60%;padding:5rem}}"]})}return n})();const Bue=ew("routeAnimation",[Iu("* <=> *",[lr({position:"relative"}),sf(":enter, :leave",[lr({position:"absolute",top:0,left:0,width:"100%"})]),sf(":enter",[lr({opacity:0})]),sf(":leave",X$(),{optional:!0}),function Lie(n,e=null){return{type:3,steps:n,options:e}}([sf(":leave",[xc("300ms ease-out",lr({opacity:0}))],{optional:!0}),sf(":enter",[xc("300ms ease-out",lr({opacity:1}))])]),sf(":enter",X$())])]),jue=ew("recipeAnimation",[Iu(":increment",[lr({transform:"translateX(100%)",opacity:0}),xc("300ms ease-out",lr({transform:"translateX(0%)",opacity:1}))]),Iu(":decrement",[lr({transform:"translateX(-100%)",opacity:0}),xc("300ms ease-out",lr({transform:"translateX(0%)",opacity:1}))])]),jM=ew("inOutAnimation",[Iu(":enter",[lr({opacity:0,maxHeight:"0"}),xc("0.5s ease-out",lr({opacity:1,maxHeight:"1000px"}))]),Iu(":leave",[lr({opacity:1,maxHeight:"1000px"}),xc("0.5s ease-in",lr({maxHeight:"0",opacity:0}))])]),$ue=ew("fade",[Iu(":enter",[lr({opacity:0}),xc("0.5s ease-out",lr({opacity:1}))]),Iu(":leave",[lr({opacity:1}),xc("0.5s ease-in",lr({opacity:0}))])]);Qe(377);class zue extends V{constructor(e=1/0,t=1/0,r=RD){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}}function $3(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,je({connector:()=>new zue(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function z3(n,e){return w(e)?_t(()=>n,e):_t(()=>n)}const H3=new B("angularfire2.auth.use-emulator"),q3=new B("angularfire2.auth.settings"),G3=new B("angularfire2.auth.tenant-id"),W3=new B("angularfire2.auth.langugage-code"),K3=new B("angularfire2.auth.use-device-language"),Z3=new B("angularfire.auth.persistence"),Q3=(n,e,t,r,i,s,o,a)=>WL(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,s&&c.useDeviceLanguage(),o)for(const[u,h]of Object.entries(o))c.settings[u]=h;return a&&c.setPersistence(a),c},[t,r,i,s,o,a]);let jw=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,c,u,h,g,m,y){const E=new V,I=W(void 0).pipe(hr(o.outsideAngular),_t(()=>s.runOutsideAngular(()=>Promise.resolve().then(Qe.bind(Qe,377)))),ve(()=>KD(t,s,r)),ve(b=>Q3(b,s,a,u,h,g,c,m)),$3({bufferSize:1,refCount:!1}));if(Zv(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=W(null);else{I.pipe(Fc()).subscribe();const b=I.pipe(_t(F=>F.getRedirectResult().then(Y=>Y,()=>null)),$i,$3({bufferSize:1,refCount:!1})),P=I.pipe(_t(F=>new Ge(Y=>({unsubscribe:s.runOutsideAngular(()=>F.onAuthStateChanged(he=>Y.next(he),he=>Y.error(he),()=>Y.complete()))})))),S=I.pipe(_t(F=>new Ge(Y=>({unsubscribe:s.runOutsideAngular(()=>F.onIdTokenChanged(he=>Y.next(he),he=>Y.error(he),()=>Y.complete()))}))));this.authState=b.pipe(z3(P),Fr(o.outsideAngular),hr(o.insideAngular)),this.user=b.pipe(z3(S),Fr(o.outsideAngular),hr(o.insideAngular)),this.idToken=this.user.pipe(_t(F=>F?R(F.getIdToken()):W(null))),this.idTokenResult=this.user.pipe(_t(F=>F?R(F.getIdTokenResult()):W(null))),this.credential=K(b,E,this.authState.pipe(Dr(F=>!F))).pipe(ve(F=>F?.user?F:null),Fr(o.outsideAngular),hr(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(WY.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const c=a?.[s];return"function"==typeof c?c.bind(a):c?.then?c.then(u=>t.run(()=>u)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>o[c],apply:(a,c,u)=>o.then(h=>{const g=h?.(...u);return r?.spy?.apply&&r.spy.apply(s,u,g),g})})})}))(this,I,s,{spy:{apply:(b,P,S)=>{(b.startsWith("signIn")||b.startsWith("createUser"))&&S.then(F=>E.next(F))}}})}static \u0275fac=function(r){return new(r||n)(N(mE),N(_E,8),N(Os),N(ft),N(qL),N(H3,8),N(q3,8),N(G3,8),N(W3,8),N(K3,8),N(Z3,8),N(zL,8))};static \u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function $M(){return H((n,e)=>{let t,r=!1;n.subscribe(fe(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}function zM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new oe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Y3(){if(typeof Uint8Array>"u")throw new oe("unimplemented","Uint8Arrays are not available in this environment.")}function X3(){if(!function qJ(){return typeof atob<"u"}())throw new oe("unimplemented","Blobs are unavailable in Firestore in this environment.")}class p_{constructor(e){this._delegate=e}static fromBase64String(e){return X3(),new p_(Po.fromBase64String(e))}static fromUint8Array(e){return Y3(),new p_(Po.fromUint8Array(e))}toBase64(){return X3(),this._delegate.toBase64()}toUint8Array(){return Y3(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function HM(n){return function Wue(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Kue{enableIndexedDbPersistence(e,t){return function Ene(n,e){gj(n=yt(n,on));const t=Mn(n);if(t._uninitializedComponentsProvider)throw new oe(z.FAILED_PRECONDITION,"SDK cache is already specified.");Ri("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Zh;return pj(t,i,new RA(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Ine(n){gj(n=yt(n,on));const e=Mn(n);if(e._uninitializedComponentsProvider)throw new oe(z.FAILED_PRECONDITION,"SDK cache is already specified.");Ri("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Zh;return pj(e,r,new ZB(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function wne(n){if(n._initialized&&!n._terminated)throw new oe(z.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ar;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Q.Z)(function*(){try{yield(t=(0,Q.Z)(function*(i){if(!$s.D())return Promise.resolve();const s=i+"main";yield $s.delete(s)}),function r(i){return t.apply(this,arguments)})(IS(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class J3{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof pc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ri("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function uj(n,e,t,r={}){var i;const s=(n=yt(n,Tm))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Ri("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if("string"==typeof r.mockUserToken)a=r.mockUserToken,c=yr.MOCK_USER;else{a=(0,Xt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new oe(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new yr(u)}n._authCredentials=new pJ(new g2(a,c))}}(this._delegate,e,t,r)}enableNetwork(){return function Cne(n){return function one(n){return n.asyncQueue.enqueue((0,Q.Z)(function*(){const e=yield XB(n),t=yield JB(n);return e.setNetworkEnabled(!0),function(i){const s=me(i);return s.C_.delete(0),wm(s)}(t)}))}(Mn(n=yt(n,on)))}(this._delegate)}disableNetwork(){return function Tne(n){return function ane(n){return n.asyncQueue.enqueue((0,Q.Z)(function*(){const e=yield XB(n),t=yield JB(n);return e.setNetworkEnabled(!1),(r=(0,Q.Z)(function*(s){const o=me(s);o.C_.add(0),yield $h(o),o.M_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(Mn(n=yt(n,on)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,sj("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function bne(n){return function(t){const r=new ar;return t.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return function zte(n,e){return fA.apply(this,arguments)}(yield FA(t),r)})),r.promise}(Mn(n=yt(n,on)))}(this._delegate)}onSnapshotsInSync(e){return function nre(n,e){return function une(n,e){const t=new CI(e);return n.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return i=yield Yh(n),s=t,me(i).q_.add(s),void s.next();var i,s})),()=>{t.Na(),n.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return i=yield Yh(n),s=t,void me(i).q_.delete(s);var i,s}))}}(Mn(n=yt(n,on)),BA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new oe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new yf(this,dj(this._delegate,e))}catch(t){throw yi(t,"collection()","Firestore.collection()")}}doc(e){try{return new Es(this,AI(this._delegate,e))}catch(t){throw yi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new vi(this,function mne(n,e){if(n=yt(n,Tm),VA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new oe(z.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Pr(n,null,(r=e,new la(Ct.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw yi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function fre(n,e,t){n=yt(n,on);const r=Object.assign(Object.assign({},dre),t);return function(s){if(s.maxAttempts<1)throw new oe(z.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const c=new ar;return s.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){const u=yield function ej(n){return DI(n).then(e=>e.datastore)}(s);new ine(s.asyncQueue,u,a,o,c).run()})),c.promise}(Mn(n),i=>e(new hre(n,i)),r)}(this._delegate,t=>e(new e4(this,t)))}batch(){return Mn(this._delegate),new t4(new Oj(this._delegate,e=>Jh(this._delegate,e)))}loadBundle(e){return function Dne(n,e){const t=Mn(n=yt(n,on)),r=new yne;return function dne(n,e,t,r){const i=function(o,a){let c;return c="string"==typeof o?bU().encode(o):o,h=function(h,g){if(h instanceof Uint8Array)return QB(h,g);if(h instanceof ArrayBuffer)return QB(new Uint8Array(h),g);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),new nne(h,a);var h}(t,Im(e));n.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){!function ene(n,e,t){const r=me(n);var i;(i=(0,Q.Z)(function*(o,a,c){try{const u=yield a.getMetadata();if(yield function(E,I){const b=me(E),P=Fn(I.createTime);return b.persistence.runTransaction("hasNewerBundle","readonly",S=>b.Kr.getBundleMetadata(S,I.id)).then(S=>!!S&&S.createTime.compareTo(P)>=0)}(o.localStore,u))return yield a.close(),c._completeWith({taskState:"Success",documentsLoaded:(E=u).totalDocuments,bytesLoaded:E.totalBytes,totalDocuments:E.totalDocuments,totalBytes:E.totalBytes}),Promise.resolve(new Set);c._updateProgress(BB(u));const h=new Ote(u,o.localStore,a.serializer);let g=yield a.Ma();for(;g;){const y=yield h.ea(g);y&&c._updateProgress(y),g=yield a.Ma()}const m=yield h.complete();return yield fa(o,m.ra,void 0),yield function(E,I){const b=me(E);return b.persistence.runTransaction("Save bundle","readwrite",P=>b.Kr.saveBundleMetadata(P,I))}(o.localStore,u),c._completeWith(m.progress),Promise.resolve(m.na)}catch(u){return Ri("SyncEngine",`Loading bundle failed with ${u}`),c._failWith(u),Promise.resolve(new Set)}var E}),function s(o,a,c){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield FA(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Sne(n,e){return function hne(n,e){return n.asyncQueue.enqueue((0,Q.Z)(function*(){return function(r,i){const s=me(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Kr.getNamedQuery(o,i))}(yield Qh(n),e)}))}(Mn(n=yt(n,on)),e).then(t=>t?new Pr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new vi(this,t):null)}}class $w extends WA{constructor(e){super(),this.firestore=e}convertBytes(e){return new p_(new Po(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Es.forKey(t,this.firestore,null)}}class e4{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new $w(e)}get(e){const t=Pu(e);return this._delegate.get(t).then(r=>new g_(this._firestore,new ga(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Pu(e);return r?(zM("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Pu(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Pu(e);return this._delegate.delete(t),this}}class t4{constructor(e){this._delegate=e}set(e,t,r){const i=Pu(e);return r?(zM("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Pu(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Pu(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Mu{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new xm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new m_(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Mu.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Mu(e,new $w(e),t),i.set(t,s)),s}}Mu.INSTANCES=new WeakMap;class Es{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new $w(e)}static forPath(e,t,r){if(e.length%2!=0)throw new oe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Es(t,new mn(t._delegate,r,new ye(e)))}static forKey(e,t,r){return new Es(t,new mn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new yf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new yf(this.firestore,dj(this._delegate,e))}catch(t){throw yi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Xt.m9)(e))instanceof mn&&hj(this._delegate,e)}set(e,t){t=zM("DocumentReference.set",t);try{return t?Mj(this._delegate,e,t):Mj(this._delegate,e)}catch(r){throw yi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Pj(this._delegate,e):Pj(this._delegate,e,t,...r)}catch(i){throw yi(i,"updateDoc()","DocumentReference.update()")}}delete(){return function ere(n){return Jh(yt(n.firestore,on),[new Oh(n._key,wn.none())])}(this._delegate)}onSnapshot(...e){const t=n4(e),r=r4(e,i=>new g_(this.firestore,new ga(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return xj(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function Zne(n){n=yt(n,mn);const e=yt(n.firestore,on),t=Mn(e),r=new Sc(e);return function cne(n,e){const t=new ar;return n.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return(r=(0,Q.Z)(function*(s,o,a){try{const c=yield function(h,g){const m=me(h);return m.persistence.runTransaction("read document","readonly",y=>m.localDocuments.getDocument(y,g))}(s,o);c.isFoundDocument()?a.resolve(c):c.isNoDocument()?a.resolve(null):a.reject(new oe(z.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const u=qh(c,`Failed to get document '${o} from cache`);a.reject(u)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Qh(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ga(e,r,n._key,i,new yu(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Qne(n){n=yt(n,mn);const e=yt(n.firestore,on);return tj(Mn(e),n._key,{source:"server"}).then(t=>KA(e,n,t))}(this._delegate):function Kne(n){n=yt(n,mn);const e=yt(n.firestore,on);return tj(Mn(e),n._key).then(t=>KA(e,n,t))}(this._delegate),t.then(r=>new g_(this.firestore,new ga(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Es(this.firestore,this._delegate.withConverter(e?Mu.getInstance(this.firestore,e):null))}}function yi(n,e,t){return n.message=n.message.replace(e,t),n}function n4(n){for(const e of n)if("object"==typeof e&&!HM(e))return e;return{}}function r4(n,e){var t,r;let i;return i=HM(n[0])?n[0]:HM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class g_{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Es(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Rj(this._delegate,e._delegate)}}class m_ extends g_{data(e){const t=this._delegate.data(e);return this._delegate._converter||function hJ(n,e){n||Ce()}(void 0!==t),t}}class vi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new $w(e)}where(e,t,r){try{return new vi(this.firestore,Tc(this._delegate,function Lne(n,e,t){const r=e,i=NI("where",n);return Pm._create(i,r,t)}(e,t,r)))}catch(i){throw yi(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new vi(this.firestore,Tc(this._delegate,function Vne(n,e="asc"){const t=e,r=NI("orderBy",n);return GA._create(r,t)}(e,t)))}catch(r){throw yi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new vi(this.firestore,Tc(this._delegate,function Une(n){return cj("limit",n),kI._create("limit",n,"F")}(e)))}catch(t){throw yi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new vi(this.firestore,Tc(this._delegate,function Bne(n){return cj("limitToLast",n),kI._create("limitToLast",n,"L")}(e)))}catch(t){throw yi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new vi(this.firestore,Tc(this._delegate,function jne(...n){return FI._create("startAt",n,!0)}(...e)))}catch(t){throw yi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new vi(this.firestore,Tc(this._delegate,function $ne(...n){return FI._create("startAfter",n,!1)}(...e)))}catch(t){throw yi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new vi(this.firestore,Tc(this._delegate,function zne(...n){return LI._create("endBefore",n,!1)}(...e)))}catch(t){throw yi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new vi(this.firestore,Tc(this._delegate,function Hne(...n){return LI._create("endAt",n,!0)}(...e)))}catch(t){throw yi(t,"endAt()","Query.endAt()")}}isEqual(e){return UA(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Xne(n){n=yt(n,Pr);const e=yt(n.firestore,on),t=Mn(e),r=new Sc(e);return function lne(n,e){const t=new ar;return n.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return(r=(0,Q.Z)(function*(s,o,a){try{const c=yield _I(s,o,!0),u=new zB(o,c.ls),h=u.ca(c.documents),g=u.applyChanges(h,!1);a.resolve(g.snapshot)}catch(c){const u=qh(c,`Failed to execute query '${o} against cache`);a.reject(u)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Qh(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Dc(e,r,n,i))}(this._delegate):"server"===e?.source?function Jne(n){n=yt(n,Pr);const e=yt(n.firestore,on),t=Mn(e),r=new Sc(e);return nj(t,n._query,{source:"server"}).then(i=>new Dc(e,r,n,i))}(this._delegate):function Yne(n){n=yt(n,Pr);const e=yt(n.firestore,on),t=Mn(e),r=new Sc(e);return bj(n._query),nj(t,n._query).then(i=>new Dc(e,r,n,i))}(this._delegate),t.then(r=>new qM(this.firestore,new Dc(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=n4(e),r=r4(e,i=>new qM(this.firestore,new Dc(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return xj(this._delegate,t,r)}withConverter(e){return new vi(this.firestore,this._delegate.withConverter(e?Mu.getInstance(this.firestore,e):null))}}class Que{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new m_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class qM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new vi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new m_(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Que(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new m_(this._firestore,r))})}isEqual(e){return Rj(this._delegate,e._delegate)}}class yf extends vi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Es(this.firestore,e):null}doc(e){try{return new Es(this.firestore,void 0===e?AI(this._delegate):AI(this._delegate,e))}catch(t){throw yi(t,"doc()","CollectionReference.doc()")}}add(e){return function tre(n,e){const t=yt(n.firestore,on),r=AI(n),i=VI(n.converter,e);return Jh(t,[PI(mu(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,wn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Es(this.firestore,t))}isEqual(e){return hj(this._delegate,e._delegate)}withConverter(e){return new yf(this.firestore,this._delegate.withConverter(e?Mu.getInstance(this.firestore,e):null))}}function Pu(n){return yt(n,mn)}class GM{constructor(...e){this._delegate=new pa(...e)}static documentId(){return new GM(pn.keyField().canonicalString())}isEqual(e){return(e=(0,Xt.m9)(e))instanceof pa&&this._delegate._internalPath.isEqual(e._internalPath)}}class xu{constructor(e){this._delegate=e}static serverTimestamp(){const e=function gre(){return new jA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new xu(e)}static delete(){const e=function pre(){return new Sm("deleteField")}();return e._methodName="FieldValue.delete",new xu(e)}static arrayUnion(...e){const t=function mre(...n){return new xne("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new xu(t)}static arrayRemove(...e){const t=function _re(...n){return new One("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new xu(t)}static increment(e){const t=function yre(n){return new Nne("increment",n)}(e);return t._methodName="FieldValue.increment",new xu(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Yue={Firestore:J3,GeoPoint:RI,Timestamp:In,Blob:p_,Transaction:e4,WriteBatch:t4,DocumentReference:Es,DocumentSnapshot:g_,Query:vi,QueryDocumentSnapshot:m_,QuerySnapshot:qM,CollectionReference:yf,FieldPath:GM,FieldValue:xu,setLogLevel:function Zue(n){!function dJ(n){lc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function i4(n,e){return function ede(n,e=rh){return new Ge(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function WM(n,e){return i4(n,e).pipe(ve(t=>({payload:t,type:"query"})))}!function Jue(n){(function Xue(n,e){n.INTERNAL.registerComponent(new ZL.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Yue)))})(n,(e,t)=>new J3(e,t,new Kue)),n.registerVersion("@firebase/firestore-compat","0.3.23")}(oc.Z);class s4{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=l4(r,t);return new c4(i,s,this.afs)}snapshotChanges(){return function tde(n,e){return i4(n,e).pipe(ic(void 0),$M(),ve(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe($i)}valueChanges(e={}){return this.snapshotChanges().pipe(ve(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return R(this.ref.get(e)).pipe($i)}}function zw(n,e){return WM(n,e).pipe(ic(void 0),$M(),ve(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{const u=s.find(g=>g.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(g=>g.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),o}))}function o4(n,e,t){return zw(n,t).pipe(qm((r,i)=>function nde(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function rde(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return KM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return KM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return KM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),Zt(),ve(r=>r.map(i=>({type:i.type,payload:i}))))}function KM(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function a4(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class c4{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=zw(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(ve(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ic(void 0),$M(),Dr(([r,i])=>i.length>0||!r),ve(([,r])=>r),$i)}auditTrail(e){return this.stateChanges(e).pipe(qm((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=a4(e);return o4(this.query,t,this.afs.schedulers.outsideAngular).pipe($i)}valueChanges(e={}){return WM(this.query,this.afs.schedulers.outsideAngular).pipe(ve(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),$i)}get(e){return R(this.query.get(e)).pipe($i)}add(e){return this.ref.add(e)}doc(e){return new s4(this.ref.doc(e),this.afs)}}class ide{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?zw(this.query,this.afs.schedulers.outsideAngular).pipe(ve(t=>t.filter(r=>e.indexOf(r.type)>-1)),Dr(t=>t.length>0),$i):zw(this.query,this.afs.schedulers.outsideAngular).pipe($i)}auditTrail(e){return this.stateChanges(e).pipe(qm((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=a4(e);return o4(this.query,t,this.afs.schedulers.outsideAngular).pipe($i)}valueChanges(e={}){return WM(this.query,this.afs.schedulers.outsideAngular).pipe(ve(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),$i)}get(e){return R(this.query.get(e)).pipe($i)}}const sde=new B("angularfire2.enableFirestorePersistence"),ode=new B("angularfire2.firestore.persistenceSettings"),ade=new B("angularfire2.firestore.settings"),cde=new B("angularfire2.firestore.use-emulator");function l4(n,e=(t=>t)){return{query:e(n),ref:n}}let Hw=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,c,u,h,g,m,y,E,I,b,P,S){this.schedulers=c;const F=KD(t,a,r),Y=h;g&&Q3(F,a,m,E,I,b,y,P),[this.firestore,this.persistenceEnabled$]=WL(`${F.name}.firestore`,"AngularFirestore",F.name,()=>{const he=a.runOutsideAngular(()=>F.firestore());if(s&&he.settings(s),Y&&he.useEmulator(...Y),i&&!Zv(o)){const Oe=()=>{try{return R(he.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(We){return typeof console<"u"&&console.warn(We),W(!1)}};return[he,a.runOutsideAngular(Oe)]}return[he,W(!1)]},[s,Y,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=l4(i,r),a=this.schedulers.ngZone.run(()=>s);return new c4(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new ide(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new s4(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(N(mE),N(_E,8),N(sde,8),N(ade,8),N(Os),N(ft),N(qL),N(ode,8),N(cde,8),N(jw,8),N(H3,8),N(q3,8),N(G3,8),N(W3,8),N(K3,8),N(Z3,8),N(zL,8))};static \u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),u4=(()=>{class n{constructor(t,r){this.http=t,this.firestore=r,this.apiBaseUrl="https://www.themealdb.com/api/json/v1/1"}searchRecipes(t){const r=`${this.apiBaseUrl}/search.php`,i=(new Io).set("s",t);return this.http.get(r,{params:i})}getRecipeById(t){const r=`${this.apiBaseUrl}/lookup.php`,i=(new Io).set("i",t);return this.http.get(r,{params:i}).pipe(Hn(s=>console.log("API Response:",s)))}getMealsByCategory(t){return this.http.get(`${this.apiBaseUrl}/filter.php?c=${t}`)}getRandomRecipe(){return this.http.get(`${this.apiBaseUrl}/random.php`)}addRecipeToCollection(t){return this.firestore.collection("recipes").doc(t.idMeal).set(t)}static#e=this.\u0275fac=function(r){return new(r||n)(N(RL),N(Hw))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),lde=(()=>{class n{constructor(){this.searchResultsSubject=new x([]),this.searchResults$=this.searchResultsSubject.asObservable()}setSearchResults(t){this.searchResultsSubject.next(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ude(n,e){1&n&&qr(0,"mat-progress-spinner",30)}function dde(n,e){if(1&n&&(re(0,"div",28),At(1,ude,1,0,"mat-progress-spinner",29),te()),2&n){const t=ot(),r=Ya(47);ge(1),we("ngIf",t.loading)("ngIfElse",r)}}function hde(n,e){if(1&n){const t=ps();re(0,"div",33)(1,"button",34),ze("click",function(){tr(t);const i=ot(2);return nr(i.onPageChange(i.currentPage-1))}),pe(2," Previous "),te(),re(3,"button",34),ze("click",function(){tr(t);const i=ot(2);return nr(i.onPageChange(i.currentPage+1))}),pe(4," Next "),te()()}if(2&n){const t=ot(2);ge(1),we("disabled",1===t.currentPage),ge(2),we("disabled",t.currentPage===t.getPageArray().length)}}const fde=function(n){return["/recipe",n]};function pde(n,e){if(1&n&&(re(0,"div",38)(1,"div",39)(2,"h3"),pe(3),te(),qr(4,"img",40),re(5,"p"),pe(6),te(),re(7,"p"),pe(8),te()()()),2&n){const t=e.$implicit;we("@inOutAnimation",void 0)("routerLink",ta(7,fde,t.idMeal)),ge(3),yo(t.strMeal),ge(1),qp("alt",t.strMeal),we("src",t.strMealThumb,Rp),ge(2),yo(t.strCategory),ge(2),yo(t.strArea)}}function gde(n,e){if(1&n){const t=ps();re(0,"div",33)(1,"button",34),ze("click",function(){tr(t);const i=ot(3);return nr(i.onPageChange(i.currentPage-1))}),pe(2," Previous "),te(),re(3,"button",34),ze("click",function(){tr(t);const i=ot(3);return nr(i.onPageChange(i.currentPage+1))}),pe(4," Next "),te()()}if(2&n){const t=ot(3);ge(1),we("disabled",1===t.currentPage),ge(2),we("disabled",t.currentPage===t.getPageArray().length)}}function mde(n,e){if(1&n&&(re(0,"div",35)(1,"div",36),At(2,pde,9,9,"div",37),te(),At(3,gde,5,2,"div",31),te()),2&n){const t=ot(2);ge(2),we("ngForOf",t.paginatedResults),ge(1),we("ngIf",t.searchResults.length>t.itemsPerPage)}}function _de(n,e){if(1&n&&(At(0,hde,5,2,"div",31),At(1,mde,4,2,"div",32)),2&n){const t=ot();we("ngIf",t.searchResults.length>t.itemsPerPage),ge(1),we("ngIf",t.searchResults.length>0)}}let yde=(()=>{class n{constructor(t,r){this.recipeService=t,this.searchService=r,this.searchQuery="",this.searchResults=[],this.currentPage=1,this.itemsPerPage=6,this.selectedCategory="",this.loading=!1}ngOnInit(){this.searchService.searchResults$.subscribe(t=>{this.searchResults=t})}getRandomRecipe(){this.loading=!0,this.clearSearchResults(),this.currentPage=1,this.recipeService.getRandomRecipe().subscribe(t=>{this.searchResults[0]=t.meals?.[0]},t=>{console.error("Error when fetching random recipe:",t)}),this.loading=!1}clearSearchResults(){this.searchResults=[],this.searchService.setSearchResults(this.searchResults),this.searchQuery=""}searchRecipes(){""!==this.searchQuery.trim()&&(this.loading=!0,this.recipeService.searchRecipes(this.searchQuery).pipe(GF(300),Zt()).subscribe(t=>{console.log(t),this.searchResults=t.meals,this.searchService.setSearchResults(this.searchResults)},t=>{console.error("Error when searching:",t)})),this.loading=!1}getMealsByCategory(t){const r=t.target.value;this.loading=!0,this.currentPage=1,this.recipeService.getMealsByCategory(r).subscribe(i=>{console.log(i),this.searchResults=i.meals,this.searchService.setSearchResults(this.searchResults)},i=>{console.error("Error when fetching meals by category:",i)},()=>{this.loading=!1})}get paginatedResults(){const t=(this.currentPage-1)*this.itemsPerPage;return this.searchResults.slice(t,t+this.itemsPerPage)}onPageChange(t){this.currentPage=t,window.scrollTo({top:0,behavior:"smooth"})}getPageArray(){const t=Math.ceil(this.searchResults.length/this.itemsPerPage);return Array.from({length:t},(r,i)=>i+1)}static#e=this.\u0275fac=function(r){return new(r||n)($(u4),$(lde))};static#t=this.\u0275cmp=pr({type:n,selectors:[["app-display-recipes"]],decls:48,vars:3,consts:[[1,"background-container","recipes"],[1,"recipe__container"],[1,"searchForm",3,"submit"],["type","text","placeholder","Search for recipes","name","search",1,"input__text",3,"ngModel","ngModelChange"],[1,"searchForm-btns"],["type","submit",1,"btn","btn__main"],["type","button",1,"btn","btn__main",3,"click"],["type","button",1,"btn","btn__secondary",3,"click"],[1,"recipe__container-category"],[1,"header__secondary"],["title","category-select",1,"btn","btn__select",3,"change"],["value","","disabled","","selected",""],["value","Beef"],["value","Chicken"],["value","Dessert"],["value","Lamb"],["value","Miscellaneous"],["value","Pasta"],["value","Pork"],["value","Seafood"],["value","Side"],["value","Starter"],["value","Vegan"],["value","Vegetarian"],["value","Breakfast"],["value","Goat"],["class","spinner",4,"ngIf","ngIfElse"],["content",""],[1,"spinner"],["mode","indeterminate","diameter","100","color","#2196F3",4,"ngIf","ngIfElse"],["mode","indeterminate","diameter","100","color","#2196F3"],["class","pagination-box",4,"ngIf"],["class","searchbox",4,"ngIf"],[1,"pagination-box"],["type","button",1,"btn","btn__secondary",3,"disabled","click"],[1,"searchbox"],[1,"search__container"],["class","search__container-divider",3,"routerLink",4,"ngFor","ngForOf"],[1,"search__container-divider",3,"routerLink"],[1,"search__container-results"],[3,"src","alt"]],template:function(r,i){if(1&r&&(re(0,"div",0)(1,"div",1)(2,"form",2),ze("submit",function(){return i.searchRecipes()}),re(3,"input",3),ze("ngModelChange",function(o){return i.searchQuery=o}),te(),re(4,"div",4)(5,"button",5),pe(6,"Search"),te(),re(7,"button",6),ze("click",function(){return i.getRandomRecipe()}),pe(8," Random "),te(),re(9,"button",7),ze("click",function(){return i.clearSearchResults()}),pe(10," Clear Search "),te()()(),re(11,"div",8)(12,"h2",9),pe(13,"Search by Category"),te(),re(14,"select",10),ze("change",function(o){return i.getMealsByCategory(o)}),re(15,"option",11),pe(16,"Select an option"),te(),re(17,"option",12),pe(18,"Beef"),te(),re(19,"option",13),pe(20,"Chicken"),te(),re(21,"option",14),pe(22,"Dessert"),te(),re(23,"option",15),pe(24,"Lamb"),te(),re(25,"option",16),pe(26,"Miscellaneous"),te(),re(27,"option",17),pe(28,"Pasta"),te(),re(29,"option",18),pe(30,"Pork"),te(),re(31,"option",19),pe(32,"Seafood"),te(),re(33,"option",20),pe(34,"Side"),te(),re(35,"option",21),pe(36,"Starter"),te(),re(37,"option",22),pe(38,"Vegan"),te(),re(39,"option",23),pe(40,"Vegetarian"),te(),re(41,"option",24),pe(42,"Breakfast"),te(),re(43,"option",25),pe(44,"Goat"),te()()(),At(45,dde,2,2,"div",26),At(46,_de,2,2,"ng-template",null,27,rg),te()()),2&r){const s=Ya(47);ge(3),we("ngModel",i.searchQuery),ge(42),we("ngIf",i.loading)("ngIfElse",s)}},dependencies:[ug,tc,Uc,XI,P$,O$,ef,$I,zI,Lm,rf,JI],styles:[".background-container.recipes[_ngcontent-%COMP%]{padding-top:20vh;display:flex;align-items:flex-start;justify-content:center;width:100%}@media (min-width: 992px){.background-container.recipes[_ngcontent-%COMP%]{justify-content:flex-start}}.background-container.recipes[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center}.background-container.recipes[_ngcontent-%COMP%]   .recipe__container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%;gap:2rem}@media (min-width: 992px){.background-container.recipes[_ngcontent-%COMP%]   .recipe__container[_ngcontent-%COMP%]{justify-content:center}}.background-container.recipes[_ngcontent-%COMP%]   .recipe__container[_ngcontent-%COMP%]   .pagination-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;flex-wrap:wrap;justify-content:center}@media (min-width: 992px){.background-container.recipes[_ngcontent-%COMP%]   .recipe__container[_ngcontent-%COMP%]   .pagination-box[_ngcontent-%COMP%]{flex-direction:row;width:50%}}.background-container.recipes[_ngcontent-%COMP%]   .recipe__container-category[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:.5rem;justify-content:center}.background-container.recipes[_ngcontent-%COMP%]   .recipe__container[_ngcontent-%COMP%]   .searchForm[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.background-container.recipes[_ngcontent-%COMP%]   .recipe__container[_ngcontent-%COMP%]   .searchForm[_ngcontent-%COMP%]   .searchForm-btns[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:.5rem;margin-top:1rem;width:100%}@media (min-width: 992px){.background-container.recipes[_ngcontent-%COMP%]   .recipe__container[_ngcontent-%COMP%]   .searchForm[_ngcontent-%COMP%]   .searchForm-btns[_ngcontent-%COMP%]{flex-direction:row}}.background-container.recipes[_ngcontent-%COMP%]   .recipe__container[_ngcontent-%COMP%]   .header__secondary[_ngcontent-%COMP%]{color:#fff;font-size:1.6rem;font-family:Playfair Display,serif;letter-spacing:1px;text-transform:uppercase;-webkit-user-select:none;user-select:none;width:100%}.background-container.recipes[_ngcontent-%COMP%]   .recipe__container[_ngcontent-%COMP%]   .search__container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}.background-container.recipes[_ngcontent-%COMP%]   .recipe__container[_ngcontent-%COMP%]   .search__container-divider[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.background-container.recipes[_ngcontent-%COMP%]   .recipe__container[_ngcontent-%COMP%]   .search__container[_ngcontent-%COMP%]   .search__container-results[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;align-items:center;justify-content:center;border-radius:8px;height:auto;width:80%}@media (min-width: 992px){.background-container.recipes[_ngcontent-%COMP%]   .recipe__container[_ngcontent-%COMP%]   .search__container[_ngcontent-%COMP%]   .search__container-results[_ngcontent-%COMP%]{justify-content:flex-start}}.background-container.recipes[_ngcontent-%COMP%]   .recipe__container[_ngcontent-%COMP%]   .search__container[_ngcontent-%COMP%]   .search__container-results[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60%;margin:10px;border-radius:15px;transition:.5s;--s: 10px;padding:var(--s);border:calc(2 * var(--s)) solid rgba(0,0,0,0);outline:1px solid #c2c2c2;outline-offset:calc(-1 * var(--s));background:conic-gradient(from 90deg at 1px 1px,rgba(0,0,0,0) 25%,#c2c2c2 0)}@media (min-width: 992px){.background-container.recipes[_ngcontent-%COMP%]   .recipe__container[_ngcontent-%COMP%]   .search__container[_ngcontent-%COMP%]   .search__container-results[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%}}.background-container.recipes[_ngcontent-%COMP%]   .recipe__container[_ngcontent-%COMP%]   .search__container[_ngcontent-%COMP%]   .search__container-results[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{outline-offset:0;cursor:pointer}.background-container.recipes[_ngcontent-%COMP%]   .recipe__container[_ngcontent-%COMP%]   .search__container[_ngcontent-%COMP%]   .search__container-results[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-family:Playfair Display,serif;letter-spacing:1px;text-transform:uppercase;-webkit-user-select:none;user-select:none;text-wrap:wrap;text-align:center;max-width:60%;font-size:1.2rem}@media (min-width: 992px){.background-container.recipes[_ngcontent-%COMP%]   .recipe__container[_ngcontent-%COMP%]   .search__container[_ngcontent-%COMP%]   .search__container-results[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{width:50%}}.searchbox[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;margin-bottom:5rem}"],data:{animation:[jM]}})}return n})();function vde(n,e){if(1&n){const t=ps();re(0,"div",5),ze("click",function(){const s=tr(t).$implicit;return nr(ot(2).selectRecipe(s))}),re(1,"h3",6),pe(2),te()()}if(2&n){const t=e.$implicit;ge(2),yo(t.strMeal)}}function Ede(n,e){if(1&n){const t=ps();re(0,"div",1)(1,"div",2)(2,"h2"),pe(3,"Select a Recipe"),te(),At(4,vde,3,1,"div",3),re(5,"button",4),ze("click",function(){return tr(t),nr(ot().hide())}),pe(6,"Close"),te()()()}if(2&n){const t=ot();we("@fade",void 0),ge(4),we("ngForOf",t.userFavorites)}}let d4=(()=>{class n{constructor(){this.recipeSelected=new bt,this.showModal=!1}selectRecipe(t){this.selectedRecipe=t,this.recipeSelected.emit(t),this.hide()}hide(){this.selectedRecipe=void 0,this.showModal=!1}show(){this.showModal=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=pr({type:n,selectors:[["app-recipe-modal"]],inputs:{userFavorites:"userFavorites"},outputs:{recipeSelected:"recipeSelected"},decls:1,vars:1,consts:[["class","modal",4,"ngIf"],[1,"modal"],[1,"modal-content"],["class","modal-recipe",3,"click",4,"ngFor","ngForOf"],["type","button",1,"btn",3,"click"],[1,"modal-recipe",3,"click"],[1,"modal-header"]],template:function(r,i){1&r&&At(0,Ede,7,2,"div",0),2&r&&we("ngIf",i.showModal)},dependencies:[ug,tc],styles:[".modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;background-color:#00000080;z-index:1000;backdrop-filter:blur(5.2px);-webkit-backdrop-filter:blur(5.2px);width:100%;height:100%;display:flex;flex-direction:row;align-items:center;justify-content:center}.modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem}.modal-recipe[_ngcontent-%COMP%]{color:#fff;display:flex;flex-direction:column;gap:1rem;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{cursor:pointer;transition:.3s}.modal-header[_ngcontent-%COMP%]:hover{color:#bebebe}"],data:{animation:[$ue]}})}return n})(),Bc=(()=>{class n{constructor(t,r){this.afAuth=t,this.firestore=r,this.isAuthenticatedSubject=new x(!1),this.isAuthenticated$=this.isAuthenticatedSubject.asObservable(),this.currentUserSubject=new x(null),this.currentUser$=this.currentUserSubject.asObservable(),this.afAuth.authState.pipe(Hn(i=>{this.isAuthenticatedSubject.next(!!i),this.currentUserSubject.next(i)})).subscribe(),this.afAuth.onAuthStateChanged(i=>{i||this.logout()})}register(t,r,i){var s=this;return(0,Q.Z)(function*(){try{const o=yield s.afAuth.createUserWithEmailAndPassword(t,r),a=o.user?.uid;return console.log("Updating profile with username:",i),yield o.user?.updateProfile({displayName:i}),console.log("Profile updated successfully"),yield s.firestore.collection("users").doc(a).set({uid:a,email:t,username:i,favoriteRecipes:[]}),o}catch(o){throw s.handleAuthError(o)}})()}login(t,r){var i=this;return(0,Q.Z)(function*(){try{const o=(yield i.afAuth.signInWithEmailAndPassword(t,r)).user;return console.log("Successfully signed in:",o?.displayName),o}catch(s){throw i.handleAuthError(s)}})()}logout(){return this.afAuth.signOut().then(()=>{this.isAuthenticatedSubject.next(!1)})}isLoggedIn(){return this.isAuthenticatedSubject.value}getCurrentUser(){return this.currentUserSubject.value}handleAuthError(t){switch(t.code){case"auth/user-not-found":return new Error("User not found. Please check your email and try again.");case"auth/wrong-password":return new Error("Invalid password. Please try again.");case"auth/email-already-in-use":return new Error("Email is already in use. Please use a different email.");default:return new Error("Authentication failed. Please try again later.")}}static#e=this.\u0275fac=function(r){return new(r||n)(N(jw),N(Hw))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ZM=(()=>{class n{constructor(t){this.firestore=t}addToFavorites(t,r){return this.firestore.collection("users").doc(t).update({favoriteRecipes:oc.Z.firestore.FieldValue.arrayUnion(r)})}getUser(t){return this.firestore.doc(`users/${t}`).valueChanges()}updateUser(t,r){return this.firestore.collection("users").doc(t).update(r)}isRecipeInFavorites(t,r){return this.firestore.doc(`users/${t}`).valueChanges().pipe(ve(i=>!(!i||!i.favoriteRecipes)&&i.favoriteRecipes.some(s=>s.idMeal===r.idMeal)))}static#e=this.\u0275fac=function(r){return new(r||n)(N(Hw))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ide(n,e){1&n&&(re(0,"div"),qr(1,"mat-progress-spinner",4),te())}function wde(n,e){if(1&n&&(re(0,"li"),pe(1),te()),2&n){const t=e.$implicit;ge(1),Di(" ",t," ")}}function bde(n,e){if(1&n&&(re(0,"div",14)(1,"ul"),At(2,wde,2,1,"li",15),te()()),2&n){const t=ot(2).$implicit,r=ot(2);we("@inOutAnimation",void 0),ge(2),we("ngForOf",r.getIngredients(r.plannedWeek[t]))}}function Cde(n,e){if(1&n){const t=ps();re(0,"div")(1,"p",11),ze("click",function(i){tr(t);const s=ot().$implicit;return ot(2).toggleRecipe(s),nr(i.stopPropagation())}),pe(2),te(),At(3,bde,3,2,"div",13),te()}if(2&n){const t=ot().$implicit,r=ot(2);ge(2),Di(" ",r.plannedWeek[t].strMeal," "),ge(1),we("ngIf",r.isExpanded(t))}}const Tde=function(n){return{"current-day":n}};function Dde(n,e){if(1&n){const t=ps();re(0,"div",9)(1,"div",10)(2,"h2",11),ze("click",function(){const s=tr(t).$implicit;return nr(ot(2).openRecipeSelectorModal(s))}),pe(3),te(),At(4,Cde,4,2,"div",12),te()()}if(2&n){const t=e.$implicit,r=ot(2);we("ngClass",ta(3,Tde,r.isCurrentDay(t))),ge(3),yo(t),ge(1),we("ngIf",r.plannedWeek[t])}}function Sde(n,e){if(1&n&&(re(0,"div",5),At(1,Dde,5,5,"div",6),te(),qr(2,"app-recipe-modal",7,8)),2&n){const t=ot();ge(1),we("ngForOf",t.daysOfWeek),ge(1),we("userFavorites",t.userFavorites)}}let Ade=(()=>{class n{constructor(t,r,i,s){this.authService=t,this.userService=r,this.cdr=i,this.location=s,this.userFavorites=[],this.daysOfWeek=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],this.plannedWeek={},this.shoppingList={},this.expandedRecipes={},this.currentDay="",this.loading=!0}ngOnInit(){this.loading=!0;const t=this.authService.getCurrentUser();t&&this.userService.getUser(t.uid).subscribe(r=>{this.userFavorites=r?.favoriteRecipes||[],this.plannedWeek=r?.plannedWeek||{}}),this.updateCurrentDay(),this.loading=!1}openRecipeSelectorModal(t){this.recipeModal.showModal||(this.recipeModal.show(),this.recipeModal.recipeSelected.pipe(Us(1)).subscribe(r=>{r&&(this.assignRecipe(t,r),this.updatePlannedWeekInDatabase()),this.recipeModal.hide()}))}assignRecipe(t,r){this.plannedWeek[t]={...r}}updatePlannedWeekInDatabase(){const t=this.authService.getCurrentUser();t&&this.userService.updateUser(t.uid,{plannedWeek:this.plannedWeek}).then(()=>{console.log("User updated:",this.plannedWeek)}).catch(r=>{console.error("Error updating user:",r)})}getIngredients(t){const r=[];for(let i=1;i<=20;i++){const s=`strIngredient${i}`,o=`strMeasure${i}`;t[s]&&t[o]&&r.push(`${t[s]}: ${t[o]}`)}return r}toggleRecipe(t){this.expandedRecipes[t]=!this.expandedRecipes[t]}isExpanded(t){return!!this.expandedRecipes[t]}isCurrentDay(t){return this.currentDay.toLowerCase()===t.toLowerCase()}updateCurrentDay(){const r=(new Date).toLocaleDateString("en-US",{weekday:"long"});this.currentDay=r.toLowerCase(),console.log(this.currentDay),this.cdr.detectChanges()}goBack(){this.location.back()}static#e=this.\u0275fac=function(r){return new(r||n)($(Bc),$(ZM),$(zl),$(ag))};static#t=this.\u0275cmp=pr({type:n,selectors:[["app-food-planner"]],viewQuery:function(r,i){if(1&r&&PT(d4,5),2&r){let s;Bl(s=jl())&&(i.recipeModal=s.first)}},decls:6,vars:2,consts:[[1,"background-container","food-planner"],["type","button",1,"btn",3,"click"],[4,"ngIf","ngIfElse"],["content",""],["mode","indeterminate","diameter","100","color","#2196F3"],[1,"planner-container"],["class","day-column",3,"ngClass",4,"ngFor","ngForOf"],[3,"userFavorites"],["recipeModal",""],[1,"day-column",3,"ngClass"],[1,"day-header"],[3,"click"],[4,"ngIf"],["class","expanded-recipe",4,"ngIf"],[1,"expanded-recipe"],[4,"ngFor","ngForOf"]],template:function(r,i){if(1&r&&(re(0,"div",0)(1,"button",1),ze("click",function(){return i.goBack()}),pe(2,"Back"),te(),At(3,Ide,2,0,"div",2),At(4,Sde,4,2,"ng-template",null,3,rg),te()),2&r){const s=Ya(5);ge(3),we("ngIf",i.loading)("ngIfElse",s)}},dependencies:[Kv,ug,tc,JI,d4],styles:[".background-container.food-planner[_ngcontent-%COMP%]{display:flex;flex-direction:column}.current-day[_ngcontent-%COMP%]{border:1px solid #fff;border-radius:8px}.food-planner[_ngcontent-%COMP%]{padding:3rem 0;display:flex;justify-content:center;align-items:center}.food-planner[_ngcontent-%COMP%]   .planner-container[_ngcontent-%COMP%]{margin-top:2rem;padding:2rem;height:auto;width:50%;display:flex;flex-direction:column;align-items:center;justify-content:center;backdrop-filter:blur(5.2px);-webkit-backdrop-filter:blur(5.2px);border-radius:8px;background-color:#0003}.food-planner[_ngcontent-%COMP%]   .planner-container[_ngcontent-%COMP%]   .day-column[_ngcontent-%COMP%]{color:#fff;font-size:1rem}.food-planner[_ngcontent-%COMP%]   .planner-container[_ngcontent-%COMP%]   .day-column[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%]{padding:1rem;display:flex;flex-direction:column;justify-content:center;align-items:center}.food-planner[_ngcontent-%COMP%]   .planner-container[_ngcontent-%COMP%]   .day-column[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{cursor:pointer;transition:.3s;text-decoration:underline}.food-planner[_ngcontent-%COMP%]   .planner-container[_ngcontent-%COMP%]   .day-column[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:hover{color:#bebebe}.food-planner[_ngcontent-%COMP%]   .planner-container[_ngcontent-%COMP%]   .day-column[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{transition:.3s;cursor:pointer;text-align:center}.food-planner[_ngcontent-%COMP%]   .planner-container[_ngcontent-%COMP%]   .day-column[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{color:#bebebe}"],data:{animation:[jM]}})}return n})(),h4=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=pr({type:n,selectors:[["app-landing"]],decls:5,vars:0,consts:[[1,"background-container","landing"],[1,"landing__logo"],["type","button","routerLink","/recipe",1,"btn"]],template:function(r,i){1&r&&(re(0,"div",0)(1,"h1",1),pe(2,"FlavorForge"),te(),re(3,"button",2),pe(4,"Explore"),te()())},dependencies:[Uc],styles:[".background-container.landing[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;gap:8rem}.background-container.landing[_ngcontent-%COMP%]   .landing__logo[_ngcontent-%COMP%]{color:#fff;font-size:3rem;font-family:Playfair Display,serif;letter-spacing:3px;text-transform:uppercase;-webkit-user-select:none;user-select:none}"]})}return n})();const QM=sM(function yH(n){return sM(e=>e[n],e=>e)}("user"),n=>n.user);function Mde(n,e){if(1&n&&(re(0,"div",11),pe(1),te()),2&n){const t=ot(2);ge(1),Di(" ",t.loginError," ")}}function Pde(n,e){if(1&n){const t=ps();re(0,"div",3)(1,"h2"),pe(2,"Login to FlavorForge"),te(),re(3,"form",4,5),ze("ngSubmit",function(){return tr(t),nr(ot().login())}),re(5,"input",6),ze("ngModelChange",function(i){return tr(t),nr(ot().email=i)}),te(),re(6,"input",7),ze("ngModelChange",function(i){return tr(t),nr(ot().password=i)}),te(),re(7,"button",8),pe(8),te(),At(9,Mde,2,1,"div",9),te(),re(10,"h3"),pe(11,"Not a member?"),te(),re(12,"a",10),pe(13,"Register"),te()()}if(2&n){const t=Ya(4),r=ot();ge(5),we("ngModel",r.email),ge(1),we("ngModel",r.password),ge(1),we("disabled",t.invalid||r.isLoggingIn),ge(1),Di(" ",r.isLoggingIn?"Logging in...":"Login"," "),ge(1),we("ngIf",r.loginError)}}function xde(n,e){if(1&n){const t=ps();re(0,"div")(1,"button",12),ze("click",function(){return tr(t),nr(ot().logOut())}),pe(2,"Logout"),te()()}}let Ode=(()=>{class n{constructor(t,r,i){this.store=t,this.authService=r,this.router=i,this.email="",this.password="",this.user=null,this.isLoggedIn=!1,this.isLoggingIn=!1,this.loginError=null,this.userSubscription=this.store.select(QM).subscribe(s=>{this.user=s}),this.authService.isAuthenticated$.subscribe(s=>{console.log("Is logged in:",s),this.isLoggedIn=s})}login(){var t=this;return(0,Q.Z)(function*(){if(t.isLoggingIn=!0,t.loginError=null,!t.isValidEmail(t.email))return t.loginError="Please enter a valid email address.",void(t.isLoggingIn=!1);try{yield t.authService.login(t.email,t.password)}catch{t.loginError="Invalid email or password. Please try again."}finally{t.isLoggingIn=!1,t.navigateToLandingPage()}})()}isValidEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}logOut(){var t=this;return(0,Q.Z)(function*(){yield t.authService.logout(),t.userSubscription.unsubscribe(),t.navigateToLandingPage()})()}navigateToLandingPage(){this.router.navigate(["/landing"])}static#e=this.\u0275fac=function(r){return new(r||n)($(va),$(Bc),$(Jr))};static#t=this.\u0275cmp=pr({type:n,selectors:[["app-login"]],decls:3,vars:2,consts:[[1,"background-container","login"],["class","login__container",4,"ngIf"],[4,"ngIf"],[1,"login__container"],[3,"ngSubmit"],["loginForm","ngForm"],["placeholder","E-mail","title","email","type","email","name","email","required","",1,"input__text",3,"ngModel","ngModelChange"],["placeholder","Password","title","password","type","password","name","password","required","",1,"input__text",3,"ngModel","ngModelChange"],["type","submit",1,"btn",3,"disabled"],["class","error-message",4,"ngIf"],["routerLink","/register"],[1,"error-message"],[3,"click"]],template:function(r,i){1&r&&(re(0,"div",0),At(1,Pde,14,5,"div",1),At(2,xde,3,0,"div",2),te()),2&r&&(ge(1),we("ngIf",!i.isLoggedIn),ge(1),we("ngIf",i.isLoggedIn))},dependencies:[tc,Uc,XI,ef,$I,zI,Vm,Lm,rf],styles:[".login__container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;color:#fff}.login__container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:1rem}@media (min-width: 992px){.login__container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:40%}}.login__container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:1rem}.login__container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem}.login__container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:#fff}"]})}return n})();function Nde(n,e){if(1&n){const t=ps();re(0,"div")(1,"button",4),ze("click",function(){return tr(t),nr(ot().logOut())}),pe(2," Logout "),te()()}}function kde(n,e){1&n&&(re(0,"div"),qr(1,"mat-progress-spinner",5),te())}const Fde=function(n){return["/recipe",n]};function Lde(n,e){if(1&n&&(re(0,"div")(1,"h2"),pe(2,"Your Favorite Recipes:"),te(),re(3,"div",10)(4,"div",11)(5,"h3"),pe(6),te(),qr(7,"img",12),re(8,"p"),pe(9),te(),re(10,"p"),pe(11),te()()()()),2&n){const t=ot(2);ge(4),we("@recipeAnimation",t.currentRecipeIndex)("routerLink",ta(7,Fde,t.userFavorites[t.currentRecipeIndex].idMeal)),ge(2),Di(" ",t.userFavorites[t.currentRecipeIndex].strMeal," "),ge(1),qp("alt",t.userFavorites[t.currentRecipeIndex].strMeal),we("src",t.userFavorites[t.currentRecipeIndex].strMealThumb,Rp),ge(2),yo(t.userFavorites[t.currentRecipeIndex].strCategory),ge(2),yo(t.userFavorites[t.currentRecipeIndex].strArea)}}function Vde(n,e){if(1&n){const t=ps();re(0,"div",6),At(1,Lde,12,9,"div",1),re(2,"div",7)(3,"button",8),ze("click",function(){return tr(t),nr(ot().prevRecipe())}),pe(4," Previous "),te(),re(5,"button",8),ze("click",function(){return tr(t),nr(ot().nextRecipe())}),pe(6," Next "),te()()(),re(7,"button",9),pe(8," Go to Food Planner "),te()}if(2&n){const t=ot();ge(1),we("ngIf",t.userFavorites.length>0),ge(2),we("disabled",t.isAtFirstRecipe()),ge(2),we("disabled",t.isAtLastRecipe())}}let Ude=(()=>{class n{constructor(t,r,i,s){this.authService=t,this.userService=r,this.store=i,this.router=s,this.userFavorites=[],this.loading=!1,this.isLoggedIn=!1,this.user=null,this.currentRecipeIndex=0,this.userSubscription=this.store.select(QM).subscribe(o=>{this.user=o}),this.authService.isAuthenticated$.subscribe(o=>{console.log("Is logged in:",o),this.isLoggedIn=o})}ngOnInit(){this.loading=!0;const t=this.authService.getCurrentUser();t&&this.userService.getUser(t.uid).subscribe(r=>{this.userFavorites=r?.favoriteRecipes||[]}),this.loading=!1}nextRecipe(){this.currentRecipeIndex<this.userFavorites.length-1&&this.currentRecipeIndex++}prevRecipe(){this.currentRecipeIndex>0&&this.currentRecipeIndex--}logOut(){var t=this;return(0,Q.Z)(function*(){yield t.authService.logout(),t.userSubscription.unsubscribe(),t.navigateToLoginPage()})()}navigateToLoginPage(){this.router.navigate(["/login"])}isAtFirstRecipe(){return 0===this.currentRecipeIndex}isAtLastRecipe(){return this.currentRecipeIndex===this.userFavorites.length-1}static#e=this.\u0275fac=function(r){return new(r||n)($(Bc),$(ZM),$(va),$(Jr))};static#t=this.\u0275cmp=pr({type:n,selectors:[["app-my-page"]],decls:5,vars:3,consts:[[1,"background-container","my-page"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["content",""],["type","button","id","logout",1,"btn",3,"click"],["mode","indeterminate","diameter","100","color","#2196F3"],[1,"favorites__container"],[1,"button-container"],["type","button",1,"btn",3,"disabled","click"],["type","button","routerLink","/food-planner",1,"btn"],[1,"favorites__container-overview"],[1,"recipe-item",3,"routerLink"],[3,"src","alt"]],template:function(r,i){if(1&r&&(re(0,"div",0),At(1,Nde,3,0,"div",1),At(2,kde,2,0,"div",2),At(3,Vde,9,3,"ng-template",null,3,rg),te()),2&r){const s=Ya(4);ge(1),we("ngIf",i.isLoggedIn),ge(1),we("ngIf",i.loading)("ngIfElse",s)}},dependencies:[tc,Uc,JI],styles:[".my-page[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;flex-direction:column;position:relative;gap:2rem}.my-page[_ngcontent-%COMP%]   #logout[_ngcontent-%COMP%]{position:absolute;left:0;top:0;margin:2rem}.my-page[_ngcontent-%COMP%]   .favorites__container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:40vh;width:80%;align-items:center;justify-content:center;overflow:hidden;padding:10px;-webkit-backdrop-filter:blur(5.2px);backdrop-filter:blur(5.2px);border-radius:8px;border:1px solid #cccccc}@media (min-width: 992px){.my-page[_ngcontent-%COMP%]   .favorites__container[_ngcontent-%COMP%]{width:50vw}}.my-page[_ngcontent-%COMP%]   .favorites__container[_ngcontent-%COMP%]   .favorites__container-overview[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;cursor:pointer;transition:.3s}.my-page[_ngcontent-%COMP%]   .favorites__container[_ngcontent-%COMP%]   .favorites__container-overview[_ngcontent-%COMP%]:hover{background-color:#2a2a2a80}.my-page[_ngcontent-%COMP%]   .favorites__container[_ngcontent-%COMP%]   .favorites__container-overview[_ngcontent-%COMP%]   .recipe-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.my-page[_ngcontent-%COMP%]   .favorites__container[_ngcontent-%COMP%]   .favorites__container-overview[_ngcontent-%COMP%]   .recipe-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ccc;font-size:1rem}.my-page[_ngcontent-%COMP%]   .favorites__container[_ngcontent-%COMP%]   .favorites__container-overview[_ngcontent-%COMP%]   .recipe-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;transition:.3s}.my-page[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{display:flex;justify-content:center}"],data:{animation:[jue]}})}return n})();function Bde(n,e){if(1&n&&(re(0,"li"),pe(1),te()),2&n){const t=e.$implicit;ge(1),Di(" ",t," ")}}function jde(n,e){if(1&n&&(re(0,"ul"),At(1,Bde,2,1,"li",7),te()),2&n){const t=ot();we("@inOutAnimation",void 0),ge(1),we("ngForOf",t.getIngredientsArray(t.meal))}}function $de(n,e){if(1&n&&(re(0,"p"),pe(1),te()),2&n){const t=ot();we("@inOutAnimation",void 0),ge(1),Di(" ",null==t.meal?null:t.meal.strInstructions," ")}}function zde(n,e){if(1&n){const t=ps();re(0,"button",8),ze("click",function(){return tr(t),nr(ot().addToFavorites())}),pe(1," Add to Favorites "),te()}2&n&&we("disabled",ot().isRecipeInFavorites)}let Hde=(()=>{class n{constructor(t,r,i,s,o,a){this.route=t,this.recipeService=r,this.sanitizer=i,this.authService=s,this.userService=o,this.location=a,this.showIngredients=!1,this.showInstructions=!1,this.isRecipeInFavorites=!1}getVideoEmbedUrl(t){if(t){const i=`https://www.youtube.com/embed/${t.split("v=")[1]}`;return this.sanitizer.bypassSecurityTrustResourceUrl(i)}}getIngredientsArray(t){const r=[];for(let i=1;i<=20;i++){const s=t?.[`strIngredient${i}`],o=t?.[`strMeasure${i}`];s&&o&&r.push(o+" "+s)}return r}ngOnInit(){this.route.params.subscribe(t=>{this.recipeService.getRecipeById(t.id).subscribe(i=>{this.meal=i.meals[0],this.checkRecipeInFavorites()},i=>{console.error("Error fetching recipe details:",i)})})}checkRecipeInFavorites(){if(this.meal&&this.isUserLoggedIn()){const t=this.authService.getCurrentUser();t&&this.userService.isRecipeInFavorites(t.uid,this.meal).subscribe(r=>{this.isRecipeInFavorites=r})}}goBack(){this.location.back()}addToFavorites(){if(this.meal&&this.isUserLoggedIn()&&!this.isRecipeInFavorites){const t=this.authService.getCurrentUser();t&&(this.userService.addToFavorites(t.uid,this.meal),this.isRecipeInFavorites=!0)}}isUserLoggedIn(){return this.authService.isLoggedIn()}toggleIngredients(){this.showIngredients=!this.showIngredients}toggleInstructions(){this.showInstructions=!this.showInstructions}static#e=this.\u0275fac=function(r){return new(r||n)($(Ru),$(u4),$(OF),$(Bc),$(ZM),$(ag))};static#t=this.\u0275cmp=pr({type:n,selectors:[["app-recipe-detail"]],decls:14,vars:6,consts:[[1,"background-container","details"],[1,"details__container"],["type","button",1,"btn",3,"click"],[3,"src","alt"],[1,"toggle",3,"click"],[4,"ngIf"],["class","btn","type","button",3,"disabled","click",4,"ngIf"],[4,"ngFor","ngForOf"],["type","button",1,"btn",3,"disabled","click"]],template:function(r,i){1&r&&(re(0,"div",0)(1,"div",1)(2,"button",2),ze("click",function(){return i.goBack()}),pe(3,"Back"),te(),re(4,"h2"),pe(5),te(),qr(6,"img",3),re(7,"h3",4),ze("click",function(){return i.toggleIngredients()}),pe(8,"Ingredients"),te(),At(9,jde,2,2,"ul",5),re(10,"h3",4),ze("click",function(){return i.toggleInstructions()}),pe(11,"Instructions"),te(),At(12,$de,2,2,"p",5),At(13,zde,2,1,"button",6),te()()),2&r&&(ge(5),yo(null==i.meal?null:i.meal.strMeal),ge(1),qp("alt",null==i.meal?null:i.meal.strMeal),we("src",null==i.meal?null:i.meal.strMealThumb,Rp),ge(3),we("ngIf",i.showIngredients),ge(3),we("ngIf",i.showInstructions),ge(1),we("ngIf",i.isUserLoggedIn()))},dependencies:[ug,tc],styles:[".details[_ngcontent-%COMP%]   .details__container[_ngcontent-%COMP%]{margin:auto;display:flex;flex-direction:column;justify-content:center;align-items:center;height:auto;padding-top:15vh;color:#fff;width:100%}.details[_ngcontent-%COMP%]   .details__container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin:2rem}.details[_ngcontent-%COMP%]   .details__container[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{cursor:pointer;font-weight:500;font-size:1.2rem;transition:.3s}.details[_ngcontent-%COMP%]   .details__container[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]:hover{color:#bebebe}.details[_ngcontent-%COMP%]   .details__container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:justify;line-height:1.6;border-radius:8px;font-size:1rem;width:80%;padding:2rem;-webkit-backdrop-filter:blur(5.2px);backdrop-filter:blur(5.2px);background-color:#00000080;margin-bottom:5rem}@media (min-width: 992px){.details[_ngcontent-%COMP%]   .details__container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:50%}}.details[_ngcontent-%COMP%]   .details__container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{border-radius:8px;list-style:none;font-size:1.2rem;padding:2rem;-webkit-backdrop-filter:blur(7.2px);backdrop-filter:blur(7.2px);background-color:#000c}.details[_ngcontent-%COMP%]   .details__container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:relative;width:50%;margin:10px;border-radius:15px;--s: 10px;padding:var(--s);border:calc(2 * var(--s)) solid rgba(0,0,0,0);outline:1px solid #c2c2c2;outline-offset:calc(-1 * var(--s));background:conic-gradient(from 90deg at 1px 1px,rgba(0,0,0,0) 25%,#c2c2c2 0)}@media (min-width: 992px){.details[_ngcontent-%COMP%]   .details__container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{flex-direction:row;width:20%}}"],data:{animation:[jM]}})}return n})();function qde(n,e){if(1&n&&(re(0,"div",14),pe(1),te()),2&n){const t=ot();ge(1),Di(" ",t.passwordMismatchError," ")}}function Gde(n,e){if(1&n&&(re(0,"div",14),pe(1),te()),2&n){const t=ot();ge(1),Di(" ",t.invalidEmailError," ")}}function Wde(n,e){1&n&&qr(0,"mat-spinner",15)}function Kde(n,e){1&n&&(re(0,"div",16),pe(1," Registration successful! Redirecting... "),te())}function Zde(n,e){if(1&n&&(re(0,"div",14),pe(1),te()),2&n){const t=ot();ge(1),Di(" Registration failed: ",t.registrationErrorMessage," ")}}const Qde=function(n){return{disabled:n}},Yde=[{path:"",component:h4,data:{animation:"landing"}},{path:"login",component:Ode,data:{animation:"login"}},{path:"register",component:(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.email="",this.password="",this.username="",this.confirmPassword="",this.gdprAgreed=!1,this.registrationSuccess=!1,this.registrationError=!1,this.registrationErrorMessage=null,this.isSubmitting=!1,this.passwordMismatchError=null,this.invalidEmailError=null}ngOnInit(){this.resetErrors()}resetErrors(){this.passwordMismatchError=null,this.invalidEmailError=null}register(){var t=this;return(0,Q.Z)(function*(){if(t.resetErrors(),!t.isSubmitting&&t.gdprAgreed){if(t.password!==t.confirmPassword)return void(t.passwordMismatchError="Passwords do not match");if(!t.isValidEmail(t.email))return void(t.invalidEmailError="Please enter a valid email address.");try{t.isSubmitting=!0;const r=yield t.authService.register(t.email,t.password,t.username);t.registrationSuccess=!0,console.log("Registration successful!",r)}catch(r){const i=r;t.registrationError=!0,t.registrationErrorMessage=i.message||"An error occurred during registration.",console.error("Registration failed:",i)}finally{t.isSubmitting=!1}t.registrationSuccess&&setTimeout(()=>{t.navigateToLandingPage()},1e3)}})()}isValidEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}navigateToLandingPage(){this.router.navigate(["/landing"])}areFieldsFilled(){return!!(this.email&&this.username&&this.password&&this.confirmPassword)}static#e=this.\u0275fac=function(r){return new(r||n)($(Bc),$(Jr))};static#t=this.\u0275cmp=pr({type:n,selectors:[["app-register"]],decls:22,vars:14,consts:[[1,"background-container","register"],[1,"register__container"],[3,"ngClass","ngSubmit"],["type","email","name","email","required","","title","email","placeholder","E-mail",1,"input__text",3,"ngModel","ngModelChange"],["type","text","name","username","required","","title","username","placeholder","Username",1,"input__text",3,"ngModel","ngModelChange"],["type","password","name","password","required","","title","password","placeholder","Password",1,"input__text",3,"ngModel","ngModelChange"],["title","confirm password","type","password","name","confirmPassword","required","","placeholder","Confirm password",1,"input__text",3,"ngModel","ngModelChange"],[1,"gdpr-agreement"],["type","checkbox","name","gdprAgreement","required","",3,"ngModel","ngModelChange"],["type","submit",1,"btn",3,"disabled"],[1,"gdpr-text"],["class","error-message",4,"ngIf"],["diameter","30",4,"ngIf"],["class","success-message",4,"ngIf"],[1,"error-message"],["diameter","30"],[1,"success-message"]],template:function(r,i){1&r&&(re(0,"div",0)(1,"div",1)(2,"h2"),pe(3,"Create an account"),te(),re(4,"form",2),ze("ngSubmit",function(){return i.register()}),re(5,"input",3),ze("ngModelChange",function(o){return i.email=o}),te(),re(6,"input",4),ze("ngModelChange",function(o){return i.username=o}),te(),re(7,"input",5),ze("ngModelChange",function(o){return i.password=o}),te(),re(8,"input",6),ze("ngModelChange",function(o){return i.confirmPassword=o}),te(),re(9,"div",7)(10,"label")(11,"input",8),ze("ngModelChange",function(o){return i.gdprAgreed=o}),te(),pe(12," I agree to the GDPR terms "),te()(),re(13,"button",9),pe(14," Register "),te(),re(15,"div",10),pe(16," By registering, you agree to our GDPR terms. These include the handling of your personal data in accordance with our privacy policy. "),te(),At(17,qde,2,1,"div",11),At(18,Gde,2,1,"div",11),At(19,Wde,1,0,"mat-spinner",12),At(20,Kde,2,0,"div",13),At(21,Zde,2,1,"div",11),te()()()),2&r&&(ge(4),we("ngClass",ta(12,Qde,i.isSubmitting)),ge(1),we("ngModel",i.email),ge(1),we("ngModel",i.username),ge(1),we("ngModel",i.password),ge(1),we("ngModel",i.confirmPassword),ge(3),we("ngModel",i.gdprAgreed),ge(2),we("disabled",i.isSubmitting||!i.gdprAgreed||!i.areFieldsFilled()),ge(4),we("ngIf",i.passwordMismatchError),ge(1),we("ngIf",i.invalidEmailError),ge(1),we("ngIf",i.isSubmitting),ge(1),we("ngIf",i.registrationSuccess),ge(1),we("ngIf",i.registrationError))},dependencies:[Kv,tc,XI,ef,XA,$I,zI,Vm,mR,Lm,rf,JI],styles:[".register__container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;color:#fff}.register__container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;justify-content:center;align-items:center;width:50%}@media (min-width: 768px){.register__container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:40%}}"]})}return n})(),data:{animation:"register"}},{path:"landing",component:h4,data:{animation:"landing"}},{path:"recipe/:id",component:Hde,data:{animation:"recipe-detail"}},{path:"recipe",component:yde,data:{animation:"display-recipes"}},{path:"food-planner",component:Ade,data:{animation:"food-planner"}},{path:"my-page",component:Ude,canActivate:[(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(){return!!this.authService.isLoggedIn()||(this.router.navigate(["/login"]),!1)}static#e=this.\u0275fac=function(r){return new(r||n)(N(Bc),N(Jr))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()],data:{animation:"my-page"}},{path:"about",component:Uue,data:{animation:"about"}}];let Xde=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Bt({type:n});static#n=this.\u0275inj=Ut({imports:[B3.forRoot(Yde),B3]})}return n})();const YM=function(n){return{transform:n}},Jde=function(n){return{show__menu:n}},qw=function(){return{exact:!0}};let ehe=(()=>{class n{constructor(t,r){this.authService=t,this.store=r,this.isLoggedIn=!1,this.activeMenu=!1,this.showMenu=!1,this.menuOnClick=()=>{this.activeMenu=!this.activeMenu,this.showMenu=this.activeMenu},this.authService.isAuthenticated$.subscribe(i=>{console.log("Is logged in:",i),this.isLoggedIn=i}),this.user$=this.store.select(QM)}onResize(t){this.showMenu=!1,this.activeMenu=!1}static#e=this.\u0275fac=function(r){return new(r||n)($(Bc),$(va))};static#t=this.\u0275cmp=pr({type:n,selectors:[["app-navigation"]],hostBindings:function(r,i){1&r&&ze("resize",function(o){return i.onResize(o)},0,Wx)},decls:19,vars:22,consts:[[1,"navigation"],[1,"burger__menu",3,"click"],[1,"bar1",3,"ngClass"],[1,"bar2",3,"ngClass"],[1,"bar3",3,"ngClass"],[3,"ngClass"],["routerLink","/","routerLinkActive","active-link",1,"nav__links",3,"routerLinkActiveOptions","click"],["routerLink","/recipe","routerLinkActive","active-link",1,"nav__links",3,"routerLinkActiveOptions","click"],["routerLinkActive","active-link",1,"nav__links",3,"routerLink","routerLinkActiveOptions","click"],["routerLink","/about","routerLinkActive","active-link",1,"nav__links",3,"routerLinkActiveOptions","click"]],template:function(r,i){1&r&&(re(0,"div",0)(1,"div",1),ze("click",function(){return i.menuOnClick()}),qr(2,"div",2)(3,"div",3)(4,"div",4),te(),re(5,"nav",5)(6,"ul")(7,"li")(8,"a",6),ze("click",function(){return i.menuOnClick()}),pe(9,"Home"),te()(),re(10,"li")(11,"a",7),ze("click",function(){return i.menuOnClick()}),pe(12,"Recipes"),te()(),re(13,"li")(14,"a",8),ze("click",function(){return i.menuOnClick()}),pe(15),te()(),re(16,"li")(17,"a",9),ze("click",function(){return i.menuOnClick()}),pe(18,"About"),te()()()()()),2&r&&(ge(2),we("ngClass",ta(10,YM,i.showMenu)),ge(1),we("ngClass",ta(12,YM,i.showMenu)),ge(1),we("ngClass",ta(14,YM,i.showMenu)),ge(1),we("ngClass",ta(16,Jde,i.showMenu)),ge(3),we("routerLinkActiveOptions",Jp(18,qw)),ge(3),we("routerLinkActiveOptions",Jp(19,qw)),ge(3),we("routerLink",i.isLoggedIn?"my-page":"login")("routerLinkActiveOptions",Jp(20,qw)),ge(1),Di(" ",i.isLoggedIn?"My page":"Login"," "),ge(2),we("routerLinkActiveOptions",Jp(21,qw)))},dependencies:[Kv,Uc,x3],styles:['.navigation[_ngcontent-%COMP%]{position:sticky;top:0;left:0;display:flex;flex-direction:column;align-items:flex-end;height:unset;width:100%;z-index:100;text-shadow:-2px -2px 0 #000,2px -2px 0 #000,-2px 2px 0 #000,2px 2px 0 #000}@media (min-width: 992px){.navigation[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between;height:5vh}}.navigation[_ngcontent-%COMP%]   .burger__menu[_ngcontent-%COMP%]{width:50px;padding:20px;transition:.3s ease;display:block;cursor:pointer;z-index:3;position:fixed;top:20px}@media (min-width: 992px){.navigation[_ngcontent-%COMP%]   .burger__menu[_ngcontent-%COMP%]{display:none}}.navigation[_ngcontent-%COMP%]   .burger__menu[_ngcontent-%COMP%]   .bar1[_ngcontent-%COMP%], .navigation[_ngcontent-%COMP%]   .burger__menu[_ngcontent-%COMP%]   .bar2[_ngcontent-%COMP%], .navigation[_ngcontent-%COMP%]   .burger__menu[_ngcontent-%COMP%]   .bar3[_ngcontent-%COMP%]{width:100%;height:5px;background-color:#fff;border-radius:2px;margin:5px 0;transition:.3s ease-in-out}.navigation[_ngcontent-%COMP%]   .burger__menu[_ngcontent-%COMP%]   .bar1.transform[_ngcontent-%COMP%], .navigation[_ngcontent-%COMP%]   .burger__menu[_ngcontent-%COMP%]   .bar2.transform[_ngcontent-%COMP%], .navigation[_ngcontent-%COMP%]   .burger__menu[_ngcontent-%COMP%]   .bar3.transform[_ngcontent-%COMP%]{background-color:#c1c1c1}.navigation[_ngcontent-%COMP%]   .burger__menu[_ngcontent-%COMP%]   .transform[_ngcontent-%COMP%]:first-child{transform:translateY(10px) rotate(-45deg)}.navigation[_ngcontent-%COMP%]   .burger__menu[_ngcontent-%COMP%]   .transform[_ngcontent-%COMP%]:nth-child(2){opacity:0}.navigation[_ngcontent-%COMP%]   .burger__menu[_ngcontent-%COMP%]   .transform[_ngcontent-%COMP%]:last-child{transform:translateY(-10px) rotate(45deg)}.navigation[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{width:100%;height:100%;opacity:0;transform:scale(0);transform-origin:top right;display:flex;justify-content:space-between;align-items:center;flex-direction:column;padding:15rem 0 2rem;position:fixed;top:0;right:0;transition:.3s ease;z-index:2;backdrop-filter:blur(5.2px);-webkit-backdrop-filter:blur(5.2px)}@media (min-width: 992px){.navigation[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{padding:unset;width:100%!important;position:static}}.navigation[_ngcontent-%COMP%]   nav.show__menu[_ngcontent-%COMP%]{opacity:1;transform:scale(1)}.navigation[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:4rem}@media (min-width: 992px){.navigation[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{gap:8rem}}.navigation[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style-type:none}.navigation[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{position:relative;overflow:hidden;text-decoration:none;color:#fff;font-size:1.4rem;letter-spacing:2px}@media (min-width: 992px){.navigation[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:1.2rem}}.navigation[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#bebebe;transition:.3s}.navigation[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:after{left:-2px;bottom:-2px;width:120%;height:120%;transform:scale(1.2);border-radius:8px}.navigation[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:after{content:"";background:rgba(255,255,255,.25);position:absolute;left:12px;bottom:-6px;width:calc(100% - 8px);height:calc(100% - 8px);z-index:-1;transition:.35s cubic-bezier(.25,.1,0,2.05)}.navigation[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active-link[_ngcontent-%COMP%]:after{left:-2px;bottom:-2px;width:120%;height:120%;transform:scale(1.2);border-radius:8px}@media (min-width: 992px){.navigation[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between}.navigation[_ngcontent-%COMP%]   .burger__menu[_ngcontent-%COMP%]{display:none}.navigation[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:auto;height:auto;opacity:1;transform:scale(1)}.navigation[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{flex-direction:row}.navigation[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-right:20px}}']})}return n})(),the=(()=>{class n{constructor(){this.title="flavorforge"}prepareRoute(t){return t&&t.activatedRouteData&&t.activatedRouteData.animation}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=pr({type:n,selectors:[["app-root"]],decls:4,vars:1,consts:[["outlet","outlet"]],template:function(r,i){if(1&r&&(qr(0,"app-navigation"),re(1,"div"),qr(2,"router-outlet",null,0),te()),2&r){const s=Ya(3);ge(1),we("@routeAnimation",i.prepareRoute(s))}},dependencies:[xM,ehe],styles:["\nhtml[_ngcontent-%COMP%]{line-height:1.15;-webkit-text-size-adjust:100%}body[_ngcontent-%COMP%]{margin:0}main[_ngcontent-%COMP%]{display:block}h1[_ngcontent-%COMP%]{font-size:2em;margin:.67em 0}hr[_ngcontent-%COMP%]{box-sizing:content-box;height:0;overflow:visible}pre[_ngcontent-%COMP%]{font-family:monospace,monospace;font-size:1em}a[_ngcontent-%COMP%]{background-color:transparent}abbr[title][_ngcontent-%COMP%]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b[_ngcontent-%COMP%], strong[_ngcontent-%COMP%]{font-weight:bolder}code[_ngcontent-%COMP%], kbd[_ngcontent-%COMP%], samp[_ngcontent-%COMP%]{font-family:monospace,monospace;font-size:1em}small[_ngcontent-%COMP%]{font-size:80%}sub[_ngcontent-%COMP%], sup[_ngcontent-%COMP%]{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub[_ngcontent-%COMP%]{bottom:-.25em}sup[_ngcontent-%COMP%]{top:-.5em}img[_ngcontent-%COMP%]{border-style:none}button[_ngcontent-%COMP%], input[_ngcontent-%COMP%], optgroup[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{overflow:visible}button[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{text-transform:none}button[_ngcontent-%COMP%], [type=button][_ngcontent-%COMP%], [type=reset][_ngcontent-%COMP%], [type=submit][_ngcontent-%COMP%]{-webkit-appearance:button}button[_ngcontent-%COMP%]::-moz-focus-inner, [type=button][_ngcontent-%COMP%]::-moz-focus-inner, [type=reset][_ngcontent-%COMP%]::-moz-focus-inner, [type=submit][_ngcontent-%COMP%]::-moz-focus-inner{border-style:none;padding:0}button[_ngcontent-%COMP%]:-moz-focusring, [type=button][_ngcontent-%COMP%]:-moz-focusring, [type=reset][_ngcontent-%COMP%]:-moz-focusring, [type=submit][_ngcontent-%COMP%]:-moz-focusring{outline:1px dotted ButtonText}fieldset[_ngcontent-%COMP%]{padding:.35em .75em .625em}legend[_ngcontent-%COMP%]{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress[_ngcontent-%COMP%]{vertical-align:baseline}textarea[_ngcontent-%COMP%]{overflow:auto}[type=checkbox][_ngcontent-%COMP%], [type=radio][_ngcontent-%COMP%]{box-sizing:border-box;padding:0}[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, [type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{height:auto}[type=search][_ngcontent-%COMP%]{-webkit-appearance:textfield;outline-offset:-2px}[type=search][_ngcontent-%COMP%]::-webkit-search-decoration{-webkit-appearance:none}[_ngcontent-%COMP%]::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details[_ngcontent-%COMP%]{display:block}summary[_ngcontent-%COMP%]{display:list-item}template[_ngcontent-%COMP%]{display:none}[hidden][_ngcontent-%COMP%]{display:none}body[_ngcontent-%COMP%]{background-color:#000}.background-container[_ngcontent-%COMP%]{background-size:cover;background-position:center;background-repeat:no-repeat;min-height:100vh;background-attachment:fixed}.background-container.landing[_ngcontent-%COMP%]{background-image:url(vintage-old-rustic-cutlery-dark-min.8b0908b6c6f305b6.webp)}.background-container.recipes[_ngcontent-%COMP%]{background-image:url(various-vegetables-black-table-with-space-message-min.5e52f89ce1e25b25.webp)}.background-container.login[_ngcontent-%COMP%]{background-image:url(flat-lay-arrangement-delicious-fresh-vegetables-with-copy-space-min.70a5c375af804e81.webp)}.background-container.details[_ngcontent-%COMP%]{background-image:url(varied-vegetables-placed-black-table-min.5b90dec5c4a6a7e4.webp)}.background-container.register[_ngcontent-%COMP%]{background-image:url(top-view-condiments-aromatic-herbs-min.8763d5e1a7553217.webp)}.background-container.my-page[_ngcontent-%COMP%]{background-image:url(food-with-ingredients-min.82d6f49bb73cf10c.webp)}.background-container.food-planner[_ngcontent-%COMP%]{background-image:url(crop-plate-with-salad-min.ab703a07cb050a9d.webp)}.background-container.about[_ngcontent-%COMP%]{background-image:url(various-vegetables-black-table-top.8c5a45bf99db3949.webp)}.input__text[_ngcontent-%COMP%]{padding:10px;border-radius:10px;width:100%}@media (min-width: 768px){.input__text[_ngcontent-%COMP%]{width:100%}}@media (min-width: 992px){.input__text[_ngcontent-%COMP%]{width:40%}}a[_ngcontent-%COMP%]:visited{color:currentColor}.btn[_ngcontent-%COMP%]{font-size:1.2rem;margin:1px;width:40vw;padding:10px;background-color:#000;border:1px solid #fff;border-radius:10px;color:#fff;transition:.3s;box-shadow:0 0 12px 3px #0d0d0d}@media (min-width: 768px){.btn[_ngcontent-%COMP%]{width:25vw}}@media (min-width: 992px){.btn[_ngcontent-%COMP%]{width:15vw}}.btn[_ngcontent-%COMP%]:disabled{border:#2f2f2f;color:#2f2f2f}.btn[_ngcontent-%COMP%]:disabled:hover{background-color:#000}.btn[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#2f2f2f}.btn.active-page.active-page[_ngcontent-%COMP%]{background-color:#2f2f2f}.btn__select[_ngcontent-%COMP%]{min-width:20vw!important}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{text-shadow:-2px -2px 0 #000,2px -2px 0 #000,-2px 2px 0 #000,2px 2px 0 #000;color:#fff;font-size:2rem;font-family:Playfair Display,serif;letter-spacing:3px;text-transform:uppercase;-webkit-user-select:none;user-select:none}"],data:{animation:[Bue]}})}return n})();const f4=Tu("[Auth] Login",{_as:"props",_p:void 0}),XM=Tu("[Auth] Login Success",{_as:"props",_p:void 0}),Gw=Tu("[Auth] Login Failure",{_as:"props",_p:void 0}),p4=Tu("[Auth] Logout");Tu("[Auth] Register",{_as:"props",_p:void 0});let rhe=(()=>{class n{constructor(t,r,i,s){this.actions$=t,this.authService=r,this.afAuth=i,this.firestore=s,this.login$=function Qae(n,e={}){const t=e.functional?n:n(),r={...Zae,...e};return Object.defineProperty(t,Iw,{value:r}),t}(()=>this.actions$.pipe(function rce(...n){return Dr(e=>n.some(t=>"string"==typeof t?t===e.type:t.type===e.type))}(f4),_t(o=>R(this.authService.login(o.email,o.password)).pipe(_t(a=>this.firestore.collection("users").doc(a.user?.uid||"").get()),ve(a=>{const c=a.data();return XM({user:{uid:a.id,email:c.email||"",username:c.username||"",favoriteRecipes:c.items||[]}})}),No(a=>W(Gw({error:a}))))),No(o=>W(Gw({error:o})))))}static#e=this.\u0275fac=function(r){return new(r||n)(N(nce),N(Bc),N(jw),N(Hw))};static#t=this.\u0275prov=de({token:n,factory:n.\u0275fac})}return n})();const ihe=function Kae(n,...e){const t=new Map;for(const r of e)for(const i of r.types){const s=t.get(i);t.set(i,s?(a,c)=>r.reducer(s(a,c),c):r.reducer)}return function(r=n,i){const s=t.get(i.type);return s?s(r,i):r}}({user:null},dM(XM,(n,{user:e})=>({...n,user:e})),dM(Gw,n=>({...n,user:null})),dM(p4,n=>({...n,user:null,error:null})));let she=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Bt({type:n,bootstrap:[the]});static#n=this.\u0275inj=Ut({imports:[RF,Xde,XY.initializeApp(Ece_firebaseConfig),Vj,vie,bH.forRoot({},{}),OH.forRoot([]),bH.forRoot({user:ihe}),OH.forRoot([rhe]),RY,xoe,sY,kie]})}return n})();SZ().bootstrapModule(she).catch(n=>console.error(n))},106:(ws,Gn,Qe)=>{Qe.d(Gn,{Z:()=>Kn});var w=Qe(58),Ue=Qe(537),G=Qe(534),Be=Qe(879);class at{constructor(qe,et){this._delegate=qe,this.firebase=et,(0,G._addComponent)(qe,new Ue.wA("app-compat",()=>this,"PUBLIC")),this.container=qe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(qe){this._delegate.automaticDataCollectionEnabled=qe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(qe=>{this._delegate.checkDestroyed(),qe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,G.deleteApp)(this._delegate)))}_getService(qe,et=G._DEFAULT_ENTRY_NAME){var Zn;this._delegate.checkDestroyed();const Qn=this._delegate.container.getProvider(qe);return!Qn.isInitialized()&&"EXPLICIT"===(null===(Zn=Qn.getComponent())||void 0===Zn?void 0:Zn.instantiationMode)&&Qn.initialize(),Qn.getImmediate({identifier:et})}_removeServiceInstance(qe,et=G._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(qe).clearInstance(et)}_addComponent(qe){(0,G._addComponent)(this._delegate,qe)}_addOrOverwriteComponent(qe){(0,G._addOrOverwriteComponent)(this._delegate,qe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const _n=new w.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ne=function ut(){const Dt=function Wn(Dt){const qe={},et={__esModule:!0,initializeApp:function Jt(tt,Ln={}){const ee=G.initializeApp(tt,Ln);if((0,w.r3)(qe,ee.name))return qe[ee.name];const cn=new Dt(ee,et);return qe[ee.name]=cn,cn},app:Qn,registerVersion:G.registerVersion,setLogLevel:G.setLogLevel,onLog:G.onLog,apps:null,SDK_VERSION:G.SDK_VERSION,INTERNAL:{registerComponent:function Ht(tt){const Ln=tt.name,ee=Ln.replace("-compat","");if(G._registerComponent(tt)&&"PUBLIC"===tt.type){const cn=(en=Qn())=>{if("function"!=typeof en[ee])throw _n.create("invalid-app-argument",{appName:Ln});return en[ee]()};void 0!==tt.serviceProps&&(0,w.ZB)(cn,tt.serviceProps),et[ee]=cn,Dt.prototype[ee]=function(...en){return this._getService.bind(this,Ln).apply(this,tt.multipleInstances?en:[])}}return"PUBLIC"===tt.type?et[ee]:null},removeApp:function Zn(tt){delete qe[tt]},useAsService:function Or(tt,Ln){return"serverAuth"===Ln?null:Ln},modularAPIs:G}};function Qn(tt){if(!(0,w.r3)(qe,tt=tt||G._DEFAULT_ENTRY_NAME))throw _n.create("no-app",{appName:tt});return qe[tt]}return et.default=et,Object.defineProperty(et,"apps",{get:function St(){return Object.keys(qe).map(tt=>qe[tt])}}),Qn.App=Dt,et}(at);return Dt.INTERNAL=Object.assign(Object.assign({},Dt.INTERNAL),{createFirebaseNamespace:ut,extendNamespace:function qe(et){(0,w.ZB)(Dt,et)},createSubscribe:w.ne,ErrorFactory:w.LL,deepExtend:w.ZB}),Dt}(),ue=new Be.Yd("@firebase/app-compat");if((0,w.jU)()&&void 0!==self.firebase){ue.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Dt=self.firebase.SDK_VERSION;Dt&&Dt.indexOf("LITE")>=0&&ue.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Kn=ne;!function wt(Dt){(0,G.registerVersion)("@firebase/app-compat","0.2.24",Dt)}()},534:(ws,Gn,Qe)=>{Qe.r(Gn),Qe.d(Gn,{FirebaseError:()=>Be.ZR,SDK_VERSION:()=>Gs,_DEFAULT_ENTRY_NAME:()=>Oi,_addComponent:()=>qs,_addOrOverwriteComponent:()=>dr,_apps:()=>kr,_clearComponents:()=>Pn,_components:()=>Cs,_getProvider:()=>Lt,_registerComponent:()=>Uo,_removeServiceInstance:()=>Ni,deleteApp:()=>hr,getApp:()=>Ws,getApps:()=>Ca,initializeApp:()=>Bo,onLog:()=>Ta,registerVersion:()=>Ks,setLogLevel:()=>ku});var w=Qe(861),Ue=Qe(537),G=Qe(879),Be=Qe(58);const at=(U,M)=>M.some(ae=>U instanceof ae);let an,_n;const ne=new WeakMap,ue=new WeakMap,Te=new WeakMap,ct=new WeakMap,wt=new WeakMap;let qe={get(U,M,ae){if(U instanceof IDBTransaction){if("done"===M)return ue.get(U);if("objectStoreNames"===M)return U.objectStoreNames||Te.get(U);if("store"===M)return ae.objectStoreNames[1]?void 0:ae.objectStore(ae.objectStoreNames[0])}return Jt(U[M])},set:(U,M,ae)=>(U[M]=ae,!0),has:(U,M)=>U instanceof IDBTransaction&&("done"===M||"store"===M)||M in U};function Qn(U){return"function"==typeof U?function Zn(U){return U!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ut(){return _n||(_n=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(U)?function(...M){return U.apply(St(this),M),Jt(ne.get(this))}:function(...M){return Jt(U.apply(St(this),M))}:function(M,...ae){const Se=U.call(St(this),M,...ae);return Te.set(Se,M.sort?M.sort():[M]),Jt(Se)}}(U):(U instanceof IDBTransaction&&function Dt(U){if(ue.has(U))return;const M=new Promise((ae,Se)=>{const Ke=()=>{U.removeEventListener("complete",dt),U.removeEventListener("error",k),U.removeEventListener("abort",k)},dt=()=>{ae(),Ke()},k=()=>{Se(U.error||new DOMException("AbortError","AbortError")),Ke()};U.addEventListener("complete",dt),U.addEventListener("error",k),U.addEventListener("abort",k)});ue.set(U,M)}(U),at(U,function Wn(){return an||(an=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(U,qe):U)}function Jt(U){if(U instanceof IDBRequest)return function Kn(U){const M=new Promise((ae,Se)=>{const Ke=()=>{U.removeEventListener("success",dt),U.removeEventListener("error",k)},dt=()=>{ae(Jt(U.result)),Ke()},k=()=>{Se(U.error),Ke()};U.addEventListener("success",dt),U.addEventListener("error",k)});return M.then(ae=>{ae instanceof IDBCursor&&ne.set(ae,U)}).catch(()=>{}),wt.set(M,U),M}(U);if(ct.has(U))return ct.get(U);const M=Qn(U);return M!==U&&(ct.set(U,M),wt.set(M,U)),M}const St=U=>wt.get(U),tt=["get","getKey","getAll","getAllKeys","count"],Ln=["put","add","delete","clear"],ee=new Map;function cn(U,M){if(!(U instanceof IDBDatabase)||M in U||"string"!=typeof M)return;if(ee.get(M))return ee.get(M);const ae=M.replace(/FromIndex$/,""),Se=M!==ae,Ke=Ln.includes(ae);if(!(ae in(Se?IDBIndex:IDBObjectStore).prototype)||!Ke&&!tt.includes(ae))return;const dt=function(){var k=(0,w.Z)(function*(yn,...Ae){const lt=this.transaction(yn,Ke?"readwrite":"readonly");let Sa=lt.store;return Se&&(Sa=Sa.index(Ae.shift())),(yield Promise.all([Sa[ae](...Ae),Ke&&lt.done]))[0]});return function(Ae){return k.apply(this,arguments)}}();return ee.set(M,dt),dt}!function et(U){qe=U(qe)}(U=>({...U,get:(M,ae,Se)=>cn(M,ae)||U.get(M,ae,Se),has:(M,ae)=>!!cn(M,ae)||U.has(M,ae)}));class en{constructor(M){this.container=M}getPlatformInfoString(){return this.container.getProviders().map(ae=>{if(function Dn(U){const M=U.getComponent();return"VERSION"===M?.type}(ae)){const Se=ae.getImmediate();return`${Se.library}/${Se.version}`}return null}).filter(ae=>ae).join(" ")}}const Zi="@firebase/app",Ge=new G.Yd("@firebase/app"),Oi="[DEFAULT]",Hc={[Zi]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},kr=new Map,Cs=new Map;function qs(U,M){try{U.container.addComponent(M)}catch(ae){Ge.debug(`Component ${M.name} failed to register with FirebaseApp ${U.name}`,ae)}}function dr(U,M){U.container.addOrOverwriteComponent(M)}function Uo(U){const M=U.name;if(Cs.has(M))return Ge.debug(`There were multiple attempts to register component ${M}.`),!1;Cs.set(M,U);for(const ae of kr.values())qs(ae,U);return!0}function Lt(U,M){const ae=U.container.getProvider("heartbeat").getImmediate({optional:!0});return ae&&ae.triggerHeartbeat(),U.container.getProvider(M)}function Ni(U,M,ae=Oi){Lt(U,M).clearInstance(ae)}function Pn(){Cs.clear()}const Ii=new Be.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ni{constructor(M,ae,Se){this._isDeleted=!1,this._options=Object.assign({},M),this._config=Object.assign({},ae),this._name=ae.name,this._automaticDataCollectionEnabled=ae.automaticDataCollectionEnabled,this._container=Se,this.container.addComponent(new Ue.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(M){this.checkDestroyed(),this._automaticDataCollectionEnabled=M}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(M){this._isDeleted=M}checkDestroyed(){if(this.isDeleted)throw Ii.create("app-deleted",{appName:this._name})}}const Gs="10.7.0";function Bo(U,M={}){let ae=U;"object"!=typeof M&&(M={name:M});const Se=Object.assign({name:Oi,automaticDataCollectionEnabled:!1},M),Ke=Se.name;if("string"!=typeof Ke||!Ke)throw Ii.create("bad-app-name",{appName:String(Ke)});if(ae||(ae=(0,Be.aH)()),!ae)throw Ii.create("no-options");const dt=kr.get(Ke);if(dt){if((0,Be.vZ)(ae,dt.options)&&(0,Be.vZ)(Se,dt.config))return dt;throw Ii.create("duplicate-app",{appName:Ke})}const k=new Ue.H0(Ke);for(const Ae of Cs.values())k.addComponent(Ae);const yn=new ni(ae,Se,k);return kr.set(Ke,yn),yn}function Ws(U=Oi){const M=kr.get(U);if(!M&&U===Oi&&(0,Be.aH)())return Bo();if(!M)throw Ii.create("no-app",{appName:U});return M}function Ca(){return Array.from(kr.values())}function hr(U){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,w.Z)(function*(U){const M=U.name;kr.has(M)&&(kr.delete(M),yield Promise.all(U.container.getProviders().map(ae=>ae.delete())),U.isDeleted=!0)})).apply(this,arguments)}function Ks(U,M,ae){var Se;let Ke=null!==(Se=Hc[U])&&void 0!==Se?Se:U;ae&&(Ke+=`-${ae}`);const dt=Ke.match(/\s|\//),k=M.match(/\s|\//);if(dt||k){const yn=[`Unable to register library "${Ke}" with version "${M}":`];return dt&&yn.push(`library name "${Ke}" contains illegal characters (whitespace or "/")`),dt&&k&&yn.push("and"),k&&yn.push(`version name "${M}" contains illegal characters (whitespace or "/")`),void Ge.warn(yn.join(" "))}Uo(new Ue.wA(`${Ke}-version`,()=>({library:Ke,version:M}),"VERSION"))}function Ta(U,M){if(null!==U&&"function"!=typeof U)throw Ii.create("invalid-log-argument");(0,G.Am)(U,M)}function ku(U){(0,G.Ub)(U)}const qc="firebase-heartbeat-database",Da=1,D="firebase-heartbeat-store";let T=null;function R(){return T||(T=function Ht(U,M,{blocked:ae,upgrade:Se,blocking:Ke,terminated:dt}={}){const k=indexedDB.open(U,M),yn=Jt(k);return Se&&k.addEventListener("upgradeneeded",Ae=>{Se(Jt(k.result),Ae.oldVersion,Ae.newVersion,Jt(k.transaction),Ae)}),ae&&k.addEventListener("blocked",Ae=>ae(Ae.oldVersion,Ae.newVersion,Ae)),yn.then(Ae=>{dt&&Ae.addEventListener("close",()=>dt()),Ke&&Ae.addEventListener("versionchange",lt=>Ke(lt.oldVersion,lt.newVersion,lt))}).catch(()=>{}),yn}(qc,Da,{upgrade:(U,M)=>{0===M&&U.createObjectStore(D)}}).catch(U=>{throw Ii.create("idb-open",{originalErrorMessage:U.message})})),T}function x(){return(x=(0,w.Z)(function*(U){try{return yield(yield R()).transaction(D).objectStore(D).get(nt(U))}catch(M){if(M instanceof Be.ZR)Ge.warn(M.message);else{const ae=Ii.create("idb-get",{originalErrorMessage:M?.message});Ge.warn(ae.message)}}})).apply(this,arguments)}function W(U,M){return je.apply(this,arguments)}function je(){return(je=(0,w.Z)(function*(U,M){try{const Se=(yield R()).transaction(D,"readwrite");yield Se.objectStore(D).put(M,nt(U)),yield Se.done}catch(ae){if(ae instanceof Be.ZR)Ge.warn(ae.message);else{const Se=Ii.create("idb-set",{originalErrorMessage:ae?.message});Ge.warn(Se.message)}}})).apply(this,arguments)}function nt(U){return`${U.name}!${U.options.appId}`}class Un{constructor(M){this.container=M,this._heartbeatsCache=null;const ae=this.container.getProvider("app").getImmediate();this._storage=new Vt(ae),this._heartbeatsCachePromise=this._storage.read().then(Se=>(this._heartbeatsCache=Se,Se))}triggerHeartbeat(){var M=this;return(0,w.Z)(function*(){var ae,Se;const dt=M.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),k=De();if((null!=(null===(ae=M._heartbeatsCache)||void 0===ae?void 0:ae.heartbeats)||(M._heartbeatsCache=yield M._heartbeatsCachePromise,null!=(null===(Se=M._heartbeatsCache)||void 0===Se?void 0:Se.heartbeats)))&&M._heartbeatsCache.lastSentHeartbeatDate!==k&&!M._heartbeatsCache.heartbeats.some(yn=>yn.date===k))return M._heartbeatsCache.heartbeats.push({date:k,agent:dt}),M._heartbeatsCache.heartbeats=M._heartbeatsCache.heartbeats.filter(yn=>{const Ae=new Date(yn.date).valueOf();return Date.now()-Ae<=2592e6}),M._storage.overwrite(M._heartbeatsCache)})()}getHeartbeatsHeader(){var M=this;return(0,w.Z)(function*(){var ae;if(null===M._heartbeatsCache&&(yield M._heartbeatsCachePromise),null==(null===(ae=M._heartbeatsCache)||void 0===ae?void 0:ae.heartbeats)||0===M._heartbeatsCache.heartbeats.length)return"";const Se=De(),{heartbeatsToSend:Ke,unsentEntries:dt}=function Yn(U,M=1024){const ae=[];let Se=U.slice();for(const Ke of U){const dt=ae.find(k=>k.agent===Ke.agent);if(dt){if(dt.dates.push(Ke.date),Xi(ae)>M){dt.dates.pop();break}}else if(ae.push({agent:Ke.agent,dates:[Ke.date]}),Xi(ae)>M){ae.pop();break}Se=Se.slice(1)}return{heartbeatsToSend:ae,unsentEntries:Se}}(M._heartbeatsCache.heartbeats),k=(0,Be.L)(JSON.stringify({version:2,heartbeats:Ke}));return M._heartbeatsCache.lastSentHeartbeatDate=Se,dt.length>0?(M._heartbeatsCache.heartbeats=dt,yield M._storage.overwrite(M._heartbeatsCache)):(M._heartbeatsCache.heartbeats=[],M._storage.overwrite(M._heartbeatsCache)),k})()}}function De(){return(new Date).toISOString().substring(0,10)}class Vt{constructor(M){this.app=M,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,w.Z)(function*(){return!!(0,Be.hl)()&&(0,Be.eu)().then(()=>!0).catch(()=>!1)})()}read(){var M=this;return(0,w.Z)(function*(){if(yield M._canUseIndexedDBPromise){const Se=yield function K(U){return x.apply(this,arguments)}(M.app);return Se?.heartbeats?Se:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(M){var ae=this;return(0,w.Z)(function*(){var Se;if(yield ae._canUseIndexedDBPromise){const dt=yield ae.read();return W(ae.app,{lastSentHeartbeatDate:null!==(Se=M.lastSentHeartbeatDate)&&void 0!==Se?Se:dt.lastSentHeartbeatDate,heartbeats:M.heartbeats})}})()}add(M){var ae=this;return(0,w.Z)(function*(){var Se;if(yield ae._canUseIndexedDBPromise){const dt=yield ae.read();return W(ae.app,{lastSentHeartbeatDate:null!==(Se=M.lastSentHeartbeatDate)&&void 0!==Se?Se:dt.lastSentHeartbeatDate,heartbeats:[...dt.heartbeats,...M.heartbeats]})}})()}}function Xi(U){return(0,Be.L)(JSON.stringify({version:2,heartbeats:U})).length}!function Fu(U){Uo(new Ue.wA("platform-logger",M=>new en(M),"PRIVATE")),Uo(new Ue.wA("heartbeat",M=>new Un(M),"PRIVATE")),Ks(Zi,"0.9.24",U),Ks(Zi,"0.9.24","esm2017"),Ks("fire-js","")}("")},537:(ws,Gn,Qe)=>{Qe.d(Gn,{H0:()=>Wn,wA:()=>G});var w=Qe(861),Ue=Qe(58);class G{constructor(ne,ue,Te){this.name=ne,this.instanceFactory=ue,this.type=Te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ne){return this.instantiationMode=ne,this}setMultipleInstances(ne){return this.multipleInstances=ne,this}setServiceProps(ne){return this.serviceProps=ne,this}setInstanceCreatedCallback(ne){return this.onInstanceCreated=ne,this}}const Be="[DEFAULT]";class at{constructor(ne,ue){this.name=ne,this.container=ue,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ne){const ue=this.normalizeInstanceIdentifier(ne);if(!this.instancesDeferred.has(ue)){const Te=new Ue.BH;if(this.instancesDeferred.set(ue,Te),this.isInitialized(ue)||this.shouldAutoInitialize())try{const ct=this.getOrInitializeService({instanceIdentifier:ue});ct&&Te.resolve(ct)}catch{}}return this.instancesDeferred.get(ue).promise}getImmediate(ne){var ue;const Te=this.normalizeInstanceIdentifier(ne?.identifier),ct=null!==(ue=ne?.optional)&&void 0!==ue&&ue;if(!this.isInitialized(Te)&&!this.shouldAutoInitialize()){if(ct)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Te})}catch(wt){if(ct)return null;throw wt}}getComponent(){return this.component}setComponent(ne){if(ne.name!==this.name)throw Error(`Mismatching Component ${ne.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ne,this.shouldAutoInitialize()){if(function _n(ut){return"EAGER"===ut.instantiationMode}(ne))try{this.getOrInitializeService({instanceIdentifier:Be})}catch{}for(const[ue,Te]of this.instancesDeferred.entries()){const ct=this.normalizeInstanceIdentifier(ue);try{const wt=this.getOrInitializeService({instanceIdentifier:ct});Te.resolve(wt)}catch{}}}}clearInstance(ne=Be){this.instancesDeferred.delete(ne),this.instancesOptions.delete(ne),this.instances.delete(ne)}delete(){var ne=this;return(0,w.Z)(function*(){const ue=Array.from(ne.instances.values());yield Promise.all([...ue.filter(Te=>"INTERNAL"in Te).map(Te=>Te.INTERNAL.delete()),...ue.filter(Te=>"_delete"in Te).map(Te=>Te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ne=Be){return this.instances.has(ne)}getOptions(ne=Be){return this.instancesOptions.get(ne)||{}}initialize(ne={}){const{options:ue={}}=ne,Te=this.normalizeInstanceIdentifier(ne.instanceIdentifier);if(this.isInitialized(Te))throw Error(`${this.name}(${Te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ct=this.getOrInitializeService({instanceIdentifier:Te,options:ue});for(const[wt,Kn]of this.instancesDeferred.entries())Te===this.normalizeInstanceIdentifier(wt)&&Kn.resolve(ct);return ct}onInit(ne,ue){var Te;const ct=this.normalizeInstanceIdentifier(ue),wt=null!==(Te=this.onInitCallbacks.get(ct))&&void 0!==Te?Te:new Set;wt.add(ne),this.onInitCallbacks.set(ct,wt);const Kn=this.instances.get(ct);return Kn&&ne(Kn,ct),()=>{wt.delete(ne)}}invokeOnInitCallbacks(ne,ue){const Te=this.onInitCallbacks.get(ue);if(Te)for(const ct of Te)try{ct(ne,ue)}catch{}}getOrInitializeService({instanceIdentifier:ne,options:ue={}}){let Te=this.instances.get(ne);if(!Te&&this.component&&(Te=this.component.instanceFactory(this.container,{instanceIdentifier:(ut=ne,ut===Be?void 0:ut),options:ue}),this.instances.set(ne,Te),this.instancesOptions.set(ne,ue),this.invokeOnInitCallbacks(Te,ne),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ne,Te)}catch{}var ut;return Te||null}normalizeInstanceIdentifier(ne=Be){return this.component?this.component.multipleInstances?ne:Be:ne}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Wn{constructor(ne){this.name=ne,this.providers=new Map}addComponent(ne){const ue=this.getProvider(ne.name);if(ue.isComponentSet())throw new Error(`Component ${ne.name} has already been registered with ${this.name}`);ue.setComponent(ne)}addOrOverwriteComponent(ne){this.getProvider(ne.name).isComponentSet()&&this.providers.delete(ne.name),this.addComponent(ne)}getProvider(ne){if(this.providers.has(ne))return this.providers.get(ne);const ue=new at(ne,this);return this.providers.set(ne,ue),ue}getProviders(){return Array.from(this.providers.values())}}},879:(ws,Gn,Qe)=>{Qe.d(Gn,{Am:()=>ut,Ub:()=>Wn,Yd:()=>_n,in:()=>Ue});const w=[];var Ue=function(ne){return ne[ne.DEBUG=0]="DEBUG",ne[ne.VERBOSE=1]="VERBOSE",ne[ne.INFO=2]="INFO",ne[ne.WARN=3]="WARN",ne[ne.ERROR=4]="ERROR",ne[ne.SILENT=5]="SILENT",ne}(Ue||{});const G={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},Be=Ue.INFO,at={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},an=(ne,ue,...Te)=>{if(ue<ne.logLevel)return;const ct=(new Date).toISOString(),wt=at[ue];if(!wt)throw new Error(`Attempted to log a message with an invalid logType (value: ${ue})`);console[wt](`[${ct}]  ${ne.name}:`,...Te)};class _n{constructor(ue){this.name=ue,this._logLevel=Be,this._logHandler=an,this._userLogHandler=null,w.push(this)}get logLevel(){return this._logLevel}set logLevel(ue){if(!(ue in Ue))throw new TypeError(`Invalid value "${ue}" assigned to \`logLevel\``);this._logLevel=ue}setLogLevel(ue){this._logLevel="string"==typeof ue?G[ue]:ue}get logHandler(){return this._logHandler}set logHandler(ue){if("function"!=typeof ue)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ue}get userLogHandler(){return this._userLogHandler}set userLogHandler(ue){this._userLogHandler=ue}debug(...ue){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...ue),this._logHandler(this,Ue.DEBUG,...ue)}log(...ue){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...ue),this._logHandler(this,Ue.VERBOSE,...ue)}info(...ue){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...ue),this._logHandler(this,Ue.INFO,...ue)}warn(...ue){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...ue),this._logHandler(this,Ue.WARN,...ue)}error(...ue){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...ue),this._logHandler(this,Ue.ERROR,...ue)}}function Wn(ne){w.forEach(ue=>{ue.setLogLevel(ne)})}function ut(ne,ue){for(const Te of w){let ct=null;ue&&ue.level&&(ct=G[ue.level]),Te.userLogHandler=null===ne?null:(wt,Kn,...Dt)=>{const qe=Dt.map(et=>{if(null==et)return null;if("string"==typeof et)return et;if("number"==typeof et||"boolean"==typeof et)return et.toString();if(et instanceof Error)return et.message;try{return JSON.stringify(et)}catch{return null}}).filter(et=>et).join(" ");Kn>=(ct??wt.logLevel)&&ne({level:Ue[Kn].toLowerCase(),message:qe,args:Dt,type:wt.name})}}}},377:(ws,Gn,Qe)=>{Qe.r(Gn);var w=Qe(861),Ue=Qe(106),G=Qe(58),Be=Qe(534),at=Qe(879),an=Qe(582),_n=Qe(537);const ut={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Kn=function ct(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Dt=function wt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},qe=new G.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Zn=new at.Yd("@firebase/auth");function Jt(f,...l){Zn.logLevel<=at.in.ERROR&&Zn.error(`Auth (${Be.SDK_VERSION}): ${f}`,...l)}function St(f,...l){throw Ln(f,...l)}function Ht(f,...l){return Ln(f,...l)}function Or(f,l,d){const p=Object.assign(Object.assign({},Dt()),{[l]:d});return new G.LL("auth","Firebase",p).create(l,{appName:f.name})}function tt(f,l,d){if(!(l instanceof d))throw d.name!==l.constructor.name&&St(f,"argument-error"),Or(f,"argument-error",`Type of ${l.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ln(f,...l){if("string"!=typeof f){const d=l[0],p=[...l.slice(1)];return p[0]&&(p[0].appName=f.name),f._errorFactory.create(d,...p)}return qe.create(f,...l)}function ee(f,l,...d){if(!f)throw Ln(l,...d)}function cn(f){const l="INTERNAL ASSERTION FAILED: "+f;throw Jt(l),new Error(l)}function en(f,l){f||cn(l)}function Dn(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.href)||""}function Zi(){return"http:"===Qi()||"https:"===Qi()}function Qi(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.protocol)||null}class Yi{constructor(l,d){this.shortDelay=l,this.longDelay=d,en(d>l,"Short delay should be less than long delay!"),this.isMobile=(0,G.uI)()||(0,G.b$)()}get(){return function Ge(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Zi()||(0,G.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function j(f,l){en(f.emulator,"Emulator should always be set here");const{url:d}=f.emulator;return l?`${d}${l.startsWith("/")?l.slice(1):l}`:d}class q{static initialize(l,d,p){this.fetchImpl=l,d&&(this.headersImpl=d),p&&(this.responseImpl=p)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void cn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void cn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void cn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const V={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},X=new Yi(3e4,6e4);function ie(f,l){return f.tenantId&&!l.tenantId?Object.assign(Object.assign({},l),{tenantId:f.tenantId}):l}function H(f,l,d,p){return fe.apply(this,arguments)}function fe(){return(fe=(0,w.Z)(function*(f,l,d,p,_={}){return pt(f,_,(0,w.Z)(function*(){let v={},C={};p&&("GET"===l?C=p:v={body:JSON.stringify(p)});const O=(0,G.xO)(Object.assign({key:f.config.apiKey},C)).slice(1),J=yield f._getAdditionalHeaders();return J["Content-Type"]="application/json",f.languageCode&&(J["X-Firebase-Locale"]=f.languageCode),q.fetch()(ln(f,f.config.apiHost,d,O),Object.assign({method:l,headers:J,referrerPolicy:"no-referrer"},v))}))})).apply(this,arguments)}function pt(f,l,d){return ve.apply(this,arguments)}function ve(){return(ve=(0,w.Z)(function*(f,l,d){f._canInitEmulator=!1;const p=Object.assign(Object.assign({},V),l);try{const _=new ur(f),v=yield Promise.race([d(),_.promise]);_.clearNetworkTimeout();const C=yield v.json();if("needConfirmation"in C)throw Vn(f,"account-exists-with-different-credential",C);if(v.ok&&!("errorMessage"in C))return C;{const O=v.ok?C.errorMessage:C.error.message,[J,_e]=O.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===J)throw Vn(f,"credential-already-in-use",C);if("EMAIL_EXISTS"===J)throw Vn(f,"email-already-in-use",C);if("USER_DISABLED"===J)throw Vn(f,"user-disabled",C);const be=p[J]||J.toLowerCase().replace(/[_\s]+/g,"-");if(_e)throw Or(f,be,_e);St(f,be)}}catch(_){if(_ instanceof G.ZR)throw _;St(f,"network-request-failed",{message:String(_)})}})).apply(this,arguments)}function Me(f,l,d,p){return vt.apply(this,arguments)}function vt(){return(vt=(0,w.Z)(function*(f,l,d,p,_={}){const v=yield H(f,l,d,p,_);return"mfaPendingCredential"in v&&St(f,"multi-factor-auth-required",{_serverResponse:v}),v})).apply(this,arguments)}function ln(f,l,d,p){const _=`${l}${d}?${p}`;return f.config.emulator?j(f.config,_):`${f.config.apiScheme}://${_}`}function Wt(f){switch(f){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ur{constructor(l){this.auth=l,this.timer=null,this.promise=new Promise((d,p)=>{this.timer=setTimeout(()=>p(Ht(this.auth,"network-request-failed")),X.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Vn(f,l,d){const p={appName:f.name};d.email&&(p.email=d.email),d.phoneNumber&&(p.phoneNumber=d.phoneNumber);const _=Ht(f,l,p);return _.customData._tokenResponse=d,_}function wr(f){return void 0!==f&&void 0!==f.getResponse}function Nr(f){return void 0!==f&&void 0!==f.enterprise}class ti{constructor(l){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===l.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=l.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=l.recaptchaEnforcementState}getProviderEnforcementState(l){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===l)return Wt(d.enforcementState);return null}isProviderEnabled(l){return"ENFORCE"===this.getProviderEnforcementState(l)||"AUDIT"===this.getProviderEnforcementState(l)}}function bs(){return(bs=(0,w.Z)(function*(f){return(yield H(f,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Kt(f,l){return wa.apply(this,arguments)}function wa(){return(wa=(0,w.Z)(function*(f,l){return H(f,"GET","/v2/recaptchaConfig",ie(f,l))})).apply(this,arguments)}function Oi(){return(Oi=(0,w.Z)(function*(f,l){return H(f,"POST","/v1/accounts:delete",l)})).apply(this,arguments)}function kr(){return(kr=(0,w.Z)(function*(f,l){return H(f,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function qs(){return(qs=(0,w.Z)(function*(f,l){return H(f,"POST","/v1/accounts:lookup",l)})).apply(this,arguments)}function dr(f){if(f)try{const l=new Date(Number(f));if(!isNaN(l.getTime()))return l.toUTCString()}catch{}}function Ni(){return(Ni=(0,w.Z)(function*(f,l=!1){const d=(0,G.m9)(f),p=yield d.getIdToken(l),_=ba(p);ee(_&&_.exp&&_.auth_time&&_.iat,d.auth,"internal-error");const v="object"==typeof _.firebase?_.firebase:void 0,C=v?.sign_in_provider;return{claims:_,token:p,authTime:dr(Pn(_.auth_time)),issuedAtTime:dr(Pn(_.iat)),expirationTime:dr(Pn(_.exp)),signInProvider:C||null,signInSecondFactor:v?.sign_in_second_factor||null}})).apply(this,arguments)}function Pn(f){return 1e3*Number(f)}function ba(f){const[l,d,p]=f.split(".");if(void 0===l||void 0===d||void 0===p)return Jt("JWT malformed, contained fewer than 3 sections"),null;try{const _=(0,G.tV)(d);return _?JSON.parse(_):(Jt("Failed to decode base64 JWT payload"),null)}catch(_){return Jt("Caught error parsing JWT payload as JSON",_?.toString()),null}}function ni(f,l){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,w.Z)(function*(f,l,d=!1){if(d)return l;try{return yield l}catch(p){throw p instanceof G.ZR&&function Bo({code:f}){return"auth/user-disabled"===f||"auth/user-token-expired"===f}(p)&&f.auth.currentUser===f&&(yield f.auth.signOut()),p}})).apply(this,arguments)}class Ws{constructor(l){this.user=l,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(l){var d;if(l){const p=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),p}{this.errorBackoff=3e4;const _=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,_)}}schedule(l=!1){var d=this;if(!this.isRunning)return;const p=this.getInterval(l);this.timerId=setTimeout((0,w.Z)(function*(){yield d.iteration()}),p)}iteration(){var l=this;return(0,w.Z)(function*(){try{yield l.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&l.schedule(!0))}l.schedule()})()}}class Ca{constructor(l,d){this.createdAt=l,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=dr(this.lastLoginAt),this.creationTime=dr(this.createdAt)}_copy(l){this.createdAt=l.createdAt,this.lastLoginAt=l.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function hr(f){return Fr.apply(this,arguments)}function Fr(){return Fr=(0,w.Z)(function*(f){var l;const d=f.auth,p=yield f.getIdToken(),_=yield ni(f,function Cs(f,l){return qs.apply(this,arguments)}(d,{idToken:p}));ee(_?.users.length,d,"internal-error");const v=_.users[0];f._notifyReloadListener(v);const C=null!==(l=v.providerUserInfo)&&void 0!==l&&l.length?function qc(f){return f.map(l=>{var{providerId:d}=l,p=(0,an._T)(l,["providerId"]);return{providerId:d,uid:p.rawId||"",displayName:p.displayName||null,email:p.email||null,phoneNumber:p.phoneNumber||null,photoURL:p.photoUrl||null}})}(v.providerUserInfo):[],O=function ku(f,l){return[...f.filter(p=>!l.some(_=>_.providerId===p.providerId)),...l]}(f.providerData,C),be=!!f.isAnonymous&&!(f.email&&v.passwordHash||O?.length),Re={uid:v.localId,displayName:v.displayName||null,photoURL:v.photoUrl||null,email:v.email||null,emailVerified:v.emailVerified||!1,phoneNumber:v.phoneNumber||null,tenantId:v.tenantId||null,providerData:O,metadata:new Ca(v.createdAt,v.lastLoginAt),isAnonymous:be};Object.assign(f,Re)}),Fr.apply(this,arguments)}function Ta(){return(Ta=(0,w.Z)(function*(f){const l=(0,G.m9)(f);yield hr(l),yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)})).apply(this,arguments)}function D(){return(D=(0,w.Z)(function*(f,l){const d=yield pt(f,{},(0,w.Z)(function*(){const p=(0,G.xO)({grant_type:"refresh_token",refresh_token:l}).slice(1),{tokenApiHost:_,apiKey:v}=f.config,C=ln(f,_,"/v1/token",`key=${v}`),O=yield f._getAdditionalHeaders();return O["Content-Type"]="application/x-www-form-urlencoded",q.fetch()(C,{method:"POST",headers:O,body:p})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function R(){return(R=(0,w.Z)(function*(f,l){return H(f,"POST","/v2/accounts:revokeToken",ie(f,l))})).apply(this,arguments)}class K{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(l){ee(l.idToken,"internal-error"),ee(typeof l.idToken<"u","internal-error"),ee(typeof l.refreshToken<"u","internal-error");const d="expiresIn"in l&&typeof l.expiresIn<"u"?Number(l.expiresIn):function Ii(f){const l=ba(f);return ee(l,"internal-error"),ee(typeof l.exp<"u","internal-error"),ee(typeof l.iat<"u","internal-error"),Number(l.exp)-Number(l.iat)}(l.idToken);this.updateTokensAndExpiration(l.idToken,l.refreshToken,d)}getToken(l,d=!1){var p=this;return(0,w.Z)(function*(){return ee(!p.accessToken||p.refreshToken,l,"user-token-expired"),d||!p.accessToken||p.isExpired?p.refreshToken?(yield p.refresh(l,p.refreshToken),p.accessToken):null:p.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(l,d){var p=this;return(0,w.Z)(function*(){const{accessToken:_,refreshToken:v,expiresIn:C}=yield function Da(f,l){return D.apply(this,arguments)}(l,d);p.updateTokensAndExpiration(_,v,Number(C))})()}updateTokensAndExpiration(l,d,p){this.refreshToken=d||null,this.accessToken=l||null,this.expirationTime=Date.now()+1e3*p}static fromJSON(l,d){const{refreshToken:p,accessToken:_,expirationTime:v}=d,C=new K;return p&&(ee("string"==typeof p,"internal-error",{appName:l}),C.refreshToken=p),_&&(ee("string"==typeof _,"internal-error",{appName:l}),C.accessToken=_),v&&(ee("number"==typeof v,"internal-error",{appName:l}),C.expirationTime=v),C}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(l){this.accessToken=l.accessToken,this.refreshToken=l.refreshToken,this.expirationTime=l.expirationTime}_clone(){return Object.assign(new K,this.toJSON())}_performRefresh(){return cn("not implemented")}}function x(f,l){ee("string"==typeof f||typeof f>"u","internal-error",{appName:l})}class W{constructor(l){var{uid:d,auth:p,stsTokenManager:_}=l,v=(0,an._T)(l,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ws(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=p,this.stsTokenManager=_,this.accessToken=_.accessToken,this.displayName=v.displayName||null,this.email=v.email||null,this.emailVerified=v.emailVerified||!1,this.phoneNumber=v.phoneNumber||null,this.photoURL=v.photoURL||null,this.isAnonymous=v.isAnonymous||!1,this.tenantId=v.tenantId||null,this.providerData=v.providerData?[...v.providerData]:[],this.metadata=new Ca(v.createdAt||void 0,v.lastLoginAt||void 0)}getIdToken(l){var d=this;return(0,w.Z)(function*(){const p=yield ni(d,d.stsTokenManager.getToken(d.auth,l));return ee(p,d.auth,"internal-error"),d.accessToken!==p&&(d.accessToken=p,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),p})()}getIdTokenResult(l){return function Lt(f){return Ni.apply(this,arguments)}(this,l)}reload(){return function Ks(f){return Ta.apply(this,arguments)}(this)}_assign(l){this!==l&&(ee(this.uid===l.uid,this.auth,"internal-error"),this.displayName=l.displayName,this.photoURL=l.photoURL,this.email=l.email,this.emailVerified=l.emailVerified,this.phoneNumber=l.phoneNumber,this.isAnonymous=l.isAnonymous,this.tenantId=l.tenantId,this.providerData=l.providerData.map(d=>Object.assign({},d)),this.metadata._copy(l.metadata),this.stsTokenManager._assign(l.stsTokenManager))}_clone(l){const d=new W(Object.assign(Object.assign({},this),{auth:l,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(l){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=l,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(l){this.reloadListener?this.reloadListener(l):this.reloadUserInfo=l}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(l,d=!1){var p=this;return(0,w.Z)(function*(){let _=!1;l.idToken&&l.idToken!==p.stsTokenManager.accessToken&&(p.stsTokenManager.updateFromServerResponse(l),_=!0),d&&(yield hr(p)),yield p.auth._persistUserIfCurrent(p),_&&p.auth._notifyListenersIfCurrent(p)})()}delete(){var l=this;return(0,w.Z)(function*(){const d=yield l.getIdToken();return yield ni(l,function zc(f,l){return Oi.apply(this,arguments)}(l.auth,{idToken:d})),l.stsTokenManager.clearRefreshToken(),l.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(l=>Object.assign({},l)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(l,d){var p,_,v,C,O,J,_e,be;const Re=null!==(p=d.displayName)&&void 0!==p?p:void 0,En=null!==(_=d.email)&&void 0!==_?_:void 0,Li=null!==(v=d.phoneNumber)&&void 0!==v?v:void 0,Dd=null!==(C=d.photoURL)&&void 0!==C?C:void 0,Oy=null!==(O=d.tenantId)&&void 0!==O?O:void 0,Ka=null!==(J=d._redirectEventId)&&void 0!==J?J:void 0,wp=null!==(_e=d.createdAt)&&void 0!==_e?_e:void 0,Ny=null!==(be=d.lastLoginAt)&&void 0!==be?be:void 0,{uid:Sd,emailVerified:Qb,isAnonymous:bp,providerData:ky,stsTokenManager:Fy}=d;ee(Sd&&Fy,l,"internal-error");const Yb=K.fromJSON(this.name,Fy);ee("string"==typeof Sd,l,"internal-error"),x(Re,l.name),x(En,l.name),ee("boolean"==typeof Qb,l,"internal-error"),ee("boolean"==typeof bp,l,"internal-error"),x(Li,l.name),x(Dd,l.name),x(Oy,l.name),x(Ka,l.name),x(wp,l.name),x(Ny,l.name);const Ml=new W({uid:Sd,auth:l,email:En,emailVerified:Qb,displayName:Re,isAnonymous:bp,photoURL:Dd,phoneNumber:Li,tenantId:Oy,stsTokenManager:Yb,createdAt:wp,lastLoginAt:Ny});return ky&&Array.isArray(ky)&&(Ml.providerData=ky.map(OP=>Object.assign({},OP))),Ka&&(Ml._redirectEventId=Ka),Ml}static _fromIdTokenResponse(l,d,p=!1){return(0,w.Z)(function*(){const _=new K;_.updateFromServerResponse(d);const v=new W({uid:d.localId,auth:l,stsTokenManager:_,isAnonymous:p});return yield hr(v),v})()}}const je=new Map;function nt(f){en(f instanceof Function,"Expected a class definition");let l=je.get(f);return l?(en(l instanceof f,"Instance stored in cache mismatched with class"),l):(l=new f,je.set(f,l),l)}const Zt=(()=>{class f{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,w.Z)(function*(){return!0})()}_set(d,p){var _=this;return(0,w.Z)(function*(){_.storage[d]=p})()}_get(d){var p=this;return(0,w.Z)(function*(){const _=p.storage[d];return void 0===_?null:_})()}_remove(d){var p=this;return(0,w.Z)(function*(){delete p.storage[d]})()}_addListener(d,p){}_removeListener(d,p){}}return f.type="NONE",f})();function Un(f,l,d){return`firebase:${f}:${l}:${d}`}class De{constructor(l,d,p){this.persistence=l,this.auth=d,this.userKey=p;const{config:_,name:v}=this.auth;this.fullUserKey=Un(this.userKey,_.apiKey,v),this.fullPersistenceKey=Un("persistence",_.apiKey,v),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(l){return this.persistence._set(this.fullUserKey,l.toJSON())}getCurrentUser(){var l=this;return(0,w.Z)(function*(){const d=yield l.persistence._get(l.fullUserKey);return d?W._fromJSON(l.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(l){var d=this;return(0,w.Z)(function*(){if(d.persistence===l)return;const p=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=l,p?d.setCurrentUser(p):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(l,d,p="authUser"){return(0,w.Z)(function*(){if(!d.length)return new De(nt(Zt),l,p);const _=(yield Promise.all(d.map(function(){var _e=(0,w.Z)(function*(be){if(yield be._isAvailable())return be});return function(be){return _e.apply(this,arguments)}}()))).filter(_e=>_e);let v=_[0]||nt(Zt);const C=Un(p,l.config.apiKey,l.name);let O=null;for(const _e of d)try{const be=yield _e._get(C);if(be){const Re=W._fromJSON(l,be);_e!==v&&(O=Re),v=_e;break}}catch{}const J=_.filter(_e=>_e._shouldAllowMigration);return v._shouldAllowMigration&&J.length?(v=J[0],O&&(yield v._set(C,O.toJSON())),yield Promise.all(d.map(function(){var _e=(0,w.Z)(function*(be){if(be!==v)try{yield be._remove(C)}catch{}});return function(be){return _e.apply(this,arguments)}}())),new De(v,l,p)):new De(v,l,p)})()}}function Yn(f){const l=f.toLowerCase();if(l.includes("opera/")||l.includes("opr/")||l.includes("opios/"))return"Opera";if(U(l))return"IEMobile";if(l.includes("msie")||l.includes("trident/"))return"IE";if(l.includes("edge/"))return"Edge";if(Vt(l))return"Firefox";if(l.includes("silk/"))return"Silk";if(ae(l))return"Blackberry";if(Se(l))return"Webos";if(Xi(l))return"Safari";if((l.includes("chrome/")||Fu(l))&&!l.includes("edge/"))return"Chrome";if(M(l))return"Android";{const p=f.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===p?.length)return p[1]}return"Other"}function Vt(f=(0,G.z$)()){return/firefox\//i.test(f)}function Xi(f=(0,G.z$)()){const l=f.toLowerCase();return l.includes("safari/")&&!l.includes("chrome/")&&!l.includes("crios/")&&!l.includes("android")}function Fu(f=(0,G.z$)()){return/crios\//i.test(f)}function U(f=(0,G.z$)()){return/iemobile/i.test(f)}function M(f=(0,G.z$)()){return/android/i.test(f)}function ae(f=(0,G.z$)()){return/blackberry/i.test(f)}function Se(f=(0,G.z$)()){return/webos/i.test(f)}function Ke(f=(0,G.z$)()){return/iphone|ipad|ipod/i.test(f)||/macintosh/i.test(f)&&/mobile/i.test(f)}function Ae(f=(0,G.z$)()){return Ke(f)||M(f)||Se(f)||ae(f)||/windows phone/i.test(f)||U(f)}function Sa(f,l=[]){let d;switch(f){case"Browser":d=Yn((0,G.z$)());break;case"Worker":d=`${Yn((0,G.z$)())}-${f}`;break;default:d=f}const p=l.length?l.join(","):"FirebaseCore-web";return`${d}/JsCore/${Be.SDK_VERSION}/${p}`}class eP{constructor(l){this.auth=l,this.queue=[]}pushCallback(l,d){const p=v=>new Promise((C,O)=>{try{C(l(v))}catch(J){O(J)}});p.onAbort=d,this.queue.push(p);const _=this.queue.length-1;return()=>{this.queue[_]=()=>Promise.resolve()}}runMiddleware(l){var d=this;return(0,w.Z)(function*(){if(d.auth.currentUser===l)return;const p=[];try{for(const _ of d.queue)yield _(l),_.onAbort&&p.push(_.onAbort)}catch(_){p.reverse();for(const v of p)try{v()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:_?.message})}})()}}function Gc(){return(Gc=(0,w.Z)(function*(f,l={}){return H(f,"GET","/v2/passwordPolicy",ie(f,l))})).apply(this,arguments)}class tP{constructor(l){var d,p,_,v;const C=l.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=C.minPasswordLength)&&void 0!==d?d:6,C.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=C.maxPasswordLength),void 0!==C.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=C.containsLowercaseCharacter),void 0!==C.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=C.containsUppercaseCharacter),void 0!==C.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=C.containsNumericCharacter),void 0!==C.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=C.containsNonAlphanumericCharacter),this.enforcementState=l.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(_=null===(p=l.allowedNonAlphanumericCharacters)||void 0===p?void 0:p.join(""))&&void 0!==_?_:"",this.forceUpgradeOnSignin=null!==(v=l.forceUpgradeOnSignin)&&void 0!==v&&v,this.schemaVersion=l.schemaVersion}validatePassword(l){var d,p,_,v,C,O;const J={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(l,J),this.validatePasswordCharacterOptions(l,J),J.isValid&&(J.isValid=null===(d=J.meetsMinPasswordLength)||void 0===d||d),J.isValid&&(J.isValid=null===(p=J.meetsMaxPasswordLength)||void 0===p||p),J.isValid&&(J.isValid=null===(_=J.containsLowercaseLetter)||void 0===_||_),J.isValid&&(J.isValid=null===(v=J.containsUppercaseLetter)||void 0===v||v),J.isValid&&(J.isValid=null===(C=J.containsNumericCharacter)||void 0===C||C),J.isValid&&(J.isValid=null===(O=J.containsNonAlphanumericCharacter)||void 0===O||O),J}validatePasswordLengthOptions(l,d){const p=this.customStrengthOptions.minPasswordLength,_=this.customStrengthOptions.maxPasswordLength;p&&(d.meetsMinPasswordLength=l.length>=p),_&&(d.meetsMaxPasswordLength=l.length<=_)}validatePasswordCharacterOptions(l,d){let p;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let _=0;_<l.length;_++)p=l.charAt(_),this.updatePasswordCharacterOptionsStatuses(d,p>="a"&&p<="z",p>="A"&&p<="Z",p>="0"&&p<="9",this.allowedNonAlphanumericCharacters.includes(p))}updatePasswordCharacterOptionsStatuses(l,d,p,_,v){this.customStrengthOptions.containsLowercaseLetter&&(l.containsLowercaseLetter||(l.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(l.containsUppercaseLetter||(l.containsUppercaseLetter=p)),this.customStrengthOptions.containsNumericCharacter&&(l.containsNumericCharacter||(l.containsNumericCharacter=_)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(l.containsNonAlphanumericCharacter||(l.containsNonAlphanumericCharacter=v))}}class Qw{constructor(l,d,p,_){this.app=l,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=p,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zs(this),this.idTokenSubscription=new Zs(this),this.beforeStateQueue=new eP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=l.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(l,d){var p=this;return d&&(this._popupRedirectResolver=nt(d)),this._initializationPromise=this.queue((0,w.Z)(function*(){var _,v;if(!p._deleted&&(p.persistenceManager=yield De.create(p,l),!p._deleted)){if(null!==(_=p._popupRedirectResolver)&&void 0!==_&&_._shouldInitProactively)try{yield p._popupRedirectResolver._initialize(p)}catch{}yield p.initializeCurrentUser(d),p.lastNotifiedUid=(null===(v=p.currentUser)||void 0===v?void 0:v.uid)||null,!p._deleted&&(p._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var l=this;return(0,w.Z)(function*(){if(l._deleted)return;const d=yield l.assertedPersistence.getCurrentUser();if(l.currentUser||d){if(l.currentUser&&d&&l.currentUser.uid===d.uid)return l._currentUser._assign(d),void(yield l.currentUser.getIdToken());yield l._updateCurrentUser(d,!0)}})()}initializeCurrentUser(l){var d=this;return(0,w.Z)(function*(){var p;const _=yield d.assertedPersistence.getCurrentUser();let v=_,C=!1;if(l&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const O=null===(p=d.redirectUser)||void 0===p?void 0:p._redirectEventId,J=v?._redirectEventId,_e=yield d.tryRedirectSignIn(l);(!O||O===J)&&_e?.user&&(v=_e.user,C=!0)}if(!v)return d.directlySetCurrentUser(null);if(!v._redirectEventId){if(C)try{yield d.beforeStateQueue.runMiddleware(v)}catch(O){v=_,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(O))}return v?d.reloadAndSetCurrentUserOrClear(v):d.directlySetCurrentUser(null)}return ee(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===v._redirectEventId?d.directlySetCurrentUser(v):d.reloadAndSetCurrentUserOrClear(v)})()}tryRedirectSignIn(l){var d=this;return(0,w.Z)(function*(){let p=null;try{p=yield d._popupRedirectResolver._completeRedirectFn(d,l,!0)}catch{yield d._setRedirectUser(null)}return p})()}reloadAndSetCurrentUserOrClear(l){var d=this;return(0,w.Z)(function*(){try{yield hr(l)}catch(p){if("auth/network-request-failed"!==p?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(l)})()}useDeviceLanguage(){this.languageCode=function Vo(){if(typeof navigator>"u")return null;const f=navigator;return f.languages&&f.languages[0]||f.language||null}()}_delete(){var l=this;return(0,w.Z)(function*(){l._deleted=!0})()}updateCurrentUser(l){var d=this;return(0,w.Z)(function*(){const p=l?(0,G.m9)(l):null;return p&&ee(p.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(p&&p._clone(d))})()}_updateCurrentUser(l,d=!1){var p=this;return(0,w.Z)(function*(){if(!p._deleted)return l&&ee(p.tenantId===l.tenantId,p,"tenant-id-mismatch"),d||(yield p.beforeStateQueue.runMiddleware(l)),p.queue((0,w.Z)(function*(){yield p.directlySetCurrentUser(l),p.notifyAuthListeners()}))})()}signOut(){var l=this;return(0,w.Z)(function*(){return yield l.beforeStateQueue.runMiddleware(null),(l.redirectPersistenceManager||l._popupRedirectResolver)&&(yield l._setRedirectUser(null)),l._updateCurrentUser(null,!0)})()}setPersistence(l){var d=this;return this.queue((0,w.Z)(function*(){yield d.assertedPersistence.setPersistence(nt(l))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(l){var d=this;return(0,w.Z)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const p=d._getPasswordPolicyInternal();return p.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):p.validatePassword(l)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var l=this;return(0,w.Z)(function*(){const d=yield function Zw(f){return Gc.apply(this,arguments)}(l),p=new tP(d);null===l.tenantId?l._projectPasswordPolicy=p:l._tenantPasswordPolicies[l.tenantId]=p})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(l){this._errorFactory=new G.LL("auth","Firebase",l())}onAuthStateChanged(l,d,p){return this.registerStateListener(this.authStateSubscription,l,d,p)}beforeAuthStateChanged(l,d){return this.beforeStateQueue.pushCallback(l,d)}onIdTokenChanged(l,d,p){return this.registerStateListener(this.idTokenSubscription,l,d,p)}authStateReady(){return new Promise((l,d)=>{if(this.currentUser)l();else{const p=this.onAuthStateChanged(()=>{p(),l()},d)}})}revokeAccessToken(l){var d=this;return(0,w.Z)(function*(){if(d.currentUser){const p=yield d.currentUser.getIdToken(),_={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:l,idToken:p};null!=d.tenantId&&(_.tenantId=d.tenantId),yield function T(f,l){return R.apply(this,arguments)}(d,_)}})()}toJSON(){var l;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(l=this._currentUser)||void 0===l?void 0:l.toJSON()}}_setRedirectUser(l,d){var p=this;return(0,w.Z)(function*(){const _=yield p.getOrInitRedirectPersistenceManager(d);return null===l?_.removeCurrentUser():_.setCurrentUser(l)})()}getOrInitRedirectPersistenceManager(l){var d=this;return(0,w.Z)(function*(){if(!d.redirectPersistenceManager){const p=l&&nt(l)||d._popupRedirectResolver;ee(p,d,"argument-error"),d.redirectPersistenceManager=yield De.create(d,[nt(p._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(l){var d=this;return(0,w.Z)(function*(){var p,_;return d._isInitialized&&(yield d.queue((0,w.Z)(function*(){}))),(null===(p=d._currentUser)||void 0===p?void 0:p._redirectEventId)===l?d._currentUser:(null===(_=d.redirectUser)||void 0===_?void 0:_._redirectEventId)===l?d.redirectUser:null})()}_persistUserIfCurrent(l){var d=this;return(0,w.Z)(function*(){if(l===d.currentUser)return d.queue((0,w.Z)(function*(){return d.directlySetCurrentUser(l)}))})()}_notifyListenersIfCurrent(l){l===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var l,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const p=null!==(d=null===(l=this.currentUser)||void 0===l?void 0:l.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==p&&(this.lastNotifiedUid=p,this.authStateSubscription.next(this.currentUser))}registerStateListener(l,d,p,_){if(this._deleted)return()=>{};const v="function"==typeof d?d:d.next.bind(d);let C=!1;const O=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(O,this,"internal-error"),O.then(()=>{C||v(this.currentUser)}),"function"==typeof d){const J=l.addObserver(d,p,_);return()=>{C=!0,J()}}{const J=l.addObserver(d);return()=>{C=!0,J()}}}directlySetCurrentUser(l){var d=this;return(0,w.Z)(function*(){d.currentUser&&d.currentUser!==l&&d._currentUser._stopProactiveRefresh(),l&&d.isProactiveRefreshEnabled&&l._startProactiveRefresh(),d.currentUser=l,l?yield d.assertedPersistence.setCurrentUser(l):yield d.assertedPersistence.removeCurrentUser()})()}queue(l){return this.operations=this.operations.then(l,l),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(l){!l||this.frameworks.includes(l)||(this.frameworks.push(l),this.frameworks.sort(),this.clientVersion=Sa(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var l=this;return(0,w.Z)(function*(){var d;const p={"X-Client-Version":l.clientVersion};l.app.options.appId&&(p["X-Firebase-gmpid"]=l.app.options.appId);const _=yield null===(d=l.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();_&&(p["X-Firebase-Client"]=_);const v=yield l._getAppCheckToken();return v&&(p["X-Firebase-AppCheck"]=v),p})()}_getAppCheckToken(){var l=this;return(0,w.Z)(function*(){var d;const p=yield null===(d=l.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return p?.error&&function Qn(f,...l){Zn.logLevel<=at.in.WARN&&Zn.warn(`Auth (${Be.SDK_VERSION}): ${f}`,...l)}(`Error while retrieving App Check token: ${p.error}`),p?.token})()}}function tn(f){return(0,G.m9)(f)}class Zs{constructor(l){this.auth=l,this.observer=null,this.addObserver=(0,G.ne)(d=>this.observer=d)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function y_(f){return new Promise((l,d)=>{const p=document.createElement("script");p.setAttribute("src",f),p.onload=l,p.onerror=_=>{const v=Ht("internal-error");v.customData=_,d(v)},p.type="text/javascript",p.charset="UTF-8",function nP(){var f,l;return null!==(l=null===(f=document.getElementsByTagName("head"))||void 0===f?void 0:f[0])&&void 0!==l?l:document}().appendChild(p)})}function Yw(f){return`__${f}${Math.floor(1e6*Math.random())}`}class v_{constructor(l){this.type="recaptcha-enterprise",this.auth=tn(l)}verify(l="verify",d=!1){var p=this;return(0,w.Z)(function*(){function v(){return v=(0,w.Z)(function*(O){if(!d){if(null==O.tenantId&&null!=O._agentRecaptchaConfig)return O._agentRecaptchaConfig.siteKey;if(null!=O.tenantId&&void 0!==O._tenantRecaptchaConfigs[O.tenantId])return O._tenantRecaptchaConfigs[O.tenantId].siteKey}return new Promise(function(){var J=(0,w.Z)(function*(_e,be){Kt(O,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Re=>{if(void 0!==Re.recaptchaKey){const En=new ti(Re);return null==O.tenantId?O._agentRecaptchaConfig=En:O._tenantRecaptchaConfigs[O.tenantId]=En,_e(En.siteKey)}be(new Error("recaptcha Enterprise site key undefined"))}).catch(Re=>{be(Re)})});return function(_e,be){return J.apply(this,arguments)}}())}),v.apply(this,arguments)}function C(O,J,_e){const be=window.grecaptcha;Nr(be)?be.enterprise.ready(()=>{be.enterprise.execute(O,{action:l}).then(Re=>{J(Re)}).catch(()=>{J("NO_RECAPTCHA")})}):_e(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((O,J)=>{(function _(O){return v.apply(this,arguments)})(p.auth).then(_e=>{if(!d&&Nr(window.grecaptcha))C(_e,O,J);else{if(typeof window>"u")return void J(new Error("RecaptchaVerifier is only supported in browser"));y_("https://www.google.com/recaptcha/enterprise.js?render="+_e).then(()=>{C(_e,O,J)}).catch(be=>{J(be)})}}).catch(_e=>{J(_e)})})})()}}function Jw(f,l,d){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,w.Z)(function*(f,l,d,p=!1){const _=new v_(f);let v;try{v=yield _.verify(d)}catch{v=yield _.verify(d,!0)}const C=Object.assign({},l);return Object.assign(C,p?{captchaResp:v}:{captchaResponse:v}),Object.assign(C,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(C,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),C})).apply(this,arguments)}function Fe(f,l,d,p){return E_.apply(this,arguments)}function E_(){return E_=(0,w.Z)(function*(f,l,d,p){var _;if(null!==(_=f._getRecaptchaConfig())&&void 0!==_&&_.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const v=yield Jw(f,l,d,"getOobCode"===d);return p(f,v)}return p(f,l).catch(function(){var v=(0,w.Z)(function*(C){if("auth/missing-recaptcha-token"===C.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const O=yield Jw(f,l,d,"getOobCode"===d);return p(f,O)}return Promise.reject(C)});return function(C){return v.apply(this,arguments)}}())}),E_.apply(this,arguments)}function Wc(f){const l=f.indexOf(":");return l<0?"":f.substr(0,l+1)}function vf(f){if(!f)return null;const l=Number(f);return isNaN(l)?null:l}class Ts{constructor(l,d){this.providerId=l,this.signInMethod=d}toJSON(){return cn("not implemented")}_getIdTokenResponse(l){return cn("not implemented")}_linkToIdToken(l,d){return cn("not implemented")}_getReauthenticationResolver(l){return cn("not implemented")}}function Kc(f,l){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,w.Z)(function*(f,l){return H(f,"POST","/v1/accounts:resetPassword",ie(f,l))})).apply(this,arguments)}function Ef(){return(Ef=(0,w.Z)(function*(f,l){return H(f,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function ht(f,l){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,w.Z)(function*(f,l){return H(f,"POST","/v1/accounts:signUp",l)})).apply(this,arguments)}function fr(){return(fr=(0,w.Z)(function*(f,l){return H(f,"POST","/v1/accounts:update",ie(f,l))})).apply(this,arguments)}function C_(f,l){return T_.apply(this,arguments)}function T_(){return(T_=(0,w.Z)(function*(f,l){return Me(f,"POST","/v1/accounts:signInWithPassword",ie(f,l))})).apply(this,arguments)}function Mt(f,l){return D_.apply(this,arguments)}function D_(){return(D_=(0,w.Z)(function*(f,l){return H(f,"POST","/v1/accounts:sendOobCode",ie(f,l))})).apply(this,arguments)}function B(){return(B=(0,w.Z)(function*(f,l){return Mt(f,l)})).apply(this,arguments)}function If(f,l){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,w.Z)(function*(f,l){return Mt(f,l)})).apply(this,arguments)}function S_(f,l){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,w.Z)(function*(f,l){return Mt(f,l)})).apply(this,arguments)}function Jc(){return(Jc=(0,w.Z)(function*(f,l){return Mt(f,l)})).apply(this,arguments)}function A_(){return(A_=(0,w.Z)(function*(f,l){return Me(f,"POST","/v1/accounts:signInWithEmailLink",ie(f,l))})).apply(this,arguments)}function R_(){return(R_=(0,w.Z)(function*(f,l){return Me(f,"POST","/v1/accounts:signInWithEmailLink",ie(f,l))})).apply(this,arguments)}class Lu extends Ts{constructor(l,d,p,_=null){super("password",p),this._email=l,this._password=d,this._tenantId=_}static _fromEmailAndPassword(l,d){return new Lu(l,d,"password")}static _fromEmailAndCode(l,d,p=null){return new Lu(l,d,"emailLink",p)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(l){var d=this;return(0,w.Z)(function*(){switch(d.signInMethod){case"password":return Fe(l,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",C_);case"emailLink":return function cP(f,l){return A_.apply(this,arguments)}(l,{email:d._email,oobCode:d._password});default:St(l,"internal-error")}})()}_linkToIdToken(l,d){var p=this;return(0,w.Z)(function*(){switch(p.signInMethod){case"password":return Fe(l,{idToken:d,returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ht);case"emailLink":return function lP(f,l){return R_.apply(this,arguments)}(l,{idToken:d,email:p._email,oobCode:p._password});default:St(l,"internal-error")}})()}_getReauthenticationResolver(l){return this._getIdTokenResponse(l)}}function ii(f,l){return el.apply(this,arguments)}function el(){return(el=(0,w.Z)(function*(f,l){return Me(f,"POST","/v1/accounts:signInWithIdp",ie(f,l))})).apply(this,arguments)}class Ji extends Ts{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(l){const d=new Ji(l.providerId,l.signInMethod);return l.idToken||l.accessToken?(l.idToken&&(d.idToken=l.idToken),l.accessToken&&(d.accessToken=l.accessToken),l.nonce&&!l.pendingToken&&(d.nonce=l.nonce),l.pendingToken&&(d.pendingToken=l.pendingToken)):l.oauthToken&&l.oauthTokenSecret?(d.accessToken=l.oauthToken,d.secret=l.oauthTokenSecret):St("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l,{providerId:p,signInMethod:_}=d,v=(0,an._T)(d,["providerId","signInMethod"]);if(!p||!_)return null;const C=new Ji(p,_);return C.idToken=v.idToken||void 0,C.accessToken=v.accessToken||void 0,C.secret=v.secret,C.nonce=v.nonce,C.pendingToken=v.pendingToken||null,C}_getIdTokenResponse(l){return ii(l,this.buildRequest())}_linkToIdToken(l,d){const p=this.buildRequest();return p.idToken=d,ii(l,p)}_getReauthenticationResolver(l){const d=this.buildRequest();return d.autoCreate=!1,ii(l,d)}buildRequest(){const l={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)l.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),l.postBody=(0,G.xO)(d)}return l}}function wf(){return(wf=(0,w.Z)(function*(f,l){return H(f,"POST","/v1/accounts:sendVerificationCode",ie(f,l))})).apply(this,arguments)}function Qs(){return(Qs=(0,w.Z)(function*(f,l){return Me(f,"POST","/v1/accounts:signInWithPhoneNumber",ie(f,l))})).apply(this,arguments)}function es(){return(es=(0,w.Z)(function*(f,l){const d=yield Me(f,"POST","/v1/accounts:signInWithPhoneNumber",ie(f,l));if(d.temporaryProof)throw Vn(f,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const sb={USER_NOT_FOUND:"user-not-found"};function Uu(){return(Uu=(0,w.Z)(function*(f,l){return Me(f,"POST","/v1/accounts:signInWithPhoneNumber",ie(f,Object.assign(Object.assign({},l),{operation:"REAUTH"})),sb)})).apply(this,arguments)}class le extends Ts{constructor(l){super("phone","phone"),this.params=l}static _fromVerification(l,d){return new le({verificationId:l,verificationCode:d})}static _fromTokenResponse(l,d){return new le({phoneNumber:l,temporaryProof:d})}_getIdTokenResponse(l){return function M_(f,l){return Qs.apply(this,arguments)}(l,this._makeVerificationRequest())}_linkToIdToken(l,d){return function ib(f,l){return es.apply(this,arguments)}(l,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(l){return function N(f,l){return Uu.apply(this,arguments)}(l,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:l,phoneNumber:d,verificationId:p,verificationCode:_}=this.params;return l&&d?{temporaryProof:l,phoneNumber:d}:{sessionInfo:p,code:_}}toJSON(){const l={providerId:this.providerId};return this.params.phoneNumber&&(l.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(l.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(l.verificationCode=this.params.verificationCode),this.params.verificationId&&(l.verificationId=this.params.verificationId),l}static fromJSON(l){"string"==typeof l&&(l=JSON.parse(l));const{verificationId:d,verificationCode:p,phoneNumber:_,temporaryProof:v}=l;return p||d||_||v?new le({verificationId:d,verificationCode:p,phoneNumber:_,temporaryProof:v}):null}}class Ds{constructor(l){var d,p,_,v,C,O;const J=(0,G.zd)((0,G.pd)(l)),_e=null!==(d=J.apiKey)&&void 0!==d?d:null,be=null!==(p=J.oobCode)&&void 0!==p?p:null,Re=function Bu(f){switch(f){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(_=J.mode)&&void 0!==_?_:null);ee(_e&&be&&Re,"argument-error"),this.apiKey=_e,this.operation=Re,this.code=be,this.continueUrl=null!==(v=J.continueUrl)&&void 0!==v?v:null,this.languageCode=null!==(C=J.languageCode)&&void 0!==C?C:null,this.tenantId=null!==(O=J.tenantId)&&void 0!==O?O:null}static parseLink(l){const d=function bf(f){const l=(0,G.zd)((0,G.pd)(f)).link,d=l?(0,G.zd)((0,G.pd)(l)).deep_link_id:null,p=(0,G.zd)((0,G.pd)(f)).deep_link_id;return(p?(0,G.zd)((0,G.pd)(p)).link:null)||p||d||l||f}(l);try{return new Ds(d)}catch{return null}}}let Cf=(()=>{class f{constructor(){this.providerId=f.PROVIDER_ID}static credential(d,p){return Lu._fromEmailAndPassword(d,p)}static credentialWithLink(d,p){const _=Ds.parseLink(p);return ee(_,"argument-error"),Lu._fromEmailAndCode(d,_.code,_.tenantId)}}return f.PROVIDER_ID="password",f.EMAIL_PASSWORD_SIGN_IN_METHOD="password",f.EMAIL_LINK_SIGN_IN_METHOD="emailLink",f})();class Ss{constructor(l){this.providerId=l,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(l){this.defaultLanguageCode=l}setCustomParameters(l){return this.customParameters=l,this}getCustomParameters(){return this.customParameters}}class Vr extends Ss{constructor(){super(...arguments),this.scopes=[]}addScope(l){return this.scopes.includes(l)||this.scopes.push(l),this}getScopes(){return[...this.scopes]}}class As extends Vr{static credentialFromJSON(l){const d="string"==typeof l?JSON.parse(l):l;return ee("providerId"in d&&"signInMethod"in d,"argument-error"),Ji._fromParams(d)}credential(l){return this._credential(Object.assign(Object.assign({},l),{nonce:l.rawNonce}))}_credential(l){return ee(l.idToken||l.accessToken,"argument-error"),Ji._fromParams(Object.assign(Object.assign({},l),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(l){return As.oauthCredentialFromTaggedObject(l)}static credentialFromError(l){return As.oauthCredentialFromTaggedObject(l.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:d,oauthAccessToken:p,oauthTokenSecret:_,pendingToken:v,nonce:C,providerId:O}=l;if(!p&&!_&&!d&&!v||!O)return null;try{return new As(O)._credential({idToken:d,accessToken:p,nonce:C,pendingToken:v})}catch{return null}}}let si=(()=>{class f extends Vr{constructor(){super("facebook.com")}static credential(d){return Ji._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.FACEBOOK_SIGN_IN_METHOD="facebook.com",f.PROVIDER_ID="facebook.com",f})(),ki=(()=>{class f extends Vr{constructor(){super("google.com"),this.addScope("profile")}static credential(d,p){return Ji._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:p})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:p,oauthAccessToken:_}=d;if(!p&&!_)return null;try{return f.credential(p,_)}catch{return null}}}return f.GOOGLE_SIGN_IN_METHOD="google.com",f.PROVIDER_ID="google.com",f})(),It=(()=>{class f extends Vr{constructor(){super("github.com")}static credential(d){return Ji._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.GITHUB_SIGN_IN_METHOD="github.com",f.PROVIDER_ID="github.com",f})();class Ys extends Ts{constructor(l,d){super(l,l),this.pendingToken=d}_getIdTokenResponse(l){return ii(l,this.buildRequest())}_linkToIdToken(l,d){const p=this.buildRequest();return p.idToken=d,ii(l,p)}_getReauthenticationResolver(l){const d=this.buildRequest();return d.autoCreate=!1,ii(l,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l,{providerId:p,signInMethod:_,pendingToken:v}=d;return p&&_&&v&&p===_?new Ys(p,v):null}static _create(l,d){return new Ys(l,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class tl extends Ss{constructor(l){ee(l.startsWith("saml."),"argument-error"),super(l)}static credentialFromResult(l){return tl.samlCredentialFromTaggedObject(l)}static credentialFromError(l){return tl.samlCredentialFromTaggedObject(l.customData||{})}static credentialFromJSON(l){const d=Ys.fromJSON(l);return ee(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{pendingToken:d,providerId:p}=l;if(!d||!p)return null;try{return Ys._create(p,d)}catch{return null}}}let ts=(()=>{class f extends Vr{constructor(){super("twitter.com")}static credential(d,p){return Ji._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:p})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:p,oauthTokenSecret:_}=d;if(!p||!_)return null;try{return f.credential(p,_)}catch{return null}}}return f.TWITTER_SIGN_IN_METHOD="twitter.com",f.PROVIDER_ID="twitter.com",f})();function Aa(f,l){return $u.apply(this,arguments)}function $u(){return($u=(0,w.Z)(function*(f,l){return Me(f,"POST","/v1/accounts:signUp",ie(f,l))})).apply(this,arguments)}class oi{constructor(l){this.user=l.user,this.providerId=l.providerId,this._tokenResponse=l._tokenResponse,this.operationType=l.operationType}static _fromIdTokenResponse(l,d,p,_=!1){return(0,w.Z)(function*(){const v=yield W._fromIdTokenResponse(l,p,_),C=zu(p);return new oi({user:v,providerId:C,_tokenResponse:p,operationType:d})})()}static _forOperation(l,d,p){return(0,w.Z)(function*(){yield l._updateTokensIfNecessary(p,!0);const _=zu(p);return new oi({user:l,providerId:_,_tokenResponse:p,operationType:d})})()}}function zu(f){return f.providerId?f.providerId:"phoneNumber"in f?"phone":null}function Hu(){return(Hu=(0,w.Z)(function*(f){var l;const d=tn(f);if(yield d._initializationPromise,null!==(l=d.currentUser)&&void 0!==l&&l.isAnonymous)return new oi({user:d.currentUser,providerId:null,operationType:"signIn"});const p=yield Aa(d,{returnSecureToken:!0}),_=yield oi._fromIdTokenResponse(d,"signIn",p,!0);return yield d._updateCurrentUser(_.user),_})).apply(this,arguments)}class Xs extends G.ZR{constructor(l,d,p,_){var v;super(d.code,d.message),this.operationType=p,this.user=_,Object.setPrototypeOf(this,Xs.prototype),this.customData={appName:l.name,tenantId:null!==(v=l.tenantId)&&void 0!==v?v:void 0,_serverResponse:d.customData._serverResponse,operationType:p}}static _fromErrorAndOperation(l,d,p,_){return new Xs(l,d,p,_)}}function Df(f,l,d,p){return("reauthenticate"===l?d._getReauthenticationResolver(f):d._getIdTokenResponse(f)).catch(v=>{throw"auth/multi-factor-auth-required"===v.code?Xs._fromErrorAndOperation(f,v,l,p):v})}function Sf(f){return new Set(f.map(({providerId:l})=>l).filter(l=>!!l))}function qu(){return qu=(0,w.Z)(function*(f,l){const d=(0,G.m9)(f);yield Ur(!0,d,l);const{providerUserInfo:p}=yield function Hc(f,l){return kr.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[l]}),_=Sf(p||[]);return d.providerData=d.providerData.filter(v=>_.has(v.providerId)),_.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),qu.apply(this,arguments)}function Af(f,l){return Rf.apply(this,arguments)}function Rf(){return(Rf=(0,w.Z)(function*(f,l,d=!1){const p=yield ni(f,l._linkToIdToken(f.auth,yield f.getIdToken()),d);return oi._forOperation(f,"link",p)})).apply(this,arguments)}function Ur(f,l,d){return Mf.apply(this,arguments)}function Mf(){return(Mf=(0,w.Z)(function*(f,l,d){yield hr(l);const _=!1===f?"provider-already-linked":"no-such-provider";ee(Sf(l.providerData).has(d)===f,l.auth,_)})).apply(this,arguments)}function Pf(f,l){return xf.apply(this,arguments)}function xf(){return(xf=(0,w.Z)(function*(f,l,d=!1){const{auth:p}=f,_="reauthenticate";try{const v=yield ni(f,Df(p,_,l,f),d);ee(v.idToken,p,"internal-error");const C=ba(v.idToken);ee(C,p,"internal-error");const{sub:O}=C;return ee(f.uid===O,p,"user-mismatch"),oi._forOperation(f,_,v)}catch(v){throw"auth/user-not-found"===v?.code&&St(p,"user-mismatch"),v}})).apply(this,arguments)}function x_(f,l){return Of.apply(this,arguments)}function Of(){return(Of=(0,w.Z)(function*(f,l,d=!1){const p="signIn",_=yield Df(f,p,l),v=yield oi._fromIdTokenResponse(f,p,_);return d||(yield f._updateCurrentUser(v.user)),v})).apply(this,arguments)}function Gu(f,l){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,w.Z)(function*(f,l){return x_(tn(f),l)})).apply(this,arguments)}function O_(f,l){return Nf.apply(this,arguments)}function Nf(){return(Nf=(0,w.Z)(function*(f,l){const d=(0,G.m9)(f);return yield Ur(!1,d,l.providerId),Af(d,l)})).apply(this,arguments)}function N_(f,l){return pr.apply(this,arguments)}function pr(){return(pr=(0,w.Z)(function*(f,l){return Pf((0,G.m9)(f),l)})).apply(this,arguments)}function kf(){return(kf=(0,w.Z)(function*(f,l){return Me(f,"POST","/v1/accounts:signInWithCustomToken",ie(f,l))})).apply(this,arguments)}function Bt(){return Bt=(0,w.Z)(function*(f,l){const d=tn(f),p=yield function ab(f,l){return kf.apply(this,arguments)}(d,{token:l,returnSecureToken:!0}),_=yield oi._fromIdTokenResponse(d,"signIn",p);return yield d._updateCurrentUser(_.user),_}),Bt.apply(this,arguments)}class nl{constructor(l,d){this.factorId=l,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(l,d){return"phoneInfo"in d?Ku._fromServerResponse(l,d):"totpInfo"in d?ke._fromServerResponse(l,d):St(l,"internal-error")}}class Ku extends nl{constructor(l){super("phone",l),this.phoneNumber=l.phoneInfo}static _fromServerResponse(l,d){return new Ku(d)}}class ke extends nl{constructor(l){super("totp",l)}static _fromServerResponse(l,d){return new ke(d)}}function Xn(f,l,d){var p;ee((null===(p=d.url)||void 0===p?void 0:p.length)>0,f,"invalid-continue-uri"),ee(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,f,"invalid-dynamic-link-domain"),l.continueUrl=d.url,l.dynamicLinkDomain=d.dynamicLinkDomain,l.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(ee(d.iOS.bundleId.length>0,f,"missing-ios-bundle-id"),l.iOSBundleId=d.iOS.bundleId),d.android&&(ee(d.android.packageName.length>0,f,"missing-android-pkg-name"),l.androidInstallApp=d.android.installApp,l.androidMinimumVersionCode=d.android.minimumVersion,l.androidPackageName=d.android.packageName)}function gt(f){return xn.apply(this,arguments)}function xn(){return(xn=(0,w.Z)(function*(f){const l=tn(f);l._getPasswordPolicyInternal()&&(yield l._updatePasswordPolicy())})).apply(this,arguments)}function Js(){return(Js=(0,w.Z)(function*(f,l,d){const p=tn(f),_={requestType:"PASSWORD_RESET",email:l,clientType:"CLIENT_TYPE_WEB"};d&&Xn(p,_,d),yield Fe(p,_,"getOobCode",If)})).apply(this,arguments)}function Zu(){return Zu=(0,w.Z)(function*(f,l,d){yield Kc((0,G.m9)(f),{oobCode:l,newPassword:d}).catch(function(){var p=(0,w.Z)(function*(_){throw"auth/password-does-not-meet-requirements"===_.code&&gt(f),_});return function(_){return p.apply(this,arguments)}}())}),Zu.apply(this,arguments)}function Ra(){return Ra=(0,w.Z)(function*(f,l){yield function b_(f,l){return fr.apply(this,arguments)}((0,G.m9)(f),{oobCode:l})}),Ra.apply(this,arguments)}function F_(f,l){return Ff.apply(this,arguments)}function Ff(){return(Ff=(0,w.Z)(function*(f,l){const d=(0,G.m9)(f),p=yield Kc(d,{oobCode:l}),_=p.requestType;switch(ee(_,d,"internal-error"),_){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ee(p.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ee(p.mfaInfo,d,"internal-error");default:ee(p.email,d,"internal-error")}let v=null;return p.mfaInfo&&(v=nl._fromServerResponse(tn(d),p.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.newEmail:p.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.email:p.newEmail)||null,multiFactorInfo:v},operation:_}})).apply(this,arguments)}function Ee(){return(Ee=(0,w.Z)(function*(f,l){const{data:d}=yield F_((0,G.m9)(f),l);return d.email})).apply(this,arguments)}function qt(){return(qt=(0,w.Z)(function*(f,l,d){const p=tn(f),C=yield Fe(p,{returnSecureToken:!0,email:l,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Aa).catch(J=>{throw"auth/password-does-not-meet-requirements"===J.code&&gt(f),J}),O=yield oi._fromIdTokenResponse(p,"signIn",C);return yield p._updateCurrentUser(O.user),O})).apply(this,arguments)}function Bn(){return(Bn=(0,w.Z)(function*(f,l,d){const p=tn(f),_={requestType:"EMAIL_SIGNIN",email:l,clientType:"CLIENT_TYPE_WEB"};(function v(C,O){ee(O.handleCodeInApp,p,"argument-error"),O&&Xn(p,C,O)})(_,d),yield Fe(p,_,"getOobCode",S_)})).apply(this,arguments)}function ns(){return(ns=(0,w.Z)(function*(f,l,d){const p=(0,G.m9)(f),_=Cf.credentialWithLink(l,d||Dn());return ee(_._tenantId===(p.tenantId||null),p,"tenant-id-mismatch"),Gu(p,_)})).apply(this,arguments)}function $e(){return($e=(0,w.Z)(function*(f,l){return H(f,"POST","/v1/accounts:createAuthUri",ie(f,l))})).apply(this,arguments)}function Qu(){return Qu=(0,w.Z)(function*(f,l){const p={identifier:l,continueUri:Zi()?Dn():"http://localhost"},{signinMethods:_}=yield function Pa(f,l){return $e.apply(this,arguments)}((0,G.m9)(f),p);return _||[]}),Qu.apply(this,arguments)}function un(){return un=(0,w.Z)(function*(f,l){const d=(0,G.m9)(f),_={requestType:"VERIFY_EMAIL",idToken:yield f.getIdToken()};l&&Xn(d.auth,_,l);const{email:v}=yield function aP(f,l){return B.apply(this,arguments)}(d.auth,_);v!==f.email&&(yield f.reload())}),un.apply(this,arguments)}function eo(){return eo=(0,w.Z)(function*(f,l,d){const p=(0,G.m9)(f),v={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield f.getIdToken(),newEmail:l};d&&Xn(p.auth,v,d);const{email:C}=yield function nb(f,l){return Jc.apply(this,arguments)}(p.auth,v);C!==f.email&&(yield f.reload())}),eo.apply(this,arguments)}function jo(){return(jo=(0,w.Z)(function*(f,l){return H(f,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function is(){return is=(0,w.Z)(function*(f,{displayName:l,photoURL:d}){if(void 0===l&&void 0===d)return;const p=(0,G.m9)(f),v={idToken:yield p.getIdToken(),displayName:l,photoUrl:d,returnSecureToken:!0},C=yield ni(p,function rs(f,l){return jo.apply(this,arguments)}(p.auth,v));p.displayName=C.displayName||null,p.photoURL=C.photoUrl||null;const O=p.providerData.find(({providerId:J})=>"password"===J);O&&(O.displayName=p.displayName,O.photoURL=p.photoURL),yield p._updateTokensIfNecessary(C)}),is.apply(this,arguments)}function Oa(f,l,d){return st.apply(this,arguments)}function st(){return st=(0,w.Z)(function*(f,l,d){const{auth:p}=f,v={idToken:yield f.getIdToken(),returnSecureToken:!0};l&&(v.email=l),d&&(v.password=d);const C=yield ni(f,function w_(f,l){return Ef.apply(this,arguments)}(p,v));yield f._updateTokensIfNecessary(C,!0)}),st.apply(this,arguments)}class to{constructor(l,d,p={}){this.isNewUser=l,this.providerId=d,this.profile=p}}class Lf extends to{constructor(l,d,p,_){super(l,d,p),this.username=_}}class ss extends to{constructor(l,d){super(l,"facebook.com",d)}}class Yu extends Lf{constructor(l,d){super(l,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class Na extends to{constructor(l,d){super(l,"google.com",d)}}class al extends Lf{constructor(l,d,p){super(l,"twitter.com",d,p)}}function Jn(f){const{user:l,_tokenResponse:d}=f;return l.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function dP(f){var l,d;if(!f)return null;const{providerId:p}=f,_=f.rawUserInfo?JSON.parse(f.rawUserInfo):{},v=f.isNewUser||"identitytoolkit#SignupNewUserResponse"===f.kind;if(!p&&f?.idToken){const C=null===(d=null===(l=ba(f.idToken))||void 0===l?void 0:l.firebase)||void 0===d?void 0:d.sign_in_provider;if(C)return new to(v,"anonymous"!==C&&"custom"!==C?C:null)}if(!p)return null;switch(p){case"facebook.com":return new ss(v,_);case"github.com":return new Yu(v,_);case"google.com":return new Na(v,_);case"twitter.com":return new al(v,_,f.screenName||null);case"custom":case"anonymous":return new to(v,null);default:return new to(v,p,_)}}(d)}class ka{constructor(l,d,p){this.type=l,this.credential=d,this.user=p}static _fromIdtoken(l,d){return new ka("enroll",l,d)}static _fromMfaPendingCredential(l){return new ka("signin",l)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(l){var d,p;if(l?.multiFactorSession){if(null!==(d=l.multiFactorSession)&&void 0!==d&&d.pendingCredential)return ka._fromMfaPendingCredential(l.multiFactorSession.pendingCredential);if(null!==(p=l.multiFactorSession)&&void 0!==p&&p.idToken)return ka._fromIdtoken(l.multiFactorSession.idToken)}return null}}class U_{constructor(l,d,p){this.session=l,this.hints=d,this.signInResolver=p}static _fromError(l,d){const p=tn(l),_=d.customData._serverResponse,v=(_.mfaInfo||[]).map(O=>nl._fromServerResponse(p,O));ee(_.mfaPendingCredential,p,"internal-error");const C=ka._fromMfaPendingCredential(_.mfaPendingCredential);return new U_(C,v,function(){var O=(0,w.Z)(function*(J){const _e=yield J._process(p,C);delete _.mfaInfo,delete _.mfaPendingCredential;const be=Object.assign(Object.assign({},_),{idToken:_e.idToken,refreshToken:_e.refreshToken});switch(d.operationType){case"signIn":const Re=yield oi._fromIdTokenResponse(p,d.operationType,be);return yield p._updateCurrentUser(Re.user),Re;case"reauthenticate":return ee(d.user,p,"internal-error"),oi._forOperation(d.user,d.operationType,be);default:St(p,"internal-error")}});return function(J){return O.apply(this,arguments)}}())}resolveSignIn(l){var d=this;return(0,w.Z)(function*(){return d.signInResolver(l)})()}}class B_{constructor(l){this.user=l,this.enrolledFactors=[],l._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(p=>nl._fromServerResponse(l.auth,p)))})}static _fromUser(l){return new B_(l)}getSession(){var l=this;return(0,w.Z)(function*(){return ka._fromIdtoken(yield l.user.getIdToken(),l.user)})()}enroll(l,d){var p=this;return(0,w.Z)(function*(){const _=l,v=yield p.getSession(),C=yield ni(p.user,_._process(p.user.auth,v,d));return yield p.user._updateTokensIfNecessary(C),p.user.reload()})()}unenroll(l){var d=this;return(0,w.Z)(function*(){const p="string"==typeof l?l:l.uid,_=yield d.user.getIdToken();try{const v=yield ni(d.user,function vP(f,l){return H(f,"POST","/v2/accounts/mfaEnrollment:withdraw",ie(f,l))}(d.user.auth,{idToken:_,mfaEnrollmentId:p}));d.enrolledFactors=d.enrolledFactors.filter(({uid:C})=>C!==p),yield d.user._updateTokensIfNecessary(v),yield d.user.reload()}catch(v){throw v}})()}}const j_=new WeakMap,Uf="__sak";class Bf{constructor(l,d){this.storageRetriever=l,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(Uf,"1"),this.storage.removeItem(Uf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(l,d){return this.storage.setItem(l,JSON.stringify(d)),Promise.resolve()}_get(l){const d=this.storage.getItem(l);return Promise.resolve(d?JSON.parse(d):null)}_remove(l){return this.storage.removeItem(l),Promise.resolve()}get storage(){return this.storageRetriever()}}const as=(()=>{class f extends Bf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,p)=>this.onStorageEvent(d,p),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function $_(){const f=(0,G.z$)();return Xi(f)||Ke(f)}()&&function lt(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ae(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const p of Object.keys(this.listeners)){const _=this.storage.getItem(p),v=this.localCache[p];_!==v&&d(p,v,_)}}onStorageEvent(d,p=!1){if(!d.key)return void this.forAllChangedKeys((O,J,_e)=>{this.notifyListeners(O,_e)});const _=d.key;if(p?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const O=this.storage.getItem(_);if(d.newValue!==O)null!==d.newValue?this.storage.setItem(_,d.newValue):this.storage.removeItem(_);else if(this.localCache[_]===d.newValue&&!p)return}const v=()=>{const O=this.storage.getItem(_);!p&&this.localCache[_]===O||this.notifyListeners(_,O)},C=this.storage.getItem(_);!function yn(){return(0,G.w1)()&&10===document.documentMode}()||C===d.newValue||d.newValue===d.oldValue?v():setTimeout(v,10)}notifyListeners(d,p){this.localCache[d]=p;const _=this.listeners[d];if(_)for(const v of Array.from(_))v(p&&JSON.parse(p))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,p,_)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:p,newValue:_}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,p){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(p)}_removeListener(d,p){this.listeners[d]&&(this.listeners[d].delete(p),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,p){var _=()=>super._set,v=this;return(0,w.Z)(function*(){yield _().call(v,d,p),v.localCache[d]=JSON.stringify(p)})()}_get(d){var p=()=>super._get,_=this;return(0,w.Z)(function*(){const v=yield p().call(_,d);return _.localCache[d]=JSON.stringify(v),v})()}_remove(d){var p=()=>super._remove,_=this;return(0,w.Z)(function*(){yield p().call(_,d),delete _.localCache[d]})()}}return f.type="LOCAL",f})(),Ho=(()=>{class f extends Bf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,p){}_removeListener(d,p){}}return f.type="SESSION",f})();let er=(()=>{class f{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const p=this.receivers.find(v=>v.isListeningto(d));if(p)return p;const _=new f(d);return this.receivers.push(_),_}isListeningto(d){return this.eventTarget===d}handleEvent(d){var p=this;return(0,w.Z)(function*(){const _=d,{eventId:v,eventType:C,data:O}=_.data,J=p.handlersMap[C];if(!J?.size)return;_.ports[0].postMessage({status:"ack",eventId:v,eventType:C});const _e=Array.from(J).map(function(){var Re=(0,w.Z)(function*(En){return En(_.origin,O)});return function(En){return Re.apply(this,arguments)}}()),be=yield function z_(f){return Promise.all(f.map(function(){var l=(0,w.Z)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(p){return{fulfilled:!1,reason:p}}});return function(d){return l.apply(this,arguments)}}()))}(_e);_.ports[0].postMessage({status:"done",eventId:v,eventType:C,response:be})})()}_subscribe(d,p){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(p)}_unsubscribe(d,p){this.handlersMap[d]&&p&&this.handlersMap[d].delete(p),(!p||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return f.receivers=[],f})();function no(f="",l=10){let d="";for(let p=0;p<l;p++)d+=Math.floor(10*Math.random());return f+d}class wi{constructor(l){this.target=l,this.handlers=new Set}removeMessageHandler(l){l.messageChannel&&(l.messageChannel.port1.removeEventListener("message",l.onMessage),l.messageChannel.port1.close()),this.handlers.delete(l)}_send(l,d,p=50){var _=this;return(0,w.Z)(function*(){const v=typeof MessageChannel<"u"?new MessageChannel:null;if(!v)throw new Error("connection_unavailable");let C,O;return new Promise((J,_e)=>{const be=no("",20);v.port1.start();const Re=setTimeout(()=>{_e(new Error("unsupported_event"))},p);O={messageChannel:v,onMessage(En){const Li=En;if(Li.data.eventId===be)switch(Li.data.status){case"ack":clearTimeout(Re),C=setTimeout(()=>{_e(new Error("timeout"))},3e3);break;case"done":clearTimeout(C),J(Li.data.response);break;default:clearTimeout(Re),clearTimeout(C),_e(new Error("invalid_response"))}}},_.handlers.add(O),v.port1.addEventListener("message",O.onMessage),_.target.postMessage({eventType:l,eventId:be,data:d},[v.port2])}).finally(()=>{O&&_.removeMessageHandler(O)})})()}}function dn(){return window}function Ju(){return typeof dn().WorkerGlobalScope<"u"&&"function"==typeof dn().importScripts}function ll(){return(ll=(0,w.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ul="firebaseLocalStorageDb",dl="firebaseLocalStorage",jf="fbase_key";class ro{constructor(l){this.request=l}toPromise(){return new Promise((l,d)=>{this.request.addEventListener("success",()=>{l(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function io(f,l){return f.transaction([dl],l?"readwrite":"readonly").objectStore(dl)}function td(){const f=indexedDB.open(ul,1);return new Promise((l,d)=>{f.addEventListener("error",()=>{d(f.error)}),f.addEventListener("upgradeneeded",()=>{const p=f.result;try{p.createObjectStore(dl,{keyPath:jf})}catch(_){d(_)}}),f.addEventListener("success",(0,w.Z)(function*(){const p=f.result;p.objectStoreNames.contains(dl)?l(p):(p.close(),yield function Fa(){const f=indexedDB.deleteDatabase(ul);return new ro(f).toPromise()}(),l(yield td()))}))})}function $f(f,l,d){return hl.apply(this,arguments)}function hl(){return(hl=(0,w.Z)(function*(f,l,d){const p=io(f,!0).put({[jf]:l,value:d});return new ro(p).toPromise()})).apply(this,arguments)}function La(){return(La=(0,w.Z)(function*(f,l){const d=io(f,!1).get(l),p=yield new ro(d).toPromise();return void 0===p?null:p.value})).apply(this,arguments)}function K_(f,l){const d=io(f,!0).delete(l);return new ro(d).toPromise()}const Va=(()=>{class f{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,w.Z)(function*(){return d.db||(d.db=yield td()),d.db})()}_withRetries(d){var p=this;return(0,w.Z)(function*(){let _=0;for(;;)try{const v=yield p._openDb();return yield d(v)}catch(v){if(_++>3)throw v;p.db&&(p.db.close(),p.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,w.Z)(function*(){return Ju()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,w.Z)(function*(){d.receiver=er._getInstance(function ed(){return Ju()?self:null}()),d.receiver._subscribe("keyChanged",function(){var p=(0,w.Z)(function*(_,v){return{keyProcessed:(yield d._poll()).includes(v.key)}});return function(_,v){return p.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var p=(0,w.Z)(function*(_,v){return["keyChanged"]});return function(_,v){return p.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,w.Z)(function*(){var p,_;if(d.activeServiceWorker=yield function q_(){return ll.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new wi(d.activeServiceWorker);const v=yield d.sender._send("ping",{},800);v&&null!==(p=v[0])&&void 0!==p&&p.fulfilled&&null!==(_=v[0])&&void 0!==_&&_.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var p=this;return(0,w.Z)(function*(){if(p.sender&&p.activeServiceWorker&&function G_(){var f;return(null===(f=navigator?.serviceWorker)||void 0===f?void 0:f.controller)||null}()===p.activeServiceWorker)try{yield p.sender._send("keyChanged",{key:d},p.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,w.Z)(function*(){try{if(!indexedDB)return!1;const d=yield td();return yield $f(d,Uf,"1"),yield K_(d,Uf),!0}catch{}return!1})()}_withPendingWrite(d){var p=this;return(0,w.Z)(function*(){p.pendingWrites++;try{yield d()}finally{p.pendingWrites--}})()}_set(d,p){var _=this;return(0,w.Z)(function*(){return _._withPendingWrite((0,w.Z)(function*(){return yield _._withRetries(v=>$f(v,d,p)),_.localCache[d]=p,_.notifyServiceWorker(d)}))})()}_get(d){var p=this;return(0,w.Z)(function*(){const _=yield p._withRetries(v=>function zf(f,l){return La.apply(this,arguments)}(v,d));return p.localCache[d]=_,_})()}_remove(d){var p=this;return(0,w.Z)(function*(){return p._withPendingWrite((0,w.Z)(function*(){return yield p._withRetries(_=>K_(_,d)),delete p.localCache[d],p.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,w.Z)(function*(){const p=yield d._withRetries(C=>{const O=io(C,!1).getAll();return new ro(O).toPromise()});if(!p)return[];if(0!==d.pendingWrites)return[];const _=[],v=new Set;for(const{fbase_key:C,value:O}of p)v.add(C),JSON.stringify(d.localCache[C])!==JSON.stringify(O)&&(d.notifyListeners(C,O),_.push(C));for(const C of Object.keys(d.localCache))d.localCache[C]&&!v.has(C)&&(d.notifyListeners(C,null),_.push(C));return _})()}notifyListeners(d,p){this.localCache[d]=p;const _=this.listeners[d];if(_)for(const v of Array.from(_))v(p)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,w.Z)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,p){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(p)}_removeListener(d,p){this.listeners[d]&&(this.listeners[d].delete(p),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return f.type="LOCAL",f})(),fl=1e12;class db{constructor(l){this.auth=l,this.counter=fl,this._widgets=new Map}render(l,d){const p=this.counter;return this._widgets.set(p,new hb(l,this.auth.name,d||{})),this.counter++,p}reset(l){var d;const p=l||fl;null===(d=this._widgets.get(p))||void 0===d||d.delete(),this._widgets.delete(p)}getResponse(l){var d;return(null===(d=this._widgets.get(l||fl))||void 0===d?void 0:d.getResponse())||""}execute(l){var d=this;return(0,w.Z)(function*(){var p;return null===(p=d._widgets.get(l||fl))||void 0===p||p.execute(),""})()}}class hb{constructor(l,d,p){this.params=p,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const _="string"==typeof l?document.getElementById(l):l;ee(_,"argument-error",{appName:d}),this.container=_,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function fb(f){const l=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<f;p++)l.push(d.charAt(Math.floor(62*Math.random())));return l.join("")}(50);const{callback:l,"expired-callback":d}=this.params;if(l)try{l(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const nd=Yw("rcb"),pb=new Yi(3e4,6e4);class gb{constructor(){var l;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(l=dn().grecaptcha)||void 0===l||!l.render)}load(l,d=""){return ee(function CP(f){return f.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(f)}(d),l,"argument-error"),this.shouldResolveImmediately(d)&&wr(dn().grecaptcha)?Promise.resolve(dn().grecaptcha):new Promise((p,_)=>{const v=dn().setTimeout(()=>{_(Ht(l,"network-request-failed"))},pb.get());dn()[nd]=()=>{dn().clearTimeout(v),delete dn()[nd];const O=dn().grecaptcha;if(!O||!wr(O))return void _(Ht(l,"internal-error"));const J=O.render;O.render=(_e,be)=>{const Re=J(_e,be);return this.counter++,Re},this.hostLanguage=d,p(O)},y_(`https://www.google.com/recaptcha/api.js??${(0,G.xO)({onload:nd,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(v),_(Ht(l,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(l){var d;return!(null===(d=dn().grecaptcha)||void 0===d||!d.render)&&(l===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class mb{load(l){return(0,w.Z)(function*(){return new db(l)})()}clearedOneInstance(){}}const jr="recaptcha",ey={theme:"light",type:"image"};class _b{constructor(l,d,p=Object.assign({},ey)){this.parameters=p,this.type=jr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=tn(l),this.isInvisible="invisible"===this.parameters.size,ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const _="string"==typeof d?document.getElementById(d):d;ee(_,this.auth,"argument-error"),this.container=_,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new mb:new gb,this.validateStartingState()}verify(){var l=this;return(0,w.Z)(function*(){l.assertNotDestroyed();const d=yield l.render(),p=l.getAssertedRecaptcha();return p.getResponse(d)||new Promise(v=>{const C=O=>{O&&(l.tokenChangeListeners.delete(C),v(O))};l.tokenChangeListeners.add(C),l.isInvisible&&p.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(l){return Promise.reject(l)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(l=>{throw this.renderPromise=null,l})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(l=>{this.container.removeChild(l)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(l){return d=>{if(this.tokenChangeListeners.forEach(p=>p(d)),"function"==typeof l)l(d);else if("string"==typeof l){const p=dn()[l];"function"==typeof p&&p(d)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var l=this;return(0,w.Z)(function*(){if(yield l.init(),!l.widgetId){let d=l.container;if(!l.isInvisible){const p=document.createElement("div");d.appendChild(p),d=p}l.widgetId=l.getAssertedRecaptcha().render(d,l.parameters)}return l.widgetId})()}init(){var l=this;return(0,w.Z)(function*(){ee(Zi()&&!Ju(),l.auth,"internal-error"),yield function yb(){let f=null;return new Promise(l=>{"complete"!==document.readyState?(f=()=>l(),window.addEventListener("load",f)):l()}).catch(l=>{throw f&&window.removeEventListener("load",f),l})}(),l.recaptcha=yield l._recaptchaLoader.load(l.auth,l.auth.languageCode||void 0);const d=yield function $c(f){return bs.apply(this,arguments)}(l.auth);ee(d,l.auth,"internal-error"),l.parameters.sitekey=d})()}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class rd{constructor(l,d){this.verificationId=l,this.onConfirmation=d}confirm(l){const d=le._fromVerification(this.verificationId,l);return this.onConfirmation(d)}}function qf(){return(qf=(0,w.Z)(function*(f,l,d){const p=tn(f),_=yield pl(p,l,(0,G.m9)(d));return new rd(_,v=>Gu(p,v))})).apply(this,arguments)}function Wf(){return(Wf=(0,w.Z)(function*(f,l,d){const p=(0,G.m9)(f);yield Ur(!1,p,"phone");const _=yield pl(p.auth,l,(0,G.m9)(d));return new rd(_,v=>O_(p,v))})).apply(this,arguments)}function id(){return(id=(0,w.Z)(function*(f,l,d){const p=(0,G.m9)(f),_=yield pl(p.auth,l,(0,G.m9)(d));return new rd(_,v=>N_(p,v))})).apply(this,arguments)}function pl(f,l,d){return Ot.apply(this,arguments)}function Ot(){return Ot=(0,w.Z)(function*(f,l,d){var p;const _=yield d.verify();try{let v;if(ee("string"==typeof _,f,"argument-error"),ee(d.type===jr,f,"argument-error"),v="string"==typeof l?{phoneNumber:l}:l,"session"in v){const C=v.session;if("phoneNumber"in v)return ee("enroll"===C.type,f,"internal-error"),(yield function mP(f,l){return H(f,"POST","/v2/accounts/mfaEnrollment:start",ie(f,l))}(f,{idToken:C.credential,phoneEnrollmentInfo:{phoneNumber:v.phoneNumber,recaptchaToken:_}})).phoneSessionInfo.sessionInfo;{ee("signin"===C.type,f,"internal-error");const O=(null===(p=v.multiFactorHint)||void 0===p?void 0:p.uid)||v.multiFactorUid;return ee(O,f,"missing-multi-factor-info"),(yield function Hf(f,l){return H(f,"POST","/v2/accounts/mfaSignIn:start",ie(f,l))}(f,{mfaPendingCredential:C.credential,mfaEnrollmentId:O,phoneSignInInfo:{recaptchaToken:_}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:C}=yield function rb(f,l){return wf.apply(this,arguments)}(f,{phoneNumber:v.phoneNumber,recaptchaToken:_});return C}}finally{d._reset()}}),Ot.apply(this,arguments)}function Ua(){return(Ua=(0,w.Z)(function*(f,l){yield Af((0,G.m9)(f),l)})).apply(this,arguments)}let jn=(()=>{class f{constructor(d){this.providerId=f.PROVIDER_ID,this.auth=tn(d)}verifyPhoneNumber(d,p){return pl(this.auth,d,(0,G.m9)(p))}static credential(d,p){return le._fromVerification(d,p)}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:p,temporaryProof:_}=d;return p&&_?le._fromTokenResponse(p,_):null}}return f.PROVIDER_ID="phone",f.PHONE_SIGN_IN_METHOD="phone",f})();function qo(f,l){return l?nt(l):(ee(f._popupRedirectResolver,f,"argument-error"),f._popupRedirectResolver)}class sd extends Ts{constructor(l){super("custom","custom"),this.params=l}_getIdTokenResponse(l){return ii(l,this._buildIdpRequest())}_linkToIdToken(l,d){return ii(l,this._buildIdpRequest(d))}_getReauthenticationResolver(l){return ii(l,this._buildIdpRequest())}_buildIdpRequest(l){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return l&&(d.idToken=l),d}}function Ba(f){return x_(f.auth,new sd(f),f.bypassAuthState)}function li(f){const{auth:l,user:d}=f;return ee(d,l,"internal-error"),Pf(d,new sd(f),f.bypassAuthState)}function vb(f){return Zf.apply(this,arguments)}function Zf(){return(Zf=(0,w.Z)(function*(f){const{auth:l,user:d}=f;return ee(d,l,"internal-error"),Af(d,new sd(f),f.bypassAuthState)})).apply(this,arguments)}class ny{constructor(l,d,p,_,v=!1){this.auth=l,this.resolver=p,this.user=_,this.bypassAuthState=v,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var l=this;return new Promise(function(){var d=(0,w.Z)(function*(p,_){l.pendingPromise={resolve:p,reject:_};try{l.eventManager=yield l.resolver._initialize(l.auth),yield l.onExecution(),l.eventManager.registerConsumer(l)}catch(v){l.reject(v)}});return function(p,_){return d.apply(this,arguments)}}())}onAuthEvent(l){var d=this;return(0,w.Z)(function*(){const{urlResponse:p,sessionId:_,postBody:v,tenantId:C,error:O,type:J}=l;if(O)return void d.reject(O);const _e={auth:d.auth,requestUri:p,sessionId:_,tenantId:C||void 0,postBody:v||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(J)(_e))}catch(be){d.reject(be)}})()}onError(l){this.reject(l)}getIdpTask(l){switch(l){case"signInViaPopup":case"signInViaRedirect":return Ba;case"linkViaPopup":case"linkViaRedirect":return vb;case"reauthViaPopup":case"reauthViaRedirect":return li;default:St(this.auth,"internal-error")}}resolve(l){en(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(l),this.unregisterAndCleanUp()}reject(l){en(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(l),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const so=new Yi(2e3,1e4);function Qf(){return(Qf=(0,w.Z)(function*(f,l,d){const p=tn(f);tt(f,l,Ss);const _=qo(p,d);return new Ve(p,"signInViaPopup",l,_).executeNotNull()})).apply(this,arguments)}function od(){return(od=(0,w.Z)(function*(f,l,d){const p=(0,G.m9)(f);tt(p.auth,l,Ss);const _=qo(p.auth,d);return new Ve(p.auth,"reauthViaPopup",l,_,p).executeNotNull()})).apply(this,arguments)}function Yf(){return(Yf=(0,w.Z)(function*(f,l,d){const p=(0,G.m9)(f);tt(p.auth,l,Ss);const _=qo(p.auth,d);return new Ve(p.auth,"linkViaPopup",l,_,p).executeNotNull()})).apply(this,arguments)}let Ve=(()=>{class f extends ny{constructor(d,p,_,v,C){super(d,p,v,C),this.provider=_,this.authWindow=null,this.pollId=null,f.currentPopupAction&&f.currentPopupAction.cancel(),f.currentPopupAction=this}executeNotNull(){var d=this;return(0,w.Z)(function*(){const p=yield d.execute();return ee(p,d.auth,"internal-error"),p})()}onExecution(){var d=this;return(0,w.Z)(function*(){en(1===d.filter.length,"Popup operations only handle one event");const p=no();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],p),d.authWindow.associatedEvent=p,d.resolver._originValidation(d.auth).catch(_=>{d.reject(_)}),d.resolver._isIframeWebStorageSupported(d.auth,_=>{_||d.reject(Ht(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(Ht(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,f.currentPopupAction=null}pollUserCancellation(){const d=()=>{var p,_;this.pollId=null!==(_=null===(p=this.authWindow)||void 0===p?void 0:p.window)&&void 0!==_&&_.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ht(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,so.get())};d()}}return f.currentPopupAction=null,f})();const oy="pendingRedirect",ad=new Map;class Eb extends ny{constructor(l,d,p=!1){super(l,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,p),this.eventId=null}execute(){var l=()=>super.execute,d=this;return(0,w.Z)(function*(){let p=ad.get(d.auth._key());if(!p){try{const v=(yield function Ib(f,l){return Xf.apply(this,arguments)}(d.resolver,d.auth))?yield l().call(d):null;p=()=>Promise.resolve(v)}catch(_){p=()=>Promise.reject(_)}ad.set(d.auth._key(),p)}return d.bypassAuthState||ad.set(d.auth._key(),()=>Promise.resolve(null)),p()})()}onAuthEvent(l){var d=()=>super.onAuthEvent,p=this;return(0,w.Z)(function*(){if("signInViaRedirect"===l.type)return d().call(p,l);if("unknown"!==l.type){if(l.eventId){const _=yield p.auth._redirectUserForId(l.eventId);if(_)return p.user=_,d().call(p,l);p.resolve(null)}}else p.resolve(null)})()}onExecution(){return(0,w.Z)(function*(){})()}cleanUp(){}}function Xf(){return(Xf=(0,w.Z)(function*(f,l){const d=cy(l),p=ay(f);if(!(yield p._isAvailable()))return!1;const _="true"===(yield p._get(d));return yield p._remove(d),_})).apply(this,arguments)}function cd(f,l){return oo.apply(this,arguments)}function oo(){return(oo=(0,w.Z)(function*(f,l){return ay(f)._set(cy(l),"true")})).apply(this,arguments)}function Jf(f,l){ad.set(f._key(),l)}function ay(f){return nt(f._redirectPersistence)}function cy(f){return Un(oy,f.config.apiKey,f.name)}function bb(f,l,d){return function se(f,l,d){return mt.apply(this,arguments)}(f,l,d)}function mt(){return(mt=(0,w.Z)(function*(f,l,d){const p=tn(f);tt(f,l,Ss),yield p._initializationPromise;const _=qo(p,d);return yield cd(_,p),_._openRedirect(p,l,"signInViaRedirect")})).apply(this,arguments)}function tr(f,l,d){return function nr(f,l,d){return On.apply(this,arguments)}(f,l,d)}function On(){return(On=(0,w.Z)(function*(f,l,d){const p=(0,G.m9)(f);tt(p.auth,l,Ss),yield p.auth._initializationPromise;const _=qo(p.auth,d);yield cd(_,p.auth);const v=yield tp(p);return _._openRedirect(p.auth,l,"reauthViaRedirect",v)})).apply(this,arguments)}function ly(f,l,d){return function gl(f,l,d){return bi.apply(this,arguments)}(f,l,d)}function bi(){return(bi=(0,w.Z)(function*(f,l,d){const p=(0,G.m9)(f);tt(p.auth,l,Ss),yield p.auth._initializationPromise;const _=qo(p.auth,d);yield Ur(!1,p,l.providerId),yield cd(_,p.auth);const v=yield tp(p);return _._openRedirect(p.auth,l,"linkViaRedirect",v)})).apply(this,arguments)}function ml(){return(ml=(0,w.Z)(function*(f,l){return yield tn(f)._initializationPromise,ld(f,l,!1)})).apply(this,arguments)}function ld(f,l){return uy.apply(this,arguments)}function uy(){return(uy=(0,w.Z)(function*(f,l,d=!1){const p=tn(f),_=qo(p,l),C=yield new Eb(p,_,d).execute();return C&&!d&&(delete C.user._redirectEventId,yield p._persistUserIfCurrent(C.user),yield p._setRedirectUser(null,l)),C})).apply(this,arguments)}function tp(f){return rr.apply(this,arguments)}function rr(){return(rr=(0,w.Z)(function*(f){const l=no(`${f.uid}:::`);return f._redirectEventId=l,yield f.auth._setRedirectUser(f),yield f.auth._persistUserIfCurrent(f),l})).apply(this,arguments)}class np{constructor(l){this.auth=l,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(l){this.consumers.add(l),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,l)&&(this.sendToConsumer(this.queuedRedirectEvent,l),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(l){this.consumers.delete(l)}onEvent(l){if(this.hasEventBeenHandled(l))return!1;let d=!1;return this.consumers.forEach(p=>{this.isEventForConsumer(l,p)&&(d=!0,this.sendToConsumer(l,p),this.saveEventToCache(l))}),this.hasHandledPotentialRedirect||!function Cb(f){switch(f.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ls(f);default:return!1}}(l)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=l,d=!0)),d}sendToConsumer(l,d){var p;if(l.error&&!ls(l)){const _=(null===(p=l.error.code)||void 0===p?void 0:p.split("auth/")[1])||"internal-error";d.onError(Ht(this.auth,_))}else d.onAuthEvent(l)}isEventForConsumer(l,d){const p=null===d.eventId||!!l.eventId&&l.eventId===d.eventId;return d.filter.includes(l.type)&&p}hasEventBeenHandled(l){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Go(l))}saveEventToCache(l){this.cachedEventUids.add(Go(l)),this.lastProcessedEventTime=Date.now()}}function Go(f){return[f.type,f.eventId,f.sessionId,f.tenantId].filter(l=>l).join("-")}function ls({type:f,error:l}){return"unknown"===f&&"auth/no-auth-event"===l?.code}function rp(f){return ip.apply(this,arguments)}function ip(){return(ip=(0,w.Z)(function*(f,l={}){return H(f,"GET","/v1/projects",l)})).apply(this,arguments)}const Tb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sp=/^https?/;function ud(){return(ud=(0,w.Z)(function*(f){if(f.config.emulator)return;const{authorizedDomains:l}=yield rp(f);for(const d of l)try{if(ap(d))return}catch{}St(f,"unauthorized-domain")})).apply(this,arguments)}function ap(f){const l=Dn(),{protocol:d,hostname:p}=new URL(l);if(f.startsWith("chrome-extension://")){const C=new URL(f);return""===C.hostname&&""===p?"chrome-extension:"===d&&f.replace("chrome-extension://","")===l.replace("chrome-extension://",""):"chrome-extension:"===d&&C.hostname===p}if(!sp.test(d))return!1;if(Tb.test(f))return p===f;const _=f.replace(/\./g,"\\.");return new RegExp("^(.+\\."+_+"|"+_+")$","i").test(p)}const Db=new Yi(3e4,6e4);function cp(){const f=dn().___jsl;if(f?.H)for(const l of Object.keys(f.H))if(f.H[l].r=f.H[l].r||[],f.H[l].L=f.H[l].L||[],f.H[l].r=[...f.H[l].L],f.CP)for(let d=0;d<f.CP.length;d++)f.CP[d]=null}let _l=null;const hy=new Yi(5e3,15e3),fy="__/auth/iframe",up="emulator/auth/iframe",Sb={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ab=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Cr(f){const l=f.config;ee(l.authDomain,f,"auth-domain-config-required");const d=l.emulator?j(l,up):`https://${f.config.authDomain}/${fy}`,p={apiKey:l.apiKey,appName:f.name,v:Be.SDK_VERSION},_=Ab.get(f.config.apiHost);_&&(p.eid=_);const v=f._getFrameworks();return v.length&&(p.fw=v.join(",")),`${d}?${(0,G.xO)(p).slice(1)}`}function Qt(){return Qt=(0,w.Z)(function*(f){const l=yield function dy(f){return _l=_l||function lp(f){return new Promise((l,d)=>{var p,_,v;function C(){cp(),gapi.load("gapi.iframes",{callback:()=>{l(gapi.iframes.getContext())},ontimeout:()=>{cp(),d(Ht(f,"network-request-failed"))},timeout:Db.get()})}if(null!==(_=null===(p=dn().gapi)||void 0===p?void 0:p.iframes)&&void 0!==_&&_.Iframe)l(gapi.iframes.getContext());else{if(null===(v=dn().gapi)||void 0===v||!v.load){const O=Yw("iframefcb");return dn()[O]=()=>{gapi.load?C():d(Ht(f,"network-request-failed"))},y_(`https://apis.google.com/js/api.js?onload=${O}`).catch(J=>d(J))}C()}}).catch(l=>{throw _l=null,l})}(f),_l}(f),d=dn().gapi;return ee(d,f,"internal-error"),l.open({where:document.body,url:Cr(f),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Sb,dontclear:!0},p=>new Promise(function(){var _=(0,w.Z)(function*(v,C){yield p.restyle({setHideOnLeave:!1});const O=Ht(f,"network-request-failed"),J=dn().setTimeout(()=>{C(O)},hy.get());function _e(){dn().clearTimeout(J),v(p)}p.ping(_e).then(_e,()=>{C(O)})});return function(v,C){return _.apply(this,arguments)}}()))}),Qt.apply(this,arguments)}const dp={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class hp{constructor(l){this.window=l,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Pb="__/auth/handler",hd="emulator/auth/handler",fd=encodeURIComponent("fac");function ja(f,l,d,p,_,v){return yl.apply(this,arguments)}function yl(){return(yl=(0,w.Z)(function*(f,l,d,p,_,v){ee(f.config.authDomain,f,"auth-domain-config-required"),ee(f.config.apiKey,f,"invalid-api-key");const C={apiKey:f.config.apiKey,appName:f.name,authType:d,redirectUrl:p,v:Be.SDK_VERSION,eventId:_};if(l instanceof Ss){l.setDefaultLanguage(f.languageCode),C.providerId=l.providerId||"",(0,G.xb)(l.getCustomParameters())||(C.customParameters=JSON.stringify(l.getCustomParameters()));for(const[be,Re]of Object.entries(v||{}))C[be]=Re}if(l instanceof Vr){const be=l.getScopes().filter(Re=>""!==Re);be.length>0&&(C.scopes=be.join(","))}f.tenantId&&(C.tid=f.tenantId);const O=C;for(const be of Object.keys(O))void 0===O[be]&&delete O[be];const J=yield f._getAppCheckToken(),_e=J?`#${fd}=${encodeURIComponent(J)}`:"";return`${function my({config:f}){return f.emulator?j(f,hd):`https://${f.authDomain}/${Pb}`}(f)}?${(0,G.xO)(O).slice(1)}${_e}`})).apply(this,arguments)}const pd="webStorageSupport",Ko=class xb{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ho,this._completeRedirectFn=ld,this._overrideRedirectResult=Jf}_openPopup(l,d,p,_){var v=this;return(0,w.Z)(function*(){var C;en(null===(C=v.eventManagers[l._key()])||void 0===C?void 0:C.manager,"_initialize() not called before _openPopup()");const O=yield ja(l,d,p,Dn(),_);return function dd(f,l,d,p=500,_=600){const v=Math.max((window.screen.availHeight-_)/2,0).toString(),C=Math.max((window.screen.availWidth-p)/2,0).toString();let O="";const J=Object.assign(Object.assign({},dp),{width:p.toString(),height:_.toString(),top:v,left:C}),_e=(0,G.z$)().toLowerCase();d&&(O=Fu(_e)?"_blank":d),Vt(_e)&&(l=l||"http://localhost",J.scrollbars="yes");const be=Object.entries(J).reduce((En,[Li,Dd])=>`${En}${Li}=${Dd},`,"");if(function k(f=(0,G.z$)()){var l;return Ke(f)&&!(null===(l=window.navigator)||void 0===l||!l.standalone)}(_e)&&"_self"!==O)return function ao(f,l){const d=document.createElement("a");d.href=f,d.target=l;const p=document.createEvent("MouseEvent");p.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(p)}(l||"",O),new hp(null);const Re=window.open(l||"",O,be);ee(Re,f,"popup-blocked");try{Re.focus()}catch{}return new hp(Re)}(l,O,no())})()}_openRedirect(l,d,p,_){var v=this;return(0,w.Z)(function*(){return yield v._originValidation(l),function H_(f){dn().location.href=f}(yield ja(l,d,p,Dn(),_)),new Promise(()=>{})})()}_initialize(l){const d=l._key();if(this.eventManagers[d]){const{manager:_,promise:v}=this.eventManagers[d];return _?Promise.resolve(_):(en(v,"If manager is not set, promise should be"),v)}const p=this.initAndGetManager(l);return this.eventManagers[d]={promise:p},p.catch(()=>{delete this.eventManagers[d]}),p}initAndGetManager(l){var d=this;return(0,w.Z)(function*(){const p=yield function Wo(f){return Qt.apply(this,arguments)}(l),_=new np(l);return p.register("authEvent",v=>(ee(v?.authEvent,l,"invalid-auth-event"),{status:_.onEvent(v.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[l._key()]={manager:_},d.iframes[l._key()]=p,_})()}_isIframeWebStorageSupported(l,d){this.iframes[l._key()].send(pd,{type:pd},_=>{var v;const C=null===(v=_?.[0])||void 0===v?void 0:v[pd];void 0!==C&&d(!!C),St(l,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(l){const d=l._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function op(f){return ud.apply(this,arguments)}(l)),this.originValidationPromises[d]}get _shouldInitProactively(){return Ae()||Xi()||Ke()}};class vl{constructor(l){this.factorId=l}_process(l,d,p){switch(d.type){case"enroll":return this._finalizeEnroll(l,d.credential,p);case"signin":return this._finalizeSignIn(l,d.credential);default:return cn("unexpected MultiFactorSessionType")}}}class fp extends vl{constructor(l){super("phone"),this.credential=l}static _fromCredential(l){return new fp(l)}_finalizeEnroll(l,d,p){return function _P(f,l){return H(f,"POST","/v2/accounts/mfaEnrollment:finalize",ie(f,l))}(l,{idToken:d,displayName:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(l,d){return function Y_(f,l){return H(f,"POST","/v2/accounts/mfaSignIn:finalize",ie(f,l))}(l,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let TP=(()=>{class f{constructor(){}static assertion(d){return fp._fromCredential(d)}}return f.FACTOR_ID="phone",f})();var Ob="@firebase/auth";class pp{constructor(l){this.auth=l,this.internalListeners=new Map}getUid(){var l;return this.assertAuthConfigured(),(null===(l=this.auth.currentUser)||void 0===l?void 0:l.uid)||null}getToken(l){var d=this;return(0,w.Z)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(l)}:null})()}addAuthTokenListener(l){if(this.assertAuthConfigured(),this.internalListeners.has(l))return;const d=this.auth.onIdTokenChanged(p=>{l(p?.stsTokenManager.accessToken||null)});this.internalListeners.set(l,d),this.updateProactiveRefresh()}removeAuthTokenListener(l){this.assertAuthConfigured();const d=this.internalListeners.get(l);d&&(this.internalListeners.delete(l),d(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function co(){return window}(0,G.Pz)("authIdTokenMaxAge"),function kb(f){(0,Be._registerComponent)(new _n.wA("auth",(l,{options:d})=>{const p=l.getProvider("app").getImmediate(),_=l.getProvider("heartbeat"),v=l.getProvider("app-check-internal"),{apiKey:C,authDomain:O}=p.options;ee(C&&!C.includes(":"),"invalid-api-key",{appName:p.name});const J={apiKey:C,authDomain:O,clientPlatform:f,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sa(f)},_e=new Qw(p,_,v,J);return function oP(f,l){const d=l?.persistence||[],p=(Array.isArray(d)?d:[d]).map(nt);l?.errorMap&&f._updateErrorMap(l.errorMap),f._initializeWithPersistence(p,l?.popupRedirectResolver)}(_e,d),_e},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((l,d,p)=>{l.getProvider("auth-internal").initialize()})),(0,Be._registerComponent)(new _n.wA("auth-internal",l=>{const d=tn(l.getProvider("auth").getImmediate());return new pp(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Be.registerVersion)(Ob,"1.5.0",function El(f){switch(f){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(f)),(0,Be.registerVersion)(Ob,"1.5.0","esm2017")}("Browser");function mp(){return mp=(0,w.Z)(function*(f,l,d){var p;const{BuildInfo:_}=co();en(l.sessionId,"AuthEvent did not contain a session ID");const v=yield function Iy(f){return yd.apply(this,arguments)}(l.sessionId),C={};return Ke()?C.ibi=_.packageName:M()?C.apn=_.packageName:St(f,"operation-not-supported-in-this-environment"),_.displayName&&(C.appDisplayName=_.displayName),C.sessionId=v,ja(f,d,l.type,void 0,null!==(p=l.eventId)&&void 0!==p?p:void 0,C)}),mp.apply(this,arguments)}function bl(){return(bl=(0,w.Z)(function*(f){const{BuildInfo:l}=co(),d={};Ke()?d.iosBundleId=l.packageName:M()?d.androidPackageName=l.packageName:St(f,"operation-not-supported-in-this-environment"),yield rp(f,d)})).apply(this,arguments)}function Cl(){return(Cl=(0,w.Z)(function*(f,l,d){const{cordova:p}=co();let _=()=>{};try{yield new Promise((v,C)=>{let O=null;function J(){var Re;v();const En=null===(Re=p.plugins.browsertab)||void 0===Re?void 0:Re.close;"function"==typeof En&&En(),"function"==typeof d?.close&&d.close()}function _e(){O||(O=window.setTimeout(()=>{C(Ht(f,"redirect-cancelled-by-user"))},2e3))}function be(){"visible"===document?.visibilityState&&_e()}l.addPassiveListener(J),document.addEventListener("resume",_e,!1),M()&&document.addEventListener("visibilitychange",be,!1),_=()=>{l.removePassiveListener(J),document.removeEventListener("resume",_e,!1),document.removeEventListener("visibilitychange",be,!1),O&&window.clearTimeout(O)}})}finally{_()}})).apply(this,arguments)}function yd(){return(yd=(0,w.Z)(function*(f){const l=function wy(f){if(en(/[0-9a-zA-Z]+/.test(f),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(f);const l=new ArrayBuffer(f.length),d=new Uint8Array(l);for(let p=0;p<f.length;p++)d[p]=f.charCodeAt(p);return d}(f),d=yield crypto.subtle.digest("SHA-256",l);return Array.from(new Uint8Array(d)).map(_=>_.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Ub extends np{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(l=>{this.resolveInialized=l})}addPassiveListener(l){this.passiveListeners.add(l)}removePassiveListener(l){this.passiveListeners.delete(l)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(l){return this.resolveInialized(),this.passiveListeners.forEach(d=>d(l)),super.onEvent(l)}initialized(){var l=this;return(0,w.Z)(function*(){yield l.initPromise})()}}function Cy(f){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,w.Z)(function*(f){const l=yield _p()._get(ir(f));return l&&(yield _p()._remove(ir(f))),l})).apply(this,arguments)}function Tl(){const f=[];for(let d=0;d<20;d++){const p=Math.floor(62*Math.random());f.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(p))}return f.join("")}function _p(){return nt(as)}function ir(f){return Un("authEvent",f.config.apiKey,f.name)}function $a(f){if(!f?.includes("?"))return{};const[l,...d]=f.split("?");return(0,G.zd)(d.join("?"))}const Id=class Dy{constructor(){this._redirectPersistence=Ho,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ld,this._overrideRedirectResult=Jf}_initialize(l){var d=this;return(0,w.Z)(function*(){const p=l._key();let _=d.eventManagers.get(p);return _||(_=new Ub(l),d.eventManagers.set(p,_),d.attachCallbackListeners(l,_)),_})()}_openPopup(l){St(l,"operation-not-supported-in-this-environment")}_openRedirect(l,d,p,_){var v=this;return(0,w.Z)(function*(){!function Vb(f){var l,d,p,_,v,C,O,J,_e,be;const Re=co();ee("function"==typeof(null===(l=Re?.universalLinks)||void 0===l?void 0:l.subscribe),f,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ee(typeof(null===(d=Re?.BuildInfo)||void 0===d?void 0:d.packageName)<"u",f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ee("function"==typeof(null===(v=null===(_=null===(p=Re?.cordova)||void 0===p?void 0:p.plugins)||void 0===_?void 0:_.browsertab)||void 0===v?void 0:v.openUrl),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee("function"==typeof(null===(J=null===(O=null===(C=Re?.cordova)||void 0===C?void 0:C.plugins)||void 0===O?void 0:O.browsertab)||void 0===J?void 0:J.isAvailable),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee("function"==typeof(null===(be=null===(_e=Re?.cordova)||void 0===_e?void 0:_e.InAppBrowser)||void 0===be?void 0:be.open),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(l);const C=yield v._initialize(l);yield C.initialized(),C.resetRedirect(),function wb(){ad.clear()}(),yield v._originValidation(l);const O=function vd(f,l,d=null){return{type:l,eventId:d,urlResponse:null,sessionId:Tl(),postBody:null,tenantId:f.tenantId,error:Ht(f,"no-auth-event")}}(l,p,_);yield function Zo(f,l){return _p()._set(ir(f),l)}(l,O);const J=yield function us(f,l,d){return mp.apply(this,arguments)}(l,O,d),_e=yield function Ey(f){const{cordova:l}=co();return new Promise(d=>{l.plugins.browsertab.isAvailable(p=>{let _=null;p?l.plugins.browsertab.openUrl(f):_=l.InAppBrowser.open(f,function dt(f=(0,G.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(f)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(f)}()?"_blank":"_system","location=yes"),d(_)})})}(J);return function _d(f,l,d){return Cl.apply(this,arguments)}(l,C,_e)})()}_isIframeWebStorageSupported(l,d){throw new Error("Method not implemented.")}_originValidation(l){const d=l._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function md(f){return bl.apply(this,arguments)}(l)),this.originValidationPromises[d]}attachCallbackListeners(l,d){const{universalLinks:p,handleOpenURL:_,BuildInfo:v}=co(),C=setTimeout((0,w.Z)(function*(){yield Cy(l),d.onEvent(Qo())}),500),O=function(){var be=(0,w.Z)(function*(Re){clearTimeout(C);const En=yield Cy(l);let Li=null;En&&Re?.url&&(Li=function Ty(f,l){var d,p;const _=function $n(f){const l=$a(f),d=l.link?decodeURIComponent(l.link):void 0,p=$a(d).link,_=l.deep_link_id?decodeURIComponent(l.deep_link_id):void 0;return $a(_).link||_||p||d||f}(l);if(_.includes("/__/auth/callback")){const v=$a(_),C=v.firebaseError?function Bb(f){try{return JSON.parse(f)}catch{return null}}(decodeURIComponent(v.firebaseError)):null,O=null===(p=null===(d=C?.code)||void 0===d?void 0:d.split("auth/"))||void 0===p?void 0:p[1],J=O?Ht(O):null;return J?{type:f.type,eventId:f.eventId,tenantId:f.tenantId,error:J,urlResponse:null,sessionId:null,postBody:null}:{type:f.type,eventId:f.eventId,tenantId:f.tenantId,sessionId:f.sessionId,urlResponse:_,postBody:null}}return null}(En,Re.url)),d.onEvent(Li||Qo())});return function(En){return be.apply(this,arguments)}}();typeof p<"u"&&"function"==typeof p.subscribe&&p.subscribe(null,O);const J=_,_e=`${v.packageName.toLowerCase()}://`;co().handleOpenURL=function(){var be=(0,w.Z)(function*(Re){if(Re.toLowerCase().startsWith(_e)&&O({url:Re}),"function"==typeof J)try{J(Re)}catch(En){console.error(En)}});return function(Re){return be.apply(this,arguments)}}()}};function Qo(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ht("no-auth-event")}}function ds(){var f;return(null===(f=self?.location)||void 0===f?void 0:f.protocol)||null}function Ay(f=(0,G.z$)()){return!("file:"!==ds()&&"ionic:"!==ds()&&"capacitor:"!==ds()||!f.toLowerCase().match(/iphone|ipad|ipod|android/))}function $b(){try{const f=self.localStorage,l=no();if(f)return f.setItem(l,"1"),f.removeItem(l),!function PP(f=(0,G.z$)()){return function RP(){return(0,G.w1)()&&11===document?.documentMode}()||function MP(f=(0,G.z$)()){return/Edge\/\d+/.test(f)}(f)}()||(0,G.hl)()}catch{return Ry()&&(0,G.hl)()}return!1}function Ry(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function lo(){return(function SP(){return"http:"===ds()||"https:"===ds()}()||(0,G.ru)()||Ay())&&!function AP(){return(0,G.b$)()||(0,G.UG)()}()&&$b()&&!Ry()}function My(){return Ay()&&typeof document<"u"}function Cn(){return(Cn=(0,w.Z)(function*(){return!!My()&&new Promise(f=>{const l=setTimeout(()=>{f(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(l),f(!0)})})})).apply(this,arguments)}const sr={LOCAL:"local",NONE:"none",SESSION:"session"},Dl=ee,ui="persistence";function wd(f){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,w.Z)(function*(f){yield f._initializationPromise;const l=Py(),d=Un(ui,f.config.apiKey,f.name);l&&l.setItem(d,f._getPersistence())})).apply(this,arguments)}function Py(){var f;try{return(null===(f=function Hb(){return typeof window<"u"?window:null}())||void 0===f?void 0:f.sessionStorage)||null}catch{return null}}const xP=ee;class uo{constructor(){this.browserResolver=nt(Ko),this.cordovaResolver=nt(Id),this.underlyingResolver=null,this._redirectPersistence=Ho,this._completeRedirectFn=ld,this._overrideRedirectResult=Jf}_initialize(l){var d=this;return(0,w.Z)(function*(){return yield d.selectUnderlyingResolver(),d.assertedUnderlyingResolver._initialize(l)})()}_openPopup(l,d,p,_){var v=this;return(0,w.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._openPopup(l,d,p,_)})()}_openRedirect(l,d,p,_){var v=this;return(0,w.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._openRedirect(l,d,p,_)})()}_isIframeWebStorageSupported(l,d){this.assertedUnderlyingResolver._isIframeWebStorageSupported(l,d)}_originValidation(l){return this.assertedUnderlyingResolver._originValidation(l)}get _shouldInitProactively(){return My()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return xP(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var l=this;return(0,w.Z)(function*(){if(l.underlyingResolver)return;const d=yield function zb(){return Cn.apply(this,arguments)}();l.underlyingResolver=d?l.cordovaResolver:l.browserResolver})()}}function qb(f){return f.unwrap()}function vp(f){return Gb(f)}function Gb(f){const{_tokenResponse:l}=f instanceof G.ZR?f.customData:f;if(!l)return null;if(!(f instanceof G.ZR)&&"temporaryProof"in l&&"phoneNumber"in l)return jn.credentialFromResult(f);const d=l.providerId;if(!d||d===ut.PASSWORD)return null;let p;switch(d){case ut.GOOGLE:p=ki;break;case ut.FACEBOOK:p=si;break;case ut.GITHUB:p=It;break;case ut.TWITTER:p=ts;break;default:const{oauthIdToken:_,oauthAccessToken:v,oauthTokenSecret:C,pendingToken:O,nonce:J}=l;return v||C||_||O?O?d.startsWith("saml.")?Ys._create(d,O):Ji._fromParams({providerId:d,signInMethod:d,pendingToken:O,idToken:_,accessToken:v}):new As(d).credential({idToken:_,accessToken:v,rawNonce:J}):null}return f instanceof G.ZR?p.credentialFromError(f):p.credentialFromResult(f)}function Tr(f,l){return l.catch(d=>{throw d instanceof G.ZR&&function Wa(f,l){var d;const p=null===(d=l.customData)||void 0===d?void 0:d._tokenResponse;if("auth/multi-factor-auth-required"===l?.code)l.resolver=new Wb(f,function gP(f,l){var d;const p=(0,G.m9)(f),_=l;return ee(l.customData.operationType,p,"argument-error"),ee(null===(d=_.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,p,"argument-error"),U_._fromError(p,_)}(f,l));else if(p){const _=Gb(l),v=l;_&&(v.credential=_,v.tenantId=p.tenantId||void 0,v.email=p.email||void 0,v.phoneNumber=p.phoneNumber||void 0)}}(f,d),d}).then(d=>{const _=d.user;return{operationType:d.operationType,credential:vp(d),additionalUserInfo:Jn(d),user:Ps.getOrCreate(_)}})}function Ep(f,l){return Ip.apply(this,arguments)}function Ip(){return(Ip=(0,w.Z)(function*(f,l){const d=yield l;return{verificationId:d.verificationId,confirm:p=>Tr(f,d.confirm(p))}})).apply(this,arguments)}class Wb{constructor(l,d){this.resolver=d,this.auth=function di(f){return f.wrapped()}(l)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(l){return Tr(qb(this.auth),this.resolver.resolveSignIn(l))}}class Ps{constructor(l){this._delegate=l,this.multiFactor=function EP(f){const l=(0,G.m9)(f);return j_.has(l)||j_.set(l,B_._fromUser(l)),j_.get(l)}(l)}static getOrCreate(l){return Ps.USER_MAP.has(l)||Ps.USER_MAP.set(l,new Ps(l)),Ps.USER_MAP.get(l)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(l){return this._delegate.getIdTokenResult(l)}getIdToken(l){return this._delegate.getIdToken(l)}linkAndRetrieveDataWithCredential(l){return this.linkWithCredential(l)}linkWithCredential(l){var d=this;return(0,w.Z)(function*(){return Tr(d.auth,O_(d._delegate,l))})()}linkWithPhoneNumber(l,d){var p=this;return(0,w.Z)(function*(){return Ep(p.auth,function Gf(f,l,d){return Wf.apply(this,arguments)}(p._delegate,l,d))})()}linkWithPopup(l){var d=this;return(0,w.Z)(function*(){return Tr(d.auth,function sy(f,l,d){return Yf.apply(this,arguments)}(d._delegate,l,uo))})()}linkWithRedirect(l){var d=this;return(0,w.Z)(function*(){return yield wd(tn(d.auth)),ly(d._delegate,l,uo)})()}reauthenticateAndRetrieveDataWithCredential(l){return this.reauthenticateWithCredential(l)}reauthenticateWithCredential(l){var d=this;return(0,w.Z)(function*(){return Tr(d.auth,N_(d._delegate,l))})()}reauthenticateWithPhoneNumber(l,d){return Ep(this.auth,function cs(f,l,d){return id.apply(this,arguments)}(this._delegate,l,d))}reauthenticateWithPopup(l){return Tr(this.auth,function iy(f,l,d){return od.apply(this,arguments)}(this._delegate,l,uo))}reauthenticateWithRedirect(l){var d=this;return(0,w.Z)(function*(){return yield wd(tn(d.auth)),tr(d._delegate,l,uo)})()}sendEmailVerification(l){return function xa(f,l){return un.apply(this,arguments)}(this._delegate,l)}unlink(l){var d=this;return(0,w.Z)(function*(){return yield function ob(f,l){return qu.apply(this,arguments)}(d._delegate,l),d})()}updateEmail(l){return function Rs(f,l){return Oa((0,G.m9)(f),l,null)}(this._delegate,l)}updatePassword(l){return function ol(f,l){return Oa((0,G.m9)(f),null,l)}(this._delegate,l)}updatePhoneNumber(l){return function Kf(f,l){return Ua.apply(this,arguments)}(this._delegate,l)}updateProfile(l){return function L_(f,l){return is.apply(this,arguments)}(this._delegate,l)}verifyBeforeUpdateEmail(l,d){return function sl(f,l,d){return eo.apply(this,arguments)}(this._delegate,l,d)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ps.USER_MAP=new WeakMap;const Al=ee;let xy=(()=>{class f{constructor(d,p){if(this.app=d,p.isInitialized())return this._delegate=p.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:_}=d.options;Al(_,"invalid-api-key",{appName:d.name}),Al(_,"invalid-api-key",{appName:d.name});const v=typeof window<"u"?uo:void 0;this._delegate=p.initialize({options:{persistence:Cd(_,d.name),popupRedirectResolver:v}}),this._delegate._updateErrorMap(Kn),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ps.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(d){this._delegate.languageCode=d}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(d){this._delegate.tenantId=d}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(d,p){!function Ut(f,l,d){const p=tn(f);ee(p._canInitEmulator,p,"emulator-config-failed"),ee(/^https?:\/\//.test(l),p,"invalid-emulator-scheme");const _=!!d?.disableWarnings,v=Wc(l),{host:C,port:O}=function eb(f){const l=Wc(f),d=/(\/\/)?([^?#/]+)/.exec(f.substr(l.length));if(!d)return{host:"",port:null};const p=d[2].split("@").pop()||"",_=/^(\[[^\]]+\])(:|$)/.exec(p);if(_){const v=_[1];return{host:v,port:vf(p.substr(v.length+1))}}{const[v,C]=p.split(":");return{host:v,port:vf(C)}}}(l);p.config.emulator={url:`${v}//${C}${null===O?"":`:${O}`}/`},p.settings.appVerificationDisabledForTesting=!0,p.emulatorConfig=Object.freeze({host:C,port:O,protocol:v.replace(":",""),options:Object.freeze({disableWarnings:_})}),_||function tb(){function f(){const l=document.createElement("p"),d=l.style;l.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",l.classList.add("firebase-emulator-warning"),document.body.appendChild(l)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",f):f())}()}(this._delegate,d,p)}applyActionCode(d){return function k_(f,l){return Ra.apply(this,arguments)}(this._delegate,d)}checkActionCode(d){return F_(this._delegate,d)}confirmPasswordReset(d,p){return function ai(f,l,d){return Zu.apply(this,arguments)}(this._delegate,d,p)}createUserWithEmailAndPassword(d,p){var _=this;return(0,w.Z)(function*(){return Tr(_._delegate,function Ye(f,l,d){return qt.apply(this,arguments)}(_._delegate,d,p))})()}fetchProvidersForEmail(d){return this.fetchSignInMethodsForEmail(d)}fetchSignInMethodsForEmail(d){return function il(f,l){return Qu.apply(this,arguments)}(this._delegate,d)}isSignInWithEmailLink(d){return function Ma(f,l){const d=Ds.parseLink(l);return"EMAIL_SIGNIN"===d?.operation}(0,d)}getRedirectResult(){var d=this;return(0,w.Z)(function*(){Al(lo(),d._delegate,"operation-not-supported-in-this-environment");const p=yield function ep(f,l){return ml.apply(this,arguments)}(d._delegate,uo);return p?Tr(d._delegate,Promise.resolve(p)):{credential:null,user:null}})()}addFrameworkForLogging(d){!function za(f,l){tn(f)._logFramework(l)}(this._delegate,d)}onAuthStateChanged(d,p,_){const{next:v,error:C,complete:O}=bd(d,p,_);return this._delegate.onAuthStateChanged(v,C,O)}onIdTokenChanged(d,p,_){const{next:v,error:C,complete:O}=bd(d,p,_);return this._delegate.onIdTokenChanged(v,C,O)}sendSignInLinkToEmail(d,p){return function rl(f,l,d){return Bn.apply(this,arguments)}(this._delegate,d,p)}sendPasswordResetEmail(d,p){return function br(f,l,d){return Js.apply(this,arguments)}(this._delegate,d,p||void 0)}setPersistence(d){var p=this;return(0,w.Z)(function*(){let _;switch(function qa(f,l){Dl(Object.values(sr).includes(l),f,"invalid-persistence-type"),(0,G.b$)()?Dl(l!==sr.SESSION,f,"unsupported-persistence-type"):(0,G.UG)()?Dl(l===sr.NONE,f,"unsupported-persistence-type"):Ry()?Dl(l===sr.NONE||l===sr.LOCAL&&(0,G.hl)(),f,"unsupported-persistence-type"):Dl(l===sr.NONE||$b(),f,"unsupported-persistence-type")}(p._delegate,d),d){case sr.SESSION:_=Ho;break;case sr.LOCAL:_=(yield nt(Va)._isAvailable())?Va:as;break;case sr.NONE:_=Zt;break;default:return St("argument-error",{appName:p._delegate.name})}return p._delegate.setPersistence(_)})()}signInAndRetrieveDataWithCredential(d){return this.signInWithCredential(d)}signInAnonymously(){return Tr(this._delegate,function P_(f){return Hu.apply(this,arguments)}(this._delegate))}signInWithCredential(d){return Tr(this._delegate,Gu(this._delegate,d))}signInWithCustomToken(d){return Tr(this._delegate,function cb(f,l){return Bt.apply(this,arguments)}(this._delegate,d))}signInWithEmailAndPassword(d,p){return Tr(this._delegate,function Fi(f,l,d){return Gu((0,G.m9)(f),Cf.credential(l,d)).catch(function(){var p=(0,w.Z)(function*(_){throw"auth/password-does-not-meet-requirements"===_.code&&gt(f),_});return function(_){return p.apply(this,arguments)}}())}(this._delegate,d,p))}signInWithEmailLink(d,p){return Tr(this._delegate,function bn(f,l,d){return ns.apply(this,arguments)}(this._delegate,d,p))}signInWithPhoneNumber(d,p){return Ep(this._delegate,function ty(f,l,d){return qf.apply(this,arguments)}(this._delegate,d,p))}signInWithPopup(d){var p=this;return(0,w.Z)(function*(){return Al(lo(),p._delegate,"operation-not-supported-in-this-environment"),Tr(p._delegate,function ry(f,l,d){return Qf.apply(this,arguments)}(p._delegate,d,uo))})()}signInWithRedirect(d){var p=this;return(0,w.Z)(function*(){return Al(lo(),p._delegate,"operation-not-supported-in-this-environment"),yield wd(p._delegate),bb(p._delegate,d,uo)})()}updateCurrentUser(d){return this._delegate.updateCurrentUser(d)}verifyPasswordResetCode(d){return function vn(f,l){return Ee.apply(this,arguments)}(this._delegate,d)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return f.Persistence=sr,f})();function bd(f,l,d){let p=f;"function"!=typeof f&&({next:p,error:l,complete:d}=f);const _=p;return{next:C=>_(C&&Ps.getOrCreate(C)),error:l,complete:d}}function Cd(f,l){const d=function Sl(f,l){const d=Py();if(!d)return[];const p=Un(ui,f,l);switch(d.getItem(p)){case sr.NONE:return[Zt];case sr.LOCAL:return[Va,Ho];case sr.SESSION:return[Ho];default:return[]}}(f,l);if(typeof self<"u"&&!d.includes(Va)&&d.push(Va),typeof window<"u")for(const p of[as,Ho])d.includes(p)||d.push(p);return d.includes(Zt)||d.push(Zt),d}class Rl{constructor(){this.providerId="phone",this._delegate=new jn(qb(Ue.Z.auth()))}static credential(l,d){return jn.credential(l,d)}verifyPhoneNumber(l,d){return this._delegate.verifyPhoneNumber(l,d)}unwrap(){return this._delegate}}Rl.PHONE_SIGN_IN_METHOD=jn.PHONE_SIGN_IN_METHOD,Rl.PROVIDER_ID=jn.PROVIDER_ID;const xs=ee;class Kb{constructor(l,d,p=Ue.Z.app()){var _;xs(null===(_=p.options)||void 0===_?void 0:_.apiKey,"invalid-api-key",{appName:p.name}),this._delegate=new _b(p.auth(),l,d),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Zb(f){f.INTERNAL.registerComponent(new _n.wA("auth-compat",l=>{const d=l.getProvider("app-compat").getImmediate(),p=l.getProvider("auth");return new xy(d,p)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Cf,FacebookAuthProvider:si,GithubAuthProvider:It,GoogleAuthProvider:ki,OAuthProvider:As,SAMLAuthProvider:tl,PhoneAuthProvider:Rl,PhoneMultiFactorGenerator:TP,RecaptchaVerifier:Kb,TwitterAuthProvider:ts,Auth:xy,AuthCredential:Ts,Error:G.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),f.registerVersion("@firebase/auth-compat","0.5.0")}(Ue.Z)},861:(ws,Gn,Qe)=>{function w(G,Be,at,an,_n,Wn,ut){try{var ne=G[Wn](ut),ue=ne.value}catch(Te){return void at(Te)}ne.done?Be(ue):Promise.resolve(ue).then(an,_n)}function Ue(G){return function(){var Be=this,at=arguments;return new Promise(function(an,_n){var Wn=G.apply(Be,at);function ut(ue){w(Wn,an,_n,ut,ne,"next",ue)}function ne(ue){w(Wn,an,_n,ut,ne,"throw",ue)}ut(void 0)})}}Qe.d(Gn,{Z:()=>Ue})},582:(ws,Gn,Qe)=>{function Be(j,q){var V={};for(var X in j)Object.prototype.hasOwnProperty.call(j,X)&&q.indexOf(X)<0&&(V[X]=j[X]);if(null!=j&&"function"==typeof Object.getOwnPropertySymbols){var ie=0;for(X=Object.getOwnPropertySymbols(j);ie<X.length;ie++)q.indexOf(X[ie])<0&&Object.prototype.propertyIsEnumerable.call(j,X[ie])&&(V[X[ie]]=j[X[ie]])}return V}function Te(j,q,V,X){return new(V||(V=Promise))(function(H,fe){function pt(vt){try{Me(X.next(vt))}catch(ln){fe(ln)}}function ve(vt){try{Me(X.throw(vt))}catch(ln){fe(ln)}}function Me(vt){vt.done?H(vt.value):function ie(H){return H instanceof V?H:new V(function(fe){fe(H)})}(vt.value).then(pt,ve)}Me((X=X.apply(j,q||[])).next())})}function Jt(j){return this instanceof Jt?(this.v=j,this):new Jt(j)}function St(j,q,V){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie,X=V.apply(j,q||[]),H=[];return ie={},fe("next"),fe("throw"),fe("return"),ie[Symbol.asyncIterator]=function(){return this},ie;function fe(Wt){X[Wt]&&(ie[Wt]=function(ur){return new Promise(function(Vn,wr){H.push([Wt,ur,Vn,wr])>1||pt(Wt,ur)})})}function pt(Wt,ur){try{!function ve(Wt){Wt.value instanceof Jt?Promise.resolve(Wt.value.v).then(Me,vt):ln(H[0][2],Wt)}(X[Wt](ur))}catch(Vn){ln(H[0][3],Vn)}}function Me(Wt){pt("next",Wt)}function vt(Wt){pt("throw",Wt)}function ln(Wt,ur){Wt(ur),H.shift(),H.length&&pt(H[0][0],H[0][1])}}function Or(j){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var V,q=j[Symbol.asyncIterator];return q?q.call(j):(j=function Dt(j){var q="function"==typeof Symbol&&Symbol.iterator,V=q&&j[q],X=0;if(V)return V.call(j);if(j&&"number"==typeof j.length)return{next:function(){return j&&X>=j.length&&(j=void 0),{value:j&&j[X++],done:!j}}};throw new TypeError(q?"Object is not iterable.":"Symbol.iterator is not defined.")}(j),V={},X("next"),X("throw"),X("return"),V[Symbol.asyncIterator]=function(){return this},V);function X(H){V[H]=j[H]&&function(fe){return new Promise(function(pt,ve){!function ie(H,fe,pt,ve){Promise.resolve(ve).then(function(Me){H({value:Me,done:pt})},fe)}(pt,ve,(fe=j[H](fe)).done,fe.value)})}}}Qe.d(Gn,{FC:()=>St,KL:()=>Or,_T:()=>Be,mG:()=>Te,qq:()=>Jt}),"function"==typeof SuppressedError&&SuppressedError}},ws=>{ws(ws.s=411)}]);